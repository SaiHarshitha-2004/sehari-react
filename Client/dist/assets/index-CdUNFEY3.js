function _z(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var vz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function au(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var dk={exports:{}},zx={},fk={exports:{}},cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0=Symbol.for("react.element"),xz=Symbol.for("react.portal"),bz=Symbol.for("react.fragment"),wz=Symbol.for("react.strict_mode"),Sz=Symbol.for("react.profiler"),Ez=Symbol.for("react.provider"),Cz=Symbol.for("react.context"),Iz=Symbol.for("react.forward_ref"),Tz=Symbol.for("react.suspense"),Pz=Symbol.for("react.memo"),Lz=Symbol.for("react.lazy"),iP=Symbol.iterator;function Mz(e){return e===null||typeof e!="object"?null:(e=iP&&e[iP]||e["@@iterator"],typeof e=="function"?e:null)}var mk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gk=Object.assign,yk={};function Kf(e,t,n){this.props=e,this.context=t,this.refs=yk,this.updater=n||mk}Kf.prototype.isReactComponent={};Kf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _k(){}_k.prototype=Kf.prototype;function iE(e,t,n){this.props=e,this.context=t,this.refs=yk,this.updater=n||mk}var oE=iE.prototype=new _k;oE.constructor=iE;gk(oE,Kf.prototype);oE.isPureReactComponent=!0;var oP=Array.isArray,vk=Object.prototype.hasOwnProperty,sE={current:null},xk={key:!0,ref:!0,__self:!0,__source:!0};function bk(e,t,n){var r,i={},l=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(l=""+t.key),t)vk.call(t,r)&&!xk.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var y=Array(u),w=0;w<u;w++)y[w]=arguments[w+2];i.children=y}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:e0,type:e,key:l,ref:h,props:i,_owner:sE.current}}function Az(e,t){return{$$typeof:e0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function aE(e){return typeof e=="object"&&e!==null&&e.$$typeof===e0}function kz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var sP=/\/+/g;function gw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kz(""+e.key):t.toString(36)}function dv(e,t,n,r,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case e0:case xz:h=!0}}if(h)return h=e,i=i(h),e=r===""?"."+gw(h,0):r,oP(i)?(n="",e!=null&&(n=e.replace(sP,"$&/")+"/"),dv(i,t,n,"",function(w){return w})):i!=null&&(aE(i)&&(i=Az(i,n+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(sP,"$&/")+"/")+e)),t.push(i)),1;if(h=0,r=r===""?".":r+":",oP(e))for(var u=0;u<e.length;u++){l=e[u];var y=r+gw(l,u);h+=dv(l,t,n,y,i)}else if(y=Mz(e),typeof y=="function")for(e=y.call(e),u=0;!(l=e.next()).done;)l=l.value,y=r+gw(l,u++),h+=dv(l,t,n,y,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function k_(e,t,n){if(e==null)return e;var r=[],i=0;return dv(e,r,"","",function(l){return t.call(n,l,i++)}),r}function Nz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var is={current:null},fv={transition:null},Rz={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:fv,ReactCurrentOwner:sE};function wk(){throw Error("act(...) is not supported in production builds of React.")}cn.Children={map:k_,forEach:function(e,t,n){k_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k_(e,function(){t++}),t},toArray:function(e){return k_(e,function(t){return t})||[]},only:function(e){if(!aE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cn.Component=Kf;cn.Fragment=bz;cn.Profiler=Sz;cn.PureComponent=iE;cn.StrictMode=wz;cn.Suspense=Tz;cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rz;cn.act=wk;cn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gk({},e.props),i=e.key,l=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,h=sE.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(y in t)vk.call(t,y)&&!xk.hasOwnProperty(y)&&(r[y]=t[y]===void 0&&u!==void 0?u[y]:t[y])}var y=arguments.length-2;if(y===1)r.children=n;else if(1<y){u=Array(y);for(var w=0;w<y;w++)u[w]=arguments[w+2];r.children=u}return{$$typeof:e0,type:e.type,key:i,ref:l,props:r,_owner:h}};cn.createContext=function(e){return e={$$typeof:Cz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ez,_context:e},e.Consumer=e};cn.createElement=bk;cn.createFactory=function(e){var t=bk.bind(null,e);return t.type=e,t};cn.createRef=function(){return{current:null}};cn.forwardRef=function(e){return{$$typeof:Iz,render:e}};cn.isValidElement=aE;cn.lazy=function(e){return{$$typeof:Lz,_payload:{_status:-1,_result:e},_init:Nz}};cn.memo=function(e,t){return{$$typeof:Pz,type:e,compare:t===void 0?null:t}};cn.startTransition=function(e){var t=fv.transition;fv.transition={};try{e()}finally{fv.transition=t}};cn.unstable_act=wk;cn.useCallback=function(e,t){return is.current.useCallback(e,t)};cn.useContext=function(e){return is.current.useContext(e)};cn.useDebugValue=function(){};cn.useDeferredValue=function(e){return is.current.useDeferredValue(e)};cn.useEffect=function(e,t){return is.current.useEffect(e,t)};cn.useId=function(){return is.current.useId()};cn.useImperativeHandle=function(e,t,n){return is.current.useImperativeHandle(e,t,n)};cn.useInsertionEffect=function(e,t){return is.current.useInsertionEffect(e,t)};cn.useLayoutEffect=function(e,t){return is.current.useLayoutEffect(e,t)};cn.useMemo=function(e,t){return is.current.useMemo(e,t)};cn.useReducer=function(e,t,n){return is.current.useReducer(e,t,n)};cn.useRef=function(e){return is.current.useRef(e)};cn.useState=function(e){return is.current.useState(e)};cn.useSyncExternalStore=function(e,t,n){return is.current.useSyncExternalStore(e,t,n)};cn.useTransition=function(){return is.current.useTransition()};cn.version="18.3.1";fk.exports=cn;var be=fk.exports;const Du=rE(be),Fv=_z({__proto__:null,default:Du},[be]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dz=be,Oz=Symbol.for("react.element"),zz=Symbol.for("react.fragment"),Fz=Object.prototype.hasOwnProperty,Bz=Dz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jz={key:!0,ref:!0,__self:!0,__source:!0};function Sk(e,t,n){var r,i={},l=null,h=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)Fz.call(t,r)&&!jz.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Oz,type:e,key:l,ref:h,props:i,_owner:Bz.current}}zx.Fragment=zz;zx.jsx=Sk;zx.jsxs=Sk;dk.exports=zx;var j=dk.exports,Ek={exports:{}},Js={},Ck={exports:{}},Ik={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Xe,dt){var St=Xe.length;Xe.push(dt);e:for(;0<St;){var Pt=St-1>>>1,Bt=Xe[Pt];if(0<i(Bt,dt))Xe[Pt]=dt,Xe[St]=Bt,St=Pt;else break e}}function n(Xe){return Xe.length===0?null:Xe[0]}function r(Xe){if(Xe.length===0)return null;var dt=Xe[0],St=Xe.pop();if(St!==dt){Xe[0]=St;e:for(var Pt=0,Bt=Xe.length,yn=Bt>>>1;Pt<yn;){var Yn=2*(Pt+1)-1,Jn=Xe[Yn],vr=Yn+1,ri=Xe[vr];if(0>i(Jn,St))vr<Bt&&0>i(ri,Jn)?(Xe[Pt]=ri,Xe[vr]=St,Pt=vr):(Xe[Pt]=Jn,Xe[Yn]=St,Pt=Yn);else if(vr<Bt&&0>i(ri,St))Xe[Pt]=ri,Xe[vr]=St,Pt=vr;else break e}}return dt}function i(Xe,dt){var St=Xe.sortIndex-dt.sortIndex;return St!==0?St:Xe.id-dt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,u=h.now();e.unstable_now=function(){return h.now()-u}}var y=[],w=[],E=1,C=null,T=3,R=!1,O=!1,B=!1,Y=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Xe){for(var dt=n(w);dt!==null;){if(dt.callback===null)r(w);else if(dt.startTime<=Xe)r(w),dt.sortIndex=dt.expirationTime,t(y,dt);else break;dt=n(w)}}function re(Xe){if(B=!1,G(Xe),!O)if(n(y)!==null)O=!0,vt(he);else{var dt=n(w);dt!==null&&Gt(re,dt.startTime-Xe)}}function he(Xe,dt){O=!1,B&&(B=!1,$(ye),ye=-1),R=!0;var St=T;try{for(G(dt),C=n(y);C!==null&&(!(C.expirationTime>dt)||Xe&&!Ue());){var Pt=C.callback;if(typeof Pt=="function"){C.callback=null,T=C.priorityLevel;var Bt=Pt(C.expirationTime<=dt);dt=e.unstable_now(),typeof Bt=="function"?C.callback=Bt:C===n(y)&&r(y),G(dt)}else r(y);C=n(y)}if(C!==null)var yn=!0;else{var Yn=n(w);Yn!==null&&Gt(re,Yn.startTime-dt),yn=!1}return yn}finally{C=null,T=St,R=!1}}var _e=!1,fe=null,ye=-1,Pe=5,De=-1;function Ue(){return!(e.unstable_now()-De<Pe)}function Ye(){if(fe!==null){var Xe=e.unstable_now();De=Xe;var dt=!0;try{dt=fe(!0,Xe)}finally{dt?wt():(_e=!1,fe=null)}}else _e=!1}var wt;if(typeof U=="function")wt=function(){U(Ye)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Je=Ae.port2;Ae.port1.onmessage=Ye,wt=function(){Je.postMessage(null)}}else wt=function(){Y(Ye,0)};function vt(Xe){fe=Xe,_e||(_e=!0,wt())}function Gt(Xe,dt){ye=Y(function(){Xe(e.unstable_now())},dt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Xe){Xe.callback=null},e.unstable_continueExecution=function(){O||R||(O=!0,vt(he))},e.unstable_forceFrameRate=function(Xe){0>Xe||125<Xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<Xe?Math.floor(1e3/Xe):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(y)},e.unstable_next=function(Xe){switch(T){case 1:case 2:case 3:var dt=3;break;default:dt=T}var St=T;T=dt;try{return Xe()}finally{T=St}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Xe,dt){switch(Xe){case 1:case 2:case 3:case 4:case 5:break;default:Xe=3}var St=T;T=Xe;try{return dt()}finally{T=St}},e.unstable_scheduleCallback=function(Xe,dt,St){var Pt=e.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Pt+St:Pt):St=Pt,Xe){case 1:var Bt=-1;break;case 2:Bt=250;break;case 5:Bt=1073741823;break;case 4:Bt=1e4;break;default:Bt=5e3}return Bt=St+Bt,Xe={id:E++,callback:dt,priorityLevel:Xe,startTime:St,expirationTime:Bt,sortIndex:-1},St>Pt?(Xe.sortIndex=St,t(w,Xe),n(y)===null&&Xe===n(w)&&(B?($(ye),ye=-1):B=!0,Gt(re,St-Pt))):(Xe.sortIndex=Bt,t(y,Xe),O||R||(O=!0,vt(he))),Xe},e.unstable_shouldYield=Ue,e.unstable_wrapCallback=function(Xe){var dt=T;return function(){var St=T;T=dt;try{return Xe.apply(this,arguments)}finally{T=St}}}})(Ik);Ck.exports=Ik;var $z=Ck.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vz=be,Us=$z;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tk=new Set,ly={};function Vp(e,t){xf(e,t),xf(e+"Capture",t)}function xf(e,t){for(ly[e]=t,e=0;e<t.length;e++)Tk.add(t[e])}var Uu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y2=Object.prototype.hasOwnProperty,Uz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aP={},lP={};function Gz(e){return y2.call(lP,e)?!0:y2.call(aP,e)?!1:Uz.test(e)?lP[e]=!0:(aP[e]=!0,!1)}function qz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wz(e,t,n,r){if(t===null||typeof t>"u"||qz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function os(e,t,n,r,i,l,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=h}var ho={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ho[e]=new os(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ho[t]=new os(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ho[e]=new os(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ho[e]=new os(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ho[e]=new os(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ho[e]=new os(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ho[e]=new os(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ho[e]=new os(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ho[e]=new os(e,5,!1,e.toLowerCase(),null,!1,!1)});var lE=/[\-:]([a-z])/g;function uE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lE,uE);ho[t]=new os(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lE,uE);ho[t]=new os(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lE,uE);ho[t]=new os(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ho[e]=new os(e,1,!1,e.toLowerCase(),null,!1,!1)});ho.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ho[e]=new os(e,1,!1,e.toLowerCase(),null,!0,!0)});function cE(e,t,n,r){var i=ho.hasOwnProperty(t)?ho[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wz(t,n,i,r)&&(n=null),r||i===null?Gz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oc=Vz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N_=Symbol.for("react.element"),Wd=Symbol.for("react.portal"),Hd=Symbol.for("react.fragment"),hE=Symbol.for("react.strict_mode"),_2=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),Lk=Symbol.for("react.context"),pE=Symbol.for("react.forward_ref"),v2=Symbol.for("react.suspense"),x2=Symbol.for("react.suspense_list"),dE=Symbol.for("react.memo"),Fc=Symbol.for("react.lazy"),Mk=Symbol.for("react.offscreen"),uP=Symbol.iterator;function wg(e){return e===null||typeof e!="object"?null:(e=uP&&e[uP]||e["@@iterator"],typeof e=="function"?e:null)}var Lr=Object.assign,yw;function Fg(e){if(yw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yw=t&&t[1]||""}return`
`+yw+e}var _w=!1;function vw(e,t){if(!e||_w)return"";_w=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var r=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){r=w}e.call(t.prototype)}else{try{throw Error()}catch(w){r=w}e()}}catch(w){if(w&&r&&typeof w.stack=="string"){for(var i=w.stack.split(`
`),l=r.stack.split(`
`),h=i.length-1,u=l.length-1;1<=h&&0<=u&&i[h]!==l[u];)u--;for(;1<=h&&0<=u;h--,u--)if(i[h]!==l[u]){if(h!==1||u!==1)do if(h--,u--,0>u||i[h]!==l[u]){var y=`
`+i[h].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=h&&0<=u);break}}}finally{_w=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fg(e):""}function Hz(e){switch(e.tag){case 5:return Fg(e.type);case 16:return Fg("Lazy");case 13:return Fg("Suspense");case 19:return Fg("SuspenseList");case 0:case 2:case 15:return e=vw(e.type,!1),e;case 11:return e=vw(e.type.render,!1),e;case 1:return e=vw(e.type,!0),e;default:return""}}function b2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hd:return"Fragment";case Wd:return"Portal";case _2:return"Profiler";case hE:return"StrictMode";case v2:return"Suspense";case x2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lk:return(e.displayName||"Context")+".Consumer";case Pk:return(e._context.displayName||"Context")+".Provider";case pE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dE:return t=e.displayName||null,t!==null?t:b2(e.type)||"Memo";case Fc:t=e._payload,e=e._init;try{return b2(e(t))}catch{}}return null}function Zz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b2(t);case 8:return t===hE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function uh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ak(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xz(e){var t=Ak(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){r=""+h,l.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function R_(e){e._valueTracker||(e._valueTracker=Xz(e))}function kk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ak(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function w2(e,t){var n=t.checked;return Lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cP(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=uh(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nk(e,t){t=t.checked,t!=null&&cE(e,"checked",t,!1)}function S2(e,t){Nk(e,t);var n=uh(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?E2(e,t.type,n):t.hasOwnProperty("defaultValue")&&E2(e,t.type,uh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hP(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function E2(e,t,n){(t!=="number"||Bv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bg=Array.isArray;function cf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+uh(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function C2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return Lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pP(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Qe(92));if(Bg(n)){if(1<n.length)throw Error(Qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:uh(n)}}function Rk(e,t){var n=uh(t.value),r=uh(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function I2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var D_,Ok=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(D_=D_||document.createElement("div"),D_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=D_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kz=["Webkit","ms","Moz","O"];Object.keys(qg).forEach(function(e){Kz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qg[t]=qg[e]})});function zk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qg.hasOwnProperty(e)&&qg[e]?(""+t).trim():t+"px"}function Fk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Yz=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T2(e,t){if(t){if(Yz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function P2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L2=null;function fE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var M2=null,hf=null,pf=null;function fP(e){if(e=r0(e)){if(typeof M2!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=Vx(t),M2(e.stateNode,e.type,t))}}function Bk(e){hf?pf?pf.push(e):pf=[e]:hf=e}function jk(){if(hf){var e=hf,t=pf;if(pf=hf=null,fP(e),t)for(e=0;e<t.length;e++)fP(t[e])}}function $k(e,t){return e(t)}function Vk(){}var xw=!1;function Uk(e,t,n){if(xw)return e(t,n);xw=!0;try{return $k(e,t,n)}finally{xw=!1,(hf!==null||pf!==null)&&(Vk(),jk())}}function cy(e,t){var n=e.stateNode;if(n===null)return null;var r=Vx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Qe(231,t,typeof n));return n}var A2=!1;if(Uu)try{var Sg={};Object.defineProperty(Sg,"passive",{get:function(){A2=!0}}),window.addEventListener("test",Sg,Sg),window.removeEventListener("test",Sg,Sg)}catch{A2=!1}function Jz(e,t,n,r,i,l,h,u,y){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(E){this.onError(E)}}var Wg=!1,jv=null,$v=!1,k2=null,Qz={onError:function(e){Wg=!0,jv=e}};function eF(e,t,n,r,i,l,h,u,y){Wg=!1,jv=null,Jz.apply(Qz,arguments)}function tF(e,t,n,r,i,l,h,u,y){if(eF.apply(this,arguments),Wg){if(Wg){var w=jv;Wg=!1,jv=null}else throw Error(Qe(198));$v||($v=!0,k2=w)}}function Up(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mP(e){if(Up(e)!==e)throw Error(Qe(188))}function nF(e){var t=e.alternate;if(!t){if(t=Up(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return mP(i),e;if(l===r)return mP(i),t;l=l.sibling}throw Error(Qe(188))}if(n.return!==r.return)n=i,r=l;else{for(var h=!1,u=i.child;u;){if(u===n){h=!0,n=i,r=l;break}if(u===r){h=!0,r=i,n=l;break}u=u.sibling}if(!h){for(u=l.child;u;){if(u===n){h=!0,n=l,r=i;break}if(u===r){h=!0,r=l,n=i;break}u=u.sibling}if(!h)throw Error(Qe(189))}}if(n.alternate!==r)throw Error(Qe(190))}if(n.tag!==3)throw Error(Qe(188));return n.stateNode.current===n?e:t}function qk(e){return e=nF(e),e!==null?Wk(e):null}function Wk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wk(e);if(t!==null)return t;e=e.sibling}return null}var Hk=Us.unstable_scheduleCallback,gP=Us.unstable_cancelCallback,rF=Us.unstable_shouldYield,iF=Us.unstable_requestPaint,Yr=Us.unstable_now,oF=Us.unstable_getCurrentPriorityLevel,mE=Us.unstable_ImmediatePriority,Zk=Us.unstable_UserBlockingPriority,Vv=Us.unstable_NormalPriority,sF=Us.unstable_LowPriority,Xk=Us.unstable_IdlePriority,Fx=null,Xl=null;function aF(e){if(Xl&&typeof Xl.onCommitFiberRoot=="function")try{Xl.onCommitFiberRoot(Fx,e,void 0,(e.current.flags&128)===128)}catch{}}var ul=Math.clz32?Math.clz32:cF,lF=Math.log,uF=Math.LN2;function cF(e){return e>>>=0,e===0?32:31-(lF(e)/uF|0)|0}var O_=64,z_=4194304;function jg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Uv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes,h=n&268435455;if(h!==0){var u=h&~i;u!==0?r=jg(u):(l&=h,l!==0&&(r=jg(l)))}else h=n&~i,h!==0?r=jg(h):l!==0&&(r=jg(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ul(t),i=1<<n,r|=e[n],t&=~i;return r}function hF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pF(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var h=31-ul(l),u=1<<h,y=i[h];y===-1?(!(u&n)||u&r)&&(i[h]=hF(u,t)):y<=t&&(e.expiredLanes|=u),l&=~u}}function N2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kk(){var e=O_;return O_<<=1,!(O_&4194240)&&(O_=64),e}function bw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function t0(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ul(t),e[t]=n}function dF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ul(n),l=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~l}}function gE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ul(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var An=0;function Yk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jk,yE,Qk,eN,tN,R2=!1,F_=[],Kc=null,Yc=null,Jc=null,hy=new Map,py=new Map,$c=[],fF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yP(e,t){switch(e){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Yc=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":hy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":py.delete(t.pointerId)}}function Eg(e,t,n,r,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[i]},t!==null&&(t=r0(t),t!==null&&yE(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function mF(e,t,n,r,i){switch(t){case"focusin":return Kc=Eg(Kc,e,t,n,r,i),!0;case"dragenter":return Yc=Eg(Yc,e,t,n,r,i),!0;case"mouseover":return Jc=Eg(Jc,e,t,n,r,i),!0;case"pointerover":var l=i.pointerId;return hy.set(l,Eg(hy.get(l)||null,e,t,n,r,i)),!0;case"gotpointercapture":return l=i.pointerId,py.set(l,Eg(py.get(l)||null,e,t,n,r,i)),!0}return!1}function nN(e){var t=gp(e.target);if(t!==null){var n=Up(t);if(n!==null){if(t=n.tag,t===13){if(t=Gk(n),t!==null){e.blockedOn=t,tN(e.priority,function(){Qk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=D2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);L2=r,n.target.dispatchEvent(r),L2=null}else return t=r0(n),t!==null&&yE(t),e.blockedOn=n,!1;t.shift()}return!0}function _P(e,t,n){mv(e)&&n.delete(t)}function gF(){R2=!1,Kc!==null&&mv(Kc)&&(Kc=null),Yc!==null&&mv(Yc)&&(Yc=null),Jc!==null&&mv(Jc)&&(Jc=null),hy.forEach(_P),py.forEach(_P)}function Cg(e,t){e.blockedOn===t&&(e.blockedOn=null,R2||(R2=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,gF)))}function dy(e){function t(i){return Cg(i,e)}if(0<F_.length){Cg(F_[0],e);for(var n=1;n<F_.length;n++){var r=F_[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kc!==null&&Cg(Kc,e),Yc!==null&&Cg(Yc,e),Jc!==null&&Cg(Jc,e),hy.forEach(t),py.forEach(t),n=0;n<$c.length;n++)r=$c[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$c.length&&(n=$c[0],n.blockedOn===null);)nN(n),n.blockedOn===null&&$c.shift()}var df=oc.ReactCurrentBatchConfig,Gv=!0;function yF(e,t,n,r){var i=An,l=df.transition;df.transition=null;try{An=1,_E(e,t,n,r)}finally{An=i,df.transition=l}}function _F(e,t,n,r){var i=An,l=df.transition;df.transition=null;try{An=4,_E(e,t,n,r)}finally{An=i,df.transition=l}}function _E(e,t,n,r){if(Gv){var i=D2(e,t,n,r);if(i===null)Aw(e,t,r,qv,n),yP(e,r);else if(mF(i,e,t,n,r))r.stopPropagation();else if(yP(e,r),t&4&&-1<fF.indexOf(e)){for(;i!==null;){var l=r0(i);if(l!==null&&Jk(l),l=D2(e,t,n,r),l===null&&Aw(e,t,r,qv,n),l===i)break;i=l}i!==null&&r.stopPropagation()}else Aw(e,t,r,null,n)}}var qv=null;function D2(e,t,n,r){if(qv=null,e=fE(r),e=gp(e),e!==null)if(t=Up(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qv=e,null}function rN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oF()){case mE:return 1;case Zk:return 4;case Vv:case sF:return 16;case Xk:return 536870912;default:return 16}default:return 16}}var qc=null,vE=null,gv=null;function iN(){if(gv)return gv;var e,t=vE,n=t.length,r,i="value"in qc?qc.value:qc.textContent,l=i.length;for(e=0;e<n&&t[e]===i[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===i[l-r];r++);return gv=i.slice(e,1<r?1-r:void 0)}function yv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B_(){return!0}function vP(){return!1}function Qs(e){function t(n,r,i,l,h){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?B_:vP,this.isPropagationStopped=vP,this}return Lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=B_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=B_)},persist:function(){},isPersistent:B_}),t}var Yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xE=Qs(Yf),n0=Lr({},Yf,{view:0,detail:0}),vF=Qs(n0),ww,Sw,Ig,Bx=Lr({},n0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ig&&(Ig&&e.type==="mousemove"?(ww=e.screenX-Ig.screenX,Sw=e.screenY-Ig.screenY):Sw=ww=0,Ig=e),ww)},movementY:function(e){return"movementY"in e?e.movementY:Sw}}),xP=Qs(Bx),xF=Lr({},Bx,{dataTransfer:0}),bF=Qs(xF),wF=Lr({},n0,{relatedTarget:0}),Ew=Qs(wF),SF=Lr({},Yf,{animationName:0,elapsedTime:0,pseudoElement:0}),EF=Qs(SF),CF=Lr({},Yf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IF=Qs(CF),TF=Lr({},Yf,{data:0}),bP=Qs(TF),PF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=MF[e])?!!t[e]:!1}function bE(){return AF}var kF=Lr({},n0,{key:function(e){if(e.key){var t=PF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?LF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bE,charCode:function(e){return e.type==="keypress"?yv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NF=Qs(kF),RF=Lr({},Bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wP=Qs(RF),DF=Lr({},n0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bE}),OF=Qs(DF),zF=Lr({},Yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),FF=Qs(zF),BF=Lr({},Bx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jF=Qs(BF),$F=[9,13,27,32],wE=Uu&&"CompositionEvent"in window,Hg=null;Uu&&"documentMode"in document&&(Hg=document.documentMode);var VF=Uu&&"TextEvent"in window&&!Hg,oN=Uu&&(!wE||Hg&&8<Hg&&11>=Hg),SP=" ",EP=!1;function sN(e,t){switch(e){case"keyup":return $F.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zd=!1;function UF(e,t){switch(e){case"compositionend":return aN(t);case"keypress":return t.which!==32?null:(EP=!0,SP);case"textInput":return e=t.data,e===SP&&EP?null:e;default:return null}}function GF(e,t){if(Zd)return e==="compositionend"||!wE&&sN(e,t)?(e=iN(),gv=vE=qc=null,Zd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oN&&t.locale!=="ko"?null:t.data;default:return null}}var qF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qF[e.type]:t==="textarea"}function lN(e,t,n,r){Bk(r),t=Wv(t,"onChange"),0<t.length&&(n=new xE("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zg=null,fy=null;function WF(e){vN(e,0)}function jx(e){var t=Yd(e);if(kk(t))return e}function HF(e,t){if(e==="change")return t}var uN=!1;if(Uu){var Cw;if(Uu){var Iw="oninput"in document;if(!Iw){var IP=document.createElement("div");IP.setAttribute("oninput","return;"),Iw=typeof IP.oninput=="function"}Cw=Iw}else Cw=!1;uN=Cw&&(!document.documentMode||9<document.documentMode)}function TP(){Zg&&(Zg.detachEvent("onpropertychange",cN),fy=Zg=null)}function cN(e){if(e.propertyName==="value"&&jx(fy)){var t=[];lN(t,fy,e,fE(e)),Uk(WF,t)}}function ZF(e,t,n){e==="focusin"?(TP(),Zg=t,fy=n,Zg.attachEvent("onpropertychange",cN)):e==="focusout"&&TP()}function XF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jx(fy)}function KF(e,t){if(e==="click")return jx(t)}function YF(e,t){if(e==="input"||e==="change")return jx(t)}function JF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dl=typeof Object.is=="function"?Object.is:JF;function my(e,t){if(dl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!y2.call(t,i)||!dl(e[i],t[i]))return!1}return!0}function PP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LP(e,t){var n=PP(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PP(n)}}function hN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pN(){for(var e=window,t=Bv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bv(e.document)}return t}function SE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QF(e){var t=pN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hN(n.ownerDocument.documentElement,n)){if(r!==null&&SE(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,l=Math.min(r.start,i);r=r.end===void 0?l:Math.min(r.end,i),!e.extend&&l>r&&(i=r,r=l,l=i),i=LP(n,l);var h=LP(n,r);i&&h&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var e6=Uu&&"documentMode"in document&&11>=document.documentMode,Xd=null,O2=null,Xg=null,z2=!1;function MP(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;z2||Xd==null||Xd!==Bv(r)||(r=Xd,"selectionStart"in r&&SE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xg&&my(Xg,r)||(Xg=r,r=Wv(O2,"onSelect"),0<r.length&&(t=new xE("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xd)))}function j_(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kd={animationend:j_("Animation","AnimationEnd"),animationiteration:j_("Animation","AnimationIteration"),animationstart:j_("Animation","AnimationStart"),transitionend:j_("Transition","TransitionEnd")},Tw={},dN={};Uu&&(dN=document.createElement("div").style,"AnimationEvent"in window||(delete Kd.animationend.animation,delete Kd.animationiteration.animation,delete Kd.animationstart.animation),"TransitionEvent"in window||delete Kd.transitionend.transition);function $x(e){if(Tw[e])return Tw[e];if(!Kd[e])return e;var t=Kd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dN)return Tw[e]=t[n];return e}var fN=$x("animationend"),mN=$x("animationiteration"),gN=$x("animationstart"),yN=$x("transitionend"),_N=new Map,AP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Th(e,t){_N.set(e,t),Vp(t,[e])}for(var Pw=0;Pw<AP.length;Pw++){var Lw=AP[Pw],t6=Lw.toLowerCase(),n6=Lw[0].toUpperCase()+Lw.slice(1);Th(t6,"on"+n6)}Th(fN,"onAnimationEnd");Th(mN,"onAnimationIteration");Th(gN,"onAnimationStart");Th("dblclick","onDoubleClick");Th("focusin","onFocus");Th("focusout","onBlur");Th(yN,"onTransitionEnd");xf("onMouseEnter",["mouseout","mouseover"]);xf("onMouseLeave",["mouseout","mouseover"]);xf("onPointerEnter",["pointerout","pointerover"]);xf("onPointerLeave",["pointerout","pointerover"]);Vp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r6=new Set("cancel close invalid load scroll toggle".split(" ").concat($g));function kP(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tF(r,t,void 0,e),e.currentTarget=null}function vN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var h=r.length-1;0<=h;h--){var u=r[h],y=u.instance,w=u.currentTarget;if(u=u.listener,y!==l&&i.isPropagationStopped())break e;kP(i,u,w),l=y}else for(h=0;h<r.length;h++){if(u=r[h],y=u.instance,w=u.currentTarget,u=u.listener,y!==l&&i.isPropagationStopped())break e;kP(i,u,w),l=y}}}if($v)throw e=k2,$v=!1,k2=null,e}function er(e,t){var n=t[V2];n===void 0&&(n=t[V2]=new Set);var r=e+"__bubble";n.has(r)||(xN(t,e,2,!1),n.add(r))}function Mw(e,t,n){var r=0;t&&(r|=4),xN(n,e,r,t)}var $_="_reactListening"+Math.random().toString(36).slice(2);function gy(e){if(!e[$_]){e[$_]=!0,Tk.forEach(function(n){n!=="selectionchange"&&(r6.has(n)||Mw(n,!1,e),Mw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$_]||(t[$_]=!0,Mw("selectionchange",!1,t))}}function xN(e,t,n,r){switch(rN(t)){case 1:var i=yF;break;case 4:i=_F;break;default:i=_E}n=i.bind(null,t,n,e),i=void 0,!A2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Aw(e,t,n,r,i){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(h===4)for(h=r.return;h!==null;){var y=h.tag;if((y===3||y===4)&&(y=h.stateNode.containerInfo,y===i||y.nodeType===8&&y.parentNode===i))return;h=h.return}for(;u!==null;){if(h=gp(u),h===null)return;if(y=h.tag,y===5||y===6){r=l=h;continue e}u=u.parentNode}}r=r.return}Uk(function(){var w=l,E=fE(n),C=[];e:{var T=_N.get(e);if(T!==void 0){var R=xE,O=e;switch(e){case"keypress":if(yv(n)===0)break e;case"keydown":case"keyup":R=NF;break;case"focusin":O="focus",R=Ew;break;case"focusout":O="blur",R=Ew;break;case"beforeblur":case"afterblur":R=Ew;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=xP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=bF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=OF;break;case fN:case mN:case gN:R=EF;break;case yN:R=FF;break;case"scroll":R=vF;break;case"wheel":R=jF;break;case"copy":case"cut":case"paste":R=IF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=wP}var B=(t&4)!==0,Y=!B&&e==="scroll",$=B?T!==null?T+"Capture":null:T;B=[];for(var U=w,G;U!==null;){G=U;var re=G.stateNode;if(G.tag===5&&re!==null&&(G=re,$!==null&&(re=cy(U,$),re!=null&&B.push(yy(U,re,G)))),Y)break;U=U.return}0<B.length&&(T=new R(T,O,null,n,E),C.push({event:T,listeners:B}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",T&&n!==L2&&(O=n.relatedTarget||n.fromElement)&&(gp(O)||O[Gu]))break e;if((R||T)&&(T=E.window===E?E:(T=E.ownerDocument)?T.defaultView||T.parentWindow:window,R?(O=n.relatedTarget||n.toElement,R=w,O=O?gp(O):null,O!==null&&(Y=Up(O),O!==Y||O.tag!==5&&O.tag!==6)&&(O=null)):(R=null,O=w),R!==O)){if(B=xP,re="onMouseLeave",$="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(B=wP,re="onPointerLeave",$="onPointerEnter",U="pointer"),Y=R==null?T:Yd(R),G=O==null?T:Yd(O),T=new B(re,U+"leave",R,n,E),T.target=Y,T.relatedTarget=G,re=null,gp(E)===w&&(B=new B($,U+"enter",O,n,E),B.target=G,B.relatedTarget=Y,re=B),Y=re,R&&O)t:{for(B=R,$=O,U=0,G=B;G;G=Od(G))U++;for(G=0,re=$;re;re=Od(re))G++;for(;0<U-G;)B=Od(B),U--;for(;0<G-U;)$=Od($),G--;for(;U--;){if(B===$||$!==null&&B===$.alternate)break t;B=Od(B),$=Od($)}B=null}else B=null;R!==null&&NP(C,T,R,B,!1),O!==null&&Y!==null&&NP(C,Y,O,B,!0)}}e:{if(T=w?Yd(w):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var he=HF;else if(CP(T))if(uN)he=YF;else{he=XF;var _e=ZF}else(R=T.nodeName)&&R.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(he=KF);if(he&&(he=he(e,w))){lN(C,he,n,E);break e}_e&&_e(e,T,w),e==="focusout"&&(_e=T._wrapperState)&&_e.controlled&&T.type==="number"&&E2(T,"number",T.value)}switch(_e=w?Yd(w):window,e){case"focusin":(CP(_e)||_e.contentEditable==="true")&&(Xd=_e,O2=w,Xg=null);break;case"focusout":Xg=O2=Xd=null;break;case"mousedown":z2=!0;break;case"contextmenu":case"mouseup":case"dragend":z2=!1,MP(C,n,E);break;case"selectionchange":if(e6)break;case"keydown":case"keyup":MP(C,n,E)}var fe;if(wE)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Zd?sN(e,n)&&(ye="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ye="onCompositionStart");ye&&(oN&&n.locale!=="ko"&&(Zd||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Zd&&(fe=iN()):(qc=E,vE="value"in qc?qc.value:qc.textContent,Zd=!0)),_e=Wv(w,ye),0<_e.length&&(ye=new bP(ye,e,null,n,E),C.push({event:ye,listeners:_e}),fe?ye.data=fe:(fe=aN(n),fe!==null&&(ye.data=fe)))),(fe=VF?UF(e,n):GF(e,n))&&(w=Wv(w,"onBeforeInput"),0<w.length&&(E=new bP("onBeforeInput","beforeinput",null,n,E),C.push({event:E,listeners:w}),E.data=fe))}vN(C,t)})}function yy(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wv(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=cy(e,n),l!=null&&r.unshift(yy(e,l,i)),l=cy(e,t),l!=null&&r.push(yy(e,l,i))),e=e.return}return r}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NP(e,t,n,r,i){for(var l=t._reactName,h=[];n!==null&&n!==r;){var u=n,y=u.alternate,w=u.stateNode;if(y!==null&&y===r)break;u.tag===5&&w!==null&&(u=w,i?(y=cy(n,l),y!=null&&h.unshift(yy(n,y,u))):i||(y=cy(n,l),y!=null&&h.push(yy(n,y,u)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var i6=/\r\n?/g,o6=/\u0000|\uFFFD/g;function RP(e){return(typeof e=="string"?e:""+e).replace(i6,`
`).replace(o6,"")}function V_(e,t,n){if(t=RP(t),RP(e)!==t&&n)throw Error(Qe(425))}function Hv(){}var F2=null,B2=null;function j2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $2=typeof setTimeout=="function"?setTimeout:void 0,s6=typeof clearTimeout=="function"?clearTimeout:void 0,DP=typeof Promise=="function"?Promise:void 0,a6=typeof queueMicrotask=="function"?queueMicrotask:typeof DP<"u"?function(e){return DP.resolve(null).then(e).catch(l6)}:$2;function l6(e){setTimeout(function(){throw e})}function kw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),dy(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dy(t)}function Qc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function OP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jf=Math.random().toString(36).slice(2),Hl="__reactFiber$"+Jf,_y="__reactProps$"+Jf,Gu="__reactContainer$"+Jf,V2="__reactEvents$"+Jf,u6="__reactListeners$"+Jf,c6="__reactHandles$"+Jf;function gp(e){var t=e[Hl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gu]||n[Hl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=OP(e);e!==null;){if(n=e[Hl])return n;e=OP(e)}return t}e=n,n=e.parentNode}return null}function r0(e){return e=e[Hl]||e[Gu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function Vx(e){return e[_y]||null}var U2=[],Jd=-1;function Ph(e){return{current:e}}function tr(e){0>Jd||(e.current=U2[Jd],U2[Jd]=null,Jd--)}function Hn(e,t){Jd++,U2[Jd]=e.current,e.current=t}var ch={},Lo=Ph(ch),ps=Ph(!1),Ep=ch;function bf(e,t){var n=e.type.contextTypes;if(!n)return ch;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ds(e){return e=e.childContextTypes,e!=null}function Zv(){tr(ps),tr(Lo)}function zP(e,t,n){if(Lo.current!==ch)throw Error(Qe(168));Hn(Lo,t),Hn(ps,n)}function bN(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Qe(108,Zz(e)||"Unknown",i));return Lr({},n,r)}function Xv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ch,Ep=Lo.current,Hn(Lo,e),Hn(ps,ps.current),!0}function FP(e,t,n){var r=e.stateNode;if(!r)throw Error(Qe(169));n?(e=bN(e,t,Ep),r.__reactInternalMemoizedMergedChildContext=e,tr(ps),tr(Lo),Hn(Lo,e)):tr(ps),Hn(ps,n)}var Mu=null,Ux=!1,Nw=!1;function wN(e){Mu===null?Mu=[e]:Mu.push(e)}function h6(e){Ux=!0,wN(e)}function Lh(){if(!Nw&&Mu!==null){Nw=!0;var e=0,t=An;try{var n=Mu;for(An=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mu=null,Ux=!1}catch(i){throw Mu!==null&&(Mu=Mu.slice(e+1)),Hk(mE,Lh),i}finally{An=t,Nw=!1}}return null}var Qd=[],ef=0,Kv=null,Yv=0,xa=[],ba=0,Cp=null,Au=1,ku="";function pp(e,t){Qd[ef++]=Yv,Qd[ef++]=Kv,Kv=e,Yv=t}function SN(e,t,n){xa[ba++]=Au,xa[ba++]=ku,xa[ba++]=Cp,Cp=e;var r=Au;e=ku;var i=32-ul(r)-1;r&=~(1<<i),n+=1;var l=32-ul(t)+i;if(30<l){var h=i-i%5;l=(r&(1<<h)-1).toString(32),r>>=h,i-=h,Au=1<<32-ul(t)+i|n<<i|r,ku=l+e}else Au=1<<l|n<<i|r,ku=e}function EE(e){e.return!==null&&(pp(e,1),SN(e,1,0))}function CE(e){for(;e===Kv;)Kv=Qd[--ef],Qd[ef]=null,Yv=Qd[--ef],Qd[ef]=null;for(;e===Cp;)Cp=xa[--ba],xa[ba]=null,ku=xa[--ba],xa[ba]=null,Au=xa[--ba],xa[ba]=null}var Bs=null,Fs=null,fr=!1,sl=null;function EN(e,t){var n=Ea(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function BP(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bs=e,Fs=Qc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bs=e,Fs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Cp!==null?{id:Au,overflow:ku}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ea(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bs=e,Fs=null,!0):!1;default:return!1}}function G2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function q2(e){if(fr){var t=Fs;if(t){var n=t;if(!BP(e,t)){if(G2(e))throw Error(Qe(418));t=Qc(n.nextSibling);var r=Bs;t&&BP(e,t)?EN(r,n):(e.flags=e.flags&-4097|2,fr=!1,Bs=e)}}else{if(G2(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,fr=!1,Bs=e}}}function jP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bs=e}function U_(e){if(e!==Bs)return!1;if(!fr)return jP(e),fr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!j2(e.type,e.memoizedProps)),t&&(t=Fs)){if(G2(e))throw CN(),Error(Qe(418));for(;t;)EN(e,t),t=Qc(t.nextSibling)}if(jP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fs=Qc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fs=null}}else Fs=Bs?Qc(e.stateNode.nextSibling):null;return!0}function CN(){for(var e=Fs;e;)e=Qc(e.nextSibling)}function wf(){Fs=Bs=null,fr=!1}function IE(e){sl===null?sl=[e]:sl.push(e)}var p6=oc.ReactCurrentBatchConfig;function Tg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Qe(309));var r=n.stateNode}if(!r)throw Error(Qe(147,e));var i=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(h){var u=i.refs;h===null?delete u[l]:u[l]=h},t._stringRef=l,t)}if(typeof e!="string")throw Error(Qe(284));if(!n._owner)throw Error(Qe(290,e))}return e}function G_(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $P(e){var t=e._init;return t(e._payload)}function IN(e){function t($,U){if(e){var G=$.deletions;G===null?($.deletions=[U],$.flags|=16):G.push(U)}}function n($,U){if(!e)return null;for(;U!==null;)t($,U),U=U.sibling;return null}function r($,U){for($=new Map;U!==null;)U.key!==null?$.set(U.key,U):$.set(U.index,U),U=U.sibling;return $}function i($,U){return $=rh($,U),$.index=0,$.sibling=null,$}function l($,U,G){return $.index=G,e?(G=$.alternate,G!==null?(G=G.index,G<U?($.flags|=2,U):G):($.flags|=2,U)):($.flags|=1048576,U)}function h($){return e&&$.alternate===null&&($.flags|=2),$}function u($,U,G,re){return U===null||U.tag!==6?(U=jw(G,$.mode,re),U.return=$,U):(U=i(U,G),U.return=$,U)}function y($,U,G,re){var he=G.type;return he===Hd?E($,U,G.props.children,re,G.key):U!==null&&(U.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Fc&&$P(he)===U.type)?(re=i(U,G.props),re.ref=Tg($,U,G),re.return=$,re):(re=Ev(G.type,G.key,G.props,null,$.mode,re),re.ref=Tg($,U,G),re.return=$,re)}function w($,U,G,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=$w(G,$.mode,re),U.return=$,U):(U=i(U,G.children||[]),U.return=$,U)}function E($,U,G,re,he){return U===null||U.tag!==7?(U=wp(G,$.mode,re,he),U.return=$,U):(U=i(U,G),U.return=$,U)}function C($,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=jw(""+U,$.mode,G),U.return=$,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N_:return G=Ev(U.type,U.key,U.props,null,$.mode,G),G.ref=Tg($,null,U),G.return=$,G;case Wd:return U=$w(U,$.mode,G),U.return=$,U;case Fc:var re=U._init;return C($,re(U._payload),G)}if(Bg(U)||wg(U))return U=wp(U,$.mode,G,null),U.return=$,U;G_($,U)}return null}function T($,U,G,re){var he=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return he!==null?null:u($,U,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N_:return G.key===he?y($,U,G,re):null;case Wd:return G.key===he?w($,U,G,re):null;case Fc:return he=G._init,T($,U,he(G._payload),re)}if(Bg(G)||wg(G))return he!==null?null:E($,U,G,re,null);G_($,G)}return null}function R($,U,G,re,he){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(G)||null,u(U,$,""+re,he);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N_:return $=$.get(re.key===null?G:re.key)||null,y(U,$,re,he);case Wd:return $=$.get(re.key===null?G:re.key)||null,w(U,$,re,he);case Fc:var _e=re._init;return R($,U,G,_e(re._payload),he)}if(Bg(re)||wg(re))return $=$.get(G)||null,E(U,$,re,he,null);G_(U,re)}return null}function O($,U,G,re){for(var he=null,_e=null,fe=U,ye=U=0,Pe=null;fe!==null&&ye<G.length;ye++){fe.index>ye?(Pe=fe,fe=null):Pe=fe.sibling;var De=T($,fe,G[ye],re);if(De===null){fe===null&&(fe=Pe);break}e&&fe&&De.alternate===null&&t($,fe),U=l(De,U,ye),_e===null?he=De:_e.sibling=De,_e=De,fe=Pe}if(ye===G.length)return n($,fe),fr&&pp($,ye),he;if(fe===null){for(;ye<G.length;ye++)fe=C($,G[ye],re),fe!==null&&(U=l(fe,U,ye),_e===null?he=fe:_e.sibling=fe,_e=fe);return fr&&pp($,ye),he}for(fe=r($,fe);ye<G.length;ye++)Pe=R(fe,$,ye,G[ye],re),Pe!==null&&(e&&Pe.alternate!==null&&fe.delete(Pe.key===null?ye:Pe.key),U=l(Pe,U,ye),_e===null?he=Pe:_e.sibling=Pe,_e=Pe);return e&&fe.forEach(function(Ue){return t($,Ue)}),fr&&pp($,ye),he}function B($,U,G,re){var he=wg(G);if(typeof he!="function")throw Error(Qe(150));if(G=he.call(G),G==null)throw Error(Qe(151));for(var _e=he=null,fe=U,ye=U=0,Pe=null,De=G.next();fe!==null&&!De.done;ye++,De=G.next()){fe.index>ye?(Pe=fe,fe=null):Pe=fe.sibling;var Ue=T($,fe,De.value,re);if(Ue===null){fe===null&&(fe=Pe);break}e&&fe&&Ue.alternate===null&&t($,fe),U=l(Ue,U,ye),_e===null?he=Ue:_e.sibling=Ue,_e=Ue,fe=Pe}if(De.done)return n($,fe),fr&&pp($,ye),he;if(fe===null){for(;!De.done;ye++,De=G.next())De=C($,De.value,re),De!==null&&(U=l(De,U,ye),_e===null?he=De:_e.sibling=De,_e=De);return fr&&pp($,ye),he}for(fe=r($,fe);!De.done;ye++,De=G.next())De=R(fe,$,ye,De.value,re),De!==null&&(e&&De.alternate!==null&&fe.delete(De.key===null?ye:De.key),U=l(De,U,ye),_e===null?he=De:_e.sibling=De,_e=De);return e&&fe.forEach(function(Ye){return t($,Ye)}),fr&&pp($,ye),he}function Y($,U,G,re){if(typeof G=="object"&&G!==null&&G.type===Hd&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N_:e:{for(var he=G.key,_e=U;_e!==null;){if(_e.key===he){if(he=G.type,he===Hd){if(_e.tag===7){n($,_e.sibling),U=i(_e,G.props.children),U.return=$,$=U;break e}}else if(_e.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Fc&&$P(he)===_e.type){n($,_e.sibling),U=i(_e,G.props),U.ref=Tg($,_e,G),U.return=$,$=U;break e}n($,_e);break}else t($,_e);_e=_e.sibling}G.type===Hd?(U=wp(G.props.children,$.mode,re,G.key),U.return=$,$=U):(re=Ev(G.type,G.key,G.props,null,$.mode,re),re.ref=Tg($,U,G),re.return=$,$=re)}return h($);case Wd:e:{for(_e=G.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){n($,U.sibling),U=i(U,G.children||[]),U.return=$,$=U;break e}else{n($,U);break}else t($,U);U=U.sibling}U=$w(G,$.mode,re),U.return=$,$=U}return h($);case Fc:return _e=G._init,Y($,U,_e(G._payload),re)}if(Bg(G))return O($,U,G,re);if(wg(G))return B($,U,G,re);G_($,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(n($,U.sibling),U=i(U,G),U.return=$,$=U):(n($,U),U=jw(G,$.mode,re),U.return=$,$=U),h($)):n($,U)}return Y}var Sf=IN(!0),TN=IN(!1),Jv=Ph(null),Qv=null,tf=null,TE=null;function PE(){TE=tf=Qv=null}function LE(e){var t=Jv.current;tr(Jv),e._currentValue=t}function W2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ff(e,t){Qv=e,TE=tf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hs=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(TE!==e)if(e={context:e,memoizedValue:t,next:null},tf===null){if(Qv===null)throw Error(Qe(308));tf=e,Qv.dependencies={lanes:0,firstContext:e}}else tf=tf.next=e;return t}var yp=null;function ME(e){yp===null?yp=[e]:yp.push(e)}function PN(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ME(t)):(n.next=i.next,i.next=n),t.interleaved=n,qu(e,r)}function qu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bc=!1;function AE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ou(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eh(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,gn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qu(e,n)}return i=r.interleaved,i===null?(t.next=t,ME(r)):(t.next=i.next,i.next=t),r.interleaved=t,qu(e,n)}function _v(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gE(e,n)}}function VP(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=h:l=l.next=h,n=n.next}while(n!==null);l===null?i=l=t:l=l.next=t}else i=l=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ex(e,t,n,r){var i=e.updateQueue;Bc=!1;var l=i.firstBaseUpdate,h=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var y=u,w=y.next;y.next=null,h===null?l=w:h.next=w,h=y;var E=e.alternate;E!==null&&(E=E.updateQueue,u=E.lastBaseUpdate,u!==h&&(u===null?E.firstBaseUpdate=w:u.next=w,E.lastBaseUpdate=y))}if(l!==null){var C=i.baseState;h=0,E=w=y=null,u=l;do{var T=u.lane,R=u.eventTime;if((r&T)===T){E!==null&&(E=E.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var O=e,B=u;switch(T=t,R=n,B.tag){case 1:if(O=B.payload,typeof O=="function"){C=O.call(R,C,T);break e}C=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=B.payload,T=typeof O=="function"?O.call(R,C,T):O,T==null)break e;C=Lr({},C,T);break e;case 2:Bc=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=i.effects,T===null?i.effects=[u]:T.push(u))}else R={eventTime:R,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},E===null?(w=E=R,y=C):E=E.next=R,h|=T;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;T=u,u=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);if(E===null&&(y=C),i.baseState=y,i.firstBaseUpdate=w,i.lastBaseUpdate=E,t=i.shared.interleaved,t!==null){i=t;do h|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Tp|=h,e.lanes=h,e.memoizedState=C}}function UP(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Qe(191,i));i.call(r)}}}var i0={},Kl=Ph(i0),vy=Ph(i0),xy=Ph(i0);function _p(e){if(e===i0)throw Error(Qe(174));return e}function kE(e,t){switch(Hn(xy,t),Hn(vy,e),Hn(Kl,i0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:I2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=I2(t,e)}tr(Kl),Hn(Kl,t)}function Ef(){tr(Kl),tr(vy),tr(xy)}function MN(e){_p(xy.current);var t=_p(Kl.current),n=I2(t,e.type);t!==n&&(Hn(vy,e),Hn(Kl,n))}function NE(e){vy.current===e&&(tr(Kl),tr(vy))}var br=Ph(0);function tx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rw=[];function RE(){for(var e=0;e<Rw.length;e++)Rw[e]._workInProgressVersionPrimary=null;Rw.length=0}var vv=oc.ReactCurrentDispatcher,Dw=oc.ReactCurrentBatchConfig,Ip=0,Tr=null,Si=null,Bi=null,nx=!1,Kg=!1,by=0,d6=0;function bo(){throw Error(Qe(321))}function DE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dl(e[n],t[n]))return!1;return!0}function OE(e,t,n,r,i,l){if(Ip=l,Tr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vv.current=e===null||e.memoizedState===null?y6:_6,e=n(r,i),Kg){l=0;do{if(Kg=!1,by=0,25<=l)throw Error(Qe(301));l+=1,Bi=Si=null,t.updateQueue=null,vv.current=v6,e=n(r,i)}while(Kg)}if(vv.current=rx,t=Si!==null&&Si.next!==null,Ip=0,Bi=Si=Tr=null,nx=!1,t)throw Error(Qe(300));return e}function zE(){var e=by!==0;return by=0,e}function jl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?Tr.memoizedState=Bi=e:Bi=Bi.next=e,Bi}function La(){if(Si===null){var e=Tr.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var t=Bi===null?Tr.memoizedState:Bi.next;if(t!==null)Bi=t,Si=e;else{if(e===null)throw Error(Qe(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Bi===null?Tr.memoizedState=Bi=e:Bi=Bi.next=e}return Bi}function wy(e,t){return typeof t=="function"?t(e):t}function Ow(e){var t=La(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var r=Si,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var h=i.next;i.next=l.next,l.next=h}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var u=h=null,y=null,w=l;do{var E=w.lane;if((Ip&E)===E)y!==null&&(y=y.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),r=w.hasEagerState?w.eagerState:e(r,w.action);else{var C={lane:E,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};y===null?(u=y=C,h=r):y=y.next=C,Tr.lanes|=E,Tp|=E}w=w.next}while(w!==null&&w!==l);y===null?h=r:y.next=u,dl(r,t.memoizedState)||(hs=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=y,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do l=i.lane,Tr.lanes|=l,Tp|=l,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zw(e){var t=La(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(i!==null){n.pending=null;var h=i=i.next;do l=e(l,h.action),h=h.next;while(h!==i);dl(l,t.memoizedState)||(hs=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function AN(){}function kN(e,t){var n=Tr,r=La(),i=t(),l=!dl(r.memoizedState,i);if(l&&(r.memoizedState=i,hs=!0),r=r.queue,FE(DN.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Bi!==null&&Bi.memoizedState.tag&1){if(n.flags|=2048,Sy(9,RN.bind(null,n,r,i,t),void 0,null),Gi===null)throw Error(Qe(349));Ip&30||NN(n,t,i)}return i}function NN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RN(e,t,n,r){t.value=n,t.getSnapshot=r,ON(t)&&zN(e)}function DN(e,t,n){return n(function(){ON(t)&&zN(e)})}function ON(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dl(e,n)}catch{return!0}}function zN(e){var t=qu(e,1);t!==null&&cl(t,e,1,-1)}function GP(e){var t=jl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:e},t.queue=e,e=e.dispatch=g6.bind(null,Tr,e),[t.memoizedState,e]}function Sy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function FN(){return La().memoizedState}function xv(e,t,n,r){var i=jl();Tr.flags|=e,i.memoizedState=Sy(1|t,n,void 0,r===void 0?null:r)}function Gx(e,t,n,r){var i=La();r=r===void 0?null:r;var l=void 0;if(Si!==null){var h=Si.memoizedState;if(l=h.destroy,r!==null&&DE(r,h.deps)){i.memoizedState=Sy(t,n,l,r);return}}Tr.flags|=e,i.memoizedState=Sy(1|t,n,l,r)}function qP(e,t){return xv(8390656,8,e,t)}function FE(e,t){return Gx(2048,8,e,t)}function BN(e,t){return Gx(4,2,e,t)}function jN(e,t){return Gx(4,4,e,t)}function $N(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function VN(e,t,n){return n=n!=null?n.concat([e]):null,Gx(4,4,$N.bind(null,t,e),n)}function BE(){}function UN(e,t){var n=La();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&DE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function GN(e,t){var n=La();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&DE(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qN(e,t,n){return Ip&21?(dl(n,t)||(n=Kk(),Tr.lanes|=n,Tp|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hs=!0),e.memoizedState=n)}function f6(e,t){var n=An;An=n!==0&&4>n?n:4,e(!0);var r=Dw.transition;Dw.transition={};try{e(!1),t()}finally{An=n,Dw.transition=r}}function WN(){return La().memoizedState}function m6(e,t,n){var r=nh(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HN(e))ZN(t,n);else if(n=PN(e,t,n,r),n!==null){var i=Ko();cl(n,e,r,i),XN(n,t,r)}}function g6(e,t,n){var r=nh(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HN(e))ZN(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var h=t.lastRenderedState,u=l(h,n);if(i.hasEagerState=!0,i.eagerState=u,dl(u,h)){var y=t.interleaved;y===null?(i.next=i,ME(t)):(i.next=y.next,y.next=i),t.interleaved=i;return}}catch{}finally{}n=PN(e,t,i,r),n!==null&&(i=Ko(),cl(n,e,r,i),XN(n,t,r))}}function HN(e){var t=e.alternate;return e===Tr||t!==null&&t===Tr}function ZN(e,t){Kg=nx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function XN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gE(e,n)}}var rx={readContext:Pa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},y6={readContext:Pa,useCallback:function(e,t){return jl().memoizedState=[e,t===void 0?null:t],e},useContext:Pa,useEffect:qP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xv(4194308,4,$N.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xv(4194308,4,e,t)},useInsertionEffect:function(e,t){return xv(4,2,e,t)},useMemo:function(e,t){var n=jl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m6.bind(null,Tr,e),[r.memoizedState,e]},useRef:function(e){var t=jl();return e={current:e},t.memoizedState=e},useState:GP,useDebugValue:BE,useDeferredValue:function(e){return jl().memoizedState=e},useTransition:function(){var e=GP(!1),t=e[0];return e=f6.bind(null,e[1]),jl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Tr,i=jl();if(fr){if(n===void 0)throw Error(Qe(407));n=n()}else{if(n=t(),Gi===null)throw Error(Qe(349));Ip&30||NN(r,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,qP(DN.bind(null,r,l,e),[e]),r.flags|=2048,Sy(9,RN.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=jl(),t=Gi.identifierPrefix;if(fr){var n=ku,r=Au;n=(r&~(1<<32-ul(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=by++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=d6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_6={readContext:Pa,useCallback:UN,useContext:Pa,useEffect:FE,useImperativeHandle:VN,useInsertionEffect:BN,useLayoutEffect:jN,useMemo:GN,useReducer:Ow,useRef:FN,useState:function(){return Ow(wy)},useDebugValue:BE,useDeferredValue:function(e){var t=La();return qN(t,Si.memoizedState,e)},useTransition:function(){var e=Ow(wy)[0],t=La().memoizedState;return[e,t]},useMutableSource:AN,useSyncExternalStore:kN,useId:WN,unstable_isNewReconciler:!1},v6={readContext:Pa,useCallback:UN,useContext:Pa,useEffect:FE,useImperativeHandle:VN,useInsertionEffect:BN,useLayoutEffect:jN,useMemo:GN,useReducer:zw,useRef:FN,useState:function(){return zw(wy)},useDebugValue:BE,useDeferredValue:function(e){var t=La();return Si===null?t.memoizedState=e:qN(t,Si.memoizedState,e)},useTransition:function(){var e=zw(wy)[0],t=La().memoizedState;return[e,t]},useMutableSource:AN,useSyncExternalStore:kN,useId:WN,unstable_isNewReconciler:!1};function il(e,t){if(e&&e.defaultProps){t=Lr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function H2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Lr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qx={isMounted:function(e){return(e=e._reactInternals)?Up(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ko(),i=nh(e),l=Ou(r,i);l.payload=t,n!=null&&(l.callback=n),t=eh(e,l,i),t!==null&&(cl(t,e,i,r),_v(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ko(),i=nh(e),l=Ou(r,i);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=eh(e,l,i),t!==null&&(cl(t,e,i,r),_v(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ko(),r=nh(e),i=Ou(n,r);i.tag=2,t!=null&&(i.callback=t),t=eh(e,i,r),t!==null&&(cl(t,e,r,n),_v(t,e,r))}};function WP(e,t,n,r,i,l,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,h):t.prototype&&t.prototype.isPureReactComponent?!my(n,r)||!my(i,l):!0}function KN(e,t,n){var r=!1,i=ch,l=t.contextType;return typeof l=="object"&&l!==null?l=Pa(l):(i=ds(t)?Ep:Lo.current,r=t.contextTypes,l=(r=r!=null)?bf(e,i):ch),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function HP(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qx.enqueueReplaceState(t,t.state,null)}function Z2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},AE(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Pa(l):(l=ds(t)?Ep:Lo.current,i.context=bf(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(H2(e,t,l,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qx.enqueueReplaceState(i,i.state,null),ex(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Cf(e,t){try{var n="",r=t;do n+=Hz(r),r=r.return;while(r);var i=n}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function Fw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function X2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var x6=typeof WeakMap=="function"?WeakMap:Map;function YN(e,t,n){n=Ou(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ox||(ox=!0,oS=r),X2(e,t)},n}function JN(e,t,n){n=Ou(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){X2(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){X2(e,t),typeof r!="function"&&(th===null?th=new Set([this]):th.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function ZP(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new x6;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=R6.bind(null,e,t,n),t.then(e,e))}function XP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function KP(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ou(-1,1),t.tag=2,eh(n,t,1))),n.lanes|=1),e)}var b6=oc.ReactCurrentOwner,hs=!1;function Ho(e,t,n,r){t.child=e===null?TN(t,null,n,r):Sf(t,e.child,n,r)}function YP(e,t,n,r,i){n=n.render;var l=t.ref;return ff(t,i),r=OE(e,t,n,r,l,i),n=zE(),e!==null&&!hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i)):(fr&&n&&EE(t),t.flags|=1,Ho(e,t,r,i),t.child)}function JP(e,t,n,r,i){if(e===null){var l=n.type;return typeof l=="function"&&!HE(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,QN(e,t,l,r,i)):(e=Ev(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var h=l.memoizedProps;if(n=n.compare,n=n!==null?n:my,n(h,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,e=rh(l,r),e.ref=t.ref,e.return=t,t.child=e}function QN(e,t,n,r,i){if(e!==null){var l=e.memoizedProps;if(my(l,r)&&e.ref===t.ref)if(hs=!1,t.pendingProps=r=l,(e.lanes&i)!==0)e.flags&131072&&(hs=!0);else return t.lanes=e.lanes,Wu(e,t,i)}return K2(e,t,n,r,i)}function e3(e,t,n){var r=t.pendingProps,i=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(rf,Ds),Ds|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Hn(rf,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Hn(rf,Ds),Ds|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Hn(rf,Ds),Ds|=r;return Ho(e,t,i,n),t.child}function t3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function K2(e,t,n,r,i){var l=ds(n)?Ep:Lo.current;return l=bf(t,l),ff(t,i),n=OE(e,t,n,r,l,i),r=zE(),e!==null&&!hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i)):(fr&&r&&EE(t),t.flags|=1,Ho(e,t,n,i),t.child)}function QP(e,t,n,r,i){if(ds(n)){var l=!0;Xv(t)}else l=!1;if(ff(t,i),t.stateNode===null)bv(e,t),KN(t,n,r),Z2(t,n,r,i),r=!0;else if(e===null){var h=t.stateNode,u=t.memoizedProps;h.props=u;var y=h.context,w=n.contextType;typeof w=="object"&&w!==null?w=Pa(w):(w=ds(n)?Ep:Lo.current,w=bf(t,w));var E=n.getDerivedStateFromProps,C=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";C||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(u!==r||y!==w)&&HP(t,h,r,w),Bc=!1;var T=t.memoizedState;h.state=T,ex(t,r,h,i),y=t.memoizedState,u!==r||T!==y||ps.current||Bc?(typeof E=="function"&&(H2(t,n,E,r),y=t.memoizedState),(u=Bc||WP(t,n,u,r,T,y,w))?(C||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=y),h.props=r,h.state=y,h.context=w,r=u):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,LN(e,t),u=t.memoizedProps,w=t.type===t.elementType?u:il(t.type,u),h.props=w,C=t.pendingProps,T=h.context,y=n.contextType,typeof y=="object"&&y!==null?y=Pa(y):(y=ds(n)?Ep:Lo.current,y=bf(t,y));var R=n.getDerivedStateFromProps;(E=typeof R=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(u!==C||T!==y)&&HP(t,h,r,y),Bc=!1,T=t.memoizedState,h.state=T,ex(t,r,h,i);var O=t.memoizedState;u!==C||T!==O||ps.current||Bc?(typeof R=="function"&&(H2(t,n,R,r),O=t.memoizedState),(w=Bc||WP(t,n,w,r,T,O,y)||!1)?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,O,y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,O,y)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=O),h.props=r,h.state=O,h.context=y,r=w):(typeof h.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),r=!1)}return Y2(e,t,n,r,l,i)}function Y2(e,t,n,r,i,l){t3(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return i&&FP(t,n,!1),Wu(e,t,l);r=t.stateNode,b6.current=t;var u=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=Sf(t,e.child,null,l),t.child=Sf(t,null,u,l)):Ho(e,t,u,l),t.memoizedState=r.state,i&&FP(t,n,!0),t.child}function n3(e){var t=e.stateNode;t.pendingContext?zP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zP(e,t.context,!1),kE(e,t.containerInfo)}function eL(e,t,n,r,i){return wf(),IE(i),t.flags|=256,Ho(e,t,n,r),t.child}var J2={dehydrated:null,treeContext:null,retryLane:0};function Q2(e){return{baseLanes:e,cachePool:null,transitions:null}}function r3(e,t,n){var r=t.pendingProps,i=br.current,l=!1,h=(t.flags&128)!==0,u;if((u=h)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Hn(br,i&1),e===null)return q2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,l?(r=t.mode,l=t.child,h={mode:"hidden",children:h},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=Zx(h,r,0,null),e=wp(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Q2(n),t.memoizedState=J2,e):jE(t,h));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return w6(e,t,h,r,u,i,n);if(l){l=r.fallback,h=t.mode,i=e.child,u=i.sibling;var y={mode:"hidden",children:r.children};return!(h&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=y,t.deletions=null):(r=rh(i,y),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?l=rh(u,l):(l=wp(l,h,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,h=e.child.memoizedState,h=h===null?Q2(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=e.childLanes&~n,t.memoizedState=J2,r}return l=e.child,e=l.sibling,r=rh(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jE(e,t){return t=Zx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function q_(e,t,n,r){return r!==null&&IE(r),Sf(t,e.child,null,n),e=jE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w6(e,t,n,r,i,l,h){if(n)return t.flags&256?(t.flags&=-257,r=Fw(Error(Qe(422))),q_(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,i=t.mode,r=Zx({mode:"visible",children:r.children},i,0,null),l=wp(l,i,h,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Sf(t,e.child,null,h),t.child.memoizedState=Q2(h),t.memoizedState=J2,l);if(!(t.mode&1))return q_(e,t,h,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,l=Error(Qe(419)),r=Fw(l,r,void 0),q_(e,t,h,r)}if(u=(h&e.childLanes)!==0,hs||u){if(r=Gi,r!==null){switch(h&-h){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|h)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,qu(e,i),cl(r,e,i,-1))}return WE(),r=Fw(Error(Qe(421))),q_(e,t,h,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=D6.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,Fs=Qc(i.nextSibling),Bs=t,fr=!0,sl=null,e!==null&&(xa[ba++]=Au,xa[ba++]=ku,xa[ba++]=Cp,Au=e.id,ku=e.overflow,Cp=t),t=jE(t,r.children),t.flags|=4096,t)}function tL(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),W2(e.return,t,n)}function Bw(e,t,n,r,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function i3(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if(Ho(e,t,r.children,n),r=br.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tL(e,n,t);else if(e.tag===19)tL(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Hn(br,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&tx(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bw(t,!1,i,n,l);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&tx(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bw(t,!0,n,null,l);break;case"together":Bw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tp|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,n=rh(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rh(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function S6(e,t,n){switch(t.tag){case 3:n3(t),wf();break;case 5:MN(t);break;case 1:ds(t.type)&&Xv(t);break;case 4:kE(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Hn(Jv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Hn(br,br.current&1),t.flags|=128,null):n&t.child.childLanes?r3(e,t,n):(Hn(br,br.current&1),e=Wu(e,t,n),e!==null?e.sibling:null);Hn(br,br.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return i3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hn(br,br.current),r)break;return null;case 22:case 23:return t.lanes=0,e3(e,t,n)}return Wu(e,t,n)}var o3,eS,s3,a3;o3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eS=function(){};s3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_p(Kl.current);var l=null;switch(n){case"input":i=w2(e,i),r=w2(e,r),l=[];break;case"select":i=Lr({},i,{value:void 0}),r=Lr({},r,{value:void 0}),l=[];break;case"textarea":i=C2(e,i),r=C2(e,r),l=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hv)}T2(n,r);var h;n=null;for(w in i)if(!r.hasOwnProperty(w)&&i.hasOwnProperty(w)&&i[w]!=null)if(w==="style"){var u=i[w];for(h in u)u.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ly.hasOwnProperty(w)?l||(l=[]):(l=l||[]).push(w,null));for(w in r){var y=r[w];if(u=i!=null?i[w]:void 0,r.hasOwnProperty(w)&&y!==u&&(y!=null||u!=null))if(w==="style")if(u){for(h in u)!u.hasOwnProperty(h)||y&&y.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in y)y.hasOwnProperty(h)&&u[h]!==y[h]&&(n||(n={}),n[h]=y[h])}else n||(l||(l=[]),l.push(w,n)),n=y;else w==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,u=u?u.__html:void 0,y!=null&&u!==y&&(l=l||[]).push(w,y)):w==="children"?typeof y!="string"&&typeof y!="number"||(l=l||[]).push(w,""+y):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ly.hasOwnProperty(w)?(y!=null&&w==="onScroll"&&er("scroll",e),l||u===y||(l=[])):(l=l||[]).push(w,y))}n&&(l=l||[]).push("style",n);var w=l;(t.updateQueue=w)&&(t.flags|=4)}};a3=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pg(e,t){if(!fr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function wo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function E6(e,t,n){var r=t.pendingProps;switch(CE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wo(t),null;case 1:return ds(t.type)&&Zv(),wo(t),null;case 3:return r=t.stateNode,Ef(),tr(ps),tr(Lo),RE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(U_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sl!==null&&(lS(sl),sl=null))),eS(e,t),wo(t),null;case 5:NE(t);var i=_p(xy.current);if(n=t.type,e!==null&&t.stateNode!=null)s3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Qe(166));return wo(t),null}if(e=_p(Kl.current),U_(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Hl]=t,r[_y]=l,e=(t.mode&1)!==0,n){case"dialog":er("cancel",r),er("close",r);break;case"iframe":case"object":case"embed":er("load",r);break;case"video":case"audio":for(i=0;i<$g.length;i++)er($g[i],r);break;case"source":er("error",r);break;case"img":case"image":case"link":er("error",r),er("load",r);break;case"details":er("toggle",r);break;case"input":cP(r,l),er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},er("invalid",r);break;case"textarea":pP(r,l),er("invalid",r)}T2(n,l),i=null;for(var h in l)if(l.hasOwnProperty(h)){var u=l[h];h==="children"?typeof u=="string"?r.textContent!==u&&(l.suppressHydrationWarning!==!0&&V_(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(l.suppressHydrationWarning!==!0&&V_(r.textContent,u,e),i=["children",""+u]):ly.hasOwnProperty(h)&&u!=null&&h==="onScroll"&&er("scroll",r)}switch(n){case"input":R_(r),hP(r,l,!0);break;case"textarea":R_(r),dP(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Hv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[Hl]=t,e[_y]=r,o3(e,t,!1,!1),t.stateNode=e;e:{switch(h=P2(n,r),n){case"dialog":er("cancel",e),er("close",e),i=r;break;case"iframe":case"object":case"embed":er("load",e),i=r;break;case"video":case"audio":for(i=0;i<$g.length;i++)er($g[i],e);i=r;break;case"source":er("error",e),i=r;break;case"img":case"image":case"link":er("error",e),er("load",e),i=r;break;case"details":er("toggle",e),i=r;break;case"input":cP(e,r),i=w2(e,r),er("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Lr({},r,{value:void 0}),er("invalid",e);break;case"textarea":pP(e,r),i=C2(e,r),er("invalid",e);break;default:i=r}T2(n,i),u=i;for(l in u)if(u.hasOwnProperty(l)){var y=u[l];l==="style"?Fk(e,y):l==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&Ok(e,y)):l==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&uy(e,y):typeof y=="number"&&uy(e,""+y):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ly.hasOwnProperty(l)?y!=null&&l==="onScroll"&&er("scroll",e):y!=null&&cE(e,l,y,h))}switch(n){case"input":R_(e),hP(e,r,!1);break;case"textarea":R_(e),dP(e);break;case"option":r.value!=null&&e.setAttribute("value",""+uh(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?cf(e,!!r.multiple,l,!1):r.defaultValue!=null&&cf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Hv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wo(t),null;case 6:if(e&&t.stateNode!=null)a3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Qe(166));if(n=_p(xy.current),_p(Kl.current),U_(t)){if(r=t.stateNode,n=t.memoizedProps,r[Hl]=t,(l=r.nodeValue!==n)&&(e=Bs,e!==null))switch(e.tag){case 3:V_(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&V_(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hl]=t,t.stateNode=r}return wo(t),null;case 13:if(tr(br),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fr&&Fs!==null&&t.mode&1&&!(t.flags&128))CN(),wf(),t.flags|=98560,l=!1;else if(l=U_(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Qe(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Qe(317));l[Hl]=t}else wf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wo(t),l=!1}else sl!==null&&(lS(sl),sl=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||br.current&1?Ei===0&&(Ei=3):WE())),t.updateQueue!==null&&(t.flags|=4),wo(t),null);case 4:return Ef(),eS(e,t),e===null&&gy(t.stateNode.containerInfo),wo(t),null;case 10:return LE(t.type._context),wo(t),null;case 17:return ds(t.type)&&Zv(),wo(t),null;case 19:if(tr(br),l=t.memoizedState,l===null)return wo(t),null;if(r=(t.flags&128)!==0,h=l.rendering,h===null)if(r)Pg(l,!1);else{if(Ei!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=tx(e),h!==null){for(t.flags|=128,Pg(l,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,e=h.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Hn(br,br.current&1|2),t.child}e=e.sibling}l.tail!==null&&Yr()>If&&(t.flags|=128,r=!0,Pg(l,!1),t.lanes=4194304)}else{if(!r)if(e=tx(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pg(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!fr)return wo(t),null}else 2*Yr()-l.renderingStartTime>If&&n!==1073741824&&(t.flags|=128,r=!0,Pg(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(n=l.last,n!==null?n.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Yr(),t.sibling=null,n=br.current,Hn(br,r?n&1|2:n&1),t):(wo(t),null);case 22:case 23:return qE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ds&1073741824&&(wo(t),t.subtreeFlags&6&&(t.flags|=8192)):wo(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function C6(e,t){switch(CE(t),t.tag){case 1:return ds(t.type)&&Zv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ef(),tr(ps),tr(Lo),RE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NE(t),null;case 13:if(tr(br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));wf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tr(br),null;case 4:return Ef(),null;case 10:return LE(t.type._context),null;case 22:case 23:return qE(),null;case 24:return null;default:return null}}var W_=!1,Co=!1,I6=typeof WeakSet=="function"?WeakSet:Set,yt=null;function nf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$r(e,t,r)}else n.current=null}function tS(e,t,n){try{n()}catch(r){$r(e,t,r)}}var nL=!1;function T6(e,t){if(F2=Gv,e=pN(),SE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var h=0,u=-1,y=-1,w=0,E=0,C=e,T=null;t:for(;;){for(var R;C!==n||i!==0&&C.nodeType!==3||(u=h+i),C!==l||r!==0&&C.nodeType!==3||(y=h+r),C.nodeType===3&&(h+=C.nodeValue.length),(R=C.firstChild)!==null;)T=C,C=R;for(;;){if(C===e)break t;if(T===n&&++w===i&&(u=h),T===l&&++E===r&&(y=h),(R=C.nextSibling)!==null)break;C=T,T=C.parentNode}C=R}n=u===-1||y===-1?null:{start:u,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(B2={focusedElem:e,selectionRange:n},Gv=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){t=yt;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var B=O.memoizedProps,Y=O.memoizedState,$=t.stateNode,U=$.getSnapshotBeforeUpdate(t.elementType===t.type?B:il(t.type,B),Y);$.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(re){$r(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return O=nL,nL=!1,O}function Yg(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&tS(t,n,l)}i=i.next}while(i!==r)}}function Wx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nS(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function l3(e){var t=e.alternate;t!==null&&(e.alternate=null,l3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hl],delete t[_y],delete t[V2],delete t[u6],delete t[c6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function u3(e){return e.tag===5||e.tag===3||e.tag===4}function rL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||u3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hv));else if(r!==4&&(e=e.child,e!==null))for(rS(e,t,n),e=e.sibling;e!==null;)rS(e,t,n),e=e.sibling}function iS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(iS(e,t,n),e=e.sibling;e!==null;)iS(e,t,n),e=e.sibling}var oo=null,ol=!1;function Ac(e,t,n){for(n=n.child;n!==null;)c3(e,t,n),n=n.sibling}function c3(e,t,n){if(Xl&&typeof Xl.onCommitFiberUnmount=="function")try{Xl.onCommitFiberUnmount(Fx,n)}catch{}switch(n.tag){case 5:Co||nf(n,t);case 6:var r=oo,i=ol;oo=null,Ac(e,t,n),oo=r,ol=i,oo!==null&&(ol?(e=oo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):oo.removeChild(n.stateNode));break;case 18:oo!==null&&(ol?(e=oo,n=n.stateNode,e.nodeType===8?kw(e.parentNode,n):e.nodeType===1&&kw(e,n),dy(e)):kw(oo,n.stateNode));break;case 4:r=oo,i=ol,oo=n.stateNode.containerInfo,ol=!0,Ac(e,t,n),oo=r,ol=i;break;case 0:case 11:case 14:case 15:if(!Co&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&tS(n,t,h),i=i.next}while(i!==r)}Ac(e,t,n);break;case 1:if(!Co&&(nf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$r(n,t,u)}Ac(e,t,n);break;case 21:Ac(e,t,n);break;case 22:n.mode&1?(Co=(r=Co)||n.memoizedState!==null,Ac(e,t,n),Co=r):Ac(e,t,n);break;default:Ac(e,t,n)}}function iL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new I6),t.forEach(function(r){var i=O6.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=e,h=t,u=h;e:for(;u!==null;){switch(u.tag){case 5:oo=u.stateNode,ol=!1;break e;case 3:oo=u.stateNode.containerInfo,ol=!0;break e;case 4:oo=u.stateNode.containerInfo,ol=!0;break e}u=u.return}if(oo===null)throw Error(Qe(160));c3(l,h,i),oo=null,ol=!1;var y=i.alternate;y!==null&&(y.return=null),i.return=null}catch(w){$r(i,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)h3(t,e),t=t.sibling}function h3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rl(t,e),zl(e),r&4){try{Yg(3,e,e.return),Wx(3,e)}catch(B){$r(e,e.return,B)}try{Yg(5,e,e.return)}catch(B){$r(e,e.return,B)}}break;case 1:rl(t,e),zl(e),r&512&&n!==null&&nf(n,n.return);break;case 5:if(rl(t,e),zl(e),r&512&&n!==null&&nf(n,n.return),e.flags&32){var i=e.stateNode;try{uy(i,"")}catch(B){$r(e,e.return,B)}}if(r&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,h=n!==null?n.memoizedProps:l,u=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{u==="input"&&l.type==="radio"&&l.name!=null&&Nk(i,l),P2(u,h);var w=P2(u,l);for(h=0;h<y.length;h+=2){var E=y[h],C=y[h+1];E==="style"?Fk(i,C):E==="dangerouslySetInnerHTML"?Ok(i,C):E==="children"?uy(i,C):cE(i,E,C,w)}switch(u){case"input":S2(i,l);break;case"textarea":Rk(i,l);break;case"select":var T=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?cf(i,!!l.multiple,R,!1):T!==!!l.multiple&&(l.defaultValue!=null?cf(i,!!l.multiple,l.defaultValue,!0):cf(i,!!l.multiple,l.multiple?[]:"",!1))}i[_y]=l}catch(B){$r(e,e.return,B)}}break;case 6:if(rl(t,e),zl(e),r&4){if(e.stateNode===null)throw Error(Qe(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(B){$r(e,e.return,B)}}break;case 3:if(rl(t,e),zl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dy(t.containerInfo)}catch(B){$r(e,e.return,B)}break;case 4:rl(t,e),zl(e);break;case 13:rl(t,e),zl(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(UE=Yr())),r&4&&iL(e);break;case 22:if(E=n!==null&&n.memoizedState!==null,e.mode&1?(Co=(w=Co)||E,rl(t,e),Co=w):rl(t,e),zl(e),r&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!E&&e.mode&1)for(yt=e,E=e.child;E!==null;){for(C=yt=E;yt!==null;){switch(T=yt,R=T.child,T.tag){case 0:case 11:case 14:case 15:Yg(4,T,T.return);break;case 1:nf(T,T.return);var O=T.stateNode;if(typeof O.componentWillUnmount=="function"){r=T,n=T.return;try{t=r,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(B){$r(r,n,B)}}break;case 5:nf(T,T.return);break;case 22:if(T.memoizedState!==null){sL(C);continue}}R!==null?(R.return=T,yt=R):sL(C)}E=E.sibling}e:for(E=null,C=e;;){if(C.tag===5){if(E===null){E=C;try{i=C.stateNode,w?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(u=C.stateNode,y=C.memoizedProps.style,h=y!=null&&y.hasOwnProperty("display")?y.display:null,u.style.display=zk("display",h))}catch(B){$r(e,e.return,B)}}}else if(C.tag===6){if(E===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(B){$r(e,e.return,B)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;E===C&&(E=null),C=C.return}E===C&&(E=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:rl(t,e),zl(e),r&4&&iL(e);break;case 21:break;default:rl(t,e),zl(e)}}function zl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(u3(n)){var r=n;break e}n=n.return}throw Error(Qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uy(i,""),r.flags&=-33);var l=rL(e);iS(e,l,i);break;case 3:case 4:var h=r.stateNode.containerInfo,u=rL(e);rS(e,u,h);break;default:throw Error(Qe(161))}}catch(y){$r(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function P6(e,t,n){yt=e,p3(e)}function p3(e,t,n){for(var r=(e.mode&1)!==0;yt!==null;){var i=yt,l=i.child;if(i.tag===22&&r){var h=i.memoizedState!==null||W_;if(!h){var u=i.alternate,y=u!==null&&u.memoizedState!==null||Co;u=W_;var w=Co;if(W_=h,(Co=y)&&!w)for(yt=i;yt!==null;)h=yt,y=h.child,h.tag===22&&h.memoizedState!==null?aL(i):y!==null?(y.return=h,yt=y):aL(i);for(;l!==null;)yt=l,p3(l),l=l.sibling;yt=i,W_=u,Co=w}oL(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,yt=l):oL(e)}}function oL(e){for(;yt!==null;){var t=yt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Co||Wx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Co)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:il(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&UP(t,l,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}UP(t,h,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var E=w.memoizedState;if(E!==null){var C=E.dehydrated;C!==null&&dy(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}Co||t.flags&512&&nS(t)}catch(T){$r(t,t.return,T)}}if(t===e){yt=null;break}if(n=t.sibling,n!==null){n.return=t.return,yt=n;break}yt=t.return}}function sL(e){for(;yt!==null;){var t=yt;if(t===e){yt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,yt=n;break}yt=t.return}}function aL(e){for(;yt!==null;){var t=yt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wx(4,t)}catch(y){$r(t,n,y)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(y){$r(t,i,y)}}var l=t.return;try{nS(t)}catch(y){$r(t,l,y)}break;case 5:var h=t.return;try{nS(t)}catch(y){$r(t,h,y)}}}catch(y){$r(t,t.return,y)}if(t===e){yt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,yt=u;break}yt=t.return}}var L6=Math.ceil,ix=oc.ReactCurrentDispatcher,$E=oc.ReactCurrentOwner,Ca=oc.ReactCurrentBatchConfig,gn=0,Gi=null,hi=null,co=0,Ds=0,rf=Ph(0),Ei=0,Ey=null,Tp=0,Hx=0,VE=0,Jg=null,cs=null,UE=0,If=1/0,Lu=null,ox=!1,oS=null,th=null,H_=!1,Wc=null,sx=0,Qg=0,sS=null,wv=-1,Sv=0;function Ko(){return gn&6?Yr():wv!==-1?wv:wv=Yr()}function nh(e){return e.mode&1?gn&2&&co!==0?co&-co:p6.transition!==null?(Sv===0&&(Sv=Kk()),Sv):(e=An,e!==0||(e=window.event,e=e===void 0?16:rN(e.type)),e):1}function cl(e,t,n,r){if(50<Qg)throw Qg=0,sS=null,Error(Qe(185));t0(e,n,r),(!(gn&2)||e!==Gi)&&(e===Gi&&(!(gn&2)&&(Hx|=n),Ei===4&&Vc(e,co)),fs(e,r),n===1&&gn===0&&!(t.mode&1)&&(If=Yr()+500,Ux&&Lh()))}function fs(e,t){var n=e.callbackNode;pF(e,t);var r=Uv(e,e===Gi?co:0);if(r===0)n!==null&&gP(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gP(n),t===1)e.tag===0?h6(lL.bind(null,e)):wN(lL.bind(null,e)),a6(function(){!(gn&6)&&Lh()}),n=null;else{switch(Yk(r)){case 1:n=mE;break;case 4:n=Zk;break;case 16:n=Vv;break;case 536870912:n=Xk;break;default:n=Vv}n=x3(n,d3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function d3(e,t){if(wv=-1,Sv=0,gn&6)throw Error(Qe(327));var n=e.callbackNode;if(mf()&&e.callbackNode!==n)return null;var r=Uv(e,e===Gi?co:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ax(e,r);else{t=r;var i=gn;gn|=2;var l=m3();(Gi!==e||co!==t)&&(Lu=null,If=Yr()+500,bp(e,t));do try{k6();break}catch(u){f3(e,u)}while(!0);PE(),ix.current=l,gn=i,hi!==null?t=0:(Gi=null,co=0,t=Ei)}if(t!==0){if(t===2&&(i=N2(e),i!==0&&(r=i,t=aS(e,i))),t===1)throw n=Ey,bp(e,0),Vc(e,r),fs(e,Yr()),n;if(t===6)Vc(e,r);else{if(i=e.current.alternate,!(r&30)&&!M6(i)&&(t=ax(e,r),t===2&&(l=N2(e),l!==0&&(r=l,t=aS(e,l))),t===1))throw n=Ey,bp(e,0),Vc(e,r),fs(e,Yr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Qe(345));case 2:dp(e,cs,Lu);break;case 3:if(Vc(e,r),(r&130023424)===r&&(t=UE+500-Yr(),10<t)){if(Uv(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ko(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$2(dp.bind(null,e,cs,Lu),t);break}dp(e,cs,Lu);break;case 4:if(Vc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var h=31-ul(r);l=1<<h,h=t[h],h>i&&(i=h),r&=~l}if(r=i,r=Yr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*L6(r/1960))-r,10<r){e.timeoutHandle=$2(dp.bind(null,e,cs,Lu),r);break}dp(e,cs,Lu);break;case 5:dp(e,cs,Lu);break;default:throw Error(Qe(329))}}}return fs(e,Yr()),e.callbackNode===n?d3.bind(null,e):null}function aS(e,t){var n=Jg;return e.current.memoizedState.isDehydrated&&(bp(e,t).flags|=256),e=ax(e,t),e!==2&&(t=cs,cs=n,t!==null&&lS(t)),e}function lS(e){cs===null?cs=e:cs.push.apply(cs,e)}function M6(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!dl(l(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t){for(t&=~VE,t&=~Hx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ul(t),r=1<<n;e[n]=-1,t&=~r}}function lL(e){if(gn&6)throw Error(Qe(327));mf();var t=Uv(e,0);if(!(t&1))return fs(e,Yr()),null;var n=ax(e,t);if(e.tag!==0&&n===2){var r=N2(e);r!==0&&(t=r,n=aS(e,r))}if(n===1)throw n=Ey,bp(e,0),Vc(e,t),fs(e,Yr()),n;if(n===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dp(e,cs,Lu),fs(e,Yr()),null}function GE(e,t){var n=gn;gn|=1;try{return e(t)}finally{gn=n,gn===0&&(If=Yr()+500,Ux&&Lh())}}function Pp(e){Wc!==null&&Wc.tag===0&&!(gn&6)&&mf();var t=gn;gn|=1;var n=Ca.transition,r=An;try{if(Ca.transition=null,An=1,e)return e()}finally{An=r,Ca.transition=n,gn=t,!(gn&6)&&Lh()}}function qE(){Ds=rf.current,tr(rf)}function bp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,s6(n)),hi!==null)for(n=hi.return;n!==null;){var r=n;switch(CE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zv();break;case 3:Ef(),tr(ps),tr(Lo),RE();break;case 5:NE(r);break;case 4:Ef();break;case 13:tr(br);break;case 19:tr(br);break;case 10:LE(r.type._context);break;case 22:case 23:qE()}n=n.return}if(Gi=e,hi=e=rh(e.current,null),co=Ds=t,Ei=0,Ey=null,VE=Hx=Tp=0,cs=Jg=null,yp!==null){for(t=0;t<yp.length;t++)if(n=yp[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var h=l.next;l.next=i,r.next=h}n.pending=r}yp=null}return e}function f3(e,t){do{var n=hi;try{if(PE(),vv.current=rx,nx){for(var r=Tr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nx=!1}if(Ip=0,Bi=Si=Tr=null,Kg=!1,by=0,$E.current=null,n===null||n.return===null){Ei=1,Ey=t,hi=null;break}e:{var l=e,h=n.return,u=n,y=t;if(t=co,u.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var w=y,E=u,C=E.tag;if(!(E.mode&1)&&(C===0||C===11||C===15)){var T=E.alternate;T?(E.updateQueue=T.updateQueue,E.memoizedState=T.memoizedState,E.lanes=T.lanes):(E.updateQueue=null,E.memoizedState=null)}var R=XP(h);if(R!==null){R.flags&=-257,KP(R,h,u,l,t),R.mode&1&&ZP(l,w,t),t=R,y=w;var O=t.updateQueue;if(O===null){var B=new Set;B.add(y),t.updateQueue=B}else O.add(y);break e}else{if(!(t&1)){ZP(l,w,t),WE();break e}y=Error(Qe(426))}}else if(fr&&u.mode&1){var Y=XP(h);if(Y!==null){!(Y.flags&65536)&&(Y.flags|=256),KP(Y,h,u,l,t),IE(Cf(y,u));break e}}l=y=Cf(y,u),Ei!==4&&(Ei=2),Jg===null?Jg=[l]:Jg.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var $=YN(l,y,t);VP(l,$);break e;case 1:u=y;var U=l.type,G=l.stateNode;if(!(l.flags&128)&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(th===null||!th.has(G)))){l.flags|=65536,t&=-t,l.lanes|=t;var re=JN(l,u,t);VP(l,re);break e}}l=l.return}while(l!==null)}y3(n)}catch(he){t=he,hi===n&&n!==null&&(hi=n=n.return);continue}break}while(!0)}function m3(){var e=ix.current;return ix.current=rx,e===null?rx:e}function WE(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Gi===null||!(Tp&268435455)&&!(Hx&268435455)||Vc(Gi,co)}function ax(e,t){var n=gn;gn|=2;var r=m3();(Gi!==e||co!==t)&&(Lu=null,bp(e,t));do try{A6();break}catch(i){f3(e,i)}while(!0);if(PE(),gn=n,ix.current=r,hi!==null)throw Error(Qe(261));return Gi=null,co=0,Ei}function A6(){for(;hi!==null;)g3(hi)}function k6(){for(;hi!==null&&!rF();)g3(hi)}function g3(e){var t=v3(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,t===null?y3(e):hi=t,$E.current=null}function y3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=C6(n,t),n!==null){n.flags&=32767,hi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ei=6,hi=null;return}}else if(n=E6(n,t,Ds),n!==null){hi=n;return}if(t=t.sibling,t!==null){hi=t;return}hi=t=e}while(t!==null);Ei===0&&(Ei=5)}function dp(e,t,n){var r=An,i=Ca.transition;try{Ca.transition=null,An=1,N6(e,t,n,r)}finally{Ca.transition=i,An=r}return null}function N6(e,t,n,r){do mf();while(Wc!==null);if(gn&6)throw Error(Qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(dF(e,l),e===Gi&&(hi=Gi=null,co=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||H_||(H_=!0,x3(Vv,function(){return mf(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ca.transition,Ca.transition=null;var h=An;An=1;var u=gn;gn|=4,$E.current=null,T6(e,n),h3(n,e),QF(B2),Gv=!!F2,B2=F2=null,e.current=n,P6(n),iF(),gn=u,An=h,Ca.transition=l}else e.current=n;if(H_&&(H_=!1,Wc=e,sx=i),l=e.pendingLanes,l===0&&(th=null),aF(n.stateNode),fs(e,Yr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ox)throw ox=!1,e=oS,oS=null,e;return sx&1&&e.tag!==0&&mf(),l=e.pendingLanes,l&1?e===sS?Qg++:(Qg=0,sS=e):Qg=0,Lh(),null}function mf(){if(Wc!==null){var e=Yk(sx),t=Ca.transition,n=An;try{if(Ca.transition=null,An=16>e?16:e,Wc===null)var r=!1;else{if(e=Wc,Wc=null,sx=0,gn&6)throw Error(Qe(331));var i=gn;for(gn|=4,yt=e.current;yt!==null;){var l=yt,h=l.child;if(yt.flags&16){var u=l.deletions;if(u!==null){for(var y=0;y<u.length;y++){var w=u[y];for(yt=w;yt!==null;){var E=yt;switch(E.tag){case 0:case 11:case 15:Yg(8,E,l)}var C=E.child;if(C!==null)C.return=E,yt=C;else for(;yt!==null;){E=yt;var T=E.sibling,R=E.return;if(l3(E),E===w){yt=null;break}if(T!==null){T.return=R,yt=T;break}yt=R}}}var O=l.alternate;if(O!==null){var B=O.child;if(B!==null){O.child=null;do{var Y=B.sibling;B.sibling=null,B=Y}while(B!==null)}}yt=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,yt=h;else e:for(;yt!==null;){if(l=yt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Yg(9,l,l.return)}var $=l.sibling;if($!==null){$.return=l.return,yt=$;break e}yt=l.return}}var U=e.current;for(yt=U;yt!==null;){h=yt;var G=h.child;if(h.subtreeFlags&2064&&G!==null)G.return=h,yt=G;else e:for(h=U;yt!==null;){if(u=yt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Wx(9,u)}}catch(he){$r(u,u.return,he)}if(u===h){yt=null;break e}var re=u.sibling;if(re!==null){re.return=u.return,yt=re;break e}yt=u.return}}if(gn=i,Lh(),Xl&&typeof Xl.onPostCommitFiberRoot=="function")try{Xl.onPostCommitFiberRoot(Fx,e)}catch{}r=!0}return r}finally{An=n,Ca.transition=t}}return!1}function uL(e,t,n){t=Cf(n,t),t=YN(e,t,1),e=eh(e,t,1),t=Ko(),e!==null&&(t0(e,1,t),fs(e,t))}function $r(e,t,n){if(e.tag===3)uL(e,e,n);else for(;t!==null;){if(t.tag===3){uL(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(th===null||!th.has(r))){e=Cf(n,e),e=JN(t,e,1),t=eh(t,e,1),e=Ko(),t!==null&&(t0(t,1,e),fs(t,e));break}}t=t.return}}function R6(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ko(),e.pingedLanes|=e.suspendedLanes&n,Gi===e&&(co&n)===n&&(Ei===4||Ei===3&&(co&130023424)===co&&500>Yr()-UE?bp(e,0):VE|=n),fs(e,t)}function _3(e,t){t===0&&(e.mode&1?(t=z_,z_<<=1,!(z_&130023424)&&(z_=4194304)):t=1);var n=Ko();e=qu(e,t),e!==null&&(t0(e,t,n),fs(e,n))}function D6(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_3(e,n)}function O6(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Qe(314))}r!==null&&r.delete(t),_3(e,n)}var v3;v3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ps.current)hs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return hs=!1,S6(e,t,n);hs=!!(e.flags&131072)}else hs=!1,fr&&t.flags&1048576&&SN(t,Yv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bv(e,t),e=t.pendingProps;var i=bf(t,Lo.current);ff(t,n),i=OE(null,t,r,e,i,n);var l=zE();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(r)?(l=!0,Xv(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,AE(t),i.updater=qx,t.stateNode=i,i._reactInternals=t,Z2(t,r,e,n),t=Y2(null,t,r,!0,l,n)):(t.tag=0,fr&&l&&EE(t),Ho(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bv(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=F6(r),e=il(r,e),i){case 0:t=K2(null,t,r,e,n);break e;case 1:t=QP(null,t,r,e,n);break e;case 11:t=YP(null,t,r,e,n);break e;case 14:t=JP(null,t,r,il(r.type,e),n);break e}throw Error(Qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:il(r,i),K2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:il(r,i),QP(e,t,r,i,n);case 3:e:{if(n3(t),e===null)throw Error(Qe(387));r=t.pendingProps,l=t.memoizedState,i=l.element,LN(e,t),ex(t,r,null,n);var h=t.memoizedState;if(r=h.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Cf(Error(Qe(423)),t),t=eL(e,t,r,n,i);break e}else if(r!==i){i=Cf(Error(Qe(424)),t),t=eL(e,t,r,n,i);break e}else for(Fs=Qc(t.stateNode.containerInfo.firstChild),Bs=t,fr=!0,sl=null,n=TN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wf(),r===i){t=Wu(e,t,n);break e}Ho(e,t,r,n)}t=t.child}return t;case 5:return MN(t),e===null&&q2(t),r=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,h=i.children,j2(r,i)?h=null:l!==null&&j2(r,l)&&(t.flags|=32),t3(e,t),Ho(e,t,h,n),t.child;case 6:return e===null&&q2(t),null;case 13:return r3(e,t,n);case 4:return kE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Sf(t,null,r,n):Ho(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:il(r,i),YP(e,t,r,i,n);case 7:return Ho(e,t,t.pendingProps,n),t.child;case 8:return Ho(e,t,t.pendingProps.children,n),t.child;case 12:return Ho(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,l=t.memoizedProps,h=i.value,Hn(Jv,r._currentValue),r._currentValue=h,l!==null)if(dl(l.value,h)){if(l.children===i.children&&!ps.current){t=Wu(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var u=l.dependencies;if(u!==null){h=l.child;for(var y=u.firstContext;y!==null;){if(y.context===r){if(l.tag===1){y=Ou(-1,n&-n),y.tag=2;var w=l.updateQueue;if(w!==null){w=w.shared;var E=w.pending;E===null?y.next=y:(y.next=E.next,E.next=y),w.pending=y}}l.lanes|=n,y=l.alternate,y!==null&&(y.lanes|=n),W2(l.return,n,t),u.lanes|=n;break}y=y.next}}else if(l.tag===10)h=l.type===t.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(Qe(341));h.lanes|=n,u=h.alternate,u!==null&&(u.lanes|=n),W2(h,n,t),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===t){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}Ho(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ff(t,n),i=Pa(i),r=r(i),t.flags|=1,Ho(e,t,r,n),t.child;case 14:return r=t.type,i=il(r,t.pendingProps),i=il(r.type,i),JP(e,t,r,i,n);case 15:return QN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:il(r,i),bv(e,t),t.tag=1,ds(r)?(e=!0,Xv(t)):e=!1,ff(t,n),KN(t,r,i),Z2(t,r,i,n),Y2(null,t,r,!0,e,n);case 19:return i3(e,t,n);case 22:return e3(e,t,n)}throw Error(Qe(156,t.tag))};function x3(e,t){return Hk(e,t)}function z6(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(e,t,n,r){return new z6(e,t,n,r)}function HE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F6(e){if(typeof e=="function")return HE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pE)return 11;if(e===dE)return 14}return 2}function rh(e,t){var n=e.alternate;return n===null?(n=Ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ev(e,t,n,r,i,l){var h=2;if(r=e,typeof e=="function")HE(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Hd:return wp(n.children,i,l,t);case hE:h=8,i|=8;break;case _2:return e=Ea(12,n,t,i|2),e.elementType=_2,e.lanes=l,e;case v2:return e=Ea(13,n,t,i),e.elementType=v2,e.lanes=l,e;case x2:return e=Ea(19,n,t,i),e.elementType=x2,e.lanes=l,e;case Mk:return Zx(n,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pk:h=10;break e;case Lk:h=9;break e;case pE:h=11;break e;case dE:h=14;break e;case Fc:h=16,r=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=Ea(h,n,t,i),t.elementType=e,t.type=r,t.lanes=l,t}function wp(e,t,n,r){return e=Ea(7,e,r,t),e.lanes=n,e}function Zx(e,t,n,r){return e=Ea(22,e,r,t),e.elementType=Mk,e.lanes=n,e.stateNode={isHidden:!1},e}function jw(e,t,n){return e=Ea(6,e,null,t),e.lanes=n,e}function $w(e,t,n){return t=Ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B6(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bw(0),this.expirationTimes=bw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ZE(e,t,n,r,i,l,h,u,y){return e=new B6(e,t,n,u,y),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ea(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},AE(l),e}function j6(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function b3(e){if(!e)return ch;e=e._reactInternals;e:{if(Up(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var n=e.type;if(ds(n))return bN(e,n,t)}return t}function w3(e,t,n,r,i,l,h,u,y){return e=ZE(n,r,!0,e,i,l,h,u,y),e.context=b3(null),n=e.current,r=Ko(),i=nh(n),l=Ou(r,i),l.callback=t??null,eh(n,l,i),e.current.lanes=i,t0(e,i,r),fs(e,r),e}function Xx(e,t,n,r){var i=t.current,l=Ko(),h=nh(i);return n=b3(n),t.context===null?t.context=n:t.pendingContext=n,t=Ou(l,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=eh(i,t,h),e!==null&&(cl(e,i,h,l),_v(e,i,h)),h}function lx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function XE(e,t){cL(e,t),(e=e.alternate)&&cL(e,t)}function $6(){return null}var S3=typeof reportError=="function"?reportError:function(e){console.error(e)};function KE(e){this._internalRoot=e}Kx.prototype.render=KE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));Xx(e,t,null,null)};Kx.prototype.unmount=KE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pp(function(){Xx(null,e,null,null)}),t[Gu]=null}};function Kx(e){this._internalRoot=e}Kx.prototype.unstable_scheduleHydration=function(e){if(e){var t=eN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$c.length&&t!==0&&t<$c[n].priority;n++);$c.splice(n,0,e),n===0&&nN(e)}};function YE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hL(){}function V6(e,t,n,r,i){if(i){if(typeof r=="function"){var l=r;r=function(){var w=lx(h);l.call(w)}}var h=w3(t,r,e,0,null,!1,!1,"",hL);return e._reactRootContainer=h,e[Gu]=h.current,gy(e.nodeType===8?e.parentNode:e),Pp(),h}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var w=lx(y);u.call(w)}}var y=ZE(e,0,!1,null,null,!1,!1,"",hL);return e._reactRootContainer=y,e[Gu]=y.current,gy(e.nodeType===8?e.parentNode:e),Pp(function(){Xx(t,y,n,r)}),y}function Jx(e,t,n,r,i){var l=n._reactRootContainer;if(l){var h=l;if(typeof i=="function"){var u=i;i=function(){var y=lx(h);u.call(y)}}Xx(t,h,e,i)}else h=V6(n,t,e,i,r);return lx(h)}Jk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jg(t.pendingLanes);n!==0&&(gE(t,n|1),fs(t,Yr()),!(gn&6)&&(If=Yr()+500,Lh()))}break;case 13:Pp(function(){var r=qu(e,1);if(r!==null){var i=Ko();cl(r,e,1,i)}}),XE(e,1)}};yE=function(e){if(e.tag===13){var t=qu(e,134217728);if(t!==null){var n=Ko();cl(t,e,134217728,n)}XE(e,134217728)}};Qk=function(e){if(e.tag===13){var t=nh(e),n=qu(e,t);if(n!==null){var r=Ko();cl(n,e,t,r)}XE(e,t)}};eN=function(){return An};tN=function(e,t){var n=An;try{return An=e,t()}finally{An=n}};M2=function(e,t,n){switch(t){case"input":if(S2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Vx(r);if(!i)throw Error(Qe(90));kk(r),S2(r,i)}}}break;case"textarea":Rk(e,n);break;case"select":t=n.value,t!=null&&cf(e,!!n.multiple,t,!1)}};$k=GE;Vk=Pp;var U6={usingClientEntryPoint:!1,Events:[r0,Yd,Vx,Bk,jk,GE]},Lg={findFiberByHostInstance:gp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G6={bundleType:Lg.bundleType,version:Lg.version,rendererPackageName:Lg.rendererPackageName,rendererConfig:Lg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qk(e),e===null?null:e.stateNode},findFiberByHostInstance:Lg.findFiberByHostInstance||$6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z_.isDisabled&&Z_.supportsFiber)try{Fx=Z_.inject(G6),Xl=Z_}catch{}}Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U6;Js.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YE(t))throw Error(Qe(200));return j6(e,t,null,n)};Js.createRoot=function(e,t){if(!YE(e))throw Error(Qe(299));var n=!1,r="",i=S3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ZE(e,1,!1,null,null,n,!1,r,i),e[Gu]=t.current,gy(e.nodeType===8?e.parentNode:e),new KE(t)};Js.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=qk(t),e=e===null?null:e.stateNode,e};Js.flushSync=function(e){return Pp(e)};Js.hydrate=function(e,t,n){if(!Yx(t))throw Error(Qe(200));return Jx(null,e,t,!0,n)};Js.hydrateRoot=function(e,t,n){if(!YE(e))throw Error(Qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,l="",h=S3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=w3(t,null,e,1,n??null,i,!1,l,h),e[Gu]=t.current,gy(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kx(t)};Js.render=function(e,t,n){if(!Yx(t))throw Error(Qe(200));return Jx(null,e,t,!1,n)};Js.unmountComponentAtNode=function(e){if(!Yx(e))throw Error(Qe(40));return e._reactRootContainer?(Pp(function(){Jx(null,null,e,!1,function(){e._reactRootContainer=null,e[Gu]=null})}),!0):!1};Js.unstable_batchedUpdates=GE;Js.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yx(n))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return Jx(e,t,n,!1,r)};Js.version="18.3.1-next-f1338f8080-20240426";function E3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E3)}catch(e){console.error(e)}}E3(),Ek.exports=Js;var q6=Ek.exports;const W6=rE(q6);var C3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pL=Du.createContext&&Du.createContext(C3),H6=["attr","size","title"];function Z6(e,t){if(e==null)return{};var n=X6(e,t),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)r=l[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function X6(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ux.apply(this,arguments)}function dL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(n),!0).forEach(function(r){K6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K6(e,t,n){return t=Y6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y6(e){var t=J6(e,"string");return typeof t=="symbol"?t:t+""}function J6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I3(e){return e&&e.map((t,n)=>Du.createElement(t.tag,cx({key:n},t.attr),I3(t.child)))}function Sl(e){return t=>Du.createElement(Q6,ux({attr:cx({},e.attr)},t),I3(e.child))}function Q6(e){var t=n=>{var{attr:r,size:i,title:l}=e,h=Z6(e,H6),u=i||n.size||"1em",y;return n.className&&(y=n.className),e.className&&(y=(y?y+" ":"")+e.className),Du.createElement("svg",ux({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,h,{className:y,style:cx(cx({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&Du.createElement("title",null,l),e.children)};return pL!==void 0?Du.createElement(pL.Consumer,null,n=>t(n)):t(C3)}function T3(e){return Sl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Facebook"},child:[{tag:"path",attr:{d:"M19.02,4.975A9.93,9.93,0,0,0,2.07,12,9.935,9.935,0,0,0,12,21.935a9.98,9.98,0,0,0,3.8-.75,10.189,10.189,0,0,0,3.22-2.16,9.934,9.934,0,0,0,0-14.05Zm-.7,13.34A8.921,8.921,0,0,1,13,20.885v-6.56h1.88a1,1,0,0,0,0-2H13V9.585a1,1,0,0,1,1-1h1.2a1,1,0,0,0,0-2H13.5a2.5,2.5,0,0,0-2.5,2.5v3.24H9.13a1,1,0,1,0,0,2H11v6.56a8.919,8.919,0,1,1,9.26-5.47A9.061,9.061,0,0,1,18.32,18.315Z"},child:[]}]}]})(e)}function eB(e){return Sl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Menu_Burger"},child:[{tag:"path",attr:{d:"M3.563,4.063c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.001c0.276,-0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.001Z"},child:[]},{tag:"path",attr:{d:"M3.563,12.501c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.002c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.002Z"},child:[]},{tag:"path",attr:{d:"M3.563,20.939c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.002c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.002Z"},child:[]}]}]})(e)}function tB(e){return Sl({tag:"svg",attr:{version:"1.1",id:"search",x:"0px",y:"0px",viewBox:"0 0 24 24",style:"enable-background:new 0 0 24 24;"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:`M20.031,20.79c0.46,0.46,1.17-0.25,0.71-0.7l-3.75-3.76c1.27-1.41,2.04-3.27,2.04-5.31
		c0-4.39-3.57-7.96-7.96-7.96s-7.96,3.57-7.96,7.96c0,4.39,3.57,7.96,7.96,7.96c1.98,0,3.81-0.73,5.21-1.94L20.031,20.79z
		 M4.11,11.02c0-3.84,3.13-6.96,6.96-6.96c3.84,0,6.96,3.12,6.96,6.96c0,3.84-3.12,6.96-6.96,6.96C7.24,17.98,4.11,14.86,4.11,11.02
		z`},child:[]}]}]})(e)}function P3(e){return Sl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Twitter"},child:[{tag:"path",attr:{d:"M19.913,5.322a1.034,1.034,0,0,1,.837,1.629L19.708,8.432c-.064,5.086-1.765,8.539-5.056,10.264A10.917,10.917,0,0,1,9.6,19.835a12.233,12.233,0,0,1-6.2-1.524.76.76,0,0,1-.317-.8.768.768,0,0,1,.63-.6,20.6,20.6,0,0,0,3.745-.886C2,13.5,3.19,7.824,3.71,6.081a1.028,1.028,0,0,1,1.729-.422,9.931,9.931,0,0,0,5.995,2.95A4.188,4.188,0,0,1,12.725,5.3a4.125,4.125,0,0,1,5.7.02ZM4.521,17.794c1.862.872,6.226,1.819,9.667.016,2.955-1.549,4.476-4.732,4.521-9.461a.771.771,0,0,1,.142-.436l1.081-1.538-.041-.053c-.518-.007-1.029-.014-1.55,0a.835.835,0,0,1-.547-.221,3.13,3.13,0,0,0-4.383-.072,3.174,3.174,0,0,0-.935,2.87.646.646,0,0,1-.154.545.591.591,0,0,1-.516.205A10.924,10.924,0,0,1,4.722,6.354c-.67,2.078-1.52,7.094,3.869,9.065a.632.632,0,0,1,.416.538.625.625,0,0,1-.3.6A13.178,13.178,0,0,1,4.521,17.794ZM11.875,8.65h0Zm7.793-.161,0,0Z"},child:[]}]}]})(e)}function nB(e){return Sl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368 144 144m224 0L144 368"},child:[]}]})(e)}function rB(e){return Sl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0 0 25.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"192",r:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(e)}function L3(e){return Sl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M336 208v-95a80 80 0 0 0-160 0v95"},child:[]},{tag:"rect",attr:{width:"320",height:"272",x:"96",y:"208",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"},child:[]}]})(e)}const Mg="font-light sm:text-l tracking-wider md:text-xl lg:text-2xl",iB="sm:text-xl md:text-xl tracking-wider lg:text-2xl",o0=be.createContext(),oB=({children:e})=>{const[t,n]=be.useState(!1),[r,i]=be.useState(!1),[l,h]=be.useState(!1),[u,y]=be.useState(!1),w=()=>{n(!0)},E=()=>{n(!1)},C=()=>{i(!0)},T=()=>{i(!1)},R=()=>{h(!0)},O=()=>{h(!1)},B=()=>{y(!0)},Y=()=>{y(!1)};return j.jsx(o0.Provider,{value:{isLoggedIn:t,login:w,logout:E,togglePopup:C,showPopup:r,toggleDownPopup:T,showLogOutPopup:l,toggleLogOutPopup:R,toggleDownLogOutPopup:O,showSignUpPopup:u,toggleSignUpPopup:B,toggleDownSignUpPopup:Y},children:e})};function fL(e){return Sl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(e)}const sB=()=>{const{isLoggedIn:e,logout:t,toggleLogOutPopup:n}=be.useContext(o0),[r,i]=be.useState(!1),[l,h]=be.useState(!1);be.useEffect(()=>{const w=()=>{window.scrollY>50?h(!0):h(!1)},E=()=>{window.innerWidth>1e3&&i(!1)};return E(),window.addEventListener("scroll",w),window.addEventListener("resize",E),()=>{window.removeEventListener("scroll",w),window.removeEventListener("resize",E)}},[]);const u=()=>{i(!r)},y=()=>{t(),n()};return j.jsx(j.Fragment,{children:j.jsx("div",{className:"z-20 border border-gray-300 border-3",children:j.jsxs("div",{className:`z-10 w-full flex justify-between px-10 py-3 text-semibold text-4xl border border-white shadow-lg whitespace-nowrap max-md:flex-wrap bg-red-50  text-black  ${l?"fixed top-0":""}`,children:[j.jsx("div",{className:"relative flex-auto my-auto",children:j.jsx("a",{href:"/",className:"cursor-pointer",children:"SEHARI"})}),j.jsx("div",{className:"hidden lg:flex flex-col",children:j.jsx("div",{className:"flex flex-col justify-center items-end px-5 py-3 w-full text-3xl font-lightwhitespace-nowrap  max-md:px-5 max-md:max-w-full",children:j.jsxs("div",{className:"flex gap-5 justify-between",children:[j.jsx("a",{href:"/services",className:`flex-auto cursor-pointer full-width-underline subtitle ${Mg}`,children:"Services"}),e?j.jsxs("div",{className:"flex flex-row",children:[j.jsx("p",{className:`flex-auto cursor-pointer full-width-underline subtitle mr-5 ${Mg}`,onClick:y,children:"logout"}),j.jsx(fL,{className:"cursor-pointer"})]}):j.jsx("a",{href:"/login",className:`flex-auto cursor-pointer full-width-underline subtitle ${Mg}`,children:"Login"})]})})}),j.jsx("div",{className:"lg:hidden z-10",children:j.jsx("div",{children:j.jsxs("div",{className:"drawer drawer-end",children:[j.jsx("input",{id:"my-drawer-4",type:"checkbox",className:"drawer-toggle"}),j.jsx("div",{className:"drawer-content",children:j.jsx("label",{htmlFor:"my-drawer-4",className:"drawer-button",children:j.jsx(eB,{onClick:u,className:"cursor-pointer"})})}),j.jsxs("div",{onClick:u,className:"drawer-side",children:[j.jsx("label",{htmlFor:"my-drawer-4","aria-label":"close sidebar",className:"drawer-overlay"}),j.jsxs("ul",{className:"cursor-pointer flex flex-col p-4 w-80 h-full bg-light-color text-base-content",children:[j.jsx("div",{className:"",children:j.jsx(nB,{})}),j.jsxs("div",{className:"flex justify-between  h-1/4 w-full items-center flex-col",children:[j.jsx("li",{children:e?j.jsx("a",{href:"/",className:`flex-auto cursor-pointer subtitle ${Mg}`,children:j.jsx(fL,{})}):j.jsx("a",{href:"/login",className:`flex-auto cursor-pointer full-width-underline text-2xl subtitle ${Mg}`,children:"Login"})}),j.jsxs("li",{children:[" ",j.jsx("a",{href:"/services",className:"flex-auto cursor-pointer pb-2  full-width-underline text-2xl title",children:"Services"})]}),j.jsx("li",{children:e?j.jsx("a",{href:"/",className:"flex-auto cursor-pointer pb-2 full-width-underline text-2xl title",onClick:y,children:"logout"}):""})]})]})]})]})})})]})})})},M3=()=>j.jsxs("div",{className:"mt-16",children:[j.jsxs("footer",{className:"footer  p-10 text-xl title bg-base-200 text-base-content",children:[j.jsxs("nav",{children:[j.jsx("h6",{className:"footer-title",children:"Services"}),j.jsx("a",{className:"link link-hover",children:"Branding"}),j.jsx("a",{className:"link link-hover",children:"Design"}),j.jsx("a",{className:"link link-hover",children:"Marketing"}),j.jsx("a",{className:"link link-hover",children:"Advertisement"})]}),j.jsxs("nav",{children:[j.jsx("h6",{className:"footer-title",children:"Company"}),j.jsx("a",{className:"link link-hover",children:"About us"}),j.jsx("a",{className:"link link-hover",children:"Contact"}),j.jsx("a",{className:"link link-hover",children:"Jobs"}),j.jsx("a",{className:"link link-hover",children:"Press kit"})]}),j.jsxs("nav",{children:[j.jsx("h6",{className:"footer-title",children:"Legal"}),j.jsx("a",{className:"link link-hover",children:"Terms of use"}),j.jsx("a",{className:"link link-hover",children:"Privacy policy"}),j.jsx("a",{className:"link link-hover",children:"Cookie policy"})]})]}),j.jsxs("footer",{className:"footer px-10 py-4 border-t bg-base-200 text-base-content border-base-300",children:[j.jsxs("aside",{className:"items-center grid-flow-col",children:[j.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",className:"fill-current",children:j.jsx("path",{d:"M22.672 15.226l-2.432.811.841 2.515c.33 1.019-.209 2.127-1.23 2.456-1.15.325-2.148-.321-2.463-1.226l-.84-2.518-5.013 1.677.84 2.517c.391 1.203-.434 2.542-1.831 2.542-.88 0-1.601-.564-1.86-1.314l-.842-2.516-2.431.809c-1.135.328-2.145-.317-2.463-1.229-.329-1.018.211-2.127 1.231-2.456l2.432-.809-1.621-4.823-2.432.808c-1.355.384-2.558-.59-2.558-1.839 0-.817.509-1.582 1.327-1.846l2.433-.809-.842-2.515c-.33-1.02.211-2.129 1.232-2.458 1.02-.329 2.13.209 2.461 1.229l.842 2.515 5.011-1.677-.839-2.517c-.403-1.238.484-2.553 1.843-2.553.819 0 1.585.509 1.85 1.326l.841 2.517 2.431-.81c1.02-.33 2.131.211 2.461 1.229.332 1.018-.21 2.126-1.23 2.456l-2.433.809 1.622 4.823 2.433-.809c1.242-.401 2.557.484 2.557 1.838 0 .819-.51 1.583-1.328 1.847m-8.992-6.428l-5.01 1.675 1.619 4.828 5.011-1.674-1.62-4.829z"})}),j.jsxs("p",{children:["Sehari  ",j.jsx("br",{}),"A reliable event searching platform website since 2010"]})]}),j.jsx("nav",{className:"md:place-self-center md:justify-self-end",children:j.jsxs("div",{className:"grid grid-flow-col gap-4",children:[j.jsx("a",{children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:j.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),j.jsx("a",{children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:j.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),j.jsx("a",{children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:j.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})})]})]}),aB="/assets/testi1-DluTX3g_.jpg",lB="/assets/testi2-DfVNVS4C.jpg",uB=()=>j.jsxs("div",{children:[j.jsx("div",{className:"text-center text-3xl title ",children:"Our Testimonals"}),j.jsx("div",{className:"text-xl text-center title mt-4",children:"Hear from Our Customers"}),j.jsxs("div",{className:"flex flex-row flex-wrap gap-16  justify-center",children:[j.jsxs("div",{className:"lg:w-1/3 p-5",children:[j.jsxs("div",{className:`relative mt-16 h-[200px] p-10 leading-9 w-full flex border \r
        text-xl subtitle text-gray-700 font-extralight tracking-wide text-center\r
        items-center rounded-md justify-center bg-gray-50`,children:["Sehari made finding our dream venue effortless with detailed listings and easy contact. Highly recommend for stress-free event planning!",j.jsx("div",{className:"absolute -bottom-4 left-10 h-8 w-8 rotate-45 rounded border border-l-0 border-t-0 bg-gray-50"}),j.jsx("div",{className:"absolute -bottom-5 left-10 h-4 w-8 border border-b-gray-200 shadow-lg border-l-0 border-t-0 border-r-0"})]}),j.jsxs("div",{className:"mt-10 flex w-full flex-row items-center gap-20",children:[j.jsx("img",{src:aB,alt:"",className:"rounded-full w-32 h-32"}),j.jsxs("div",{className:"flex flex-1 h-full flex-col justify-center",children:[j.jsx("div",{className:"pb-5 great-vibes-regular text-2xl",children:"Lauren and Tyler"}),j.jsx("div",{className:"border w-1/2 border-b-black"}),j.jsx("div",{className:"pt-5 subtitle font-extralight text-gray-700",children:"Destination Wedding"})]})]})]}),j.jsxs("div",{className:"lg:w-1/3 p-5",children:[j.jsxs("div",{className:`relative mt-16 h-[200px] w-full p-10 leading-9 flex border items-center rounded-md \r
        text-xl subtitle text-gray-700 font-extralight tracking-wide text-center\r
        justify-center bg-gray-50`,children:["Sehari simplified our baby's birthday venue search with clear listings and easy contact options. Highly recommended for hassle-free party planning!",j.jsx("div",{className:"absolute -bottom-4 left-10 h-8 w-8 rotate-45 rounded border border-l-0 border-t-0 bg-gray-50"}),j.jsx("div",{className:"absolute -bottom-5 left-10 h-4 w-8 border border-b-gray-200 shadow-lg border-l-0 border-t-0 border-r-0"})]}),j.jsxs("div",{className:"mt-10 flex w-full flex-row items-center gap-5",children:[j.jsx("img",{src:lB,alt:"",className:"rounded-full w-32 h-32"}),j.jsxs("div",{className:"flex flex-1 h-full flex-col items-center justify-center",children:[j.jsx("div",{className:"pb-5 great-vibes-regular text-2xl",children:"Clara"}),j.jsx("div",{className:"border w-1/2 border-b-black"}),j.jsx("div",{className:"subtitle text-gray-700 pt-5 font-extralight",children:"Event type"})]})]})]})]}),j.jsx("div",{className:"flex justify-center",children:j.jsx("button",{className:`justify-center p-3 text-xl title rounded-xl whitespace-nowrap \r
        bg-button-color transition ease-in-out delay-150 focus:bg-blue-300 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5`,children:"show more "})})]}),JE=()=>{const[e,t]=be.useState([]),[n,r]=be.useState([]),[i,l]=be.useState(!0);return be.useEffect(()=>{(async()=>{try{const w=(await(await fetch(`http://localhost:5173/database/bestvenues`)).json()).filter(T=>cB(T));t(w);const C=await(await fetch(`http://localhost:5173/database/venuesiconsdata`)).json();r(C)}catch(u){console.error("Error in displaying data",u)}finally{l(!1)}})()},[]),[e,n,i]},cB=e=>e.image&&e.bgImage&&e.address&&e.country&&e.name&&e.description;var hB={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function A3(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return hB[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function X_(e){var t=A3(e);return"".concat(t.value).concat(t.unit)}var pB=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var l=i.sheet,h=`
    @keyframes `.concat(r,` {
      `).concat(t,`
    }
  `);return l&&l.insertRule(h,0),r},li=function(){return li=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},li.apply(this,arguments)},dB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},fB=pB("FadeLoader","50% {opacity: 0.3} 100% {opacity: 1}","fade");function mB(e){var t=e.loading,n=t===void 0?!0:t,r=e.color,i=r===void 0?"#000000":r,l=e.speedMultiplier,h=l===void 0?1:l,u=e.cssOverride,y=u===void 0?{}:u,w=e.height,E=w===void 0?15:w,C=e.width,T=C===void 0?5:C,R=e.radius,O=R===void 0?2:R,B=e.margin,Y=B===void 0?2:B,$=dB(e,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),U=A3(Y).value,G=U+18,re=G/2+G/5.5,he=li({display:"inherit",position:"relative",fontSize:"0",top:G,left:G,width:"".concat(G*3,"px"),height:"".concat(G*3,"px")},y),_e=function(Je){return{position:"absolute",width:X_(T),height:X_(E),margin:X_(Y),backgroundColor:i,borderRadius:X_(O),transition:"2s",animationFillMode:"both",animation:"".concat(fB," ").concat(1.2/h,"s ").concat(Je*.12,"s infinite ease-in-out")}},fe=li(li({},_e(1)),{top:"".concat(G,"px"),left:"0"}),ye=li(li({},_e(2)),{top:"".concat(re,"px"),left:"".concat(re,"px"),transform:"rotate(-45deg)"}),Pe=li(li({},_e(3)),{top:"0",left:"".concat(G,"px"),transform:"rotate(90deg)"}),De=li(li({},_e(4)),{top:"".concat(-1*re,"px"),left:"".concat(re,"px"),transform:"rotate(45deg)"}),Ue=li(li({},_e(5)),{top:"".concat(-1*G,"px"),left:"0"}),Ye=li(li({},_e(6)),{top:"".concat(-1*re,"px"),left:"".concat(-1*re,"px"),transform:"rotate(-45deg)"}),wt=li(li({},_e(7)),{top:"0",left:"".concat(-1*G,"px"),transform:"rotate(90deg)"}),Ae=li(li({},_e(8)),{top:"".concat(re,"px"),left:"".concat(-1*re,"px"),transform:"rotate(45deg)"});return n?be.createElement("span",li({style:he},$),be.createElement("span",{style:fe}),be.createElement("span",{style:ye}),be.createElement("span",{style:Pe}),be.createElement("span",{style:De}),be.createElement("span",{style:Ue}),be.createElement("span",{style:Ye}),be.createElement("span",{style:wt}),be.createElement("span",{style:Ae})):null}const QE=()=>j.jsx("div",{children:j.jsxs("div",{className:"flex lg:flex-row md:flex-col sm:flex-col gap-5 justify-center",children:[j.jsxs("div",{className:"flex flex-col gap-1 w-64",children:[j.jsx("div",{className:"skeleton h-32 w-full"}),j.jsx("div",{className:"skeleton h-16 w-full"})]}),j.jsxs("div",{className:"flex flex-col gap-1 w-64",children:[j.jsx("div",{className:"skeleton h-32 w-full"}),j.jsx("div",{className:"skeleton h-16 w-full"})]}),j.jsxs("div",{className:"flex flex-col gap-1 w-64",children:[j.jsx("div",{className:"skeleton h-32 w-full"}),j.jsx("div",{className:"skeleton h-16 w-full"})]})]})}),gB=()=>j.jsx("div",{className:"flex flex-row gap-5 items-center mt-16 justify-center",children:j.jsx(mB,{})}),mL=(e,t)=>({hidden:{x:e==="left"?80:e==="right"?-70:0,y:e==="up"?80:e==="down"?-80:0},show:{y:0,x:0,opacity:1,transition:{type:"tween",duration:.5,delay:t,ease:[.25,.25,.25,.75]}}});/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cy.apply(this,arguments)}var Hc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hc||(Hc={}));const gL="popstate";function yB(e){e===void 0&&(e={});function t(r,i){let{pathname:l,search:h,hash:u}=r.location;return uS("",{pathname:l,search:h,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hx(i)}return vB(t,n,null,e)}function fi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function k3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _B(){return Math.random().toString(36).substr(2,8)}function yL(e,t){return{usr:e.state,key:e.key,idx:t}}function uS(e,t,n,r){return n===void 0&&(n=null),Cy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Qf(t):t,{state:n,key:t&&t.key||r||_B()})}function hx(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Qf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vB(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,h=i.history,u=Hc.Pop,y=null,w=E();w==null&&(w=0,h.replaceState(Cy({},h.state,{idx:w}),""));function E(){return(h.state||{idx:null}).idx}function C(){u=Hc.Pop;let Y=E(),$=Y==null?null:Y-w;w=Y,y&&y({action:u,location:B.location,delta:$})}function T(Y,$){u=Hc.Push;let U=uS(B.location,Y,$);w=E()+1;let G=yL(U,w),re=B.createHref(U);try{h.pushState(G,"",re)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;i.location.assign(re)}l&&y&&y({action:u,location:B.location,delta:1})}function R(Y,$){u=Hc.Replace;let U=uS(B.location,Y,$);w=E();let G=yL(U,w),re=B.createHref(U);h.replaceState(G,"",re),l&&y&&y({action:u,location:B.location,delta:0})}function O(Y){let $=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof Y=="string"?Y:hx(Y);return U=U.replace(/ $/,"%20"),fi($,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,$)}let B={get action(){return u},get location(){return e(i,h)},listen(Y){if(y)throw new Error("A history only accepts one active listener");return i.addEventListener(gL,C),y=Y,()=>{i.removeEventListener(gL,C),y=null}},createHref(Y){return t(i,Y)},createURL:O,encodeLocation(Y){let $=O(Y);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:R,go(Y){return h.go(Y)}};return B}var _L;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_L||(_L={}));function xB(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Qf(t):t,i=eC(r.pathname||"/",n);if(i==null)return null;let l=N3(e);bB(l);let h=null;for(let u=0;h==null&&u<l.length;++u){let y=NB(i);h=MB(l[u],y)}return h}function N3(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(l,h,u)=>{let y={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};y.relativePath.startsWith("/")&&(fi(y.relativePath.startsWith(r),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(r.length));let w=ih([r,y.relativePath]),E=n.concat(y);l.children&&l.children.length>0&&(fi(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),N3(l.children,t,E,w)),!(l.path==null&&!l.index)&&t.push({path:w,score:PB(w,l.index),routesMeta:E})};return e.forEach((l,h)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,h);else for(let y of R3(l.path))i(l,h,y)}),t}function R3(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let h=R3(r.join("/")),u=[];return u.push(...h.map(y=>y===""?l:[l,y].join("/"))),i&&u.push(...h),u.map(y=>e.startsWith("/")&&y===""?"/":y)}function bB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:LB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wB=/^:[\w-]+$/,SB=3,EB=2,CB=1,IB=10,TB=-2,vL=e=>e==="*";function PB(e,t){let n=e.split("/"),r=n.length;return n.some(vL)&&(r+=TB),t&&(r+=EB),n.filter(i=>!vL(i)).reduce((i,l)=>i+(wB.test(l)?SB:l===""?CB:IB),r)}function LB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function MB(e,t){let{routesMeta:n}=e,r={},i="/",l=[];for(let h=0;h<n.length;++h){let u=n[h],y=h===n.length-1,w=i==="/"?t:t.slice(i.length)||"/",E=AB({path:u.relativePath,caseSensitive:u.caseSensitive,end:y},w);if(!E)return null;Object.assign(r,E.params);let C=u.route;l.push({params:r,pathname:ih([i,E.pathname]),pathnameBase:zB(ih([i,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(i=ih([i,E.pathnameBase]))}return l}function AB(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kB(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let l=i[0],h=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((w,E,C)=>{let{paramName:T,isOptional:R}=E;if(T==="*"){let B=u[C]||"";h=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const O=u[C];return R&&!O?w[T]=void 0:w[T]=(O||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:h,pattern:e}}function kB(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),k3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,u,y)=>(r.push({paramName:u,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function NB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return k3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function eC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function RB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Qf(e):e;return{pathname:n?n.startsWith("/")?n:DB(n,t):t,search:FB(r),hash:BB(i)}}function DB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function D3(e,t){let n=OB(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function O3(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Qf(e):(i=Cy({},e),fi(!i.pathname||!i.pathname.includes("?"),Vw("?","pathname","search",i)),fi(!i.pathname||!i.pathname.includes("#"),Vw("#","pathname","hash",i)),fi(!i.search||!i.search.includes("#"),Vw("#","search","hash",i)));let l=e===""||i.pathname==="",h=l?"/":i.pathname,u;if(h==null)u=n;else{let C=t.length-1;if(!r&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),C-=1;i.pathname=T.join("/")}u=C>=0?t[C]:"/"}let y=RB(i,u),w=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(w||E)&&(y.pathname+="/"),y}const ih=e=>e.join("/").replace(/\/\/+/g,"/"),zB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z3=["post","put","patch","delete"];new Set(z3);const $B=["get",...z3];new Set($B);/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}const tC=be.createContext(null),VB=be.createContext(null),Gp=be.createContext(null),Qx=be.createContext(null),qp=be.createContext({outlet:null,matches:[],isDataRoute:!1}),F3=be.createContext(null);function UB(e,t){let{relative:n}=t===void 0?{}:t;s0()||fi(!1);let{basename:r,navigator:i}=be.useContext(Gp),{hash:l,pathname:h,search:u}=j3(e,{relative:n}),y=h;return r!=="/"&&(y=h==="/"?r:ih([r,h])),i.createHref({pathname:y,search:u,hash:l})}function s0(){return be.useContext(Qx)!=null}function a0(){return s0()||fi(!1),be.useContext(Qx).location}function B3(e){be.useContext(Gp).static||be.useLayoutEffect(e)}function nC(){let{isDataRoute:e}=be.useContext(qp);return e?n8():GB()}function GB(){s0()||fi(!1);let e=be.useContext(tC),{basename:t,future:n,navigator:r}=be.useContext(Gp),{matches:i}=be.useContext(qp),{pathname:l}=a0(),h=JSON.stringify(D3(i,n.v7_relativeSplatPath)),u=be.useRef(!1);return B3(()=>{u.current=!0}),be.useCallback(function(w,E){if(E===void 0&&(E={}),!u.current)return;if(typeof w=="number"){r.go(w);return}let C=O3(w,JSON.parse(h),l,E.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:ih([t,C.pathname])),(E.replace?r.replace:r.push)(C,E.state,E)},[t,r,h,l,e])}function j3(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=be.useContext(Gp),{matches:i}=be.useContext(qp),{pathname:l}=a0(),h=JSON.stringify(D3(i,r.v7_relativeSplatPath));return be.useMemo(()=>O3(e,JSON.parse(h),l,n==="path"),[e,h,l,n])}function qB(e,t){return WB(e,t)}function WB(e,t,n,r){s0()||fi(!1);let{navigator:i}=be.useContext(Gp),{matches:l}=be.useContext(qp),h=l[l.length-1],u=h?h.params:{};h&&h.pathname;let y=h?h.pathnameBase:"/";h&&h.route;let w=a0(),E;if(t){var C;let Y=typeof t=="string"?Qf(t):t;y==="/"||(C=Y.pathname)!=null&&C.startsWith(y)||fi(!1),E=Y}else E=w;let T=E.pathname||"/",R=T;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");R="/"+T.replace(/^\//,"").split("/").slice(Y.length).join("/")}let O=xB(e,{pathname:R}),B=YB(O&&O.map(Y=>Object.assign({},Y,{params:Object.assign({},u,Y.params),pathname:ih([y,i.encodeLocation?i.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:ih([y,i.encodeLocation?i.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),l,n,r);return t&&B?be.createElement(Qx.Provider,{value:{location:Iy({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Hc.Pop}},B):B}function HB(){let e=t8(),t=jB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},t),n?be.createElement("pre",{style:i},n):null,null)}const ZB=be.createElement(HB,null);class XB extends be.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?be.createElement(qp.Provider,{value:this.props.routeContext},be.createElement(F3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KB(e){let{routeContext:t,match:n,children:r}=e,i=be.useContext(tC);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),be.createElement(qp.Provider,{value:t},r)}function YB(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if((l=n)!=null&&l.errors)e=n.matches;else return null}let h=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let E=h.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);E>=0||fi(!1),h=h.slice(0,Math.min(h.length,E+1))}let y=!1,w=-1;if(n&&r&&r.v7_partialHydration)for(let E=0;E<h.length;E++){let C=h[E];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(w=E),C.route.id){let{loaderData:T,errors:R}=n,O=C.route.loader&&T[C.route.id]===void 0&&(!R||R[C.route.id]===void 0);if(C.route.lazy||O){y=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}return h.reduceRight((E,C,T)=>{let R,O=!1,B=null,Y=null;n&&(R=u&&C.route.id?u[C.route.id]:void 0,B=C.route.errorElement||ZB,y&&(w<0&&T===0?(O=!0,Y=null):w===T&&(O=!0,Y=C.route.hydrateFallbackElement||null)));let $=t.concat(h.slice(0,T+1)),U=()=>{let G;return R?G=B:O?G=Y:C.route.Component?G=be.createElement(C.route.Component,null):C.route.element?G=C.route.element:G=E,be.createElement(KB,{match:C,routeContext:{outlet:E,matches:$,isDataRoute:n!=null},children:G})};return n&&(C.route.ErrorBoundary||C.route.errorElement||T===0)?be.createElement(XB,{location:n.location,revalidation:n.revalidation,component:B,error:R,children:U(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):U()},null)}var $3=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($3||{}),px=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(px||{});function JB(e){let t=be.useContext(tC);return t||fi(!1),t}function QB(e){let t=be.useContext(VB);return t||fi(!1),t}function e8(e){let t=be.useContext(qp);return t||fi(!1),t}function V3(e){let t=e8(),n=t.matches[t.matches.length-1];return n.route.id||fi(!1),n.route.id}function t8(){var e;let t=be.useContext(F3),n=QB(px.UseRouteError),r=V3(px.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function n8(){let{router:e}=JB($3.UseNavigateStable),t=V3(px.UseNavigateStable),n=be.useRef(!1);return B3(()=>{n.current=!0}),be.useCallback(function(i,l){l===void 0&&(l={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Iy({fromRouteId:t},l)))},[e,t])}function Bl(e){fi(!1)}function r8(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Hc.Pop,navigator:l,static:h=!1,future:u}=e;s0()&&fi(!1);let y=t.replace(/^\/*/,"/"),w=be.useMemo(()=>({basename:y,navigator:l,static:h,future:Iy({v7_relativeSplatPath:!1},u)}),[y,u,l,h]);typeof r=="string"&&(r=Qf(r));let{pathname:E="/",search:C="",hash:T="",state:R=null,key:O="default"}=r,B=be.useMemo(()=>{let Y=eC(E,y);return Y==null?null:{location:{pathname:Y,search:C,hash:T,state:R,key:O},navigationType:i}},[y,E,C,T,R,O,i]);return B==null?null:be.createElement(Gp.Provider,{value:w},be.createElement(Qx.Provider,{children:n,value:B}))}function i8(e){let{children:t,location:n}=e;return qB(cS(t),n)}new Promise(()=>{});function cS(e,t){t===void 0&&(t=[]);let n=[];return be.Children.forEach(e,(r,i)=>{if(!be.isValidElement(r))return;let l=[...t,i];if(r.type===be.Fragment){n.push.apply(n,cS(r.props.children,l));return}r.type!==Bl&&fi(!1),!r.props.index||!r.props.children||fi(!1);let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=cS(r.props.children,l)),n.push(h)}),n}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hS.apply(this,arguments)}function o8(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,l;for(l=0;l<r.length;l++)i=r[l],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function s8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function a8(e,t){return e.button===0&&(!t||t==="_self")&&!s8(e)}const l8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],u8="6";try{window.__reactRouterVersion=u8}catch{}const c8="startTransition",xL=Fv[c8];function h8(e){let{basename:t,children:n,future:r,window:i}=e,l=be.useRef();l.current==null&&(l.current=yB({window:i,v5Compat:!0}));let h=l.current,[u,y]=be.useState({action:h.action,location:h.location}),{v7_startTransition:w}=r||{},E=be.useCallback(C=>{w&&xL?xL(()=>y(C)):y(C)},[y,w]);return be.useLayoutEffect(()=>h.listen(E),[h,E]),be.createElement(r8,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:h,future:r})}const p8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f8=be.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:l,replace:h,state:u,target:y,to:w,preventScrollReset:E,unstable_viewTransition:C}=t,T=o8(t,l8),{basename:R}=be.useContext(Gp),O,B=!1;if(typeof w=="string"&&d8.test(w)&&(O=w,p8))try{let G=new URL(window.location.href),re=w.startsWith("//")?new URL(G.protocol+w):new URL(w),he=eC(re.pathname,R);re.origin===G.origin&&he!=null?w=he+re.search+re.hash:B=!0}catch{}let Y=UB(w,{relative:i}),$=m8(w,{replace:h,state:u,target:y,preventScrollReset:E,relative:i,unstable_viewTransition:C});function U(G){r&&r(G),G.defaultPrevented||$(G)}return be.createElement("a",hS({},T,{href:O||Y,onClick:B||l?r:U,ref:n,target:y}))});var bL;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bL||(bL={}));var wL;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wL||(wL={}));function m8(e,t){let{target:n,replace:r,state:i,preventScrollReset:l,relative:h,unstable_viewTransition:u}=t===void 0?{}:t,y=nC(),w=a0(),E=j3(e,{relative:h});return be.useCallback(C=>{if(a8(C,n)){C.preventDefault();let T=r!==void 0?r:hx(w)===hx(E);y(e,{replace:T,state:i,preventScrollReset:l,relative:h,unstable_viewTransition:u})}},[w,y,E,r,i,n,e,l,h,u])}const g8=e=>{const t=encodeURIComponent(JSON.stringify(e));return j.jsx(f8,{to:`/venuecard?venue=${t}`})},y8=()=>{const[e,t,n]=JE(),r=e.slice(0,3);return j.jsxs("div",{className:"-z-20 flex-col flex justify-center items-center px-16 py-20 bg-white max-md:px-5",children:[j.jsxs("div",{className:"flex flex-col items-center",children:[j.jsx("p",{className:"text-3xl  title",children:"Best Venues For Events"}),j.jsx("p",{className:"text-xl text-center  title mt-4",children:"Explore event spaces at these outstanding venues this month"})]}),j.jsx("div",{className:"-z-1 flex mt-10 w-full max-md:text-4xl",children:n?j.jsx("div",{className:"w-full flex justify-center items-center",children:j.jsx(QE,{})}):j.jsx("div",{className:"flex gap-5 lg:flex-row  items-center justify-center sm:flex-col md:flex-row flex-wrap overflow-hidden relative px-1.5 pt-10 w-full min-h-[464px] max-w-full",children:r.map(i=>j.jsxs("li",{onClick:g8(i),className:"bg-white shadow-xl cursor-pointer overflow-hidden  h-[500px] m-2 lg:w-[30%] md:w-[40%] sm:w-[90%] flex flex-row flex-wrap",children:[j.jsxs("div",{className:"w-full h-1/2 relative",children:[j.jsx("img",{src:i.bgImage,alt:i.name,className:"w-full h-full object-cover"}),j.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/1 p-2 backdrop-blur-sm flex items-center",children:j.jsx("div",{className:"flex justify-between items-center px-4 py-2",children:j.jsxs("div",{className:"flex items-center",children:[j.jsx("img",{src:i.image,alt:"",className:"w-6 h-6 mr-2"}),j.jsxs("div",{className:"text-xl max-w-xs",children:[i.address," ",i.country]})]})})})]}),j.jsxs("div",{className:"p-4  h-1/2  bg-white/10 flex flex-col items-center justify-center max-md:max-w-full",children:[j.jsxs("p",{className:"text-xl title tracking-wide pb-2 text-center",children:[i.name,j.jsx("br",{})]}),j.jsx("span",{className:"text-xl line-clamp-4 subtitle subColor font-extralight pt-2 tracking-wide text-center",children:i.description})]})]},i._id))})}),j.jsx("a",{href:"/displayallvenues",children:j.jsx("button",{className:`justify-center mt-10 p-3 text-xl title rounded-xl whitespace-nowrap \r
        bg-button-color transition ease-in-out delay-150 focus:bg-blue-300 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5`,children:"show more "})})]})};var e1={},U3={exports:{}},_8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v8=_8,x8=v8;function G3(){}function q3(){}q3.resetWarningCache=G3;var b8=function(){function e(r,i,l,h,u,y){if(y!==x8){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q3,resetWarningCache:G3};return n.PropTypes=n,n};U3.exports=b8();var W3=U3.exports,H3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var l="",h=0;h<arguments.length;h++){var u=arguments[h];u&&(l=i(l,r(u)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var h="";for(var u in l)t.call(l,u)&&l[u]&&(h=i(h,u));return h}function i(l,h){return h?l?l+" "+h:l+h:l}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(H3);var Z3=H3.exports;e1.__esModule=!0;e1.default=void 0;var w8=rC(be),kc=rC(W3),S8=rC(Z3);function rC(e){return e&&e.__esModule?e:{default:e}}const X3=({animate:e=!0,className:t="",layout:n="2-columns",lineColor:r="#FFF",children:i})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",r),w8.default.createElement("div",{className:(0,S8.default)(t,"vertical-timeline",{"vertical-timeline--animate":e,"vertical-timeline--two-columns":n==="2-columns","vertical-timeline--one-column-left":n==="1-column"||n==="1-column-left","vertical-timeline--one-column-right":n==="1-column-right"})},i));X3.propTypes={children:kc.default.oneOfType([kc.default.arrayOf(kc.default.node),kc.default.node]).isRequired,className:kc.default.string,animate:kc.default.bool,layout:kc.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:kc.default.string};var E8=X3;e1.default=E8;var t1={};function pS(){return pS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pS.apply(this,arguments)}function C8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dS(e,t)}function dS(e,t){return dS=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},dS(e,t)}function I8(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,l;for(l=0;l<r.length;l++)i=r[l],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var fS=new Map,K_=new WeakMap,SL=0,K3=void 0;function T8(e){K3=e}function P8(e){return e?(K_.has(e)||(SL+=1,K_.set(e,SL.toString())),K_.get(e)):"0"}function L8(e){return Object.keys(e).sort().filter(function(t){return e[t]!==void 0}).map(function(t){return t+"_"+(t==="root"?P8(e.root):e[t])}).toString()}function M8(e){var t=L8(e),n=fS.get(t);if(!n){var r=new Map,i,l=new IntersectionObserver(function(h){h.forEach(function(u){var y,w=u.isIntersecting&&i.some(function(E){return u.intersectionRatio>=E});e.trackVisibility&&typeof u.isVisible>"u"&&(u.isVisible=w),(y=r.get(u.target))==null||y.forEach(function(E){E(w,u)})})},e);i=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:l,elements:r},fS.set(t,n)}return n}function iC(e,t,n,r){if(n===void 0&&(n={}),r===void 0&&(r=K3),typeof window.IntersectionObserver>"u"&&r!==void 0){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var l=M8(n),h=l.id,u=l.observer,y=l.elements,w=y.get(e)||[];return y.has(e)||y.set(e,w),w.push(t),u.observe(e),function(){w.splice(w.indexOf(t),1),w.length===0&&(y.delete(e),u.unobserve(e)),y.size===0&&(u.disconnect(),fS.delete(h))}}var A8=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function EL(e){return typeof e.children!="function"}var dx=function(e){C8(t,e);function t(r){var i;return i=e.call(this,r)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(l){i.node&&(i.unobserve(),!l&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=l||null,i.observeNode()},i.handleChange=function(l,h){l&&i.props.triggerOnce&&i.unobserve(),EL(i.props)||i.setState({inView:l,entry:h}),i.props.onChange&&i.props.onChange(l,h)},i.state={inView:!!r.initialInView,entry:void 0},i}var n=t.prototype;return n.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},n.componentWillUnmount=function(){this.unobserve(),this.node=null},n.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,l=i.threshold,h=i.root,u=i.rootMargin,y=i.trackVisibility,w=i.delay,E=i.fallbackInView;this._unobserveCb=iC(this.node,this.handleChange,{threshold:l,root:h,rootMargin:u,trackVisibility:y,delay:w},E)}},n.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},n.render=function(){if(!EL(this.props)){var i=this.state,l=i.inView,h=i.entry;return this.props.children({inView:l,entry:h,ref:this.handleNode})}var u=this.props,y=u.children,w=u.as,E=I8(u,A8);return be.createElement(w||"div",pS({ref:this.handleNode},E),y)},t}(be.Component);dx.displayName="InView";dx.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function k8(e){var t=e===void 0?{}:e,n=t.threshold,r=t.delay,i=t.trackVisibility,l=t.rootMargin,h=t.root,u=t.triggerOnce,y=t.skip,w=t.initialInView,E=t.fallbackInView,C=be.useRef(),T=be.useState({inView:!!w}),R=T[0],O=T[1],B=be.useCallback(function($){C.current!==void 0&&(C.current(),C.current=void 0),!y&&$&&(C.current=iC($,function(U,G){O({inView:U,entry:G}),G.isIntersecting&&u&&C.current&&(C.current(),C.current=void 0)},{root:h,rootMargin:l,threshold:n,trackVisibility:i,delay:r},E))},[Array.isArray(n)?n.toString():n,h,l,u,y,i,E,r]);be.useEffect(function(){!C.current&&R.entry&&!u&&!y&&O({inView:!!w})});var Y=[B,R.inView,R.entry];return Y.ref=Y[0],Y.inView=Y[1],Y.entry=Y[2],Y}const N8=Object.freeze(Object.defineProperty({__proto__:null,InView:dx,default:dx,defaultFallbackInView:T8,observe:iC,useInView:k8},Symbol.toStringTag,{value:"Module"})),R8=au(N8);t1.__esModule=!0;t1.default=void 0;var Nc=oC(be),pr=oC(W3),Y_=oC(Z3),D8=R8;function oC(e){return e&&e.__esModule?e:{default:e}}const Y3=({children:e="",className:t="",contentArrowStyle:n=null,contentStyle:r=null,date:i="",dateClassName:l="",icon:h=null,iconClassName:u="",iconOnClick:y=null,onTimelineElementClick:w=null,iconStyle:E=null,id:C="",position:T="",style:R=null,textClassName:O="",intersectionObserverProps:B={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:Y=!1})=>Nc.default.createElement(D8.InView,B,({inView:$,ref:U})=>Nc.default.createElement("div",{ref:U,id:C,className:(0,Y_.default)(t,"vertical-timeline-element",{"vertical-timeline-element--left":T==="left","vertical-timeline-element--right":T==="right","vertical-timeline-element--no-children":e===""}),style:R},Nc.default.createElement(Nc.default.Fragment,null,Nc.default.createElement("span",{style:E,onClick:y,className:(0,Y_.default)(u,"vertical-timeline-element-icon",{"bounce-in":$||Y,"is-hidden":!($||Y)})},h),Nc.default.createElement("div",{style:r,onClick:w,className:(0,Y_.default)(O,"vertical-timeline-element-content",{"bounce-in":$||Y,"is-hidden":!($||Y)})},Nc.default.createElement("div",{style:n,className:"vertical-timeline-element-content-arrow"}),e,Nc.default.createElement("span",{className:(0,Y_.default)(l,"vertical-timeline-element-date")},i)))));Y3.propTypes={children:pr.default.oneOfType([pr.default.arrayOf(pr.default.node),pr.default.node]),className:pr.default.string,contentArrowStyle:pr.default.shape({}),contentStyle:pr.default.shape({}),date:pr.default.node,dateClassName:pr.default.string,icon:pr.default.element,iconClassName:pr.default.string,iconStyle:pr.default.shape({}),iconOnClick:pr.default.func,onTimelineElementClick:pr.default.func,id:pr.default.string,position:pr.default.string,style:pr.default.shape({}),textClassName:pr.default.string,visible:pr.default.bool,intersectionObserverProps:pr.default.shape({root:pr.default.object,rootMargin:pr.default.string,threshold:pr.default.number,triggerOnce:pr.default.bool})};var O8=Y3;t1.default=O8;var J_={VerticalTimeline:e1.default,VerticalTimelineElement:t1.default};const z8="/assets/bookEvent-B3qikGKB.png",F8="/assets/connect-DFnSFAzI.png",B8="/assets/location-CsDx8p4N.png",j8=()=>j.jsxs("div",{className:"flex flex-col pt-10 mt-10 pr-5 pb-10 pl-5 max-w-full",children:[j.jsxs("div",{className:"pb-10 flex flex-col items-center",children:[j.jsx("div",{className:"text-3xl title tracking-wider whitespace-nowrap",children:"How SEHARI Works"}),j.jsx("div",{className:"text-xl tracking-wide text-center title mt-7 ",children:"We helps you find your perfect venue by searching for what matters most to you."})]}),j.jsx("div",{className:"-z-10 title sm:text-2xl md:text-3xl lg:text-lg",children:j.jsxs(J_.VerticalTimeline,{children:[j.jsx(J_.VerticalTimelineElement,{date:"step 01",dateClassName:"",icon:j.jsx("img",{src:B8,alt:"Location",className:"p-1 bg-white"}),children:j.jsx("h3",{className:"text-xl text-center title mt-4 tracking-wide vertical-timeline-element-title",children:"search you event location all over the world"})}),j.jsx(J_.VerticalTimelineElement,{date:"step 02",icon:j.jsx("img",{src:F8,alt:"connect",className:"p-1 bg-white"}),children:j.jsx("h3",{className:"text-xl text-center title mt-4 tracking-wide vertical-timeline-element-title",children:"plan your event"})}),j.jsx(J_.VerticalTimelineElement,{date:"step 03",icon:j.jsx("img",{src:z8,alt:"bookEvent",className:"p-1 bg-white"}),children:j.jsx("h3",{className:"text-xl text-center title mt-4 tracking-wide  vertical-timeline-element-title",children:"connect through our agency from social media"})})]})})]}),J3=be.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),n1=be.createContext({}),sC=be.createContext(null),aC=typeof document<"u",$8=aC?be.useLayoutEffect:be.useEffect,Q3=be.createContext({strict:!1}),lC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),V8="framerAppearId",eR="data-"+lC(V8),U8={skipAnimations:!1,useManualTiming:!1};class CL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function G8(e){let t=new CL,n=new CL,r=0,i=!1,l=!1;const h=new WeakSet,u={schedule:(y,w=!1,E=!1)=>{const C=E&&i,T=C?t:n;return w&&h.add(y),T.add(y)&&C&&i&&(r=t.order.length),y},cancel:y=>{n.remove(y),h.delete(y)},process:y=>{if(i){l=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let w=0;w<r;w++){const E=t.order[w];h.has(E)&&(u.schedule(E),e()),E(y)}i=!1,l&&(l=!1,u.process(y))}};return u}const Q_=["read","resolveKeyframes","update","preRender","render","postRender"],q8=40;function tR(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=Q_.reduce((C,T)=>(C[T]=G8(()=>n=!0),C),{}),h=C=>{l[C].process(i)},u=()=>{const C=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,q8),1),i.timestamp=C,i.isProcessing=!0,Q_.forEach(h),i.isProcessing=!1,n&&t&&(r=!1,e(u))},y=()=>{n=!0,r=!0,i.isProcessing||e(u)};return{schedule:Q_.reduce((C,T)=>{const R=l[T];return C[T]=(O,B=!1,Y=!1)=>(n||y(),R.schedule(O,B,Y)),C},{}),cancel:C=>Q_.forEach(T=>l[T].cancel(C)),state:i,steps:l}}const{schedule:uC,cancel:DX}=tR(queueMicrotask,!1);function W8(e,t,n,r){const{visualElement:i}=be.useContext(n1),l=be.useContext(Q3),h=be.useContext(sC),u=be.useContext(J3).reducedMotion,y=be.useRef();r=r||l.renderer,!y.current&&r&&(y.current=r(e,{visualState:t,parent:i,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:u}));const w=y.current;be.useInsertionEffect(()=>{w&&w.update(n,h)});const E=be.useRef(!!(n[eR]&&!window.HandoffComplete));return $8(()=>{w&&(uC.postRender(w.render),E.current&&w.animationState&&w.animationState.animateChanges())}),be.useEffect(()=>{w&&(w.updateFeatures(),!E.current&&w.animationState&&w.animationState.animateChanges(),E.current&&(E.current=!1,window.HandoffComplete=!0))}),w}function of(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function H8(e,t,n){return be.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):of(n)&&(n.current=r))},[t])}function Ty(e){return typeof e=="string"||Array.isArray(e)}function r1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const cC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hC=["initial",...cC];function i1(e){return r1(e.animate)||hC.some(t=>Ty(e[t]))}function nR(e){return!!(i1(e)||e.variants)}function Z8(e,t){if(i1(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ty(n)?n:void 0,animate:Ty(r)?r:void 0}}return e.inherit!==!1?t:{}}function X8(e){const{initial:t,animate:n}=Z8(e,be.useContext(n1));return be.useMemo(()=>({initial:t,animate:n}),[IL(t),IL(n)])}function IL(e){return Array.isArray(e)?e.join(" "):e}const TL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Py={};for(const e in TL)Py[e]={isEnabled:t=>TL[e].some(n=>!!t[n])};function K8(e){for(const t in e)Py[t]={...Py[t],...e[t]}}const rR=be.createContext({}),iR=be.createContext({}),Y8=Symbol.for("motionComponentSymbol");function J8({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&K8(e);function l(u,y){let w;const E={...be.useContext(J3),...u,layoutId:Q8(u)},{isStatic:C}=E,T=X8(u),R=r(u,C);if(!C&&aC){T.visualElement=W8(i,R,E,t);const O=be.useContext(iR),B=be.useContext(Q3).strict;T.visualElement&&(w=T.visualElement.loadFeatures(E,B,e,O))}return j.jsxs(n1.Provider,{value:T,children:[w&&T.visualElement?j.jsx(w,{visualElement:T.visualElement,...E}):null,n(i,u,H8(R,T.visualElement,y),R,C,T.visualElement)]})}const h=be.forwardRef(l);return h[Y8]=i,h}function Q8({layoutId:e}){const t=be.useContext(rR).id;return t&&e!==void 0?t+"-"+e:e}function ej(e){function t(r,i={}){return J8(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const tj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pC(e){return typeof e!="string"||e.includes("-")?!1:!!(tj.indexOf(e)>-1||/[A-Z]/u.test(e))}const fx={};function nj(e){Object.assign(fx,e)}const l0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wp=new Set(l0);function oR(e,{layout:t,layoutId:n}){return Wp.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!fx[e]||e==="opacity")}const Io=e=>!!(e&&e.getVelocity),rj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ij=l0.length;function oj(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let l="";for(let h=0;h<ij;h++){const u=l0[h];if(e[u]!==void 0){const y=rj[u]||u;l+=`${y}(${e[u]}) `}}return t&&!e.z&&(l+="translateZ(0)"),l=l.trim(),i?l=i(e,r?"":l):n&&r&&(l="none"),l}const sR=e=>t=>typeof t=="string"&&t.startsWith(e),aR=sR("--"),sj=sR("var(--"),dC=e=>sj(e)?aj.test(e.split("/*")[0].trim()):!1,aj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lj=(e,t)=>t&&typeof e=="number"?t.transform(e):e,hh=(e,t,n)=>n>t?t:n<e?e:n,em={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ey={...em,transform:e=>hh(0,1,e)},ev={...em,default:1},ty=e=>Math.round(e*1e5)/1e5,fC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,uj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,cj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function u0(e){return typeof e=="string"}const c0=e=>({test:t=>u0(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zc=c0("deg"),Yl=c0("%"),zt=c0("px"),hj=c0("vh"),pj=c0("vw"),PL={...Yl,parse:e=>Yl.parse(e)/100,transform:e=>Yl.transform(e*100)},LL={...em,transform:Math.round},lR={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,size:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,rotate:zc,rotateX:zc,rotateY:zc,rotateZ:zc,scale:ev,scaleX:ev,scaleY:ev,scaleZ:ev,skew:zc,skewX:zc,skewY:zc,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:ey,originX:PL,originY:PL,originZ:zt,zIndex:LL,backgroundPositionX:zt,backgroundPositionY:zt,fillOpacity:ey,strokeOpacity:ey,numOctaves:LL};function mC(e,t,n,r){const{style:i,vars:l,transform:h,transformOrigin:u}=e;let y=!1,w=!1,E=!0;for(const C in t){const T=t[C];if(aR(C)){l[C]=T;continue}const R=lR[C],O=lj(T,R);if(Wp.has(C)){if(y=!0,h[C]=O,!E)continue;T!==(R.default||0)&&(E=!1)}else C.startsWith("origin")?(w=!0,u[C]=O):i[C]=O}if(t.transform||(y||r?i.transform=oj(e.transform,n,E,r):i.transform&&(i.transform="none")),w){const{originX:C="50%",originY:T="50%",originZ:R=0}=u;i.transformOrigin=`${C} ${T} ${R}`}}const gC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uR(e,t,n){for(const r in t)!Io(t[r])&&!oR(r,n)&&(e[r]=t[r])}function dj({transformTemplate:e},t,n){return be.useMemo(()=>{const r=gC();return mC(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function fj(e,t,n){const r=e.style||{},i={};return uR(i,r,e),Object.assign(i,dj(e,t,n)),i}function mj(e,t,n){const r={},i=fj(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const gj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||gj.has(e)}let cR=e=>!mx(e);function yj(e){e&&(cR=t=>t.startsWith("on")?!mx(t):e(t))}try{yj(require("@emotion/is-prop-valid").default)}catch{}function _j(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(cR(i)||n===!0&&mx(i)||!t&&!mx(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function ML(e,t,n){return typeof e=="string"?e:zt.transform(t+n*e)}function vj(e,t,n){const r=ML(t,e.x,e.width),i=ML(n,e.y,e.height);return`${r} ${i}`}const xj={offset:"stroke-dashoffset",array:"stroke-dasharray"},bj={offset:"strokeDashoffset",array:"strokeDasharray"};function wj(e,t,n=1,r=0,i=!0){e.pathLength=1;const l=i?xj:bj;e[l.offset]=zt.transform(-r);const h=zt.transform(t),u=zt.transform(n);e[l.array]=`${h} ${u}`}function yC(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:l,pathLength:h,pathSpacing:u=1,pathOffset:y=0,...w},E,C,T){if(mC(e,w,E,T),C){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:R,style:O,dimensions:B}=e;R.transform&&(B&&(O.transform=R.transform),delete R.transform),B&&(i!==void 0||l!==void 0||O.transform)&&(O.transformOrigin=vj(B,i!==void 0?i:.5,l!==void 0?l:.5)),t!==void 0&&(R.x=t),n!==void 0&&(R.y=n),r!==void 0&&(R.scale=r),h!==void 0&&wj(R,h,u,y,!1)}const hR=()=>({...gC(),attrs:{}}),_C=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Sj(e,t,n,r){const i=be.useMemo(()=>{const l=hR();return yC(l,t,{enableHardwareAcceleration:!1},_C(r),e.transformTemplate),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};uR(l,e.style,e),i.style={...l,...i.style}}return i}function Ej(e=!1){return(n,r,i,{latestValues:l},h)=>{const y=(pC(n)?Sj:mj)(r,l,h,n),w=_j(r,typeof n=="string",e),E=n!==be.Fragment?{...w,...y,ref:i}:{},{children:C}=r,T=be.useMemo(()=>Io(C)?C.get():C,[C]);return be.createElement(n,{...E,children:T})}}function pR(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const l in n)e.style.setProperty(l,n[l])}const dR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fR(e,t,n,r){pR(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(dR.has(i)?i:lC(i),t.attrs[i])}function vC(e,t,n){var r;const{style:i}=e,l={};for(const h in i)(Io(i[h])||t.style&&Io(t.style[h])||oR(h,e)||((r=n==null?void 0:n.getValue(h))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(l[h]=i[h]);return l}function mR(e,t,n){const r=vC(e,t,n);for(const i in e)if(Io(e[i])||Io(t[i])){const l=l0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[l]=e[i]}return r}function xC(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Cj(e){const t=be.useRef(null);return t.current===null&&(t.current=e()),t.current}const mS=e=>Array.isArray(e),Ij=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Tj=e=>mS(e)?e[e.length-1]||0:e;function Cv(e){const t=Io(e)?e.get():e;return Ij(t)?t.toValue():t}function Pj({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,l){const h={latestValues:Lj(r,i,l,e),renderState:t()};return n&&(h.mount=u=>n(r,u,h)),h}const gR=e=>(t,n)=>{const r=be.useContext(n1),i=be.useContext(sC),l=()=>Pj(e,t,r,i);return n?l():Cj(l)};function Lj(e,t,n,r){const i={},l=r(e,{});for(const T in l)i[T]=Cv(l[T]);let{initial:h,animate:u}=e;const y=i1(e),w=nR(e);t&&w&&!y&&e.inherit!==!1&&(h===void 0&&(h=t.initial),u===void 0&&(u=t.animate));let E=n?n.initial===!1:!1;E=E||h===!1;const C=E?u:h;return C&&typeof C!="boolean"&&!r1(C)&&(Array.isArray(C)?C:[C]).forEach(R=>{const O=xC(e,R);if(!O)return;const{transitionEnd:B,transition:Y,...$}=O;for(const U in $){let G=$[U];if(Array.isArray(G)){const re=E?G.length-1:0;G=G[re]}G!==null&&(i[U]=G)}for(const U in B)i[U]=B[U]}),i}const To=e=>e,{schedule:Zn,cancel:ph,state:so,steps:Uw}=tR(typeof requestAnimationFrame<"u"?requestAnimationFrame:To,!0),Mj={useVisualState:gR({scrapeMotionValuesFromProps:mR,createRenderState:hR,onMount:(e,t,{renderState:n,latestValues:r})=>{Zn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Zn.render(()=>{yC(n,r,{enableHardwareAcceleration:!1},_C(t.tagName),e.transformTemplate),fR(t,n)})}})},Aj={useVisualState:gR({scrapeMotionValuesFromProps:vC,createRenderState:gC})};function kj(e,{forwardMotionProps:t=!1},n,r){return{...pC(e)?Mj:Aj,preloadedFeatures:n,useRender:Ej(t),createVisualElement:r,Component:e}}function Nu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const yR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function o1(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const Nj=e=>t=>yR(t)&&e(t,o1(t));function zu(e,t,n,r){return Nu(e,t,Nj(n),r)}const Rj=(e,t)=>n=>t(e(n)),Fu=(...e)=>e.reduce(Rj);function _R(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const AL=_R("dragHorizontal"),kL=_R("dragVertical");function vR(e){let t=!1;if(e==="y")t=kL();else if(e==="x")t=AL();else{const n=AL(),r=kL();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function xR(){const e=vR(!0);return e?(e(),!1):!0}class Mh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function NL(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",i=(l,h)=>{if(l.pointerType==="touch"||xR())return;const u=e.getProps();e.animationState&&u.whileHover&&e.animationState.setActive("whileHover",t);const y=u[r];y&&Zn.postRender(()=>y(l,h))};return zu(e.current,n,i,{passive:!e.getProps()[r]})}class Dj extends Mh{mount(){this.unmount=Fu(NL(this.node,!0),NL(this.node,!1))}unmount(){}}class Oj extends Mh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fu(Nu(this.node.current,"focus",()=>this.onFocus()),Nu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const bR=(e,t)=>t?e===t?!0:bR(e,t.parentElement):!1;function Gw(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,o1(n))}class zj extends Mh{constructor(){super(...arguments),this.removeStartListeners=To,this.removeEndListeners=To,this.removeAccessibleListeners=To,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),l=zu(window,"pointerup",(u,y)=>{if(!this.checkPressEnd())return;const{onTap:w,onTapCancel:E,globalTapTarget:C}=this.node.getProps(),T=!C&&!bR(this.node.current,u.target)?E:w;T&&Zn.update(()=>T(u,y))},{passive:!(r.onTap||r.onPointerUp)}),h=zu(window,"pointercancel",(u,y)=>this.cancelPress(u,y),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Fu(l,h),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=l=>{if(l.key!=="Enter"||this.isPressing)return;const h=u=>{u.key!=="Enter"||!this.checkPressEnd()||Gw("up",(y,w)=>{const{onTap:E}=this.node.getProps();E&&Zn.postRender(()=>E(y,w))})};this.removeEndListeners(),this.removeEndListeners=Nu(this.node.current,"keyup",h),Gw("down",(u,y)=>{this.startPress(u,y)})},n=Nu(this.node.current,"keydown",t),r=()=>{this.isPressing&&Gw("cancel",(l,h)=>this.cancelPress(l,h))},i=Nu(this.node.current,"blur",r);this.removeAccessibleListeners=Fu(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Zn.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!xR()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Zn.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=zu(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Nu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fu(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gS=new WeakMap,qw=new WeakMap,Fj=e=>{const t=gS.get(e.target);t&&t(e)},Bj=e=>{e.forEach(Fj)};function jj({root:e,...t}){const n=e||document;qw.has(n)||qw.set(n,{});const r=qw.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Bj,{root:e,...t})),r[i]}function $j(e,t,n){const r=jj(t);return gS.set(e,n),r.observe(e),()=>{gS.delete(e),r.unobserve(e)}}const Vj={some:0,all:1};class Uj extends Mh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:l}=t,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Vj[i]},u=y=>{const{isIntersecting:w}=y;if(this.isInView===w||(this.isInView=w,l&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:E,onViewportLeave:C}=this.node.getProps(),T=w?E:C;T&&T(y)};return $j(this.node.current,h,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Gj(t,n))&&this.startObserver()}unmount(){}}function Gj({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const qj={inView:{Feature:Uj},tap:{Feature:zj},focus:{Feature:Oj},hover:{Feature:Dj}};function wR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Wj(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Hj(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function s1(e,t,n){const r=e.getProps();return xC(r,t,n!==void 0?n:r.custom,Wj(e),Hj(e))}const oh=e=>e*1e3,Bu=e=>e/1e3,Zj={type:"spring",stiffness:500,damping:25,restSpeed:10},Xj=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Kj={type:"keyframes",duration:.8},Yj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Jj=(e,{keyframes:t})=>t.length>2?Kj:Wp.has(e)?e.startsWith("scale")?Xj(t[1]):Zj:Yj;function Qj({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:l,repeatType:h,repeatDelay:u,from:y,elapsed:w,...E}){return!!Object.keys(E).length}function bC(e,t){return e[t]||e.default||e}const e$=e=>e!==null;function a1(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(e$),l=t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}let Iv;function t$(){Iv=void 0}const sh={now:()=>(Iv===void 0&&sh.set(so.isProcessing||U8.useManualTiming?so.timestamp:performance.now()),Iv),set:e=>{Iv=e,queueMicrotask(t$)}},SR=e=>/^0[^.\s]+$/u.test(e);function n$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||SR(e):!0}let yS=To;const ER=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),r$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i$(e){const t=r$.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function CR(e,t,n=1){const[r,i]=i$(e);if(!r)return;const l=window.getComputedStyle(t).getPropertyValue(r);if(l){const h=l.trim();return ER(h)?parseFloat(h):h}return dC(i)?CR(i,t,n+1):i}const o$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),RL=e=>e===em||e===zt,DL=(e,t)=>parseFloat(e.split(", ")[t]),OL=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return DL(i[1],t);{const l=r.match(/^matrix\((.+)\)$/u);return l?DL(l[1],e):0}},s$=new Set(["x","y","z"]),a$=l0.filter(e=>!s$.has(e));function l$(e){const t=[];return a$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Tf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:OL(4,13),y:OL(5,14)};Tf.translateX=Tf.x;Tf.translateY=Tf.y;const IR=e=>t=>t.test(e),u$={test:e=>e==="auto",parse:e=>e},TR=[em,zt,Yl,zc,pj,hj,u$],zL=e=>TR.find(IR(e)),Sp=new Set;let _S=!1,vS=!1;function PR(){if(vS){const e=Array.from(Sp).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=l$(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([l,h])=>{var u;(u=r.getValue(l))===null||u===void 0||u.set(h)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vS=!1,_S=!1,Sp.forEach(e=>e.complete()),Sp.clear()}function LR(){Sp.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vS=!0)})}function c$(){LR(),PR()}class wC{constructor(t,n,r,i,l,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=l,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sp.add(this),_S||(_S=!0,Zn.read(LR),Zn.resolveKeyframes(PR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let l=0;l<t.length;l++)if(t[l]===null)if(l===0){const h=i==null?void 0:i.get(),u=t[t.length-1];if(h!==void 0)t[0]=h;else if(r&&n){const y=r.readValue(n,u);y!=null&&(t[0]=y)}t[0]===void 0&&(t[0]=u),i&&h===void 0&&i.set(t[0])}else t[l]=t[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sp.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sp.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const SC=(e,t)=>n=>!!(u0(n)&&cj.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),MR=(e,t,n)=>r=>{if(!u0(r))return r;const[i,l,h,u]=r.match(fC);return{[e]:parseFloat(i),[t]:parseFloat(l),[n]:parseFloat(h),alpha:u!==void 0?parseFloat(u):1}},h$=e=>hh(0,255,e),Ww={...em,transform:e=>Math.round(h$(e))},vp={test:SC("rgb","red"),parse:MR("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ww.transform(e)+", "+Ww.transform(t)+", "+Ww.transform(n)+", "+ty(ey.transform(r))+")"};function p$(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const xS={test:SC("#"),parse:p$,transform:vp.transform},sf={test:SC("hsl","hue"),parse:MR("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Yl.transform(ty(t))+", "+Yl.transform(ty(n))+", "+ty(ey.transform(r))+")"},Eo={test:e=>vp.test(e)||xS.test(e)||sf.test(e),parse:e=>vp.test(e)?vp.parse(e):sf.test(e)?sf.parse(e):xS.parse(e),transform:e=>u0(e)?e:e.hasOwnProperty("red")?vp.transform(e):sf.transform(e)};function d$(e){var t,n;return isNaN(e)&&u0(e)&&(((t=e.match(fC))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(uj))===null||n===void 0?void 0:n.length)||0)>0}const AR="number",kR="color",f$="var",m$="var(",FL="${}",g$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gx(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let l=0;const u=t.replace(g$,y=>(Eo.test(y)?(r.color.push(l),i.push(kR),n.push(Eo.parse(y))):y.startsWith(m$)?(r.var.push(l),i.push(f$),n.push(y)):(r.number.push(l),i.push(AR),n.push(parseFloat(y))),++l,FL)).split(FL);return{values:n,split:u,indexes:r,types:i}}function NR(e){return gx(e).values}function RR(e){const{split:t,types:n}=gx(e),r=t.length;return i=>{let l="";for(let h=0;h<r;h++)if(l+=t[h],i[h]!==void 0){const u=n[h];u===AR?l+=ty(i[h]):u===kR?l+=Eo.transform(i[h]):l+=i[h]}return l}}const y$=e=>typeof e=="number"?0:e;function _$(e){const t=NR(e);return RR(e)(t.map(y$))}const dh={test:d$,parse:NR,createTransformer:RR,getAnimatableNone:_$},v$=new Set(["brightness","contrast","saturate","opacity"]);function x$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(fC)||[];if(!r)return e;const i=n.replace(r,"");let l=v$.has(t)?1:0;return r!==n&&(l*=100),t+"("+l+i+")"}const b$=/\b([a-z-]*)\(.*?\)/gu,bS={...dh,getAnimatableNone:e=>{const t=e.match(b$);return t?t.map(x$).join(" "):e}},w$={...lR,color:Eo,backgroundColor:Eo,outlineColor:Eo,fill:Eo,stroke:Eo,borderColor:Eo,borderTopColor:Eo,borderRightColor:Eo,borderBottomColor:Eo,borderLeftColor:Eo,filter:bS,WebkitFilter:bS},EC=e=>w$[e];function DR(e,t){let n=EC(e);return n!==bS&&(n=dh),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const S$=new Set(["auto","none","0"]);function E$(e,t,n){let r=0,i;for(;r<e.length&&!i;){const l=e[r];typeof l=="string"&&!S$.has(l)&&(i=e[r]),r++}if(i&&n)for(const l of t)e[l]=DR(n,i)}class OR extends wC{constructor(t,n,r,i){super(t,n,r,i,i==null?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n.current)return;super.readKeyframes();for(let y=0;y<t.length;y++){const w=t[y];if(typeof w=="string"&&dC(w)){const E=CR(w,n.current);E!==void 0&&(t[y]=E),y===t.length-1&&(this.finalKeyframe=w)}}if(this.resolveNoneKeyframes(),!o$.has(r)||t.length!==2)return;const[i,l]=t,h=zL(i),u=zL(l);if(h!==u)if(RL(h)&&RL(u))for(let y=0;y<t.length;y++){const w=t[y];typeof w=="string"&&(t[y]=parseFloat(w))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)n$(t[i])&&r.push(i);r.length&&E$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n.current)return;const l=n.getValue(r);l&&l.jump(this.measuredOrigin,!1);const h=i.length-1,u=i[h];i[h]=Tf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([y,w])=>{n.getValue(y).set(w)}),this.resolveNoneKeyframes()}}function C$(e){let t;return()=>(t===void 0&&(t=e()),t)}const BL=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(dh.test(e)||e==="0")&&!e.startsWith("url("));function I$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function T$(e,t,n,r){const i=e[0];if(i===null)return!1;const l=e[e.length-1],h=BL(i,t),u=BL(l,t);return!h||!u?!1:I$(e)||n==="spring"&&r}class zR{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:h="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:l,repeatType:h,...u},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&c$(),this._resolved}onKeyframesResolved(t,n){this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:l,delay:h,onComplete:u,onUpdate:y,isGenerator:w}=this.options;if(!w&&!T$(t,r,i,l))if(h)this.options.duration=0;else{y==null||y(a1(t,this.options,n)),u==null||u(),this.resolveFinishedPromise();return}const E=this.initPlayback(t,n);E!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...E},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function FR(e,t){return t?e*(1e3/t):0}const P$=5;function BR(e,t,n){const r=Math.max(t-P$,0);return FR(n-e(r),t-r)}const Hw=.001,L$=.01,M$=10,A$=.05,k$=1;function N$({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,l,h=1-t;h=hh(A$,k$,h),e=hh(L$,M$,Bu(e)),h<1?(i=w=>{const E=w*h,C=E*e,T=E-n,R=wS(w,h),O=Math.exp(-C);return Hw-T/R*O},l=w=>{const C=w*h*e,T=C*n+n,R=Math.pow(h,2)*Math.pow(w,2)*e,O=Math.exp(-C),B=wS(Math.pow(w,2),h);return(-i(w)+Hw>0?-1:1)*((T-R)*O)/B}):(i=w=>{const E=Math.exp(-w*e),C=(w-n)*e+1;return-Hw+E*C},l=w=>{const E=Math.exp(-w*e),C=(n-w)*(e*e);return E*C});const u=5/e,y=D$(i,l,u);if(e=oh(e),isNaN(y))return{stiffness:100,damping:10,duration:e};{const w=Math.pow(y,2)*r;return{stiffness:w,damping:h*2*Math.sqrt(r*w),duration:e}}}const R$=12;function D$(e,t,n){let r=n;for(let i=1;i<R$;i++)r=r-e(r)/t(r);return r}function wS(e,t){return e*Math.sqrt(1-t*t)}const O$=["duration","bounce"],z$=["stiffness","damping","mass"];function jL(e,t){return t.some(n=>e[n]!==void 0)}function F$(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!jL(e,z$)&&jL(e,O$)){const n=N$(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function jR({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],l=e[e.length-1],h={done:!1,value:i},{stiffness:u,damping:y,mass:w,duration:E,velocity:C,isResolvedFromDuration:T}=F$({...r,velocity:-Bu(r.velocity||0)}),R=C||0,O=y/(2*Math.sqrt(u*w)),B=l-i,Y=Bu(Math.sqrt(u/w)),$=Math.abs(B)<5;n||(n=$?.01:2),t||(t=$?.005:.5);let U;if(O<1){const G=wS(Y,O);U=re=>{const he=Math.exp(-O*Y*re);return l-he*((R+O*Y*B)/G*Math.sin(G*re)+B*Math.cos(G*re))}}else if(O===1)U=G=>l-Math.exp(-Y*G)*(B+(R+Y*B)*G);else{const G=Y*Math.sqrt(O*O-1);U=re=>{const he=Math.exp(-O*Y*re),_e=Math.min(G*re,300);return l-he*((R+O*Y*B)*Math.sinh(_e)+G*B*Math.cosh(_e))/G}}return{calculatedDuration:T&&E||null,next:G=>{const re=U(G);if(T)h.done=G>=E;else{let he=R;G!==0&&(O<1?he=BR(U,G,re):he=0);const _e=Math.abs(he)<=n,fe=Math.abs(l-re)<=t;h.done=_e&&fe}return h.value=h.done?l:re,h}}}function $L({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:h,min:u,max:y,restDelta:w=.5,restSpeed:E}){const C=e[0],T={done:!1,value:C},R=ye=>u!==void 0&&ye<u||y!==void 0&&ye>y,O=ye=>u===void 0?y:y===void 0||Math.abs(u-ye)<Math.abs(y-ye)?u:y;let B=n*t;const Y=C+B,$=h===void 0?Y:h(Y);$!==Y&&(B=$-C);const U=ye=>-B*Math.exp(-ye/r),G=ye=>$+U(ye),re=ye=>{const Pe=U(ye),De=G(ye);T.done=Math.abs(Pe)<=w,T.value=T.done?$:De};let he,_e;const fe=ye=>{R(T.value)&&(he=ye,_e=jR({keyframes:[T.value,O(T.value)],velocity:BR(G,ye,T.value),damping:i,stiffness:l,restDelta:w,restSpeed:E}))};return fe(0),{calculatedDuration:null,next:ye=>{let Pe=!1;return!_e&&he===void 0&&(Pe=!0,re(ye),fe(ye)),he!==void 0&&ye>=he?_e.next(ye-he):(!Pe&&re(ye),T)}}}const $R=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,B$=1e-7,j$=12;function $$(e,t,n,r,i){let l,h,u=0;do h=t+(n-t)/2,l=$R(h,r,i)-e,l>0?n=h:t=h;while(Math.abs(l)>B$&&++u<j$);return h}function h0(e,t,n,r){if(e===t&&n===r)return To;const i=l=>$$(l,0,1,e,n);return l=>l===0||l===1?l:$R(i(l),t,r)}const V$=h0(.42,0,1,1),U$=h0(0,0,.58,1),VR=h0(.42,0,.58,1),G$=e=>Array.isArray(e)&&typeof e[0]!="number",UR=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,GR=e=>t=>1-e(1-t),CC=e=>1-Math.sin(Math.acos(e)),qR=GR(CC),q$=UR(CC),WR=h0(.33,1.53,.69,.99),IC=GR(WR),W$=UR(IC),H$=e=>(e*=2)<1?.5*IC(e):.5*(2-Math.pow(2,-10*(e-1))),VL={linear:To,easeIn:V$,easeInOut:VR,easeOut:U$,circIn:CC,circInOut:q$,circOut:qR,backIn:IC,backInOut:W$,backOut:WR,anticipate:H$},UL=e=>{if(Array.isArray(e)){yS(e.length===4);const[t,n,r,i]=e;return h0(t,n,r,i)}else if(typeof e=="string")return yS(VL[e]!==void 0),VL[e];return e},Ly=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Cr=(e,t,n)=>e+(t-e)*n;function Zw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Z$({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,l=0,h=0;if(!t)i=l=h=n;else{const u=n<.5?n*(1+t):n+t-n*t,y=2*n-u;i=Zw(y,u,e+1/3),l=Zw(y,u,e),h=Zw(y,u,e-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(h*255),alpha:r}}const Xw=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},X$=[xS,vp,sf],K$=e=>X$.find(t=>t.test(e));function GL(e){const t=K$(e);let n=t.parse(e);return t===sf&&(n=Z$(n)),n}const qL=(e,t)=>{const n=GL(e),r=GL(t),i={...n};return l=>(i.red=Xw(n.red,r.red,l),i.green=Xw(n.green,r.green,l),i.blue=Xw(n.blue,r.blue,l),i.alpha=Cr(n.alpha,r.alpha,l),vp.transform(i))};function SS(e,t){return n=>n>0?t:e}function Y$(e,t){return n=>Cr(e,t,n)}function TC(e){return typeof e=="number"?Y$:typeof e=="string"?dC(e)?SS:Eo.test(e)?qL:eV:Array.isArray(e)?HR:typeof e=="object"?Eo.test(e)?qL:J$:SS}function HR(e,t){const n=[...e],r=n.length,i=e.map((l,h)=>TC(l)(l,t[h]));return l=>{for(let h=0;h<r;h++)n[h]=i[h](l);return n}}function J$(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=TC(e[i])(e[i],t[i]));return i=>{for(const l in r)n[l]=r[l](i);return n}}function Q$(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const h=t.types[l],u=e.indexes[h][i[h]],y=(n=e.values[u])!==null&&n!==void 0?n:0;r[l]=y,i[h]++}return r}const eV=(e,t)=>{const n=dh.createTransformer(t),r=gx(e),i=gx(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fu(HR(Q$(r,i),i.values),n):SS(e,t)};function ZR(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Cr(e,t,n):TC(e)(e,t)}function tV(e,t,n){const r=[],i=n||ZR,l=e.length-1;for(let h=0;h<l;h++){let u=i(e[h],e[h+1]);if(t){const y=Array.isArray(t)?t[h]||To:t;u=Fu(y,u)}r.push(u)}return r}function nV(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const l=e.length;if(yS(l===t.length),l===1)return()=>t[0];if(l===2&&e[0]===e[1])return()=>t[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=tV(t,r,i),u=h.length,y=w=>{let E=0;if(u>1)for(;E<e.length-2&&!(w<e[E+1]);E++);const C=Ly(e[E],e[E+1],w);return h[E](C)};return n?w=>y(hh(e[0],e[l-1],w)):y}function rV(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ly(0,t,r);e.push(Cr(n,1,i))}}function iV(e){const t=[0];return rV(t,e.length-1),t}function oV(e,t){return e.map(n=>n*t)}function sV(e,t){return e.map(()=>t||VR).splice(0,e.length-1)}function yx({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=G$(r)?r.map(UL):UL(r),l={done:!1,value:t[0]},h=oV(n&&n.length===t.length?n:iV(t),e),u=nV(h,t,{ease:Array.isArray(i)?i:sV(t,i)});return{calculatedDuration:e,next:y=>(l.value=u(y),l.done=y>=e,l)}}const WL=2e4;function aV(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<WL;)t+=n,r=e.next(t);return t>=WL?1/0:t}const lV=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Zn.update(t,!0),stop:()=>ph(t),now:()=>so.isProcessing?so.timestamp:sh.now()}},uV={decay:$L,inertia:$L,tween:yx,keyframes:yx,spring:jR},cV=e=>e/100;class PC extends zR{constructor({KeyframeResolver:t=wC,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:i,keyframes:l}=this.options,h=(u,y)=>this.onKeyframesResolved(u,y);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(l,h,r,i):this.resolver=new t(l,h,r,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:l,velocity:h=0}=this.options,u=uV[n]||yx;let y,w;u!==yx&&typeof t[0]!="number"&&(y=Fu(cV,ZR(t[0],t[1])),t=[0,100]);const E=u({...this.options,keyframes:t});l==="mirror"&&(w=u({...this.options,keyframes:[...t].reverse(),velocity:-h})),E.calculatedDuration===null&&(E.calculatedDuration=aV(E));const{calculatedDuration:C}=E,T=C+i,R=T*(r+1)-i;return{generator:E,mirroredGenerator:w,mapPercentToKeyframes:y,calculatedDuration:C,resolvedDuration:T,totalDuration:R}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:ye}=this.options;return{done:!0,value:ye[ye.length-1]}}const{finalKeyframe:i,generator:l,mirroredGenerator:h,mapPercentToKeyframes:u,keyframes:y,calculatedDuration:w,totalDuration:E,resolvedDuration:C}=r;if(this.startTime===null)return l.next(0);const{delay:T,repeat:R,repeatType:O,repeatDelay:B,onUpdate:Y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-E/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const $=this.currentTime-T*(this.speed>=0?1:-1),U=this.speed>=0?$<0:$>E;this.currentTime=Math.max($,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=E);let G=this.currentTime,re=l;if(R){const ye=Math.min(this.currentTime,E)/C;let Pe=Math.floor(ye),De=ye%1;!De&&ye>=1&&(De=1),De===1&&Pe--,Pe=Math.min(Pe,R+1),!!(Pe%2)&&(O==="reverse"?(De=1-De,B&&(De-=B/C)):O==="mirror"&&(re=h)),G=hh(0,1,De)*C}const he=U?{done:!1,value:y[0]}:re.next(G);u&&(he.value=u(he.value));let{done:_e}=he;!U&&w!==null&&(_e=this.speed>=0?this.currentTime>=E:this.currentTime<=0);const fe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_e);return fe&&i!==void 0&&(he.value=a1(y,this.options,i)),Y&&Y(he.value),fe&&this.finish(),he}get duration(){const{resolved:t}=this;return t?Bu(t.calculatedDuration):0}get time(){return Bu(this.currentTime)}set time(t){t=oh(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Bu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=lV,onPlay:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=r),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const XR=e=>Array.isArray(e)&&typeof e[0]=="number";function KR(e){return!!(!e||typeof e=="string"&&e in LC||XR(e)||Array.isArray(e)&&e.every(KR))}const Vg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,LC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vg([0,.65,.55,1]),circOut:Vg([.55,0,1,.45]),backIn:Vg([.31,.01,.66,-.59]),backOut:Vg([.33,1.53,.69,.99])};function hV(e){return YR(e)||LC.easeOut}function YR(e){if(e)return XR(e)?Vg(e):Array.isArray(e)?e.map(hV):LC[e]}function pV(e,t,n,{delay:r=0,duration:i=300,repeat:l=0,repeatType:h="loop",ease:u,times:y}={}){const w={[t]:n};y&&(w.offset=y);const E=YR(u);return Array.isArray(E)&&(w.easing=E),e.animate(w,{delay:r,duration:i,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:l+1,direction:h==="reverse"?"alternate":"normal"})}const dV=C$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fV=new Set(["opacity","clipPath","filter","transform"]),_x=10,mV=2e4;function gV(e){return e.type==="spring"||e.name==="backgroundColor"||!KR(e.ease)}function yV(e,t){const n=new PC({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let l=0;for(;!r.done&&l<mV;)r=n.sample(l),i.push(r.value),l+=_x;return{times:void 0,keyframes:i,duration:l-_x,ease:"linear"}}class HL extends zR{constructor(t){super(t);const{name:n,motionValue:r,keyframes:i}=this.options;this.resolver=new OR(i,(l,h)=>this.onKeyframesResolved(l,h),n,r),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:i=300,times:l,ease:h,type:u,motionValue:y,name:w}=this.options;if(!(!((r=y.owner)===null||r===void 0)&&r.current))return!1;if(gV(this.options)){const{onComplete:C,onUpdate:T,motionValue:R,...O}=this.options,B=yV(t,O);t=B.keyframes,t.length===1&&(t[1]=t[0]),i=B.duration,l=B.times,h=B.ease,u="keyframes"}const E=pV(y.owner.current,w,t,{...this.options,duration:i,times:l,ease:h});return E.startTime=sh.now(),this.pendingTimeline?(E.timeline=this.pendingTimeline,this.pendingTimeline=void 0):E.onfinish=()=>{const{onComplete:C}=this.options;y.set(a1(t,this.options,n)),C&&C(),this.cancel(),this.resolveFinishedPromise()},{animation:E,duration:i,times:l,type:u,ease:h,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Bu(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Bu(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=oh(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return To;const{animation:r}=n;r.timeline=t,r.onfinish=null}return To}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:l,ease:h,times:u}=t;if(!(n.playState==="idle"||n.playState==="finished")){if(this.time){const{motionValue:y,onUpdate:w,onComplete:E,...C}=this.options,T=new PC({...C,keyframes:r,duration:i,type:l,ease:h,times:u,isGenerator:!0}),R=oh(this.time);y.setWithVelocity(T.sample(R-_x).value,T.sample(R).value,_x)}this.cancel()}}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:l,damping:h,type:u}=t;return dV()&&r&&fV.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&l!=="mirror"&&h!==0&&u!=="inertia"}}const MC=(e,t,n,r={},i,l)=>h=>{const u=bC(r,e)||{},y=u.delay||r.delay||0;let{elapsed:w=0}=r;w=w-oh(y);let E={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-w,onUpdate:T=>{t.set(T),u.onUpdate&&u.onUpdate(T)},onComplete:()=>{h(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:l?void 0:i};Qj(u)||(E={...E,...Jj(e,E)}),E.duration&&(E.duration=oh(E.duration)),E.repeatDelay&&(E.repeatDelay=oh(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let C=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(E.duration=0,E.delay===0&&(C=!0)),C&&!l&&t.get()!==void 0){const T=a1(E.keyframes,u);if(T!==void 0){Zn.update(()=>{E.onUpdate(T),E.onComplete()});return}}return!l&&HL.supports(E)?new HL(E):new PC(E)};function vx(e){return!!(Io(e)&&e.add)}function AC(e,t){e.indexOf(t)===-1&&e.push(t)}function kC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class NC{constructor(){this.subscriptions=[]}add(t){return AC(this.subscriptions,t),()=>kC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let l=0;l<i;l++){const h=this.subscriptions[l];h&&h(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ZL=30,_V=e=>!isNaN(parseFloat(e));class vV{constructor(t,n={}){this.version="11.1.9",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{const l=sh.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=_V(this.current),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=sh.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new NC);const r=this.events[t].add(n);return t==="change"?()=>{r(),Zn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=sh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ZL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ZL);return FR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function My(e,t){return new vV(e,t)}function xV(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,My(n))}function bV(e,t){const n=s1(e,t);let{transitionEnd:r={},transition:i={},...l}=n||{};l={...l,...r};for(const h in l){const u=Tj(l[h]);xV(e,h,u)}}function wV({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function JR(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var l;let{transition:h=e.getDefaultTransition(),transitionEnd:u,...y}=t;const w=e.getValue("willChange");r&&(h=r);const E=[],C=i&&e.animationState&&e.animationState.getState()[i];for(const T in y){const R=e.getValue(T,(l=e.latestValues[T])!==null&&l!==void 0?l:null),O=y[T];if(O===void 0||C&&wV(C,T))continue;const B={delay:n,elapsed:0,...bC(h||{},T)};let Y=!1;if(window.HandoffAppearAnimations){const G=e.getProps()[eR];if(G){const re=window.HandoffAppearAnimations(G,T);re!==null&&(B.elapsed=re,Y=!0)}}R.start(MC(T,R,O,e.shouldReduceMotion&&Wp.has(T)?{type:!1}:B,e,Y));const $=R.animation;$&&(vx(w)&&(w.add(T),$.then(()=>w.remove(T))),E.push($))}return u&&Promise.all(E).then(()=>{Zn.update(()=>{u&&bV(e,u)})}),E}function ES(e,t,n={}){var r;const i=s1(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(l=n.transitionOverride);const h=i?()=>Promise.all(JR(e,i,n)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:E=0,staggerChildren:C,staggerDirection:T}=l;return SV(e,t,E+w,C,T,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[w,E]=y==="beforeChildren"?[h,u]:[u,h];return w().then(()=>E())}else return Promise.all([h(),u(n.delay)])}function SV(e,t,n=0,r=0,i=1,l){const h=[],u=(e.variantChildren.size-1)*r,y=i===1?(w=0)=>w*r:(w=0)=>u-w*r;return Array.from(e.variantChildren).sort(EV).forEach((w,E)=>{w.notify("AnimationStart",t),h.push(ES(w,t,{...l,delay:n+y(E)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(h)}function EV(e,t){return e.sortNodePosition(t)}function CV(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(l=>ES(e,l,n));r=Promise.all(i)}else if(typeof t=="string")r=ES(e,t,n);else{const i=typeof t=="function"?s1(e,t,n.custom):t;r=Promise.all(JR(e,i,n))}return r.then(()=>{Zn.postRender(()=>{e.notify("AnimationComplete",t)})})}const IV=[...cC].reverse(),TV=cC.length;function PV(e){return t=>Promise.all(t.map(({animation:n,options:r})=>CV(e,n,r)))}function LV(e){let t=PV(e);const n=AV();let r=!0;const i=y=>(w,E)=>{var C;const T=s1(e,E,y==="exit"?(C=e.presenceContext)===null||C===void 0?void 0:C.custom:void 0);if(T){const{transition:R,transitionEnd:O,...B}=T;w={...w,...B,...O}}return w};function l(y){t=y(e)}function h(y){const w=e.getProps(),E=e.getVariantContext(!0)||{},C=[],T=new Set;let R={},O=1/0;for(let Y=0;Y<TV;Y++){const $=IV[Y],U=n[$],G=w[$]!==void 0?w[$]:E[$],re=Ty(G),he=$===y?U.isActive:null;he===!1&&(O=Y);let _e=G===E[$]&&G!==w[$]&&re;if(_e&&r&&e.manuallyAnimateOnMount&&(_e=!1),U.protectedKeys={...R},!U.isActive&&he===null||!G&&!U.prevProp||r1(G)||typeof G=="boolean")continue;let ye=MV(U.prevProp,G)||$===y&&U.isActive&&!_e&&re||Y>O&&re,Pe=!1;const De=Array.isArray(G)?G:[G];let Ue=De.reduce(i($),{});he===!1&&(Ue={});const{prevResolvedValues:Ye={}}=U,wt={...Ye,...Ue},Ae=Je=>{ye=!0,T.has(Je)&&(Pe=!0,T.delete(Je)),U.needsAnimating[Je]=!0;const vt=e.getValue(Je);vt&&(vt.liveStyle=!1)};for(const Je in wt){const vt=Ue[Je],Gt=Ye[Je];if(R.hasOwnProperty(Je))continue;let Xe=!1;mS(vt)&&mS(Gt)?Xe=!wR(vt,Gt):Xe=vt!==Gt,Xe?vt!=null?Ae(Je):T.add(Je):vt!==void 0&&T.has(Je)?Ae(Je):U.protectedKeys[Je]=!0}U.prevProp=G,U.prevResolvedValues=Ue,U.isActive&&(R={...R,...Ue}),r&&e.blockInitialAnimation&&(ye=!1),ye&&(!_e||Pe)&&C.push(...De.map(Je=>({animation:Je,options:{type:$}})))}if(T.size){const Y={};T.forEach($=>{const U=e.getBaseTarget($),G=e.getValue($);G&&(G.liveStyle=!0),Y[$]=U??null}),C.push({animation:Y})}let B=!!C.length;return r&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(B=!1),r=!1,B?t(C):Promise.resolve()}function u(y,w){var E;if(n[y].isActive===w)return Promise.resolve();(E=e.variantChildren)===null||E===void 0||E.forEach(T=>{var R;return(R=T.animationState)===null||R===void 0?void 0:R.setActive(y,w)}),n[y].isActive=w;const C=h(y);for(const T in n)n[T].protectedKeys={};return C}return{animateChanges:h,setActive:u,setAnimateFunction:l,getState:()=>n}}function MV(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!wR(t,e):!1}function hp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AV(){return{animate:hp(!0),whileInView:hp(),whileHover:hp(),whileTap:hp(),whileDrag:hp(),whileFocus:hp(),exit:hp()}}class kV extends Mh{constructor(t){super(t),t.animationState||(t.animationState=LV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),r1(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let NV=0;class RV extends Mh{constructor(){super(...arguments),this.id=NV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const DV={animation:{Feature:kV},exit:{Feature:RV}},XL=(e,t)=>Math.abs(e-t);function OV(e,t){const n=XL(e.x,t.x),r=XL(e.y,t.y);return Math.sqrt(n**2+r**2)}class QR{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Yw(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,R=OV(C.offset,{x:0,y:0})>=3;if(!T&&!R)return;const{point:O}=C,{timestamp:B}=so;this.history.push({...O,timestamp:B});const{onStart:Y,onMove:$}=this.handlers;T||(Y&&Y(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),$&&$(this.lastMoveEvent,C)},this.handlePointerMove=(C,T)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Kw(T,this.transformPagePoint),Zn.update(this.updatePoint,!0)},this.handlePointerUp=(C,T)=>{this.end();const{onEnd:R,onSessionEnd:O,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Y=Yw(C.type==="pointercancel"?this.lastMoveEventInfo:Kw(T,this.transformPagePoint),this.history);this.startEvent&&R&&R(C,Y),O&&O(C,Y)},!yR(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const h=o1(t),u=Kw(h,this.transformPagePoint),{point:y}=u,{timestamp:w}=so;this.history=[{...y,timestamp:w}];const{onSessionStart:E}=n;E&&E(t,Yw(u,this.history)),this.removeListeners=Fu(zu(this.contextWindow,"pointermove",this.handlePointerMove),zu(this.contextWindow,"pointerup",this.handlePointerUp),zu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ph(this.updatePoint)}}function Kw(e,t){return t?{point:t(e.point)}:e}function KL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yw({point:e},t){return{point:e,delta:KL(e,e5(t)),offset:KL(e,zV(t)),velocity:FV(t,.1)}}function zV(e){return e[0]}function e5(e){return e[e.length-1]}function FV(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=e5(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>oh(t)));)n--;if(!r)return{x:0,y:0};const l=Bu(i.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const h={x:(i.x-r.x)/l,y:(i.y-r.y)/l};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function Gs(e){return e.max-e.min}function CS(e,t=0,n=.01){return Math.abs(e-t)<=n}function YL(e,t,n,r=.5){e.origin=r,e.originPoint=Cr(t.min,t.max,e.origin),e.scale=Gs(n)/Gs(t),(CS(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Cr(n.min,n.max,e.origin)-e.originPoint,(CS(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ny(e,t,n,r){YL(e.x,t.x,n.x,r?r.originX:void 0),YL(e.y,t.y,n.y,r?r.originY:void 0)}function JL(e,t,n){e.min=n.min+t.min,e.max=e.min+Gs(t)}function BV(e,t,n){JL(e.x,t.x,n.x),JL(e.y,t.y,n.y)}function QL(e,t,n){e.min=t.min-n.min,e.max=e.min+Gs(t)}function ry(e,t,n){QL(e.x,t.x,n.x),QL(e.y,t.y,n.y)}function jV(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Cr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Cr(n,e,r.max):Math.min(e,n)),e}function eM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function $V(e,{top:t,left:n,bottom:r,right:i}){return{x:eM(e.x,n,i),y:eM(e.y,t,r)}}function tM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function VV(e,t){return{x:tM(e.x,t.x),y:tM(e.y,t.y)}}function UV(e,t){let n=.5;const r=Gs(e),i=Gs(t);return i>r?n=Ly(t.min,t.max-r,e.min):r>i&&(n=Ly(e.min,e.max-i,t.min)),hh(0,1,n)}function GV(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const IS=.35;function qV(e=IS){return e===!1?e=0:e===!0&&(e=IS),{x:nM(e,"left","right"),y:nM(e,"top","bottom")}}function nM(e,t,n){return{min:rM(e,t),max:rM(e,n)}}function rM(e,t){return typeof e=="number"?e:e[t]||0}const iM=()=>({translate:0,scale:1,origin:0,originPoint:0}),af=()=>({x:iM(),y:iM()}),oM=()=>({min:0,max:0}),Xr=()=>({x:oM(),y:oM()});function ma(e){return[e("x"),e("y")]}function t5({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function WV({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function HV(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jw(e){return e===void 0||e===1}function TS({scale:e,scaleX:t,scaleY:n}){return!Jw(e)||!Jw(t)||!Jw(n)}function fp(e){return TS(e)||n5(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function n5(e){return sM(e.x)||sM(e.y)}function sM(e){return e&&e!=="0%"}function xx(e,t,n){const r=e-n,i=t*r;return n+i}function aM(e,t,n,r,i){return i!==void 0&&(e=xx(e,i,r)),xx(e,n,r)+t}function PS(e,t=0,n=1,r,i){e.min=aM(e.min,t,n,r,i),e.max=aM(e.max,t,n,r,i)}function r5(e,{x:t,y:n}){PS(e.x,t.translate,t.scale,t.originPoint),PS(e.y,n.translate,n.scale,n.originPoint)}function ZV(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let l,h;for(let u=0;u<i;u++){l=n[u],h=l.projectionDelta;const y=l.instance;y&&y.style&&y.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&lf(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,r5(e,h)),r&&fp(l.latestValues)&&lf(e,l.latestValues))}t.x=lM(t.x),t.y=lM(t.y)}function lM(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function jc(e,t){e.min=e.min+t,e.max=e.max+t}function uM(e,t,[n,r,i]){const l=t[i]!==void 0?t[i]:.5,h=Cr(e.min,e.max,l);PS(e,t[n],t[r],h,t.scale)}const XV=["x","scaleX","originX"],KV=["y","scaleY","originY"];function lf(e,t){uM(e.x,t,XV),uM(e.y,t,KV)}function i5(e,t){return t5(HV(e.getBoundingClientRect(),t))}function YV(e,t,n){const r=i5(e,n),{scroll:i}=t;return i&&(jc(r.x,i.offset.x),jc(r.y,i.offset.y)),r}const o5=({current:e})=>e?e.ownerDocument.defaultView:null,JV=new WeakMap;class QV{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=E=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(o1(E,"page").point)},l=(E,C)=>{const{drag:T,dragPropagation:R,onDragStart:O}=this.getProps();if(T&&!R&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vR(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ma(Y=>{let $=this.getAxisMotionValue(Y).get()||0;if(Yl.test($)){const{projection:U}=this.visualElement;if(U&&U.layout){const G=U.layout.layoutBox[Y];G&&($=Gs(G)*(parseFloat($)/100))}}this.originPoint[Y]=$}),O&&Zn.postRender(()=>O(E,C));const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},h=(E,C)=>{const{dragPropagation:T,dragDirectionLock:R,onDirectionLock:O,onDrag:B}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:Y}=C;if(R&&this.currentDirection===null){this.currentDirection=e7(Y),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",C.point,Y),this.updateAxis("y",C.point,Y),this.visualElement.render(),B&&B(E,C)},u=(E,C)=>this.stop(E,C),y=()=>ma(E=>{var C;return this.getAnimationState(E)==="paused"&&((C=this.getAxisMotionValue(E).animation)===null||C===void 0?void 0:C.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new QR(t,{onSessionStart:i,onStart:l,onMove:h,onSessionEnd:u,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,contextWindow:o5(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&Zn.postRender(()=>l(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!tv(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let h=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(h=jV(h,this.constraints[t],this.elastic[t])),l.set(h)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,l=this.constraints;n&&of(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=$V(i.layoutBox,n):this.constraints=!1,this.elastic=qV(r),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ma(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=GV(i.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!of(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=YV(r,i.root,this.visualElement.getTransformPagePoint());let h=VV(i.layout.layoutBox,l);if(n){const u=n(WV(h));this.hasMutatedConstraints=!!u,u&&(h=t5(u))}return h}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:l,dragSnapToOrigin:h,onDragTransitionEnd:u}=this.getProps(),y=this.constraints||{},w=ma(E=>{if(!tv(E,n,this.currentDirection))return;let C=y&&y[E]||{};h&&(C={min:0,max:0});const T=i?200:1e6,R=i?40:1e7,O={type:"inertia",velocity:r?t[E]:0,bounceStiffness:T,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...l,...C};return this.startAxisValueAnimation(E,O)});return Promise.all(w).then(u)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(MC(t,r,0,n,this.visualElement))}stopAnimation(){ma(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ma(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ma(n=>{const{drag:r}=this.getProps();if(!tv(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(n);if(i&&i.layout){const{min:h,max:u}=i.layout.layoutBox[n];l.set(t[n]-Cr(h,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!of(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ma(h=>{const u=this.getAxisMotionValue(h);if(u&&this.constraints!==!1){const y=u.get();i[h]=UV({min:y,max:y},this.constraints[h])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ma(h=>{if(!tv(h,t,null))return;const u=this.getAxisMotionValue(h),{min:y,max:w}=this.constraints[h];u.set(Cr(y,w,i[h]))})}addListeners(){if(!this.visualElement.current)return;JV.set(this.visualElement,this);const t=this.visualElement.current,n=zu(t,"pointerdown",y=>{const{drag:w,dragListener:E=!0}=this.getProps();w&&E&&this.start(y)}),r=()=>{const{dragConstraints:y}=this.getProps();of(y)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const h=Nu(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w})=>{this.isDragging&&w&&(ma(E=>{const C=this.getAxisMotionValue(E);C&&(this.originPoint[E]+=y[E].translate,C.set(C.get()+y[E].translate))}),this.visualElement.render())});return()=>{h(),n(),l(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:h=IS,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:l,dragElastic:h,dragMomentum:u}}}function tv(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function e7(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class t7 extends Mh{constructor(t){super(t),this.removeGroupControls=To,this.removeListeners=To,this.controls=new QV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||To}unmount(){this.removeGroupControls(),this.removeListeners()}}const cM=e=>(t,n)=>{e&&Zn.postRender(()=>e(t,n))};class n7 extends Mh{constructor(){super(...arguments),this.removePointerDownListener=To}onPointerDown(t){this.session=new QR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:o5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cM(t),onStart:cM(n),onMove:r,onEnd:(l,h)=>{delete this.session,i&&Zn.postRender(()=>i(l,h))}}}mount(){this.removePointerDownListener=zu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function r7(){const e=be.useContext(sC);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=be.useId();return be.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}const Tv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ag={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(zt.test(e))e=parseFloat(e);else return e;const n=hM(e,t.target.x),r=hM(e,t.target.y);return`${n}% ${r}%`}},i7={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=dh.parse(e);if(i.length>5)return r;const l=dh.createTransformer(e),h=typeof i[0]!="number"?1:0,u=n.x.scale*t.x,y=n.y.scale*t.y;i[0+h]/=u,i[1+h]/=y;const w=Cr(u,y,.5);return typeof i[2+h]=="number"&&(i[2+h]/=w),typeof i[3+h]=="number"&&(i[3+h]/=w),l(i)}};class o7 extends be.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:l}=t;nj(s7),l&&(n.group&&n.group.add(l),r&&r.register&&i&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Tv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:l}=this.props,h=r.projection;return h&&(h.isPresent=l,i||t.layoutDependency!==n||n===void 0?h.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?h.promote():h.relegate()||Zn.postRender(()=>{const u=h.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function s5(e){const[t,n]=r7(),r=be.useContext(rR);return j.jsx(o7,{...e,layoutGroup:r,switchLayoutGroup:be.useContext(iR),isPresent:t,safeToRemove:n})}const s7={borderRadius:{...Ag,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ag,borderTopRightRadius:Ag,borderBottomLeftRadius:Ag,borderBottomRightRadius:Ag,boxShadow:i7},a5=["TopLeft","TopRight","BottomLeft","BottomRight"],a7=a5.length,pM=e=>typeof e=="string"?parseFloat(e):e,dM=e=>typeof e=="number"||zt.test(e);function l7(e,t,n,r,i,l){i?(e.opacity=Cr(0,n.opacity!==void 0?n.opacity:1,u7(r)),e.opacityExit=Cr(t.opacity!==void 0?t.opacity:1,0,c7(r))):l&&(e.opacity=Cr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let h=0;h<a7;h++){const u=`border${a5[h]}Radius`;let y=fM(t,u),w=fM(n,u);if(y===void 0&&w===void 0)continue;y||(y=0),w||(w=0),y===0||w===0||dM(y)===dM(w)?(e[u]=Math.max(Cr(pM(y),pM(w),r),0),(Yl.test(w)||Yl.test(y))&&(e[u]+="%")):e[u]=w}(t.rotate||n.rotate)&&(e.rotate=Cr(t.rotate||0,n.rotate||0,r))}function fM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const u7=l5(0,.5,qR),c7=l5(.5,.95,To);function l5(e,t,n){return r=>r<e?0:r>t?1:n(Ly(e,t,r))}function mM(e,t){e.min=t.min,e.max=t.max}function fa(e,t){mM(e.x,t.x),mM(e.y,t.y)}function gM(e,t,n,r,i){return e-=t,e=xx(e,1/n,r),i!==void 0&&(e=xx(e,1/i,r)),e}function h7(e,t=0,n=1,r=.5,i,l=e,h=e){if(Yl.test(t)&&(t=parseFloat(t),t=Cr(h.min,h.max,t/100)-h.min),typeof t!="number")return;let u=Cr(l.min,l.max,r);e===l&&(u-=t),e.min=gM(e.min,t,n,u,i),e.max=gM(e.max,t,n,u,i)}function yM(e,t,[n,r,i],l,h){h7(e,t[n],t[r],t[i],t.scale,l,h)}const p7=["x","scaleX","originX"],d7=["y","scaleY","originY"];function _M(e,t,n,r){yM(e.x,t,p7,n?n.x:void 0,r?r.x:void 0),yM(e.y,t,d7,n?n.y:void 0,r?r.y:void 0)}function vM(e){return e.translate===0&&e.scale===1}function u5(e){return vM(e.x)&&vM(e.y)}function f7(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function c5(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function xM(e){return Gs(e.x)/Gs(e.y)}class m7{constructor(){this.members=[]}add(t){AC(this.members,t),t.scheduleRender()}remove(t){if(kC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bM(e,t,n){let r="";const i=e.x.translate/t.x,l=e.y.translate/t.y,h=(n==null?void 0:n.z)||0;if((i||l||h)&&(r=`translate3d(${i}px, ${l}px, ${h}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:w,rotate:E,rotateX:C,rotateY:T,skewX:R,skewY:O}=n;w&&(r=`perspective(${w}px) ${r}`),E&&(r+=`rotate(${E}deg) `),C&&(r+=`rotateX(${C}deg) `),T&&(r+=`rotateY(${T}deg) `),R&&(r+=`skewX(${R}deg) `),O&&(r+=`skewY(${O}deg) `)}const u=e.x.scale*t.x,y=e.y.scale*t.y;return(u!==1||y!==1)&&(r+=`scale(${u}, ${y})`),r||"none"}const g7=(e,t)=>e.depth-t.depth;class y7{constructor(){this.children=[],this.isDirty=!1}add(t){AC(this.children,t),this.isDirty=!0}remove(t){kC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(g7),this.isDirty=!1,this.children.forEach(t)}}function _7(e,t){const n=sh.now(),r=({timestamp:i})=>{const l=i-n;l>=t&&(ph(r),e(l-t))};return Zn.read(r,!0),()=>ph(r)}function v7(e){window.MotionDebug&&window.MotionDebug.record(e)}function x7(e){return e instanceof SVGElement&&e.tagName!=="svg"}function b7(e,t,n){const r=Io(e)?e:My(e);return r.start(MC("",r,t,n)),r.animation}const Qw=["","X","Y","Z"],w7={visibility:"hidden"},wM=1e3;let S7=0;const mp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function e2(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function h5({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(h={},u=t==null?void 0:t()){this.id=S7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,mp.totalNodes=mp.resolvedTargetDeltas=mp.recalculatedProjection=0,this.nodes.forEach(I7),this.nodes.forEach(A7),this.nodes.forEach(k7),this.nodes.forEach(T7),v7(mp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new y7)}addEventListener(h,u){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new NC),this.eventHandlers.get(h).add(u)}notifyListeners(h,...u){const y=this.eventHandlers.get(h);y&&y.notify(...u)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x7(h),this.instance=h;const{layoutId:y,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(w||y)&&(this.isLayoutDirty=!0),e){let C;const T=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,C&&C(),C=_7(T,250),Tv.hasAnimatedSinceResize&&(Tv.hasAnimatedSinceResize=!1,this.nodes.forEach(EM))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&E&&(y||w)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:T,hasRelativeTargetChanged:R,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||E.getDefaultTransition()||z7,{onLayoutAnimationStart:Y,onLayoutAnimationComplete:$}=E.getProps(),U=!this.targetLayout||!c5(this.targetLayout,O)||R,G=!T&&R;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||G||T&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(C,G);const re={...bC(B,"layout"),onPlay:Y,onComplete:$};(E.shouldReduceMotion||this.options.layoutRoot)&&(re.delay=0,re.type=!1),this.startAnimation(re)}else T||EM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ph(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(N7),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const C=this.path[E];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:u,layout:y}=this.options;if(u===void 0&&!y)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SM);return}this.isUpdating||this.nodes.forEach(L7),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(M7),this.nodes.forEach(E7),this.nodes.forEach(C7),this.clearAllSnapshots();const u=sh.now();so.delta=hh(0,1e3/60,u-so.timestamp),so.timestamp=u,so.isProcessing=!0,Uw.update.process(so),Uw.preRender.process(so),Uw.render.process(so),so.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uC.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(P7),this.sharedNodes.forEach(R7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:h,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const h=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!u5(this.projectionDelta),y=this.getTransformTemplate(),w=y?y(this.latestValues,""):void 0,E=w!==this.prevTransformTemplateValue;h&&(u||fp(this.latestValues)||E)&&(i(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const u=this.measurePageBox();let y=this.removeElementScroll(u);return h&&(y=this.removeTransform(y)),F7(y),{animationId:this.root.animationId,measuredBox:u,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return Xr();const u=h.measureViewportBox(),{scroll:y}=this.root;return y&&(jc(u.x,y.offset.x),jc(u.y,y.offset.y)),u}removeElementScroll(h){const u=Xr();fa(u,h);for(let y=0;y<this.path.length;y++){const w=this.path[y],{scroll:E,options:C}=w;if(w!==this.root&&E&&C.layoutScroll){if(E.isRoot){fa(u,h);const{scroll:T}=this.root;T&&(jc(u.x,-T.offset.x),jc(u.y,-T.offset.y))}jc(u.x,E.offset.x),jc(u.y,E.offset.y)}}return u}applyTransform(h,u=!1){const y=Xr();fa(y,h);for(let w=0;w<this.path.length;w++){const E=this.path[w];!u&&E.options.layoutScroll&&E.scroll&&E!==E.root&&lf(y,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),fp(E.latestValues)&&lf(y,E.latestValues)}return fp(this.latestValues)&&lf(y,this.latestValues),y}removeTransform(h){const u=Xr();fa(u,h);for(let y=0;y<this.path.length;y++){const w=this.path[y];if(!w.instance||!fp(w.latestValues))continue;TS(w.latestValues)&&w.updateSnapshot();const E=Xr(),C=w.measurePageBox();fa(E,C),_M(u,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,E)}return fp(this.latestValues)&&_M(u,this.latestValues),u}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==so.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var u;const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==y;if(!(h||w&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:C,layoutId:T}=this.options;if(!(!this.layout||!(C||T))){if(this.resolvedRelativeTargetAt=so.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xr(),this.relativeTargetOrigin=Xr(),ry(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),fa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xr(),this.targetWithTransforms=Xr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fa(this.target,this.layout.layoutBox),r5(this.target,this.targetDelta)):fa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xr(),this.relativeTargetOrigin=Xr(),ry(this.relativeTargetOrigin,this.target,R.target),fa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||TS(this.parent.latestValues)||n5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const u=this.getLead(),y=!!this.resumingFrom||this!==u;let w=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(w=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===so.timestamp&&(w=!1),w)return;const{layout:E,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||C))return;fa(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,R=this.treeScale.y;ZV(this.layoutCorrected,this.treeScale,this.path,y),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Xr());const{target:O}=u;if(!O){this.projectionTransform&&(this.projectionDelta=af(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=af(),this.projectionDeltaWithTransform=af());const B=this.projectionTransform;ny(this.projectionDelta,this.layoutCorrected,O,this.latestValues),this.projectionTransform=bM(this.projectionDelta,this.treeScale),(this.projectionTransform!==B||this.treeScale.x!==T||this.treeScale.y!==R)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O)),mp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),h){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(h,u=!1){const y=this.snapshot,w=y?y.latestValues:{},E={...this.latestValues},C=af();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const T=Xr(),R=y?y.source:void 0,O=this.layout?this.layout.source:void 0,B=R!==O,Y=this.getStack(),$=!Y||Y.members.length<=1,U=!!(B&&!$&&this.options.crossfade===!0&&!this.path.some(O7));this.animationProgress=0;let G;this.mixTargetDelta=re=>{const he=re/1e3;CM(C.x,h.x,he),CM(C.y,h.y,he),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ry(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),D7(this.relativeTarget,this.relativeTargetOrigin,T,he),G&&f7(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=Xr()),fa(G,this.relativeTarget)),B&&(this.animationValues=E,l7(E,w,this.latestValues,he,U,$)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=he},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ph(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zn.update(()=>{Tv.hasAnimatedSinceResize=!0,this.currentAnimation=b7(0,wM,{...h,onUpdate:u=>{this.mixTargetDelta(u),h.onUpdate&&h.onUpdate(u)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:u,target:y,layout:w,latestValues:E}=h;if(!(!u||!y||!w)){if(this!==h&&this.layout&&w&&p5(this.options.animationType,this.layout.layoutBox,w.layoutBox)){y=this.target||Xr();const C=Gs(this.layout.layoutBox.x);y.x.min=h.target.x.min,y.x.max=y.x.min+C;const T=Gs(this.layout.layoutBox.y);y.y.min=h.target.y.min,y.y.max=y.y.min+T}fa(u,y),lf(u,E),ny(this.projectionDeltaWithTransform,this.layoutCorrected,u,E)}}registerSharedNode(h,u){this.sharedNodes.has(h)||this.sharedNodes.set(h,new m7),this.sharedNodes.get(h).add(u);const w=u.options.initialPromotionConfig;u.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(u):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:u,preserveFollowOpacity:y}={}){const w=this.getStack();w&&w.promote(this,y),h&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let u=!1;const{latestValues:y}=h;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(u=!0),!u)return;const w={};y.z&&e2("z",h,w,this.animationValues);for(let E=0;E<Qw.length;E++)e2(`rotate${Qw[E]}`,h,w,this.animationValues),e2(`skew${Qw[E]}`,h,w,this.animationValues);h.render();for(const E in w)h.setStaticValue(E,w[E]),this.animationValues&&(this.animationValues[E]=w[E]);h.scheduleRender()}getProjectionStyles(h){var u,y;if(!this.instance||this.isSVG)return;if(!this.isVisible)return w7;const w={visibility:""},E=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,w.opacity="",w.pointerEvents=Cv(h==null?void 0:h.pointerEvents)||"",w.transform=E?E(this.latestValues,""):"none",w;const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){const B={};return this.options.layoutId&&(B.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,B.pointerEvents=Cv(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!fp(this.latestValues)&&(B.transform=E?E({},""):"none",this.hasProjected=!1),B}const T=C.animationValues||C.latestValues;this.applyTransformsToTarget(),w.transform=bM(this.projectionDeltaWithTransform,this.treeScale,T),E&&(w.transform=E(T,w.transform));const{x:R,y:O}=this.projectionDelta;w.transformOrigin=`${R.origin*100}% ${O.origin*100}% 0`,C.animationValues?w.opacity=C===this?(y=(u=T.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&y!==void 0?y:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:w.opacity=C===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const B in fx){if(T[B]===void 0)continue;const{correct:Y,applyTo:$}=fx[B],U=w.transform==="none"?T[B]:Y(T[B],C);if($){const G=$.length;for(let re=0;re<G;re++)w[$[re]]=U}else w[B]=U}return this.options.layoutId&&(w.pointerEvents=C===this?Cv(h==null?void 0:h.pointerEvents)||"":"none"),w}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var u;return(u=h.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(SM),this.root.sharedNodes.clear()}}}function E7(e){e.updateLayout()}function C7(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:l}=e.options,h=n.source!==e.layout.source;l==="size"?ma(C=>{const T=h?n.measuredBox[C]:n.layoutBox[C],R=Gs(T);T.min=r[C].min,T.max=T.min+R}):p5(l,n.layoutBox,r)&&ma(C=>{const T=h?n.measuredBox[C]:n.layoutBox[C],R=Gs(r[C]);T.max=T.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+R)});const u=af();ny(u,r,n.layoutBox);const y=af();h?ny(y,e.applyTransform(i,!0),n.measuredBox):ny(y,r,n.layoutBox);const w=!u5(u);let E=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:T,layout:R}=C;if(T&&R){const O=Xr();ry(O,n.layoutBox,T.layoutBox);const B=Xr();ry(B,r,R.layoutBox),c5(O,B)||(E=!0),C.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=O,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:y,layoutDelta:u,hasLayoutChanged:w,hasRelativeTargetChanged:E})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function I7(e){mp.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function T7(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function P7(e){e.clearSnapshot()}function SM(e){e.clearMeasurements()}function L7(e){e.isLayoutDirty=!1}function M7(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function EM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function A7(e){e.resolveTargetDelta()}function k7(e){e.calcProjection()}function N7(e){e.resetSkewAndRotation()}function R7(e){e.removeLeadSnapshot()}function CM(e,t,n){e.translate=Cr(t.translate,0,n),e.scale=Cr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function IM(e,t,n,r){e.min=Cr(t.min,n.min,r),e.max=Cr(t.max,n.max,r)}function D7(e,t,n,r){IM(e.x,t.x,n.x,r),IM(e.y,t.y,n.y,r)}function O7(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const z7={duration:.45,ease:[.4,0,.1,1]},TM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),PM=TM("applewebkit/")&&!TM("chrome/")?Math.round:To;function LM(e){e.min=PM(e.min),e.max=PM(e.max)}function F7(e){LM(e.x),LM(e.y)}function p5(e,t,n){return e==="position"||e==="preserve-aspect"&&!CS(xM(t),xM(n),.2)}const B7=h5({attachResizeListener:(e,t)=>Nu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),t2={current:void 0},d5=h5({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!t2.current){const e=new B7({});e.mount(window),e.setOptions({layoutScroll:!0}),t2.current=e}return t2.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),j7={pan:{Feature:n7},drag:{Feature:t7,ProjectionNode:d5,MeasureLayout:s5}},LS={current:null},f5={current:!1};function $7(){if(f5.current=!0,!!aC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>LS.current=e.matches;e.addListener(t),t()}else LS.current=!1}function V7(e,t,n){const{willChange:r}=t;for(const i in t){const l=t[i],h=n[i];if(Io(l))e.addValue(i,l),vx(r)&&r.add(i);else if(Io(h))e.addValue(i,My(l,{owner:e})),vx(r)&&r.remove(i);else if(h!==l)if(e.hasValue(i)){const u=e.getValue(i);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=e.getStaticValue(i);e.addValue(i,My(u!==void 0?u:l,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const MM=new WeakMap,U7=[...TR,Eo,dh],G7=e=>U7.find(IR(e)),m5=Object.keys(Py),q7=m5.length,AM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],W7=hC.length;function g5(e){if(e)return e.options.allowProjection!==!1?e.projection:g5(e.parent)}class H7{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:l,visualState:h},u={}){this.resolveKeyframes=(T,R,O,B)=>new this.KeyframeResolver(T,R,O,B,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Zn.render(this.render,!1,!0);const{latestValues:y,renderState:w}=h;this.latestValues=y,this.baseTarget={...y},this.initialValues=n.initial?{...y}:{},this.renderState=w,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!l,this.isControllingVariants=i1(n),this.isVariantNode=nR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:E,...C}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in C){const R=C[T];y[T]!==void 0&&Io(R)&&(R.set(y[T],!1),vx(E)&&E.add(T))}}mount(t){this.current=t,MM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),f5.current||$7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:LS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){var t;MM.delete(this.current),this.projection&&this.projection.unmount(),ph(this.notifyUpdate),ph(this.render),this.valueSubscriptions.forEach(n=>n()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features)(t=this.features[n])===null||t===void 0||t.unmount();this.current=null}bindToMotionValue(t,n){const r=Wp.has(t),i=n.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Zn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),l(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,l){let h,u;for(let y=0;y<q7;y++){const w=m5[y],{isEnabled:E,Feature:C,ProjectionNode:T,MeasureLayout:R}=Py[w];T&&(h=T),E(n)&&(!this.features[w]&&C&&(this.features[w]=new C(this)),R&&(u=R))}if((this.type==="html"||this.type==="svg")&&!this.projection&&h){this.projection=new h(this.latestValues,g5(this.parent));const{layoutId:y,layout:w,drag:E,dragConstraints:C,layoutScroll:T,layoutRoot:R}=n;this.projection.setOptions({layoutId:y,layout:w,alwaysMeasureLayout:!!E||C&&of(C),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof w=="string"?w:"both",initialPromotionConfig:l,layoutScroll:T,layoutRoot:R})}return u}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<AM.length;r++){const i=AM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,h=t[l];h&&(this.propEventSubscriptions[i]=this.on(i,h))}this.prevMotionValues=V7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<W7;r++){const i=hC[r],l=this.props[i];(Ty(l)||l===!1)&&(n[i]=l)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=My(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(ER(i)||SR(i))?i=parseFloat(i):!G7(i)&&dh.test(n)&&(i=DR(t,n)),this.setBaseTarget(t,Io(i)?i.get():i)),Io(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const h=xC(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);h&&(i=h[t])}if(r&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Io(l)?l:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new NC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class y5 extends H7{constructor(){super(...arguments),this.KeyframeResolver=OR}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function Z7(e){return window.getComputedStyle(e)}class X7 extends y5{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Wp.has(n)){const r=EC(n);return r&&r.default||0}else{const r=Z7(t),i=(aR(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return i5(t,n)}build(t,n,r,i){mC(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return vC(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Io(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){pR(t,n,r,i)}}class K7 extends y5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Wp.has(n)){const r=EC(n);return r&&r.default||0}return n=dR.has(n)?n:lC(n),t.getAttribute(n)}measureInstanceViewportBox(){return Xr()}scrapeMotionValuesFromProps(t,n,r){return mR(t,n,r)}build(t,n,r,i){yC(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){fR(t,n,r,i)}mount(t){this.isSVGTag=_C(t.tagName),super.mount(t)}}const Y7=(e,t)=>pC(e)?new K7(t,{enableHardwareAcceleration:!1}):new X7(t,{allowProjection:e!==be.Fragment,enableHardwareAcceleration:!0}),J7={layout:{ProjectionNode:d5,MeasureLayout:s5}},Q7={...DV,...qj,...j7,...J7},kM=ej((e,t)=>kj(e,t,Q7,Y7)),e9="/assets/service1-CF732SfM.jpg",t9="/assets/service2-VQukPagc.jpg",n9="/assets/service3-ClRXKl_g.jpg",r9="/assets/gallery1-DWaCgeDD.jpg",i9="/assets/gallery2-DNd0kjK5.jpg",o9="/assets/gallery3-CCqVZZg3.jpg";function s9(e){return Sl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M312 372c-7.7 0-14 6.3-14 14 0 9.9-8.1 18-18 18H94c-9.9 0-18-8.1-18-18V126c0-9.9 8.1-18 18-18h186c9.9 0 18 8.1 18 18 0 7.7 6.3 14 14 14s14-6.3 14-14c0-25.4-20.6-46-46-46H94c-25.4 0-46 20.6-46 46v260c0 25.4 20.6 46 46 46h186c25.4 0 46-20.6 46-46 0-7.7-6.3-14-14-14z"},child:[]},{tag:"path",attr:{d:"M372.9 158.1c-2.6-2.6-6.1-4.1-9.9-4.1-3.7 0-7.3 1.4-9.9 4.1-5.5 5.5-5.5 14.3 0 19.8l65.2 64.2H162c-7.7 0-14 6.3-14 14s6.3 14 14 14h256.6L355 334.2c-5.4 5.4-5.4 14.3 0 19.8l.1.1c2.7 2.5 6.2 3.9 9.8 3.9 3.8 0 7.3-1.4 9.9-4.1l82.6-82.4c4.3-4.3 6.5-9.3 6.5-14.7 0-5.3-2.3-10.3-6.5-14.5l-84.5-84.2z"},child:[]}]})(e)}var RC={},_5={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(_5);var l1=_5.exports,n2={};function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kn.apply(this,arguments)}function Uc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function v5(e){if(!Uc(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=v5(e[n])}),t}function Jl(e,t,n={clone:!0}){const r=n.clone?kn({},e):e;return Uc(e)&&Uc(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(Uc(t[i])&&i in e&&Uc(e[i])?r[i]=Jl(e[i],t[i],n):n.clone?r[i]=Uc(t[i])?v5(t[i]):t[i]:r[i]=t[i])}),r}const a9=Object.freeze(Object.defineProperty({__proto__:null,default:Jl,isPlainObject:Uc},Symbol.toStringTag,{value:"Module"}));function Ay(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const l9=Object.freeze(Object.defineProperty({__proto__:null,default:Ay},Symbol.toStringTag,{value:"Module"}));var x5={exports:{}},Rn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC=Symbol.for("react.element"),OC=Symbol.for("react.portal"),u1=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),h1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),u9=Symbol.for("react.server_context"),f1=Symbol.for("react.forward_ref"),m1=Symbol.for("react.suspense"),g1=Symbol.for("react.suspense_list"),y1=Symbol.for("react.memo"),_1=Symbol.for("react.lazy"),c9=Symbol.for("react.offscreen"),b5;b5=Symbol.for("react.module.reference");function $a(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case DC:switch(e=e.type,e){case u1:case h1:case c1:case m1:case g1:return e;default:switch(e=e&&e.$$typeof,e){case u9:case d1:case f1:case _1:case y1:case p1:return e;default:return t}}case OC:return t}}}Rn.ContextConsumer=d1;Rn.ContextProvider=p1;Rn.Element=DC;Rn.ForwardRef=f1;Rn.Fragment=u1;Rn.Lazy=_1;Rn.Memo=y1;Rn.Portal=OC;Rn.Profiler=h1;Rn.StrictMode=c1;Rn.Suspense=m1;Rn.SuspenseList=g1;Rn.isAsyncMode=function(){return!1};Rn.isConcurrentMode=function(){return!1};Rn.isContextConsumer=function(e){return $a(e)===d1};Rn.isContextProvider=function(e){return $a(e)===p1};Rn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===DC};Rn.isForwardRef=function(e){return $a(e)===f1};Rn.isFragment=function(e){return $a(e)===u1};Rn.isLazy=function(e){return $a(e)===_1};Rn.isMemo=function(e){return $a(e)===y1};Rn.isPortal=function(e){return $a(e)===OC};Rn.isProfiler=function(e){return $a(e)===h1};Rn.isStrictMode=function(e){return $a(e)===c1};Rn.isSuspense=function(e){return $a(e)===m1};Rn.isSuspenseList=function(e){return $a(e)===g1};Rn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u1||e===h1||e===c1||e===m1||e===g1||e===c9||typeof e=="object"&&e!==null&&(e.$$typeof===_1||e.$$typeof===y1||e.$$typeof===p1||e.$$typeof===d1||e.$$typeof===f1||e.$$typeof===b5||e.getModuleId!==void 0)};Rn.typeOf=$a;x5.exports=Rn;var NM=x5.exports;const h9=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function w5(e){const t=`${e}`.match(h9);return t&&t[1]||""}function S5(e,t=""){return e.displayName||e.name||w5(e)||t}function RM(e,t,n){const r=S5(t);return e.displayName||(r!==""?`${n}(${r})`:n)}function p9(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return S5(e,"Component");if(typeof e=="object")switch(e.$$typeof){case NM.ForwardRef:return RM(e,e.render,"ForwardRef");case NM.Memo:return RM(e,e.type,"memo");default:return}}}const d9=Object.freeze(Object.defineProperty({__proto__:null,default:p9,getFunctionName:w5},Symbol.toStringTag,{value:"Module"}));function fh(e){if(typeof e!="string")throw new Error(Ay(7));return e.charAt(0).toUpperCase()+e.slice(1)}const f9=Object.freeze(Object.defineProperty({__proto__:null,default:fh},Symbol.toStringTag,{value:"Module"}));function m9(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function g9(e,t=166){let n;function r(...i){const l=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(l,t)}return r.clear=()=>{clearTimeout(n)},r}function y9(e,t){return()=>null}function _9(e,t){var n,r;return be.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function E5(e){return e&&e.ownerDocument||document}function v9(e){return E5(e).defaultView||window}function x9(e,t){return()=>null}function C5(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const I5=typeof window<"u"?be.useLayoutEffect:be.useEffect;let DM=0;function b9(e){const[t,n]=be.useState(e),r=e||t;return be.useEffect(()=>{t==null&&(DM+=1,n(`mui-${DM}`))},[t]),r}const OM=Fv.useId;function w9(e){if(OM!==void 0){const t=OM();return e??t}return b9(e)}function S9(e,t,n,r,i){return null}function E9({controlled:e,default:t,name:n,state:r="value"}){const{current:i}=be.useRef(e!==void 0),[l,h]=be.useState(t),u=i?e:l,y=be.useCallback(w=>{i||h(w)},[]);return[u,y]}function C9(e){const t=be.useRef(e);return I5(()=>{t.current=e}),be.useRef((...n)=>(0,t.current)(...n)).current}function I9(...e){return be.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{C5(n,t)})},e)}class zC{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new zC}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}let v1=!0,MS=!1;const T9=new zC,P9={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function L9(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&P9[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function M9(e){e.metaKey||e.altKey||e.ctrlKey||(v1=!0)}function r2(){v1=!1}function A9(){this.visibilityState==="hidden"&&MS&&(v1=!0)}function k9(e){e.addEventListener("keydown",M9,!0),e.addEventListener("mousedown",r2,!0),e.addEventListener("pointerdown",r2,!0),e.addEventListener("touchstart",r2,!0),e.addEventListener("visibilitychange",A9,!0)}function N9(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return v1||L9(t)}function R9(){const e=be.useCallback(i=>{i!=null&&k9(i.ownerDocument)},[]),t=be.useRef(!1);function n(){return t.current?(MS=!0,T9.start(100,()=>{MS=!1}),t.current=!1,!0):!1}function r(i){return N9(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function T5(e,t){const n=kn({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=kn({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},l=t[r];n[r]={},!l||!Object.keys(l)?n[r]=i:!i||!Object.keys(i)?n[r]=l:(n[r]=kn({},l),Object.keys(i).forEach(h=>{n[r][h]=T5(i[h],l[h])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function D9(e,t,n=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((l,h)=>{if(h){const u=t(h);u!==""&&l.push(u),n&&n[h]&&l.push(n[h])}return l},[]).join(" ")}),r}const zM=e=>e,O9=()=>{let e=zM;return{configure(t){e=t},generate(t){return e(t)},reset(){e=zM}}},P5=O9(),z9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function L5(e,t,n="Mui"){const r=z9[t];return r?`${n}-${r}`:`${P5.generate(e)}-${t}`}function F9(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=L5(e,i,n)}),r}function B9(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const j9=Object.freeze(Object.defineProperty({__proto__:null,default:B9},Symbol.toStringTag,{value:"Module"}));function Ah(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function M5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=M5(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $9(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=M5(e))&&(r&&(r+=" "),r+=t);return r}function V9(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:T5(t.components[n].defaultProps,r)}const U9=["values","unit","step"],G9=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>kn({},n,{[r.key]:r.val}),{})};function A5(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=Ah(e,U9),l=G9(t),h=Object.keys(l);function u(T){return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${n})`}function y(T){return`@media (max-width:${(typeof t[T]=="number"?t[T]:T)-r/100}${n})`}function w(T,R){const O=h.indexOf(R);return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${n}) and (max-width:${(O!==-1&&typeof t[h[O]]=="number"?t[h[O]]:R)-r/100}${n})`}function E(T){return h.indexOf(T)+1<h.length?w(T,h[h.indexOf(T)+1]):u(T)}function C(T){const R=h.indexOf(T);return R===0?u(h[1]):R===h.length-1?y(h[R]):w(T,h[h.indexOf(T)+1]).replace("@media","@media not all and")}return kn({keys:h,values:l,up:u,down:y,between:w,only:E,not:C,unit:n},i)}const q9={borderRadius:4};function iy(e,t){return t?Jl(e,t,{clone:!1}):e}const FC={xs:0,sm:600,md:900,lg:1200,xl:1536},FM={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${FC[e]}px)`};function Hu(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const l=r.breakpoints||FM;return t.reduce((h,u,y)=>(h[l.up(l.keys[y])]=n(t[y]),h),{})}if(typeof t=="object"){const l=r.breakpoints||FM;return Object.keys(t).reduce((h,u)=>{if(Object.keys(l.values||FC).indexOf(u)!==-1){const y=l.up(u);h[y]=n(t[u],u)}else{const y=u;h[y]=t[y]}return h},{})}return n(t)}function W9(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,i)=>{const l=e.up(i);return r[l]={},r},{}))||{}}function H9(e,t){return e.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},t)}function x1(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((i,l)=>i&&i[l]?i[l]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function bx(e,t,n,r=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||r:i=x1(e,n)||r,t&&(i=t(i,r,e)),i}function ti(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,l=h=>{if(h[t]==null)return null;const u=h[t],y=h.theme,w=x1(y,r)||{};return Hu(h,u,C=>{let T=bx(w,i,C);return C===T&&typeof C=="string"&&(T=bx(w,i,`${t}${C==="default"?"":fh(C)}`,C)),n===!1?T:{[n]:T}})};return l.propTypes={},l.filterProps=[t],l}function Z9(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const X9={m:"margin",p:"padding"},K9={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},BM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Y9=Z9(e=>{if(e.length>2)if(BM[e])e=BM[e];else return[e];const[t,n]=e.split(""),r=X9[t],i=K9[n]||"";return Array.isArray(i)?i.map(l=>r+l):[r+i]}),BC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],jC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...BC,...jC];function p0(e,t,n,r){var i;const l=(i=x1(e,t,!1))!=null?i:n;return typeof l=="number"?h=>typeof h=="string"?h:l*h:Array.isArray(l)?h=>typeof h=="string"?h:l[h]:typeof l=="function"?l:()=>{}}function k5(e){return p0(e,"spacing",8)}function d0(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function J9(e,t){return n=>e.reduce((r,i)=>(r[i]=d0(t,n),r),{})}function Q9(e,t,n,r){if(t.indexOf(n)===-1)return null;const i=Y9(n),l=J9(i,r),h=e[n];return Hu(e,h,l)}function N5(e,t){const n=k5(e.theme);return Object.keys(e).map(r=>Q9(e,t,r,n)).reduce(iy,{})}function Br(e){return N5(e,BC)}Br.propTypes={};Br.filterProps=BC;function jr(e){return N5(e,jC)}jr.propTypes={};jr.filterProps=jC;function eU(e=8){if(e.mui)return e;const t=k5({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(l=>{const h=t(l);return typeof h=="number"?`${h}px`:h}).join(" ");return n.mui=!0,n}function b1(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(l=>{r[l]=i}),r),{}),n=r=>Object.keys(r).reduce((i,l)=>t[l]?iy(i,t[l](r)):i,{});return n.propTypes={},n.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),n}function wa(e){return typeof e!="number"?e:`${e}px solid`}function Va(e,t){return ti({prop:e,themeKey:"borders",transform:t})}const tU=Va("border",wa),nU=Va("borderTop",wa),rU=Va("borderRight",wa),iU=Va("borderBottom",wa),oU=Va("borderLeft",wa),sU=Va("borderColor"),aU=Va("borderTopColor"),lU=Va("borderRightColor"),uU=Va("borderBottomColor"),cU=Va("borderLeftColor"),hU=Va("outline",wa),pU=Va("outlineColor"),w1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=p0(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:d0(t,r)});return Hu(e,e.borderRadius,n)}return null};w1.propTypes={};w1.filterProps=["borderRadius"];b1(tU,nU,rU,iU,oU,sU,aU,lU,uU,cU,w1,hU,pU);const S1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=p0(e.theme,"spacing",8),n=r=>({gap:d0(t,r)});return Hu(e,e.gap,n)}return null};S1.propTypes={};S1.filterProps=["gap"];const E1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=p0(e.theme,"spacing",8),n=r=>({columnGap:d0(t,r)});return Hu(e,e.columnGap,n)}return null};E1.propTypes={};E1.filterProps=["columnGap"];const C1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=p0(e.theme,"spacing",8),n=r=>({rowGap:d0(t,r)});return Hu(e,e.rowGap,n)}return null};C1.propTypes={};C1.filterProps=["rowGap"];const dU=ti({prop:"gridColumn"}),fU=ti({prop:"gridRow"}),mU=ti({prop:"gridAutoFlow"}),gU=ti({prop:"gridAutoColumns"}),yU=ti({prop:"gridAutoRows"}),_U=ti({prop:"gridTemplateColumns"}),vU=ti({prop:"gridTemplateRows"}),xU=ti({prop:"gridTemplateAreas"}),bU=ti({prop:"gridArea"});b1(S1,E1,C1,dU,fU,mU,gU,yU,_U,vU,xU,bU);function gf(e,t){return t==="grey"?t:e}const wU=ti({prop:"color",themeKey:"palette",transform:gf}),SU=ti({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:gf}),EU=ti({prop:"backgroundColor",themeKey:"palette",transform:gf});b1(wU,SU,EU);function zs(e){return e<=1&&e!==0?`${e*100}%`:e}const CU=ti({prop:"width",transform:zs}),$C=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,i;const l=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||FC[n];return l?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:zs(n)}};return Hu(e,e.maxWidth,t)}return null};$C.filterProps=["maxWidth"];const IU=ti({prop:"minWidth",transform:zs}),TU=ti({prop:"height",transform:zs}),PU=ti({prop:"maxHeight",transform:zs}),LU=ti({prop:"minHeight",transform:zs});ti({prop:"size",cssProperty:"width",transform:zs});ti({prop:"size",cssProperty:"height",transform:zs});const MU=ti({prop:"boxSizing"});b1(CU,$C,IU,TU,PU,LU,MU);const f0={border:{themeKey:"borders",transform:wa},borderTop:{themeKey:"borders",transform:wa},borderRight:{themeKey:"borders",transform:wa},borderBottom:{themeKey:"borders",transform:wa},borderLeft:{themeKey:"borders",transform:wa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:wa},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:w1},color:{themeKey:"palette",transform:gf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:gf},backgroundColor:{themeKey:"palette",transform:gf},p:{style:jr},pt:{style:jr},pr:{style:jr},pb:{style:jr},pl:{style:jr},px:{style:jr},py:{style:jr},padding:{style:jr},paddingTop:{style:jr},paddingRight:{style:jr},paddingBottom:{style:jr},paddingLeft:{style:jr},paddingX:{style:jr},paddingY:{style:jr},paddingInline:{style:jr},paddingInlineStart:{style:jr},paddingInlineEnd:{style:jr},paddingBlock:{style:jr},paddingBlockStart:{style:jr},paddingBlockEnd:{style:jr},m:{style:Br},mt:{style:Br},mr:{style:Br},mb:{style:Br},ml:{style:Br},mx:{style:Br},my:{style:Br},margin:{style:Br},marginTop:{style:Br},marginRight:{style:Br},marginBottom:{style:Br},marginLeft:{style:Br},marginX:{style:Br},marginY:{style:Br},marginInline:{style:Br},marginInlineStart:{style:Br},marginInlineEnd:{style:Br},marginBlock:{style:Br},marginBlockStart:{style:Br},marginBlockEnd:{style:Br},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S1},rowGap:{style:C1},columnGap:{style:E1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:zs},maxWidth:{style:$C},minWidth:{transform:zs},height:{transform:zs},maxHeight:{transform:zs},minHeight:{transform:zs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function AU(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function kU(e,t){return typeof e=="function"?e(t):e}function R5(){function e(n,r,i,l){const h={[n]:r,theme:i},u=l[n];if(!u)return{[n]:r};const{cssProperty:y=n,themeKey:w,transform:E,style:C}=u;if(r==null)return null;if(w==="typography"&&r==="inherit")return{[n]:r};const T=x1(i,w)||{};return C?C(h):Hu(h,r,O=>{let B=bx(T,E,O);return O===B&&typeof O=="string"&&(B=bx(T,E,`${n}${O==="default"?"":fh(O)}`,O)),y===!1?B:{[y]:B}})}function t(n){var r;const{sx:i,theme:l={}}=n||{};if(!i)return null;const h=(r=l.unstable_sxConfig)!=null?r:f0;function u(y){let w=y;if(typeof y=="function")w=y(l);else if(typeof y!="object")return y;if(!w)return null;const E=W9(l.breakpoints),C=Object.keys(E);let T=E;return Object.keys(w).forEach(R=>{const O=kU(w[R],l);if(O!=null)if(typeof O=="object")if(h[R])T=iy(T,e(R,O,l,h));else{const B=Hu({theme:l},O,Y=>({[R]:Y}));AU(B,O)?T[R]=t({sx:O,theme:l}):T=iy(T,B)}else T=iy(T,e(R,O,l,h))}),H9(C,T)}return Array.isArray(i)?i.map(u):u(i)}return t}const I1=R5();I1.filterProps=["sx"];function D5(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const NU=["breakpoints","palette","spacing","shape"];function VC(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:l={}}=e,h=Ah(e,NU),u=A5(n),y=eU(i);let w=Jl({breakpoints:u,direction:"ltr",components:{},palette:kn({mode:"light"},r),spacing:y,shape:kn({},q9,l)},h);return w.applyStyles=D5,w=t.reduce((E,C)=>Jl(E,C),w),w.unstable_sxConfig=kn({},f0,h==null?void 0:h.unstable_sxConfig),w.unstable_sx=function(C){return I1({sx:C,theme:this})},w}const RU=Object.freeze(Object.defineProperty({__proto__:null,default:VC,private_createBreakpoints:A5,unstable_applyStyles:D5},Symbol.toStringTag,{value:"Module"}));function O5(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var DU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,OU=O5(function(e){return DU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function zU(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function FU(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var BU=function(){function e(n){var r=this;this._insertTag=function(i){var l;r.tags.length===0?r.insertionPoint?l=r.insertionPoint.nextSibling:r.prepend?l=r.container.firstChild:l=r.before:l=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,l),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(FU(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var l=zU(i);try{l.insertRule(r,l.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),So="-ms-",wx="-moz-",Tn="-webkit-",z5="comm",UC="rule",GC="decl",jU="@import",F5="@keyframes",$U="@layer",VU=Math.abs,T1=String.fromCharCode,UU=Object.assign;function GU(e,t){return lo(e,0)^45?(((t<<2^lo(e,0))<<2^lo(e,1))<<2^lo(e,2))<<2^lo(e,3):0}function B5(e){return e.trim()}function qU(e,t){return(e=t.exec(e))?e[0]:e}function Pn(e,t,n){return e.replace(t,n)}function AS(e,t){return e.indexOf(t)}function lo(e,t){return e.charCodeAt(t)|0}function ky(e,t,n){return e.slice(t,n)}function ql(e){return e.length}function qC(e){return e.length}function nv(e,t){return t.push(e),e}function WU(e,t){return e.map(t).join("")}var P1=1,Pf=1,j5=0,_s=0,ci=0,tm="";function L1(e,t,n,r,i,l,h){return{value:e,root:t,parent:n,type:r,props:i,children:l,line:P1,column:Pf,length:h,return:""}}function kg(e,t){return UU(L1("",null,null,"",null,null,0),e,{length:-e.length},t)}function HU(){return ci}function ZU(){return ci=_s>0?lo(tm,--_s):0,Pf--,ci===10&&(Pf=1,P1--),ci}function js(){return ci=_s<j5?lo(tm,_s++):0,Pf++,ci===10&&(Pf=1,P1++),ci}function Ql(){return lo(tm,_s)}function Pv(){return _s}function m0(e,t){return ky(tm,e,t)}function Ny(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $5(e){return P1=Pf=1,j5=ql(tm=e),_s=0,[]}function V5(e){return tm="",e}function Lv(e){return B5(m0(_s-1,kS(e===91?e+2:e===40?e+1:e)))}function XU(e){for(;(ci=Ql())&&ci<33;)js();return Ny(e)>2||Ny(ci)>3?"":" "}function KU(e,t){for(;--t&&js()&&!(ci<48||ci>102||ci>57&&ci<65||ci>70&&ci<97););return m0(e,Pv()+(t<6&&Ql()==32&&js()==32))}function kS(e){for(;js();)switch(ci){case e:return _s;case 34:case 39:e!==34&&e!==39&&kS(ci);break;case 40:e===41&&kS(e);break;case 92:js();break}return _s}function YU(e,t){for(;js()&&e+ci!==57;)if(e+ci===84&&Ql()===47)break;return"/*"+m0(t,_s-1)+"*"+T1(e===47?e:js())}function JU(e){for(;!Ny(Ql());)js();return m0(e,_s)}function QU(e){return V5(Mv("",null,null,null,[""],e=$5(e),0,[0],e))}function Mv(e,t,n,r,i,l,h,u,y){for(var w=0,E=0,C=h,T=0,R=0,O=0,B=1,Y=1,$=1,U=0,G="",re=i,he=l,_e=r,fe=G;Y;)switch(O=U,U=js()){case 40:if(O!=108&&lo(fe,C-1)==58){AS(fe+=Pn(Lv(U),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:fe+=Lv(U);break;case 9:case 10:case 13:case 32:fe+=XU(O);break;case 92:fe+=KU(Pv()-1,7);continue;case 47:switch(Ql()){case 42:case 47:nv(eG(YU(js(),Pv()),t,n),y);break;default:fe+="/"}break;case 123*B:u[w++]=ql(fe)*$;case 125*B:case 59:case 0:switch(U){case 0:case 125:Y=0;case 59+E:$==-1&&(fe=Pn(fe,/\f/g,"")),R>0&&ql(fe)-C&&nv(R>32?$M(fe+";",r,n,C-1):$M(Pn(fe," ","")+";",r,n,C-2),y);break;case 59:fe+=";";default:if(nv(_e=jM(fe,t,n,w,E,i,u,G,re=[],he=[],C),l),U===123)if(E===0)Mv(fe,t,_e,_e,re,l,C,u,he);else switch(T===99&&lo(fe,3)===110?100:T){case 100:case 108:case 109:case 115:Mv(e,_e,_e,r&&nv(jM(e,_e,_e,0,0,i,u,G,i,re=[],C),he),i,he,C,u,r?re:he);break;default:Mv(fe,_e,_e,_e,[""],he,0,u,he)}}w=E=R=0,B=$=1,G=fe="",C=h;break;case 58:C=1+ql(fe),R=O;default:if(B<1){if(U==123)--B;else if(U==125&&B++==0&&ZU()==125)continue}switch(fe+=T1(U),U*B){case 38:$=E>0?1:(fe+="\f",-1);break;case 44:u[w++]=(ql(fe)-1)*$,$=1;break;case 64:Ql()===45&&(fe+=Lv(js())),T=Ql(),E=C=ql(G=fe+=JU(Pv())),U++;break;case 45:O===45&&ql(fe)==2&&(B=0)}}return l}function jM(e,t,n,r,i,l,h,u,y,w,E){for(var C=i-1,T=i===0?l:[""],R=qC(T),O=0,B=0,Y=0;O<r;++O)for(var $=0,U=ky(e,C+1,C=VU(B=h[O])),G=e;$<R;++$)(G=B5(B>0?T[$]+" "+U:Pn(U,/&\f/g,T[$])))&&(y[Y++]=G);return L1(e,t,n,i===0?UC:u,y,w,E)}function eG(e,t,n){return L1(e,t,n,z5,T1(HU()),ky(e,2,-2),0)}function $M(e,t,n,r){return L1(e,t,n,GC,ky(e,0,r),ky(e,r+1,-1),r)}function yf(e,t){for(var n="",r=qC(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function tG(e,t,n,r){switch(e.type){case $U:if(e.children.length)break;case jU:case GC:return e.return=e.return||e.value;case z5:return"";case F5:return e.return=e.value+"{"+yf(e.children,r)+"}";case UC:e.value=e.props.join(",")}return ql(n=yf(e.children,r))?e.return=e.value+"{"+n+"}":""}function nG(e){var t=qC(e);return function(n,r,i,l){for(var h="",u=0;u<t;u++)h+=e[u](n,r,i,l)||"";return h}}function rG(e){return function(t){t.root||(t=t.return)&&e(t)}}var iG=function(t,n,r){for(var i=0,l=0;i=l,l=Ql(),i===38&&l===12&&(n[r]=1),!Ny(l);)js();return m0(t,_s)},oG=function(t,n){var r=-1,i=44;do switch(Ny(i)){case 0:i===38&&Ql()===12&&(n[r]=1),t[r]+=iG(_s-1,n,r);break;case 2:t[r]+=Lv(i);break;case 4:if(i===44){t[++r]=Ql()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=T1(i)}while(i=js());return t},sG=function(t,n){return V5(oG($5(t),n))},VM=new WeakMap,aG=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!VM.get(r))&&!i){VM.set(t,!0);for(var l=[],h=sG(n,l),u=r.props,y=0,w=0;y<h.length;y++)for(var E=0;E<u.length;E++,w++)t.props[w]=l[y]?h[y].replace(/&\f/g,u[E]):u[E]+" "+h[y]}}},lG=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function U5(e,t){switch(GU(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+wx+e+So+e+e;case 6828:case 4268:return Tn+e+So+e+e;case 6165:return Tn+e+So+"flex-"+e+e;case 5187:return Tn+e+Pn(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+So+"flex-$1$2")+e;case 5443:return Tn+e+So+"flex-item-"+Pn(e,/flex-|-self/,"")+e;case 4675:return Tn+e+So+"flex-line-pack"+Pn(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+So+Pn(e,"shrink","negative")+e;case 5292:return Tn+e+So+Pn(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+Pn(e,"-grow","")+Tn+e+So+Pn(e,"grow","positive")+e;case 4554:return Tn+Pn(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return Pn(Pn(Pn(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return Pn(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return Pn(Pn(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+So+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return Pn(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ql(e)-1-t>6)switch(lo(e,t+1)){case 109:if(lo(e,t+4)!==45)break;case 102:return Pn(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+wx+(lo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~AS(e,"stretch")?U5(Pn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(lo(e,t+1)!==115)break;case 6444:switch(lo(e,ql(e)-3-(~AS(e,"!important")&&10))){case 107:return Pn(e,":",":"+Tn)+e;case 101:return Pn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(lo(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+So+"$2box$3")+e}break;case 5936:switch(lo(e,t+11)){case 114:return Tn+e+So+Pn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+So+Pn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+So+Pn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+So+e+e}return e}var uG=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case GC:t.return=U5(t.value,t.length);break;case F5:return yf([kg(t,{value:Pn(t.value,"@","@"+Tn)})],i);case UC:if(t.length)return WU(t.props,function(l){switch(qU(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return yf([kg(t,{props:[Pn(l,/:(read-\w+)/,":"+wx+"$1")]})],i);case"::placeholder":return yf([kg(t,{props:[Pn(l,/:(plac\w+)/,":"+Tn+"input-$1")]}),kg(t,{props:[Pn(l,/:(plac\w+)/,":"+wx+"$1")]}),kg(t,{props:[Pn(l,/:(plac\w+)/,So+"input-$1")]})],i)}return""})}},cG=[uG],G5=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(B){var Y=B.getAttribute("data-emotion");Y.indexOf(" ")!==-1&&(document.head.appendChild(B),B.setAttribute("data-s",""))})}var i=t.stylisPlugins||cG,l={},h,u=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(B){for(var Y=B.getAttribute("data-emotion").split(" "),$=1;$<Y.length;$++)l[Y[$]]=!0;u.push(B)});var y,w=[aG,lG];{var E,C=[tG,rG(function(B){E.insert(B)})],T=nG(w.concat(i,C)),R=function(Y){return yf(QU(Y),T)};y=function(Y,$,U,G){E=U,R(Y?Y+"{"+$.styles+"}":$.styles),G&&(O.inserted[$.name]=!0)}}var O={key:n,sheet:new BU({key:n,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:l,registered:{},insert:y};return O.sheet.hydrate(u),O},q5={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=typeof Symbol=="function"&&Symbol.for,WC=Ki?Symbol.for("react.element"):60103,HC=Ki?Symbol.for("react.portal"):60106,M1=Ki?Symbol.for("react.fragment"):60107,A1=Ki?Symbol.for("react.strict_mode"):60108,k1=Ki?Symbol.for("react.profiler"):60114,N1=Ki?Symbol.for("react.provider"):60109,R1=Ki?Symbol.for("react.context"):60110,ZC=Ki?Symbol.for("react.async_mode"):60111,D1=Ki?Symbol.for("react.concurrent_mode"):60111,O1=Ki?Symbol.for("react.forward_ref"):60112,z1=Ki?Symbol.for("react.suspense"):60113,hG=Ki?Symbol.for("react.suspense_list"):60120,F1=Ki?Symbol.for("react.memo"):60115,B1=Ki?Symbol.for("react.lazy"):60116,pG=Ki?Symbol.for("react.block"):60121,dG=Ki?Symbol.for("react.fundamental"):60117,fG=Ki?Symbol.for("react.responder"):60118,mG=Ki?Symbol.for("react.scope"):60119;function ea(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WC:switch(e=e.type,e){case ZC:case D1:case M1:case k1:case A1:case z1:return e;default:switch(e=e&&e.$$typeof,e){case R1:case O1:case B1:case F1:case N1:return e;default:return t}}case HC:return t}}}function W5(e){return ea(e)===D1}Dn.AsyncMode=ZC;Dn.ConcurrentMode=D1;Dn.ContextConsumer=R1;Dn.ContextProvider=N1;Dn.Element=WC;Dn.ForwardRef=O1;Dn.Fragment=M1;Dn.Lazy=B1;Dn.Memo=F1;Dn.Portal=HC;Dn.Profiler=k1;Dn.StrictMode=A1;Dn.Suspense=z1;Dn.isAsyncMode=function(e){return W5(e)||ea(e)===ZC};Dn.isConcurrentMode=W5;Dn.isContextConsumer=function(e){return ea(e)===R1};Dn.isContextProvider=function(e){return ea(e)===N1};Dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WC};Dn.isForwardRef=function(e){return ea(e)===O1};Dn.isFragment=function(e){return ea(e)===M1};Dn.isLazy=function(e){return ea(e)===B1};Dn.isMemo=function(e){return ea(e)===F1};Dn.isPortal=function(e){return ea(e)===HC};Dn.isProfiler=function(e){return ea(e)===k1};Dn.isStrictMode=function(e){return ea(e)===A1};Dn.isSuspense=function(e){return ea(e)===z1};Dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===M1||e===D1||e===k1||e===A1||e===z1||e===hG||typeof e=="object"&&e!==null&&(e.$$typeof===B1||e.$$typeof===F1||e.$$typeof===N1||e.$$typeof===R1||e.$$typeof===O1||e.$$typeof===dG||e.$$typeof===fG||e.$$typeof===mG||e.$$typeof===pG)};Dn.typeOf=ea;q5.exports=Dn;var gG=q5.exports,H5=gG,yG={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_G={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Z5={};Z5[H5.ForwardRef]=yG;Z5[H5.Memo]=_G;var vG=!0;function xG(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var X5=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||vG===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},K5=function(t,n,r){X5(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var l=n;do t.insert(n===l?"."+i:"",l,t.sheet,!0),l=l.next;while(l!==void 0)}};function bG(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var wG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},SG=/[A-Z]|^ms/g,EG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Y5=function(t){return t.charCodeAt(1)===45},UM=function(t){return t!=null&&typeof t!="boolean"},i2=O5(function(e){return Y5(e)?e:e.replace(SG,"-$&").toLowerCase()}),GM=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(EG,function(r,i,l){return Wl={name:i,styles:l,next:Wl},i})}return wG[t]!==1&&!Y5(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ry(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Wl={name:n.name,styles:n.styles,next:Wl},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Wl={name:r.name,styles:r.styles,next:Wl},r=r.next;var i=n.styles+";";return i}return CG(e,t,n)}case"function":{if(e!==void 0){var l=Wl,h=n(e);return Wl=l,Ry(e,t,h)}break}}if(t==null)return n;var u=t[n];return u!==void 0?u:n}function CG(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ry(e,t,n[i])+";";else for(var l in n){var h=n[l];if(typeof h!="object")t!=null&&t[h]!==void 0?r+=l+"{"+t[h]+"}":UM(h)&&(r+=i2(l)+":"+GM(l,h)+";");else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var u=0;u<h.length;u++)UM(h[u])&&(r+=i2(l)+":"+GM(l,h[u])+";");else{var y=Ry(e,t,h);switch(l){case"animation":case"animationName":{r+=i2(l)+":"+y+";";break}default:r+=l+"{"+y+"}"}}}return r}var qM=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Wl,XC=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,l="";Wl=void 0;var h=t[0];h==null||h.raw===void 0?(i=!1,l+=Ry(r,n,h)):l+=h[0];for(var u=1;u<t.length;u++)l+=Ry(r,n,t[u]),i&&(l+=h[u]);qM.lastIndex=0;for(var y="",w;(w=qM.exec(l))!==null;)y+="-"+w[1];var E=bG(l)+y;return{name:E,styles:l,next:Wl}},IG=function(t){return t()},J5=Fv.useInsertionEffect?Fv.useInsertionEffect:!1,TG=J5||IG,WM=J5||be.useLayoutEffect,Q5=be.createContext(typeof HTMLElement<"u"?G5({key:"css"}):null),PG=Q5.Provider,e4=function(t){return be.forwardRef(function(n,r){var i=be.useContext(Q5);return t(n,i,r)})},j1=be.createContext({}),o2={exports:{}},HM;function t4(){return HM||(HM=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(o2)),o2.exports}t4();var LG=e4(function(e,t){var n=e.styles,r=XC([n],void 0,be.useContext(j1)),i=be.useRef();return WM(function(){var l=t.key+"-global",h=new t.sheet.constructor({key:l,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,y=document.querySelector('style[data-emotion="'+l+" "+r.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),y!==null&&(u=!0,y.setAttribute("data-emotion",l),h.hydrate([y])),i.current=[h,u],function(){h.flush()}},[t]),WM(function(){var l=i.current,h=l[0],u=l[1];if(u){l[1]=!1;return}if(r.next!==void 0&&K5(t,r.next,!0),h.tags.length){var y=h.tags[h.tags.length-1].nextElementSibling;h.before=y,h.flush()}t.insert("",r,h,!1)},[t,r.name]),null});function n4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return XC(t)}var MG=function(){var t=n4.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},AG=OU,kG=function(t){return t!=="theme"},ZM=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?AG:kG},XM=function(t,n,r){var i;if(n){var l=n.shouldForwardProp;i=t.__emotion_forwardProp&&l?function(h){return t.__emotion_forwardProp(h)&&l(h)}:l}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},NG=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return X5(n,r,i),TG(function(){return K5(n,r,i)}),null},RG=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,l,h;n!==void 0&&(l=n.label,h=n.target);var u=XM(t,n,r),y=u||ZM(i),w=!y("as");return function(){var E=arguments,C=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(l!==void 0&&C.push("label:"+l+";"),E[0]==null||E[0].raw===void 0)C.push.apply(C,E);else{C.push(E[0][0]);for(var T=E.length,R=1;R<T;R++)C.push(E[R],E[0][R])}var O=e4(function(B,Y,$){var U=w&&B.as||i,G="",re=[],he=B;if(B.theme==null){he={};for(var _e in B)he[_e]=B[_e];he.theme=be.useContext(j1)}typeof B.className=="string"?G=xG(Y.registered,re,B.className):B.className!=null&&(G=B.className+" ");var fe=XC(C.concat(re),Y.registered,he);G+=Y.key+"-"+fe.name,h!==void 0&&(G+=" "+h);var ye=w&&u===void 0?ZM(U):y,Pe={};for(var De in B)w&&De==="as"||ye(De)&&(Pe[De]=B[De]);return Pe.className=G,Pe.ref=$,be.createElement(be.Fragment,null,be.createElement(NG,{cache:Y,serialized:fe,isStringTag:typeof U=="string"}),be.createElement(U,Pe))});return O.displayName=l!==void 0?l:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",O.defaultProps=t.defaultProps,O.__emotion_real=O,O.__emotion_base=i,O.__emotion_styles=C,O.__emotion_forwardProp=u,Object.defineProperty(O,"toString",{value:function(){return"."+h}}),O.withComponent=function(B,Y){return e(B,kn({},n,Y,{shouldForwardProp:XM(O,Y,!0)})).apply(void 0,C)},O}},DG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],NS=RG.bind();DG.forEach(function(e){NS[e]=NS(e)});let RS;typeof document=="object"&&(RS=G5({key:"css",prepend:!0}));function OG(e){const{injectFirst:t,children:n}=e;return t&&RS?j.jsx(PG,{value:RS,children:n}):n}function zG(e){return e==null||Object.keys(e).length===0}function FG(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?i=>t(zG(i)?n:i):t;return j.jsx(LG,{styles:r})}function BG(e,t){return NS(e,t)}const jG=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},$G=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:FG,StyledEngineProvider:OG,ThemeContext:j1,css:n4,default:BG,internal_processStyles:jG,keyframes:MG},Symbol.toStringTag,{value:"Module"}));function VG(e){return Object.keys(e).length===0}function UG(e=null){const t=be.useContext(j1);return!t||VG(t)?e:t}const GG=VC();function qG(e=GG){return UG(e)}function WG({props:e,name:t,defaultTheme:n,themeId:r}){let i=qG(n);return r&&(i=i[r]||i),V9({theme:i,name:t,props:e})}const HG=["sx"],ZG=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:f0;return Object.keys(e).forEach(l=>{i[l]?r.systemProps[l]=e[l]:r.otherProps[l]=e[l]}),r};function XG(e){const{sx:t}=e,n=Ah(e,HG),{systemProps:r,otherProps:i}=ZG(n);let l;return Array.isArray(t)?l=[r,...t]:typeof t=="function"?l=(...h)=>{const u=t(...h);return Uc(u)?kn({},r,u):r}:l=kn({},r,t),kn({},i,{sx:l})}const KG=Object.freeze(Object.defineProperty({__proto__:null,default:I1,extendSxProp:XG,unstable_createStyleFunctionSx:R5,unstable_defaultSxConfig:f0},Symbol.toStringTag,{value:"Module"}));function YG(e,t){return kn({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var ni={};const JG=au(l9),QG=au(j9);var r4=l1;Object.defineProperty(ni,"__esModule",{value:!0});ni.alpha=a4;ni.blend=pq;ni.colorChannel=void 0;var eq=ni.darken=YC;ni.decomposeColor=Ma;ni.emphasize=l4;var tq=ni.getContrastRatio=aq;ni.getLuminance=Sx;ni.hexToRgb=i4;ni.hslToRgb=s4;var nq=ni.lighten=JC;ni.private_safeAlpha=lq;ni.private_safeColorChannel=void 0;ni.private_safeDarken=uq;ni.private_safeEmphasize=hq;ni.private_safeLighten=cq;ni.recomposeColor=nm;ni.rgbToHex=sq;var KM=r4(JG),rq=r4(QG);function KC(e,t=0,n=1){return(0,rq.default)(e,t,n)}function i4(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function iq(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ma(e){if(e.type)return e;if(e.charAt(0)==="#")return Ma(i4(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,KM.default)(9,e));let r=e.substring(t+1,e.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,KM.default)(10,i))}else r=r.split(",");return r=r.map(l=>parseFloat(l)),{type:n,values:r,colorSpace:i}}const o4=e=>{const t=Ma(e);return t.values.slice(0,3).map((n,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};ni.colorChannel=o4;const oq=(e,t)=>{try{return o4(e)}catch{return e}};ni.private_safeColorChannel=oq;function nm(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((i,l)=>l<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function sq(e){if(e.indexOf("#")===0)return e;const{values:t}=Ma(e);return`#${t.map((n,r)=>iq(r===3?Math.round(255*n):n)).join("")}`}function s4(e){e=Ma(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,l=r*Math.min(i,1-i),h=(w,E=(w+n/30)%12)=>i-l*Math.max(Math.min(E-3,9-E,1),-1);let u="rgb";const y=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(u+="a",y.push(t[3])),nm({type:u,values:y})}function Sx(e){e=Ma(e);let t=e.type==="hsl"||e.type==="hsla"?Ma(s4(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function aq(e,t){const n=Sx(e),r=Sx(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function a4(e,t){return e=Ma(e),t=KC(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,nm(e)}function lq(e,t,n){try{return a4(e,t)}catch{return e}}function YC(e,t){if(e=Ma(e),t=KC(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return nm(e)}function uq(e,t,n){try{return YC(e,t)}catch{return e}}function JC(e,t){if(e=Ma(e),t=KC(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return nm(e)}function cq(e,t,n){try{return JC(e,t)}catch{return e}}function l4(e,t=.15){return Sx(e)>.5?YC(e,t):JC(e,t)}function hq(e,t,n){try{return l4(e,t)}catch{return e}}function pq(e,t,n,r=1){const i=(y,w)=>Math.round((y**(1/r)*(1-n)+w**(1/r)*n)**r),l=Ma(e),h=Ma(t),u=[i(l.values[0],h.values[0]),i(l.values[1],h.values[1]),i(l.values[2],h.values[2])];return nm({type:"rgb",values:u})}const Dy={black:"#000",white:"#fff"},dq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},zd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Fd={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ng={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Bd={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},jd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$d={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},fq=["mode","contrastThreshold","tonalOffset"],YM={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Dy.white,default:Dy.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},s2={text:{primary:Dy.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Dy.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function JM(e,t,n,r){const i=r.light||r,l=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=nq(e.main,i):t==="dark"&&(e.dark=eq(e.main,l)))}function mq(e="light"){return e==="dark"?{main:Bd[200],light:Bd[50],dark:Bd[400]}:{main:Bd[700],light:Bd[400],dark:Bd[800]}}function gq(e="light"){return e==="dark"?{main:zd[200],light:zd[50],dark:zd[400]}:{main:zd[500],light:zd[300],dark:zd[700]}}function yq(e="light"){return e==="dark"?{main:Fd[500],light:Fd[300],dark:Fd[700]}:{main:Fd[700],light:Fd[400],dark:Fd[800]}}function _q(e="light"){return e==="dark"?{main:jd[400],light:jd[300],dark:jd[700]}:{main:jd[700],light:jd[500],dark:jd[900]}}function vq(e="light"){return e==="dark"?{main:$d[400],light:$d[300],dark:$d[700]}:{main:$d[800],light:$d[500],dark:$d[900]}}function xq(e="light"){return e==="dark"?{main:Ng[400],light:Ng[300],dark:Ng[700]}:{main:"#ed6c02",light:Ng[500],dark:Ng[900]}}function bq(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=Ah(e,fq),l=e.primary||mq(t),h=e.secondary||gq(t),u=e.error||yq(t),y=e.info||_q(t),w=e.success||vq(t),E=e.warning||xq(t);function C(B){return tq(B,s2.text.primary)>=n?s2.text.primary:YM.text.primary}const T=({color:B,name:Y,mainShade:$=500,lightShade:U=300,darkShade:G=700})=>{if(B=kn({},B),!B.main&&B[$]&&(B.main=B[$]),!B.hasOwnProperty("main"))throw new Error(Ay(11,Y?` (${Y})`:"",$));if(typeof B.main!="string")throw new Error(Ay(12,Y?` (${Y})`:"",JSON.stringify(B.main)));return JM(B,"light",U,r),JM(B,"dark",G,r),B.contrastText||(B.contrastText=C(B.main)),B},R={dark:s2,light:YM};return Jl(kn({common:kn({},Dy),mode:t,primary:T({color:l,name:"primary"}),secondary:T({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:u,name:"error"}),warning:T({color:E,name:"warning"}),info:T({color:y,name:"info"}),success:T({color:w,name:"success"}),grey:dq,contrastThreshold:n,getContrastText:C,augmentColor:T,tonalOffset:r},R[t]),i)}const wq=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Sq(e){return Math.round(e*1e5)/1e5}const QM={textTransform:"uppercase"},eA='"Roboto", "Helvetica", "Arial", sans-serif';function Eq(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=eA,fontSize:i=14,fontWeightLight:l=300,fontWeightRegular:h=400,fontWeightMedium:u=500,fontWeightBold:y=700,htmlFontSize:w=16,allVariants:E,pxToRem:C}=n,T=Ah(n,wq),R=i/14,O=C||($=>`${$/w*R}rem`),B=($,U,G,re,he)=>kn({fontFamily:r,fontWeight:$,fontSize:O(U),lineHeight:G},r===eA?{letterSpacing:`${Sq(re/U)}em`}:{},he,E),Y={h1:B(l,96,1.167,-1.5),h2:B(l,60,1.2,-.5),h3:B(h,48,1.167,0),h4:B(h,34,1.235,.25),h5:B(h,24,1.334,0),h6:B(u,20,1.6,.15),subtitle1:B(h,16,1.75,.15),subtitle2:B(u,14,1.57,.1),body1:B(h,16,1.5,.15),body2:B(h,14,1.43,.15),button:B(u,14,1.75,.4,QM),caption:B(h,12,1.66,.4),overline:B(h,12,2.66,1,QM),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Jl(kn({htmlFontSize:w,pxToRem:O,fontFamily:r,fontSize:i,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:u,fontWeightBold:y},Y),T,{clone:!1})}const Cq=.2,Iq=.14,Tq=.12;function dr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Cq})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Iq})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Tq})`].join(",")}const Pq=["none",dr(0,2,1,-1,0,1,1,0,0,1,3,0),dr(0,3,1,-2,0,2,2,0,0,1,5,0),dr(0,3,3,-2,0,3,4,0,0,1,8,0),dr(0,2,4,-1,0,4,5,0,0,1,10,0),dr(0,3,5,-1,0,5,8,0,0,1,14,0),dr(0,3,5,-1,0,6,10,0,0,1,18,0),dr(0,4,5,-2,0,7,10,1,0,2,16,1),dr(0,5,5,-3,0,8,10,1,0,3,14,2),dr(0,5,6,-3,0,9,12,1,0,3,16,2),dr(0,6,6,-3,0,10,14,1,0,4,18,3),dr(0,6,7,-4,0,11,15,1,0,4,20,3),dr(0,7,8,-4,0,12,17,2,0,5,22,4),dr(0,7,8,-4,0,13,19,2,0,5,24,4),dr(0,7,9,-4,0,14,21,2,0,5,26,4),dr(0,8,9,-5,0,15,22,2,0,6,28,5),dr(0,8,10,-5,0,16,24,2,0,6,30,5),dr(0,8,11,-5,0,17,26,2,0,6,32,5),dr(0,9,11,-5,0,18,28,2,0,7,34,6),dr(0,9,12,-6,0,19,29,2,0,7,36,6),dr(0,10,13,-6,0,20,31,3,0,8,38,7),dr(0,10,13,-6,0,21,33,3,0,8,40,7),dr(0,10,14,-6,0,22,35,3,0,8,42,7),dr(0,11,14,-7,0,23,36,3,0,9,44,8),dr(0,11,15,-7,0,24,38,3,0,9,46,8)],Lq=["duration","easing","delay"],Mq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Aq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function tA(e){return`${Math.round(e)}ms`}function kq(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Nq(e){const t=kn({},Mq,e.easing),n=kn({},Aq,e.duration);return kn({getAutoHeightDuration:kq,create:(i=["all"],l={})=>{const{duration:h=n.standard,easing:u=t.easeInOut,delay:y=0}=l;return Ah(l,Lq),(Array.isArray(i)?i:[i]).map(w=>`${w} ${typeof h=="string"?h:tA(h)} ${u} ${typeof y=="string"?y:tA(y)}`).join(",")}},e,{easing:t,duration:n})}const Rq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Dq=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Oq(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:l={}}=e,h=Ah(e,Dq);if(e.vars)throw new Error(Ay(18));const u=bq(r),y=VC(e);let w=Jl(y,{mixins:YG(y.breakpoints,n),palette:u,shadows:Pq.slice(),typography:Eq(u,l),transitions:Nq(i),zIndex:kn({},Rq)});return w=Jl(w,h),w=t.reduce((E,C)=>Jl(E,C),w),w.unstable_sxConfig=kn({},f0,h==null?void 0:h.unstable_sxConfig),w.unstable_sx=function(C){return I1({sx:C,theme:this})},w}const u4=Oq(),c4="$$material";function zq({props:e,name:t}){return WG({props:e,name:t,defaultTheme:u4,themeId:c4})}var g0={},a2={exports:{}},nA;function Fq(){return nA||(nA=1,function(e){function t(n,r){if(n==null)return{};var i={};for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){if(r.indexOf(l)>=0)continue;i[l]=n[l]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(a2)),a2.exports}const Bq=au($G),jq=au(a9),$q=au(f9),Vq=au(d9),Uq=au(RU),Gq=au(KG);var rm=l1;Object.defineProperty(g0,"__esModule",{value:!0});var qq=g0.default=iW;g0.shouldForwardProp=Av;g0.systemDefaultTheme=void 0;var _a=rm(t4()),DS=rm(Fq()),rA=Jq(Bq),Wq=jq;rm($q);rm(Vq);var Hq=rm(Uq),Zq=rm(Gq);const Xq=["ownerState"],Kq=["variants"],Yq=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function h4(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(h4=function(r){return r?n:t})(e)}function Jq(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=h4(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var h=i?Object.getOwnPropertyDescriptor(e,l):null;h&&(h.get||h.set)?Object.defineProperty(r,l,h):r[l]=e[l]}return r.default=e,n&&n.set(e,r),r}function Qq(e){return Object.keys(e).length===0}function eW(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Av(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const tW=g0.systemDefaultTheme=(0,Hq.default)(),nW=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function rv({defaultTheme:e,theme:t,themeId:n}){return Qq(t)?e:t[n]||t}function rW(e){return e?(t,n)=>n[e]:null}function kv(e,t){let{ownerState:n}=t,r=(0,DS.default)(t,Xq);const i=typeof e=="function"?e((0,_a.default)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap(l=>kv(l,(0,_a.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:l=[]}=i;let u=(0,DS.default)(i,Kq);return l.forEach(y=>{let w=!0;typeof y.props=="function"?w=y.props((0,_a.default)({ownerState:n},r,n)):Object.keys(y.props).forEach(E=>{(n==null?void 0:n[E])!==y.props[E]&&r[E]!==y.props[E]&&(w=!1)}),w&&(Array.isArray(u)||(u=[u]),u.push(typeof y.style=="function"?y.style((0,_a.default)({ownerState:n},r,n)):y.style))}),u}return i}function iW(e={}){const{themeId:t,defaultTheme:n=tW,rootShouldForwardProp:r=Av,slotShouldForwardProp:i=Av}=e,l=h=>(0,Zq.default)((0,_a.default)({},h,{theme:rv((0,_a.default)({},h,{defaultTheme:n,themeId:t}))}));return l.__mui_systemSx=!0,(h,u={})=>{(0,rA.internal_processStyles)(h,he=>he.filter(_e=>!(_e!=null&&_e.__mui_systemSx)));const{name:y,slot:w,skipVariantsResolver:E,skipSx:C,overridesResolver:T=rW(nW(w))}=u,R=(0,DS.default)(u,Yq),O=E!==void 0?E:w&&w!=="Root"&&w!=="root"||!1,B=C||!1;let Y,$=Av;w==="Root"||w==="root"?$=r:w?$=i:eW(h)&&($=void 0);const U=(0,rA.default)(h,(0,_a.default)({shouldForwardProp:$,label:Y},R)),G=he=>typeof he=="function"&&he.__emotion_real!==he||(0,Wq.isPlainObject)(he)?_e=>kv(he,(0,_a.default)({},_e,{theme:rv({theme:_e.theme,defaultTheme:n,themeId:t})})):he,re=(he,..._e)=>{let fe=G(he);const ye=_e?_e.map(G):[];y&&T&&ye.push(Ue=>{const Ye=rv((0,_a.default)({},Ue,{defaultTheme:n,themeId:t}));if(!Ye.components||!Ye.components[y]||!Ye.components[y].styleOverrides)return null;const wt=Ye.components[y].styleOverrides,Ae={};return Object.entries(wt).forEach(([Je,vt])=>{Ae[Je]=kv(vt,(0,_a.default)({},Ue,{theme:Ye}))}),T(Ue,Ae)}),y&&!O&&ye.push(Ue=>{var Ye;const wt=rv((0,_a.default)({},Ue,{defaultTheme:n,themeId:t})),Ae=wt==null||(Ye=wt.components)==null||(Ye=Ye[y])==null?void 0:Ye.variants;return kv({variants:Ae},(0,_a.default)({},Ue,{theme:wt}))}),B||ye.push(l);const Pe=ye.length-_e.length;if(Array.isArray(he)&&Pe>0){const Ue=new Array(Pe).fill("");fe=[...he,...Ue],fe.raw=[...he.raw,...Ue]}const De=U(fe,...ye);return h.muiName&&(De.muiName=h.muiName),De};return U.withConfig&&(re.withConfig=U.withConfig),re}}function oW(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const sW=e=>oW(e)&&e!=="classes",aW=qq({themeId:c4,defaultTheme:u4,rootShouldForwardProp:sW});function lW(e){return L5("MuiSvgIcon",e)}F9("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const uW=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],cW=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${fh(t)}`,`fontSize${fh(n)}`]};return D9(i,lW,r)},hW=aW("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${fh(n.color)}`],t[`fontSize${fh(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,i,l,h,u,y,w,E,C,T,R,O;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((l=e.typography)==null||(h=l.pxToRem)==null?void 0:h.call(l,20))||"1.25rem",medium:((u=e.typography)==null||(y=u.pxToRem)==null?void 0:y.call(u,24))||"1.5rem",large:((w=e.typography)==null||(E=w.pxToRem)==null?void 0:E.call(w,35))||"2.1875rem"}[t.fontSize],color:(C=(T=(e.vars||e).palette)==null||(T=T[t.color])==null?void 0:T.main)!=null?C:{action:(R=(e.vars||e).palette)==null||(R=R.action)==null?void 0:R.active,disabled:(O=(e.vars||e).palette)==null||(O=O.action)==null?void 0:O.disabled,inherit:void 0}[t.color]}}),OS=be.forwardRef(function(t,n){const r=zq({props:t,name:"MuiSvgIcon"}),{children:i,className:l,color:h="inherit",component:u="svg",fontSize:y="medium",htmlColor:w,inheritViewBox:E=!1,titleAccess:C,viewBox:T="0 0 24 24"}=r,R=Ah(r,uW),O=be.isValidElement(i)&&i.type==="svg",B=kn({},r,{color:h,component:u,fontSize:y,instanceFontSize:t.fontSize,inheritViewBox:E,viewBox:T,hasSvgAsChild:O}),Y={};E||(Y.viewBox=T);const $=cW(B);return j.jsxs(hW,kn({as:u,className:$9($.root,l),focusable:"false",color:w,"aria-hidden":C?void 0:!0,role:C?"img":void 0,ref:n},Y,R,O&&i.props,{ownerState:B,children:[O?i.props.children:i,C?j.jsx("title",{children:C}):null]}))});OS.muiName="SvgIcon";function pW(e,t){function n(r,i){return j.jsx(OS,kn({"data-testid":`${t}Icon`,ref:i},r,{children:e}))}return n.muiName=OS.muiName,be.memo(be.forwardRef(n))}const dW={configure:e=>{P5.configure(e)}},fW=Object.freeze(Object.defineProperty({__proto__:null,capitalize:fh,createChainedFunction:m9,createSvgIcon:pW,debounce:g9,deprecatedPropType:y9,isMuiElement:_9,ownerDocument:E5,ownerWindow:v9,requirePropFactory:x9,setRef:C5,unstable_ClassNameGenerator:dW,unstable_useEnhancedEffect:I5,unstable_useId:w9,unsupportedProp:S9,useControlled:E9,useEventCallback:C9,useForkRef:I9,useIsFocusVisible:R9},Symbol.toStringTag,{value:"Module"})),mW=au(fW);var iA;function p4(){return iA||(iA=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=mW}(n2)),n2}var gW=l1;Object.defineProperty(RC,"__esModule",{value:!0});var zS=RC.default=void 0,yW=gW(p4()),_W=j;zS=RC.default=(0,yW.default)((0,_W.jsx)("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39z"}),"TaskAltOutlined");const l2=({name:e,title:t,img:n})=>j.jsxs("div",{className:"group relative cursor-pointer items-center justify-center overflow-hidden transition-shadow hover:shadow-xl hover:shadow-black/30",children:[j.jsx("div",{className:"h-96 w-89",children:j.jsx("img",{className:"h-full w-full object-cover transition-transform duration-500 group-hover:rotate-3 group-hover:scale-125",src:n,alt:""})}),j.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black group-hover:from-black/70 group-hover:via-black/60 group-hover:to-black/70"}),j.jsxs("div",{className:"absolute inset-0 flex translate-y-[60%] flex-col text-center items-center justify-center px-7 text-center transition-all duration-500 group-hover:translate-y-0",children:[j.jsx("h1",{className:"font-dmserif text-2xl pb-2 mb-7 top-0 font-semibold text-white",children:j.jsx("button",{className:"p-3",children:e})}),j.jsx("h1",{className:"font-dmserif text-xl pb-3 top-0 font-bold text-white",children:t}),j.jsx("button",{className:"backdrop-blur-md py-4 px-3 font-com text-sm capitalize text-white shadow shadow-black/60",children:"See More"})]})]}),vW=()=>{const{showPopup:e,toggleDownPopup:t,showSignUpPopup:n,showLogOutPopup:r,toggleDownSignUpPopup:i,toggleDownLogOutPopup:l}=be.useContext(o0);return be.useEffect(()=>{(()=>{setTimeout(()=>{t()},2e3)})()},[]),be.useEffect(()=>{(()=>{setTimeout(()=>{l()},2e3)})()}),be.useEffect(()=>{(()=>{setTimeout(()=>{i()},2e3)})()}),j.jsxs(j.Fragment,{children:[e?j.jsx("div",{className:"absolute flex justify-center top-0 w-full",children:j.jsxs("div",{role:"alert",className:"border w-[450px] transition-all duration-75 ease-in-out items-center border-green-500 bg-white rounded-lg p-5 flex justify-center",children:[j.jsx("span",{className:"border p-1 bg-green-100",children:j.jsx(zS,{className:"w-8 h-8 text-green-500"})}),j.jsx("span",{className:"title text-xl text-green-600 ml-5",children:"Login Successfull!"})]})}):"",r?j.jsx("div",{className:"absolute flex justify-center top-0 w-full",children:j.jsxs("div",{role:"alert",className:"border w-[450px] transition-all duration-75 ease-in-out items-center border-red-500 bg-white rounded-lg p-5 flex justify-center",children:[j.jsx("span",{className:"border p-1 bg-red-100",children:j.jsx(s9,{className:"w-8 h-8 text-red-500"})}),j.jsx("span",{className:"title text-xl text-red-600 ml-5",children:"Logout Successfull!"})]})}):"",n?j.jsx("div",{className:"absolute flex justify-center top-0 w-full",children:j.jsxs("div",{role:"alert",className:"border w-[450px] transition-all duration-75 ease-in-out items-center border-green-500 bg-white rounded-lg p-5 flex justify-center",children:[j.jsx("span",{className:"border p-1 bg-green-100",children:j.jsx(zS,{className:"w-8 h-8 text-green-500"})}),j.jsx("span",{className:"title text-xl text-green-600 ml-5",children:"SignUp Successfull!"})]})}):"",j.jsx("div",{className:"mt-0 w-full justify-center items-center  bg-home border bg-cover md h-[700px] flex flex-row",children:j.jsx("div",{className:"w-full h-full flex justify-center",children:j.jsx("div",{className:"ml-5 mr-5 p-5 w-full",children:j.jsxs("div",{className:"justify-between flex h-full w-full flex-col text-center items-center",children:[j.jsxs("div",{className:"flex flex-col justify-center items-center h-full pl-5 pr-5",children:[j.jsxs("div",{className:"flex flex-col  text-center",children:[j.jsx("div",{className:"h-full overflow-hidden",children:j.jsx(kM.h1,{variants:mL("right",.1),initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.7},children:j.jsx("div",{className:"title text-6xl text-center text-white",children:"SEHARI"})})}),j.jsx("div",{className:"h-full overflow-hidden",children:j.jsx(kM.h1,{variants:mL("right",.1),initial:"hidden",whileInView:"show",viewport:{once:!1,amount:.7},children:j.jsx("div",{className:"title text-3xl max-w-fit-content text-white pt-5",children:"Add a touch of the timeless"})})})]}),j.jsx("div",{className:"flex flex-wrap text-l pb-5 title text-center mt-5 text-white",children:"An online platform to make your event shine and find the venue that matches your vision."}),j.jsxs("div",{className:"flex items-center",children:[j.jsx("button",{className:"bg-button-color title p-3 rounded-xl",children:"Explore Now"}),j.jsxs("div",{className:"rating ml-10 flex gap-1",children:[j.jsx("input",{type:"radio",name:"rating-2",className:"mask mask-star-2 border bg-orange-500"}),j.jsx("input",{type:"radio",name:"rating-2",className:"mask mask-star-2 border bg-orange-500"}),j.jsx("input",{type:"radio",name:"rating-2",className:"mask mask-star-2 border bg-orange-500"}),j.jsx("input",{type:"radio",name:"rating-2",className:"mask  mask-star-2 border bg-orange-500",checked:!0}),j.jsx("input",{type:"radio",name:"rating-2",className:"mask mask-star-2 border bg-orange-500"})]})]})]}),j.jsxs("div",{className:"w-full justify-between  flex flex-row  p-5",children:[j.jsxs("div",{className:"flex flex-col  text-gray-300 text-center",children:[j.jsx("p",{children:"220,000+"}),j.jsx("p",{children:"Event Briefs"})]}),j.jsxs("div",{className:"flex flex-col text-gray-300  text-center",children:[j.jsx("p",{children:"10,000+"}),j.jsx("p",{children:"Venues Available"})]}),j.jsxs("div",{className:"flex flex-col text-gray-300  text-center",children:[j.jsx("p",{children:"40,000+"}),j.jsx("p",{children:"Clients Served"})]}),j.jsxs("div",{className:"flex flex-col text-gray-300  text-center",children:[j.jsx("p",{children:"2+ years"}),j.jsx("p",{children:"Since Founded"})]})]})]})})})}),j.jsxs("div",{className:"mt-16 flex justify-center flex-col items-center",children:[j.jsx("p",{className:"text-center title text-2xl",children:"We Offers"}),j.jsxs("div",{className:"flex lg:w-1/2 md:w-full sm:w-full justify-between mt-10 flex-row  flex-wrap items-center",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("img",{src:e9,className:"w-40 h-40",alt:""}),j.jsx("p",{className:"mt-6 title tracking-wide",children:"Gift Vochers"})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("img",{src:t9,className:"w-40 h-40",alt:""}),j.jsx("p",{className:"mt-6 title tracking-wide",children:"Coupens"})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("img",{src:n9,className:"w-40 h-40",alt:""}),j.jsx("p",{className:"mt-6 title tracking-wide",children:"Best Event planning"})]})]})]}),j.jsx("div",{className:"mt-16",children:j.jsxs("div",{className:"flex w-full flex-col text-center mt-10  bg-red-50 p-10 ",children:[j.jsx("h1",{className:"text-center text-2xl",children:"Our Gallery"}),j.jsxs("div",{className:" grid grid-cols-1 flex items-center mt-10 justify-center gap-6 md:grid-cols-1 lg:grid-cols-3",children:[j.jsx(l2,{name:"Troxy",title:"Tower Hamlets",img:r9}),j.jsx(l2,{name:"Greenwich Yacht Club",title:"Greenwich",img:i9}),j.jsx(l2,{name:"Roundhouse",title:"Camden",img:o9})]})]})}),j.jsx(j8,{}),j.jsx(y8,{}),j.jsx(uB,{}),j.jsx(M3,{})]})},xW="/assets/servicesTitle-CSNZ9oFW.jpg",bW="/assets/theme-sosy1E9N.jpg",wW="/assets/meeting-D1FpTmEC.jpg",SW="/assets/wedding-DbEZIBDO.jpg";var QC={},EW=l1;Object.defineProperty(QC,"__esModule",{value:!0});var d4=QC.default=void 0,CW=EW(p4()),IW=j;d4=QC.default=(0,CW.default)((0,IW.jsx)("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"}),"TravelExploreOutlined");const TW=()=>{const[e,t,n]=JE(),r=t.map(i=>({name:i.name,img:btoa(i.bgImage)}));return j.jsxs("div",{children:[j.jsxs("div",{className:"flex flex-col items-center justify-center",children:[j.jsx("p",{className:"text-3xl  title mt-10 mb-5",children:"Venues By Event Type"}),j.jsx("p",{className:"text-xl text-center  title mt-4",children:"Venues recognised for their outstanding performance in hosting particular event types"})]}),n?j.jsx(gB,{}):j.jsx("div",{className:"flex justify-center bg-red-50 border w-full items-center flex-row mt-16 flex-wrap",children:r.map((i,l)=>j.jsxs("div",{className:"w-fit p-10",children:[j.jsx("div",{className:"w-32",children:j.jsx("img",{src:`data:image/svg+xml;base64,${i.img}`,alt:"Venue background image",className:"cursor-pointer"},l)}),j.jsx("h3",{className:`${iB} text-center pt-3`,children:i.name})]}))})]})},u2=({title:e,img:t})=>j.jsxs("div",{className:"group relative cursor-pointer items-center justify-center overflow-hidden transition-shadow hover:shadow-xl hover:shadow-black/30",children:[j.jsx("div",{className:"h-96 w-89",children:j.jsx("img",{className:"h-full w-full object-cover transition-transform duration-500 group-hover:rotate-3 group-hover:scale-125",src:t,alt:""})}),j.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black group-hover:from-black/70 group-hover:via-black/60 group-hover:to-black/70"}),j.jsxs("div",{className:"absolute inset-0 flex translate-y-[60%] flex-col items-center justify-center px-7 text-center transition-all duration-500 group-hover:translate-y-0",children:[j.jsx("h1",{className:"font-dmserif text-2xl pb-2 mb-7 top-0 font-semibold text-white",children:j.jsx("button",{className:"border p-3 rounded-xl",children:"Explore"})}),j.jsx("h1",{className:"font-dmserif text-3xl pb-3 top-0 font-bold text-white",children:e}),j.jsx("button",{className:"rounded-full bg-neutral-900 py-5 px-3.5 font-com text-sm capitalize text-white shadow shadow-black/60",children:"See More"})]})]}),iv=({hallName:e,EventType:t,hr:n,dollar:r,border:i})=>{const l="self-center whitespace-nowrap text-xl subtitle text-[#410825] tracking-wide text-center";return j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"shrink-0 mt-16 max-w-full h-px flex justify-center items-center w-[1278px] max-md:mt-10"}),j.jsxs("div",{className:"flex gap-5 justify-between items-center  py-20 pr-9 pl-20 mt-6 max-w-full text-4xl text-black bg-red-50 w-[1208px] max-md:flex-wrap max-md:px-5 max-md:mt-10",children:[j.jsxs("div",{className:"flex flex-col self-start",children:[j.jsx("div",{className:l,children:e}),j.jsxs("div",{className:l,children:[" ",t]})]}),j.jsxs("div",{className:"self-end  text-xl subtitle text-[#410825] tracking-wide text-center",children:[n," ",j.jsx("br",{}),r]}),j.jsx("div",{className:"justify-center p-3 text-xl title rounded-xl whitespace-nowrap bg-button-color transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5",children:"Book Now"})]})]})},PW=()=>{const e=t=>{t.key=="Enter"&&alert("dfghjk")};return j.jsxs("div",{className:"z-10",children:[j.jsx("div",{className:"w-full",children:j.jsx("img",{src:xW,alt:"",className:"w-full"})}),j.jsxs("div",{className:"flex flex-col px-10 py-10 -z-10 max-md:px-5",children:[j.jsx("div",{className:"flex w-full  justify-center",children:j.jsxs("div",{className:" title mt-5 text-2xl w-full flex items-center justify-center",children:[j.jsx("div",{children:"Search your venue"}),j.jsx("div",{className:"absolute mb-10 animate-bounce text-5xl",children:j.jsx(rB,{})})]})}),j.jsxs("div",{className:"flex justify-center mt-6 items-center mb-10",children:[j.jsxs("div",{className:"relative border border-black w-1/5 flex items-center rounded-md shadow-sm",children:[j.jsx("div",{className:"pointer-events-none absolute inset-y-0 flex items-center pl-3",children:j.jsx("span",{className:"text-gray-500 sm:text-sm",children:j.jsx(tB,{})})}),j.jsx("input",{type:"text",onKeyDown:e,className:"block w-full rounded-md border-0 py-1.5 pl-10 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"search"})]}),j.jsx("a",{href:"/map",children:j.jsx("div",{className:"p-2 ml-5 tooltip tooltip-bottom","data-tip":"Geoposition",children:j.jsx(d4,{})})})]}),j.jsx("div",{className:"flex w-full mt-10 items-center justify-center",children:j.jsxs("div",{className:" grid grid-cols-1 gap-5 md:grid-cols-1 lg:grid-cols-3",children:[j.jsx(u2,{title:"Wedding Events",img:SW}),j.jsx(u2,{title:"Meeting Events",img:wW}),j.jsx(u2,{title:"themed Events",img:bW})]})})]}),j.jsx("div",{children:j.jsx(TW,{})}),j.jsxs("div",{className:"flex flex-col items-center pb-5 bg-white",children:[j.jsx("div",{children:j.jsx("p",{className:"title text-3xl mt-20",children:"Sample Bookings"})}),j.jsx(iv,{hallName:"Jamnagar halls",EventType:"Wedding",hr:"1 hr",dollar:"$600",border:!0}),j.jsx(iv,{hallName:"vaibhav hall",EventType:"Birthday event",hr:"1 hr",dollar:"$200",border:!0}),j.jsx(iv,{hallName:"Raj mahal",EventType:"Partial Package",hr:"1 hr",dollar:"$100",border:!0}),j.jsx(iv,{hallName:"kashmir halls",EventType:"meeeting",hr:"1 hr",dollar:"$600",border:!1})]}),j.jsx(M3,{})]})};function f4(e){return Sl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M17 16.488c-0.063-2.687-2.778-4.999-6.521-5.609v-1.374c0.492-0.473 0.842-1.207 1.071-1.833 0.332-0.166 0.624-0.536 0.794-1.033 0.238-0.688 0.146-1.323-0.206-1.629 0.028-0.238 0.046-0.481 0.015-0.723-0.079-0.663 0.065-1.038 0.194-1.368 0.106-0.277 0.229-0.591 0.106-0.945-0.442-1.273-1.727-1.974-3.618-1.974l-0.264 0.005c-1.313 0.047-1.707 0.6-1.971 1.115-0.033 0.062-0.077 0.146-0.077 0.151-1.712 0.153-1.697 1.569-1.684 2.707l0.003 0.369c0 0.205 0.009 0.419 0.026 0.639-0.425 0.3-0.504 1.005-0.179 1.737 0.185 0.415 0.452 0.729 0.749 0.892 0.243 0.674 0.625 1.47 1.179 1.965v1.283c-3.798 0.589-6.554 2.907-6.617 5.625l-0.012 0.512h17.023l-0.011-0.512zM1.054 16c0.392-2.094 2.859-3.821 6.122-4.204l0.441-0.052v-2.666l-0.216-0.15c-0.393-0.272-0.791-0.947-1.090-1.851l-0.083-0.281-0.294-0.051c-0.053-0.019-0.208-0.153-0.33-0.428-0.075-0.168-0.104-0.312-0.112-0.415l0.51 0.143-0.096-0.749c-0.042-0.33-0.064-0.651-0.064-0.95l-0.003-0.38c-0.015-1.341 0.051-1.634 0.773-1.699 0.545-0.048 0.752-0.449 0.876-0.689 0.15-0.292 0.28-0.543 1.12-0.574l0.227-0.004c0.829 0 2.279 0.169 2.669 1.282 0 0.043-0.052 0.177-0.090 0.275-0.145 0.374-0.364 0.939-0.254 1.853 0.024 0.188-0.007 0.424-0.040 0.675l-0.089 0.805 0.441-0.048c0.008 0.104-0.004 0.269-0.075 0.472-0.097 0.289-0.242 0.438-0.237 0.454h-0.36l-0.114 0.342c-0.283 0.853-0.65 1.497-1.009 1.768l-0.198 0.15v2.726l0.438 0.055c3.211 0.401 5.641 2.123 6.030 4.192h-14.893z"},child:[]}]})(e)}function m4(e){return Sl({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}const LW=()=>{const[e,t]=be.useState(""),[n,r]=be.useState(""),[i,l]=be.useState(""),h=nC(),{login:u,isLoggedIn:y,showPopup:w,togglePopup:E}=be.useContext(o0),C=async()=>{if(!e||!n)l("Email or password is required");else try{(await fetch(`http://localhost:5173/database/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})})).ok?(u(),E(),h("/")):l("Email or password is incorrect")}catch{console.log("error in server side")}};return j.jsx(j.Fragment,{children:j.jsx("div",{className:"z-1 flex justify-center items-center bg-login px-16 py-20 max-md:px-5",children:j.jsx("div",{className:"flex gap-0 max-md:flex-col justify-center max-md:gap-0",children:j.jsxs("div",{className:"flex flex-col  items-center pt-16 pb-16 max-w-full w-[500px] backdrop-blur-md shadow-2xl",children:[j.jsxs("div",{className:"flex gap-4 text-3xl font-semibold text-black whitespace-nowrap",children:[j.jsx("div",{className:"flex-auto",children:"Welcome"}),j.jsx("div",{children:"back!"})]}),j.jsxs("div",{className:"flex z-1 flex-col justify-center  mt-5 mb-5 max-w-full w-[330px]",children:[j.jsxs("div",{className:"relative w-full top-2 flex items-center rounded-md shadow-sm",children:[j.jsx(f4,{size:"25",color:"black",className:"absolute pl-3 pointer-events-none"}),j.jsx("input",{type:"email",value:e,required:!0,onChange:T=>t(T.target.value),className:" w-full rounded-md border-0 py-2 pl-8 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter email"})]}),j.jsx("div",{children:i&&j.jsx("p",{className:"text-red-500 mt-3",children:i})})]}),j.jsxs("div",{className:"flex z-1 flex-col justify-center mt-5 mb-5 max-w-full w-[330px]",children:[j.jsxs("div",{className:"relative w-full top-2 flex items-center rounded-md shadow-sm",children:[j.jsx(L3,{size:"25",color:"black",className:"absolute pl-3 pointer-events-none"}),j.jsx("input",{type:"password",value:n,required:!0,onChange:T=>r(T.target.value),className:"w-full rounded-md border-0 py-2 pl-8 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter password"})]}),j.jsx("div",{children:i&&j.jsx("p",{className:"text-red-500 mt-3",children:i})})]}),j.jsx("div",{onClick:C,className:`w-1/2 text-center justify-center mt-7 p-3 text-xl title rounded-xl whitespace-nowrap \r
                   bg-button-color transition ease-in-out delay-150 focus:bg-blue-300 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5`,children:j.jsx("button",{type:"submit",children:"login"})}),j.jsxs("div",{className:"flex gap-5 justify-between items-center mt-11 text-xl text-black whitespace-nowrap max-md:mt-10",children:[j.jsx("div",{className:"shrink-0 self-stretch my-auto h-px bg-black border border-black border-solid w-[87px]"}),j.jsx("div",{className:"self-stretch",children:"or"}),j.jsx("div",{className:"shrink-0 self-stretch my-auto h-px bg-black border border-black border-solid w-[87px]"})]}),j.jsx("div",{className:"mt-12 text-xl font-semibold text-black whitespace-nowrap max-md:mt-10",children:"connect with"}),j.jsxs("div",{className:"flex gap-5 justify-between mt-16 max-w-full w-[260px] max-md:mt-10",children:[j.jsx(m4,{className:"lg:w-1/5 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2",onClick:""}),j.jsx(T3,{className:"lg:w-1/4 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2"}),j.jsx(P3,{className:"lg:w-1/4 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2"})]}),j.jsxs("div",{className:"flex flex-wrap gap-5 mt-10 text-xl justify-center font-semibold whitespace-nowrap max-md:mt-10",children:[j.jsx("div",{className:"grow text-black",children:"don’t have an account?"}),j.jsx("a",{href:"/signup",className:"text-teal-500 pb-2 full-width-underline",children:"Sign Up"})]})]})})})})},MW=()=>{const e=nC(),[t,n]=be.useState(""),[r,i]=be.useState(""),[l,h]=be.useState(""),{toggleSignUpPopup:u,login:y}=be.useContext(o0),w=async()=>{try{const E=await fetch(`http://localhost:5173/database/signup`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});E.ok?(u(),y(),e("/")):(console.log("response is ",E),console.error("Error creating post"));const C=await E.json()}catch(E){console.error("Error occurred during signup:",E)}};return j.jsx(j.Fragment,{children:j.jsx("div",{className:"z-2 flex bg-login justify-center items-center px-16 py-20 max-md:px-5",children:j.jsx("div",{className:"flex justify-center",children:j.jsx("div",{className:"flex flex-col backdrop-blur-md shadow-2xl max-md:w-full",children:j.jsx("div",{className:"flex flex-col grow items-center px-16 pb-10 w-full",children:j.jsxs("div",{className:"flex flex-col items-center max-w-full w-[336px]",children:[j.jsxs("div",{className:"mt-5 text-4xl font-semibold text-black max-md:mt-10",children:["Sign Up",j.jsx("br",{})]}),j.jsxs("div",{className:"flex flex-col justify-center  mt-5 mb-5 max-w-full w-[330px]",children:[j.jsxs("div",{className:"relative w-full top-2 flex items-center rounded-md shadow-sm",children:[j.jsx(f4,{size:"25",color:"black",className:"absolute pl-3 pointer-events-none"}),j.jsx("input",{type:"email",value:t,required:!0,onChange:E=>n(E.target.value),className:"w-full rounded-md border-0 py-2 pl-8 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter email"})]}),j.jsx("div",{children:l&&j.jsx("p",{className:"text-red-500 mt-3",children:l})})]}),j.jsxs("div",{className:"flex z-2 flex-col justify-center mt-5 mb-5 max-w-full w-[330px]",children:[j.jsxs("div",{className:"relative w-full top-2 flex items-center rounded-md shadow-sm",children:[j.jsx(L3,{size:"25",color:"black",className:"absolute pl-3 pointer-events-none"}),j.jsx("input",{type:"password",value:r,required:!0,onChange:E=>i(E.target.value),className:"w-full rounded-md border-0 py-2 pl-8 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter password"})]}),j.jsx("div",{children:l&&j.jsx("p",{className:"text-red-500 mt-3",children:l})})]}),j.jsx("div",{onClick:w,className:`w-1/2 text-center justify-center mt-7 p-3 text-xl title rounded-xl whitespace-nowrap \r
                   bg-button-color transition ease-in-out delay-150 focus:bg-blue-300 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5`,children:j.jsx("button",{type:"submit",children:"signup"})}),j.jsxs("div",{className:"flex gap-5 justify-between items-center mt-11 text-xl text-black whitespace-nowrap max-md:mt-10",children:[j.jsx("div",{className:"shrink-0 self-stretch my-auto h-px bg-black border border-black border-solid w-[87px]"}),j.jsx("div",{className:"self-stretch",children:"or"}),j.jsx("div",{className:"shrink-0 self-stretch my-auto h-px bg-black border border-black border-solid w-[87px]"})]}),j.jsx("div",{className:"mt-12 text-xl font-semibold text-black whitespace-nowrap max-md:mt-10",children:"connect with"}),j.jsxs("div",{className:"flex gap-5 justify-between mt-16 max-w-full w-[260px] max-md:mt-10",children:[j.jsx(m4,{className:"lg:w-1/5 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2",onClick:""}),j.jsx(T3,{className:"lg:w-1/5 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2"}),j.jsx(P3,{className:"lg:w-1/5 md:w-full md:h-full  lg:h-full w-1/5 hover:rounded-md hover:border hover:border-black h-1/2"})]}),j.jsxs("div",{className:"flex gap-5 mt-10 text-xl font-semibold whitespace-nowrap max-md:mt-10",children:[j.jsx("div",{className:"grow text-black",children:"Already have an account?"}),j.jsx("a",{href:"/login",className:"text-teal-500 pb-2 full-width-underline",children:"login"})]})]})})})})})})};var g4={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.2.0/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(vz,function(){var n={},r={};function i(h,u,y){if(r[h]=y,h==="index"){var w="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",E={};return r.shared(E),r.index(n,E),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),n}}i("shared",["exports"],function(h){function u(a,o,c,d){return new(c||(c=Promise))(function(m,v){function x(M){try{P(d.next(M))}catch(N){v(N)}}function S(M){try{P(d.throw(M))}catch(N){v(N)}}function P(M){var N;M.done?m(M.value):(N=M.value,N instanceof c?N:new c(function(D){D(N)})).then(x,S)}P((d=d.apply(a,o||[])).next())})}function y(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var w=E;function E(a,o){this.x=a,this.y=o}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,o){return this.clone()._rotateAround(a,o)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var o=a.x-this.x,c=a.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,o){return Math.atan2(this.x*o-this.y*a,this.x*a+this.y*o)},_matMult:function(a){var o=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=o,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var o=Math.cos(a),c=Math.sin(a),d=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=d,this},_rotateAround:function(a,o){var c=Math.cos(a),d=Math.sin(a),m=o.y+d*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-d*(this.y-o.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(a){return a instanceof E?a:Array.isArray(a)?new E(a[0],a[1]):a};var C=y(w),T=R;function R(a,o,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=o,this.p2x=c,this.p2y=d}R.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,o){if(o===void 0&&(o=1e-6),a<0)return 0;if(a>1)return 1;for(var c=a,d=0;d<8;d++){var m=this.sampleCurveX(c)-a;if(Math.abs(m)<o)return c;var v=this.sampleCurveDerivativeX(c);if(Math.abs(v)<1e-6)break;c-=m/v}var x=0,S=1;for(c=a,d=0;d<20&&(m=this.sampleCurveX(c),!(Math.abs(m-a)<o));d++)a>m?x=c:S=c,c=.5*(S-x)+x;return c},solve:function(a,o){return this.sampleCurveY(this.solveCurveX(a,o))}};var O=y(T);let B,Y;function $(){return B==null&&(B=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),B}function U(){if(Y==null&&(Y=!1,$())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let d=0;d<5*5;d++){const m=4*d;o.fillStyle=`rgb(${m},${m+1},${m+2})`,o.fillRect(d%5,Math.floor(d/5),1,1)}const c=o.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){Y=!0;break}}}return Y||!1}function G(a,o,c,d){const m=new O(a,o,c,d);return v=>m.solve(v)}const re=G(.25,.1,.25,1);function he(a,o,c){return Math.min(c,Math.max(o,a))}function _e(a,o,c){const d=c-o,m=((a-o)%d+d)%d+o;return m===o?c:m}function fe(a,...o){for(const c of o)for(const d in c)a[d]=c[d];return a}let ye=1;function Pe(a,o,c){const d={};for(const m in a)d[m]=o.call(this,a[m],m,a);return d}function De(a,o,c){const d={};for(const m in a)o.call(this,a[m],m,a)&&(d[m]=a[m]);return d}function Ue(a){return Array.isArray(a)?a.map(Ue):typeof a=="object"&&a?Pe(a,Ue):a}const Ye={};function wt(a){Ye[a]||(typeof console<"u"&&console.warn(a),Ye[a]=!0)}function Ae(a,o,c){return(c.y-a.y)*(o.x-a.x)>(o.y-a.y)*(c.x-a.x)}function Je(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let vt=null;function Gt(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function dt(a,o,c,d,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),P=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(P,function(M,N,D,F,W){const X=4*Math.max(-N,0),Q=(Math.max(0,D)-D)*F*4+X,ie=4*F,ue=Math.max(0,N),we=Math.max(0,D);return{rect:{x:ue,y:we,width:Math.min(M.width,N+F)-ue,height:Math.min(M.height,D+W)-we},layout:[{offset:Q,stride:ie}]}}(a,o,c,d,m)),S)for(let M=0;M<P.length;M+=4){const N=P[M];P[M]=P[M+2],P[M+2]=N}return P}finally{v.close()}})}let St,Pt;const Bt="AbortError";function yn(){return new Error(Bt)}const Yn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Jn(a){return Yn.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const vr="global-dispatcher";class ri extends Error{constructor(o,c,d,m){super(`AJAXError: ${c} (${o}): ${d}`),this.status=o,this.statusText=c,this.url=d,this.body=m}}const Es=()=>Je(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Wa=function(a,o){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const d=Jn(a.url);if(d)return d(a,o);if(Je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:vr},o)}if(!(/^file:/.test(c=a.url)||/^file:/.test(Es())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return u(this,void 0,void 0,function*(){const v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Es(),signal:m.signal});d.type==="json"&&v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const M=yield x.blob();throw new ri(x.status,x.statusText,d.url,M)}let S;S=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const P=yield S;if(m.signal.aborted)throw yn();return{data:P,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(a,o);if(Je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:vr},o)}var c;return function(d,m){return new Promise((v,x)=>{const S=new XMLHttpRequest;S.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(S.responseType="arraybuffer");for(const P in d.headers)S.setRequestHeader(P,d.headers[P]);d.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=d.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!m.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(d.type==="json")try{P=JSON.parse(S.response)}catch(M){return void x(M)}v({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new ri(S.status,S.statusText,d.url,P))}},m.signal.addEventListener("abort",()=>{S.abort(),x(yn())}),S.send(d.body)})}(a,o)};function Cl(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const o=new URL(a),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function ac(a,o,c){c[a]&&c[a].indexOf(o)!==-1||(c[a]=c[a]||[],c[a].push(o))}function vi(a,o,c){if(c&&c[a]){const d=c[a].indexOf(o);d!==-1&&c[a].splice(d,1)}}class en{constructor(o,c={}){fe(this,c),this.type=o}}class Jt extends en{constructor(o,c={}){super("error",fe({error:o},c))}}class Wt{on(o,c){return this._listeners=this._listeners||{},ac(o,c,this._listeners),this}off(o,c){return vi(o,c,this._listeners),vi(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},ac(o,c,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,c){typeof o=="string"&&(o=new en(o,c||{}));const d=o.type;if(this.listens(d)){o.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,o);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of v)vi(d,S,this._oneTimeListeners),S.call(this,o);const x=this._eventedParent;x&&(fe(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof Jt&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Vr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _n(a,o){const c={};for(const d in a)d!=="ref"&&(c[d]=a[d]);return Vr.forEach(d=>{d in o&&(c[d]=o[d])}),c}function Zt(a,o){if(Array.isArray(a)){if(!Array.isArray(o)||a.length!==o.length)return!1;for(let c=0;c<a.length;c++)if(!Zt(a[c],o[c]))return!1;return!0}if(typeof a=="object"&&a!==null&&o!==null){if(typeof o!="object"||Object.keys(a).length!==Object.keys(o).length)return!1;for(const c in a)if(!Zt(a[c],o[c]))return!1;return!0}return a===o}function vn(a,o){a.push(o)}function Li(a,o,c){vn(c,{command:"addSource",args:[a,o[a]]})}function Do(a,o,c){vn(o,{command:"removeSource",args:[a]}),c[a]=!0}function ra(a,o,c,d){Do(a,c,d),Li(a,o,c)}function ia(a,o,c){let d;for(d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)&&d!=="data"&&!Zt(a[c][d],o[c][d]))return!1;for(d in o[c])if(Object.prototype.hasOwnProperty.call(o[c],d)&&d!=="data"&&!Zt(a[c][d],o[c][d]))return!1;return!0}function Cs(a,o,c,d,m,v){a=a||{},o=o||{};for(const x in a)Object.prototype.hasOwnProperty.call(a,x)&&(Zt(a[x],o[x])||c.push({command:v,args:[d,x,o[x],m]}));for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(Zt(a[x],o[x])||c.push({command:v,args:[d,x,o[x],m]}))}function Yi(a){return a.id}function cu(a,o){return a[o.id]=o,a}class Ze{constructor(o,c,d,m){this.message=(o?`${o}: `:"")+d,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function ii(a,...o){for(const c of o)for(const d in c)a[d]=c[d];return a}class Mi extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class Il{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[d,m]of c)this.bindings[d]=m}concat(o){return new Il(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Ha={kind:"null"},Ge={kind:"number"},Nt={kind:"string"},Mt={kind:"boolean"},xi={kind:"color"},bi={kind:"object"},Rt={kind:"value"},Is={kind:"collator"},oa={kind:"formatted"},kr={kind:"padding"},oe={kind:"resolvedImage"},q={kind:"variableAnchorOffsetCollection"};function H(a,o){return{kind:"array",itemType:a,N:o}}function K(a){if(a.kind==="array"){const o=K(a.itemType);return typeof a.N=="number"?`array<${o}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${o}>`}return a.kind}const ae=[Ha,Ge,Nt,Mt,xi,oa,bi,H(Rt),kr,oe,q];function ge(a,o){if(o.kind==="error")return null;if(a.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!ge(a.itemType,o.itemType))&&(typeof a.N!="number"||a.N===o.N))return null}else{if(a.kind===o.kind)return null;if(a.kind==="value"){for(const c of ae)if(!ge(c,o))return null}}return`Expected ${K(a)} but found ${K(o)} instead.`}function J(a,o){return o.some(c=>c.kind===a.kind)}function me(a,o){return o.some(c=>c==="null"?a===null:c==="array"?Array.isArray(a):c==="object"?a&&!Array.isArray(a)&&typeof a=="object":c===typeof a)}function ce(a,o){return a.kind==="array"&&o.kind==="array"?a.itemType.kind===o.itemType.kind&&typeof a.N=="number":a.kind===o.kind}const Se=.96422,Le=.82521,Ne=4/29,Oe=6/29,gt=3*Oe*Oe,xt=Oe*Oe*Oe,Lt=Math.PI/180,At=180/Math.PI;function tn(a){return(a%=360)<0&&(a+=360),a}function wn([a,o,c,d]){let m,v;const x=Nr((.2225045*(a=On(a))+.7168786*(o=On(o))+.0606169*(c=On(c)))/1);a===o&&o===c?m=v=x:(m=Nr((.4360747*a+.3850649*o+.1430804*c)/Se),v=Nr((.0139322*a+.0971045*o+.7141733*c)/Le));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-v),d]}function On(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Nr(a){return a>xt?Math.pow(a,1/3):a/gt+Ne}function Ut([a,o,c,d]){let m=(a+16)/116,v=isNaN(o)?m:m+o/500,x=isNaN(c)?m:m-c/200;return m=1*Ur(m),v=Se*Ur(v),x=Le*Ur(x),[Un(3.1338561*v-1.6168667*m-.4906146*x),Un(-.9787684*v+1.9161415*m+.033454*x),Un(.0719453*v-.2289914*m+1.4052427*x),d]}function Un(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Ur(a){return a>Oe?a*a*a:gt*(a-Ne)}function Ai(a){return parseInt(a.padEnd(2,a),16)/255}function ss(a,o){return sr(o?a/100:a,0,1)}function sr(a,o,c){return Math.min(Math.max(o,a),c)}function lc(a){return!a.some(Number.isNaN)}const tb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class xn{constructor(o,c,d,m=1,v=!0){this.r=o,this.g=c,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[o,c,d,m]))}static parse(o){if(o instanceof xn)return o;if(typeof o!="string")return;const c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=tb[d];if(m){const[x,S,P]=m;return[x/255,S/255,P/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let S=1;return[Ai(d.slice(S,S+=x)),Ai(d.slice(S,S+=x)),Ai(d.slice(S,S+=x)),Ai(d.slice(S,S+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,P,M,N,D,F,W,X,Q,ie,ue,we]=x,pe=[N||" ",W||" ",ie].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const xe=[M,F,Q].join(""),Fe=xe==="%%%"?100:xe===""?255:0;if(Fe){const Be=[sr(+P/Fe,0,1),sr(+D/Fe,0,1),sr(+X/Fe,0,1),ue?ss(+ue,we):1];if(lc(Be))return Be}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,P,M,N,D,F,W,X]=v,Q=[P||" ",N||" ",F].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const ie=[+S,sr(+M,0,100),sr(+D,0,100),W?ss(+W,X):1];if(lc(ie))return function([ue,we,pe,xe]){function Fe(Be){const st=(Be+ue/30)%12,pt=we*Math.min(pe,1-pe);return pe-pt*Math.max(-1,Math.min(st-3,9-st,1))}return ue=tn(ue),we/=100,pe/=100,[Fe(0),Fe(8),Fe(4),xe]}(ie)}}}(o);return c?new xn(...c,!1):void 0}get rgb(){const{r:o,g:c,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[o/v,c/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(o){const[c,d,m,v]=wn(o),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?tn(Math.atan2(m,d)*At):NaN,x,c,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wn(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){const[o,c,d,m]=this.rgb;return`rgba(${[o,c,d].map(v=>Math.round(255*v)).join(",")},${m})`}}xn.black=new xn(0,0,0,1),xn.white=new xn(1,1,1,1),xn.transparent=new xn(0,0,0,0),xn.red=new xn(1,0,0,1);class um{constructor(o,c,d){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class cm{constructor(o,c,d,m,v){this.text=o,this.image=c,this.scale=d,this.fontStack=m,this.textColor=v}}class Oo{constructor(o){this.sections=o}static fromString(o){return new Oo([new cm(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Oo?o:Oo.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class zo{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof zo)return o;if(typeof o=="number")return new zo([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const c of o)if(typeof c!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new zo(o)}}toString(){return JSON.stringify(this.values)}}const E0=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ki{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ki)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){const d=o[c],m=o[c+1];if(typeof d!="string"||!E0.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new ki(o)}}toString(){return JSON.stringify(this.values)}}class as{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new as({name:o,available:!1}):null}}function C0(a,o,c,d){return typeof a=="number"&&a>=0&&a<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,o,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,o,c,d]:[a,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Za(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof xn||a instanceof um||a instanceof Oo||a instanceof zo||a instanceof ki||a instanceof as)return!0;if(Array.isArray(a)){for(const o of a)if(!Za(o))return!1;return!0}if(typeof a=="object"){for(const o in a)if(!Za(a[o]))return!1;return!0}return!1}function Rr(a){if(a===null)return Ha;if(typeof a=="string")return Nt;if(typeof a=="boolean")return Mt;if(typeof a=="number")return Ge;if(a instanceof xn)return xi;if(a instanceof um)return Is;if(a instanceof Oo)return oa;if(a instanceof zo)return kr;if(a instanceof ki)return q;if(a instanceof as)return oe;if(Array.isArray(a)){const o=a.length;let c;for(const d of a){const m=Rr(d);if(c){if(c===m)continue;c=Rt;break}c=m}return H(c||Rt,o)}return bi}function Rh(a){const o=typeof a;return a===null?"":o==="string"||o==="number"||o==="boolean"?String(a):a instanceof xn||a instanceof Oo||a instanceof zo||a instanceof ki||a instanceof as?a.toString():JSON.stringify(a)}class hu{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(o.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Za(o[1]))return c.error("invalid value");const d=o[1];let m=Rr(d);const v=c.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new hu(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ar{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const pu={string:Nt,number:Ge,boolean:Mt,object:bi};class Ts{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d,m=1;const v=o[0];if(v==="array"){let S,P;if(o.length>2){const M=o[1];if(typeof M!="string"||!(M in pu)||M==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=pu[M],m++}else S=Rt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);P=o[2],m++}d=H(S,P)}else{if(!pu[v])throw new Error(`Types doesn't contain name = ${v}`);d=pu[v]}const x=[];for(;m<o.length;m++){const S=c.parse(o[m],m,Rt);if(!S)return null;x.push(S)}return new Ts(d,x)}evaluate(o){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(o);if(!ge(this.type,Rr(d)))return d;if(c===this.args.length-1)throw new ar(`Expected value to be of type ${K(this.type)}, but found ${K(Rr(d))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const td={"to-boolean":Mt,"to-color":xi,"to-number":Ge,"to-string":Nt};class sa{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[0];if(!td[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&o.length!==2)return c.error("Expected one argument.");const m=td[d],v=[];for(let x=1;x<o.length;x++){const S=c.parse(o[x],x,Rt);if(!S)return null;v.push(S)}return new sa(m,v)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,d;for(const m of this.args){if(c=m.evaluate(o),d=null,c instanceof xn)return c;if(typeof c=="string"){const v=o.parseColor(c);if(v)return v}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:C0(c[0],c[1],c[2],c[3]),!d))return new xn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new ar(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const d of this.args){c=d.evaluate(o);const m=zo.parse(c);if(m)return m}throw new ar(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const d of this.args){c=d.evaluate(o);const m=ki.parse(c);if(m)return m}throw new ar(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const d of this.args){if(c=d.evaluate(o),c===null)return 0;const m=Number(c);if(!isNaN(m))return m}throw new ar(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Oo.fromString(Rh(this.args[0].evaluate(o)));case"resolvedImage":return as.fromString(Rh(this.args[0].evaluate(o)));default:return Rh(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const hm=["Unknown","Point","LineString","Polygon"];class uc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=xn.parse(o)),c}}class pn{constructor(o,c,d=[],m,v=new Il,x=[]){this.registry=o,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=c}parse(o,c,d,m,v={}){return c?this.concat(c,d,m)._parse(o,v):this._parse(o,v)}_parse(o,c){function d(m,v,x){return x==="assert"?new Ts(v,[m]):x==="coerce"?new sa(v,[m]):m}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=o[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(o,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,P=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else x=d(x,S,c.typeAnnotation||"coerce");else x=d(x,S,c.typeAnnotation||"coerce");else x=d(x,S,c.typeAnnotation||"coerce");else x=d(x,S,c.typeAnnotation||"assert")}if(!(x instanceof hu)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new uc;try{x=new hu(x.type,x.evaluate(S))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,d){const m=typeof o=="number"?this.path.concat(o):this.path,v=d?this.scope.concat(d):this.scope;return new pn(this.registry,this._isConstant,m,c||null,v,this.errors)}error(o,...c){const d=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new Mi(d,o))}checkSubtype(o,c){const d=ge(o,c);return d&&this.error(d),d}}class nd{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const d=[];for(let v=1;v<o.length-1;v+=2){const x=o[v];if(typeof x!="string")return c.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=c.parse(o[v+1],v+1);if(!S)return null;d.push([x,S])}const m=c.parse(o[o.length-1],o.length-1,c.expectedType,d);return m?new nd(d,m):null}outputDefined(){return this.result.outputDefined()}}class cc{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=o[1];return c.scope.has(d)?new cc(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class pm{constructor(o,c,d){this.type=o,this.index=c,this.input=d}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Ge),m=c.parse(o[2],2,H(c.expectedType||Rt));return d&&m?new pm(m.type.itemType,d,m):null}evaluate(o){const c=this.index.evaluate(o),d=this.input.evaluate(o);if(c<0)throw new ar(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new ar(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new ar(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class rd{constructor(o,c){this.type=Mt,this.needle=o,this.haystack=c}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,Rt);return d&&m?J(d.type,[Mt,Nt,Ge,Ha,Rt])?new rd(d,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(d.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!d)return!1;if(!me(c,["boolean","string","number","null"]))throw new ar(`Expected first argument to be of type boolean, string, number or null, but found ${K(Rr(c))} instead.`);if(!me(d,["string","array"]))throw new ar(`Expected second argument to be of type array or string, but found ${K(Rr(d))} instead.`);return d.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Dh{constructor(o,c,d){this.type=Ge,this.needle=o,this.haystack=c,this.fromIndex=d}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,Rt);if(!d||!m)return null;if(!J(d.type,[Mt,Nt,Ge,Ha,Rt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(d.type)} instead`);if(o.length===4){const v=c.parse(o[3],3,Ge);return v?new Dh(d,m,v):null}return new Dh(d,m)}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!me(c,["boolean","string","number","null"]))throw new ar(`Expected first argument to be of type boolean, string, number or null, but found ${K(Rr(c))} instead.`);if(!me(d,["string","array"]))throw new ar(`Expected second argument to be of type array or string, but found ${K(Rr(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(o);return d.indexOf(c,m)}return d.indexOf(c)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class dm{constructor(o,c,d,m,v,x){this.inputType=o,this.type=c,this.input=d,this.cases=m,this.outputs=v,this.otherwise=x}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let d,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);const v={},x=[];for(let M=2;M<o.length-1;M+=2){let N=o[M];const D=o[M+1];Array.isArray(N)||(N=[N]);const F=c.concat(M);if(N.length===0)return F.error("Expected at least one branch label.");for(const X of N){if(typeof X!="number"&&typeof X!="string")return F.error("Branch labels must be numbers or strings.");if(typeof X=="number"&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof X=="number"&&Math.floor(X)!==X)return F.error("Numeric branch labels must be integer values.");if(d){if(F.checkSubtype(d,Rr(X)))return null}else d=Rr(X);if(v[String(X)]!==void 0)return F.error("Branch labels must be unique.");v[String(X)]=x.length}const W=c.parse(D,M,m);if(!W)return null;m=m||W.type,x.push(W)}const S=c.parse(o[1],1,Rt);if(!S)return null;const P=c.parse(o[o.length-1],o.length-1,m);return P?S.type.kind!=="value"&&c.concat(1).checkSubtype(d,S.type)?null:new dm(d,m,S,v,x,P):null}evaluate(o){const c=this.input.evaluate(o);return(Rr(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class id{constructor(o,c,d){this.type=o,this.branches=c,this.otherwise=d}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const m=[];for(let x=1;x<o.length-1;x+=2){const S=c.parse(o[x],x,Mt);if(!S)return null;const P=c.parse(o[x+1],x+1,d);if(!P)return null;m.push([S,P]),d=d||P.type}const v=c.parse(o[o.length-1],o.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new id(d,m,v)}evaluate(o){for(const[c,d]of this.branches)if(c.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,d]of this.branches)o(c),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Oh{constructor(o,c,d,m){this.type=o,this.input=c,this.beginIndex=d,this.endIndex=m}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,Ge);if(!d||!m)return null;if(!J(d.type,[H(Rt),Nt,Rt]))return c.error(`Expected first argument to be of type array or string, but found ${K(d.type)} instead`);if(o.length===4){const v=c.parse(o[3],3,Ge);return v?new Oh(d.type,d,m,v):null}return new Oh(d.type,d,m)}evaluate(o){const c=this.input.evaluate(o),d=this.beginIndex.evaluate(o);if(!me(c,["string","array"]))throw new ar(`Expected first argument to be of type array or string, but found ${K(Rr(c))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(o);return c.slice(d,m)}return c.slice(d)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function od(a,o){const c=a.length-1;let d,m,v=0,x=c,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),d=a[S],m=a[S+1],d<=o){if(S===c||o<m)return S;v=S+1}else{if(!(d>o))throw new ar("Input is not a number.");x=S-1}return 0}class zh{constructor(o,c,d){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(o[1],1,Ge);if(!d)return null;const m=[];let v=null;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);for(let x=1;x<o.length;x+=2){const S=x===1?-1/0:o[x],P=o[x+1],M=x,N=x+1;if(typeof S!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=S)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const D=c.parse(P,N,v);if(!D)return null;v=v||D.type,m.push([S,D])}return new zh(v,d,m)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return d[0].evaluate(o);const v=c.length;return m>=c[v-1]?d[v-1].evaluate(o):d[od(c,m)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function nb(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var rb=fm;function fm(a,o,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=o,this.p2x=c,this.p2y=d}fm.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,o){if(o===void 0&&(o=1e-6),a<0)return 0;if(a>1)return 1;for(var c=a,d=0;d<8;d++){var m=this.sampleCurveX(c)-a;if(Math.abs(m)<o)return c;var v=this.sampleCurveDerivativeX(c);if(Math.abs(v)<1e-6)break;c-=m/v}var x=0,S=1;for(c=a,d=0;d<20&&(m=this.sampleCurveX(c),!(Math.abs(m-a)<o));d++)a>m?x=c:S=c,c=.5*(S-x)+x;return c},solve:function(a,o){return this.sampleCurveY(this.solveCurveX(a,o))}};var I0=nb(rb);function du(a,o,c){return a+c*(o-a)}function sd(a,o,c){return a.map((d,m)=>du(d,o[m],c))}const Ji={number:du,color:function(a,o,c,d="rgb"){switch(d){case"rgb":{const[m,v,x,S]=sd(a.rgb,o.rgb,c);return new xn(m,v,x,S,!1)}case"hcl":{const[m,v,x,S]=a.hcl,[P,M,N,D]=o.hcl;let F,W;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?F=NaN:(F=P,x!==1&&x!==0||(W=M)):(F=m,N!==1&&N!==0||(W=v));else{let we=P-m;P>m&&we>180?we-=360:P<m&&m-P>180&&(we+=360),F=m+c*we}const[X,Q,ie,ue]=function([we,pe,xe,Fe]){return we=isNaN(we)?0:we*Lt,Ut([xe,Math.cos(we)*pe,Math.sin(we)*pe,Fe])}([F,W??du(v,M,c),du(x,N,c),du(S,D,c)]);return new xn(X,Q,ie,ue,!1)}case"lab":{const[m,v,x,S]=Ut(sd(a.lab,o.lab,c));return new xn(m,v,x,S,!1)}}},array:sd,padding:function(a,o,c){return new zo(sd(a.values,o.values,c))},variableAnchorOffsetCollection:function(a,o,c){const d=a.values,m=o.values;if(d.length!==m.length)throw new ar(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${o.toString()}`);const v=[];for(let x=0;x<d.length;x+=2){if(d[x]!==m[x])throw new ar(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${m[x]}`);v.push(d[x]);const[S,P]=d[x+1],[M,N]=m[x+1];v.push([du(S,M,c),du(P,N,c)])}return new ki(v)}};class Fo{constructor(o,c,d,m,v){this.type=o,this.operator=c,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(o,c,d,m){let v=0;if(o.name==="exponential")v=mm(c,o.base,d,m);else if(o.name==="linear")v=mm(c,1,d,m);else if(o.name==="cubic-bezier"){const x=o.controlPoints;v=new I0(x[0],x[1],x[2],x[3]).solve(mm(c,1,d,m))}return v}static parse(o,c){let[d,m,v,...x]=o;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(N=>typeof N!="number"||N<0||N>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(v=c.parse(v,2,Ge),!v)return null;const S=[];let P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=xi:c.expectedType&&c.expectedType.kind!=="value"&&(P=c.expectedType);for(let M=0;M<x.length;M+=2){const N=x[M],D=x[M+1],F=M+3,W=M+4;if(typeof N!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(S.length&&S[S.length-1][0]>=N)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const X=c.parse(D,W,P);if(!X)return null;P=P||X.type,S.push([N,X])}return ce(P,Ge)||ce(P,xi)||ce(P,kr)||ce(P,q)||ce(P,H(Ge))?new Fo(P,d,m,v,S):c.error(`Type ${K(P)} is not interpolatable.`)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return d[0].evaluate(o);const v=c.length;if(m>=c[v-1])return d[v-1].evaluate(o);const x=od(c,m),S=Fo.interpolationFactor(this.interpolation,m,c[x],c[x+1]),P=d[x].evaluate(o),M=d[x+1].evaluate(o);switch(this.operator){case"interpolate":return Ji[this.type.kind](P,M,S);case"interpolate-hcl":return Ji.color(P,M,S,"hcl");case"interpolate-lab":return Ji.color(P,M,S,"lab")}}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function mm(a,o,c,d){const m=d-c,v=a-c;return m===0?0:o===1?v/m:(Math.pow(o,v)-1)/(Math.pow(o,m)-1)}class ad{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expectected at least one argument.");let d=null;const m=c.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const S of o.slice(1)){const P=c.parse(S,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!P)return null;d=d||P.type,v.push(P)}if(!d)throw new Error("No output type");const x=m&&v.some(S=>ge(m,S.type));return new ad(x?Rt:d,v)}evaluate(o){let c,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(o),d&&d instanceof as&&!d.available&&(c||(c=d.name),d=null,m===this.args.length&&(d=c)),d!==null)break;return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function gm(a,o){return a==="=="||a==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function ym(a,o,c,d){return d.compare(o,c)===0}function hc(a,o,c){const d=a!=="=="&&a!=="!=";return class y4{constructor(v,x,S){this.type=Mt,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let P=x.parse(v[1],1,Rt);if(!P)return null;if(!gm(S,P.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${K(P.type)}'.`);let M=x.parse(v[2],2,Rt);if(!M)return null;if(!gm(S,M.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${K(M.type)}'.`);if(P.type.kind!==M.type.kind&&P.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${K(P.type)}' and '${K(M.type)}'.`);d&&(P.type.kind==="value"&&M.type.kind!=="value"?P=new Ts(M.type,[P]):P.type.kind!=="value"&&M.type.kind==="value"&&(M=new Ts(P.type,[M])));let N=null;if(v.length===4){if(P.type.kind!=="string"&&M.type.kind!=="string"&&P.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(N=x.parse(v[3],3,Is),!N)return null}return new y4(P,M,N)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const P=Rr(x),M=Rr(S);if(P.kind!==M.kind||P.kind!=="string"&&P.kind!=="number")throw new ar(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${M.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const P=Rr(x),M=Rr(S);if(P.kind!=="string"||M.kind!=="string")return o(v,x,S)}return this.collator?c(v,x,S,this.collator.evaluate(v)):o(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const ib=hc("==",function(a,o,c){return o===c},ym),T0=hc("!=",function(a,o,c){return o!==c},function(a,o,c,d){return!ym(0,o,c,d)}),P0=hc("<",function(a,o,c){return o<c},function(a,o,c,d){return d.compare(o,c)<0}),ob=hc(">",function(a,o,c){return o>c},function(a,o,c,d){return d.compare(o,c)>0}),sb=hc("<=",function(a,o,c){return o<=c},function(a,o,c,d){return d.compare(o,c)<=0}),ab=hc(">=",function(a,o,c){return o>=c},function(a,o,c,d){return d.compare(o,c)>=0});class ld{constructor(o,c,d){this.type=Is,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(o.length!==2)return c.error("Expected one argument.");const d=o[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const m=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Mt);if(!m)return null;const v=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Mt);if(!v)return null;let x=null;return d.locale&&(x=c.parse(d.locale,1,Nt),!x)?null:new ld(m,v,x)}evaluate(o){return new um(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class _m{constructor(o,c,d,m,v){this.type=Nt,this.number=o,this.locale=c,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(o,c){if(o.length!==3)return c.error("Expected two arguments.");const d=c.parse(o[1],1,Ge);if(!d)return null;const m=o[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=c.parse(m.locale,1,Nt),!v))return null;let x=null;if(m.currency&&(x=c.parse(m.currency,1,Nt),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=c.parse(m["min-fraction-digits"],1,Ge),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=c.parse(m["max-fraction-digits"],1,Ge),!P)?null:new _m(d,v,x,S,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class ud{constructor(o){this.type=oa,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=o.length-1;++x){const S=o[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=c.parse(S["font-scale"],1,Ge),!P))return null;let M=null;if(S["text-font"]&&(M=c.parse(S["text-font"],1,H(Nt)),!M))return null;let N=null;if(S["text-color"]&&(N=c.parse(S["text-color"],1,xi),!N))return null;const D=m[m.length-1];D.scale=P,D.font=M,D.textColor=N}else{const P=c.parse(o[x],1,Rt);if(!P)return null;const M=P.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new ud(m)}evaluate(o){return new Oo(this.sections.map(c=>{const d=c.content.evaluate(o);return Rr(d)===oe?new cm("",d,null,null,null):new cm(Rh(d),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor)}outputDefined(){return!1}}class vm{constructor(o){this.type=oe,this.input=o}static parse(o,c){if(o.length!==2)return c.error("Expected two arguments.");const d=c.parse(o[1],1,Nt);return d?new vm(d):c.error("No image name provided.")}evaluate(o){const c=this.input.evaluate(o),d=as.fromString(c);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(c)>-1),d}eachChild(o){o(this.input)}outputDefined(){return!1}}class Fh{constructor(o){this.type=Ge,this.input=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=c.parse(o[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${K(d.type)} instead.`):new Fh(d):null}evaluate(o){const c=this.input.evaluate(o);if(typeof c=="string"||Array.isArray(c))return c.length;throw new ar(`Expected value to be of type string or array, but found ${K(Rr(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Bo=8192;function dn(a,o){const c=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(c*m*Bo),Math.round(d*m*Bo)]}function xm(a,o){const c=Math.pow(2,o.z);return[(m=(a[0]/Bo+o.x)/c,360*m-180),(d=(a[1]/Bo+o.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Bh(a,o){a[0]=Math.min(a[0],o[0]),a[1]=Math.min(a[1],o[1]),a[2]=Math.max(a[2],o[0]),a[3]=Math.max(a[3],o[1])}function jh(a,o){return!(a[0]<=o[0]||a[2]>=o[2]||a[1]<=o[1]||a[3]>=o[3])}function lb(a,o,c){const d=a[0]-o[0],m=a[1]-o[1],v=a[0]-c[0],x=a[1]-c[1];return d*x-v*m==0&&d*v<=0&&m*x<=0}function cd(a,o,c,d){return(m=[d[0]-c[0],d[1]-c[1]])[0]*(v=[o[0]-a[0],o[1]-a[1]])[1]-m[1]*v[0]!=0&&!(!M0(a,o,c,d)||!M0(c,d,a,o));var m,v}function ub(a,o,c){for(const d of c)for(let m=0;m<d.length-1;++m)if(cd(a,o,d[m],d[m+1]))return!0;return!1}function pc(a,o,c=!1){let d=!1;for(const S of o)for(let P=0;P<S.length-1;P++){if(lb(a,S[P],S[P+1]))return c;(v=S[P])[1]>(m=a)[1]!=(x=S[P+1])[1]>m[1]&&m[0]<(x[0]-v[0])*(m[1]-v[1])/(x[1]-v[1])+v[0]&&(d=!d)}var m,v,x;return d}function cb(a,o){for(const c of o)if(pc(a,c))return!0;return!1}function L0(a,o){for(const c of a)if(!pc(c,o))return!1;for(let c=0;c<a.length-1;++c)if(ub(a[c],a[c+1],o))return!1;return!0}function hb(a,o){for(const c of o)if(L0(a,c))return!0;return!1}function M0(a,o,c,d){const m=d[0]-c[0],v=d[1]-c[1],x=(a[0]-c[0])*v-m*(a[1]-c[1]),S=(o[0]-c[0])*v-m*(o[1]-c[1]);return x>0&&S<0||x<0&&S>0}function bm(a,o,c){const d=[];for(let m=0;m<a.length;m++){const v=[];for(let x=0;x<a[m].length;x++){const S=dn(a[m][x],c);Bh(o,S),v.push(S)}d.push(v)}return d}function A0(a,o,c){const d=[];for(let m=0;m<a.length;m++){const v=bm(a[m],o,c);d.push(v)}return d}function k0(a,o,c,d){if(a[0]<c[0]||a[0]>c[2]){const m=.5*d;let v=a[0]-c[0]>m?-d:c[0]-a[0]>m?d:0;v===0&&(v=a[0]-c[2]>m?-d:c[2]-a[0]>m?d:0),a[0]+=v}Bh(o,a)}function N0(a,o,c,d){const m=Math.pow(2,d.z)*Bo,v=[d.x*Bo,d.y*Bo],x=[];for(const S of a)for(const P of S){const M=[P.x+v[0],P.y+v[1]];k0(M,o,c,m),x.push(M)}return x}function R0(a,o,c,d){const m=Math.pow(2,d.z)*Bo,v=[d.x*Bo,d.y*Bo],x=[];for(const P of a){const M=[];for(const N of P){const D=[N.x+v[0],N.y+v[1]];Bh(o,D),M.push(D)}x.push(M)}if(o[2]-o[0]<=m/2){(S=o)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of x)for(const M of P)k0(M,o,c,m)}var S;return x}class fu{constructor(o,c){this.type=Mt,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Za(o[1])){const d=o[1];if(d.type==="FeatureCollection"){const m=[];for(const v of d.features){const{type:x,coordinates:S}=v.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new fu(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new fu(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new fu(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){const S=bm(d.coordinates,v,x),P=N0(c.geometry(),m,v,x);if(!jh(m,v))return!1;for(const M of P)if(!pc(M,S))return!1}if(d.type==="MultiPolygon"){const S=A0(d.coordinates,v,x),P=N0(c.geometry(),m,v,x);if(!jh(m,v))return!1;for(const M of P)if(!cb(M,S))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){const S=bm(d.coordinates,v,x),P=R0(c.geometry(),m,v,x);if(!jh(m,v))return!1;for(const M of P)if(!L0(M,S))return!1}if(d.type==="MultiPolygon"){const S=A0(d.coordinates,v,x),P=R0(c.geometry(),m,v,x);if(!jh(m,v))return!1;for(const M of P)if(!hb(M,S))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let D0=class{constructor(a=[],o=pb){if(this.data=a,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:o,compare:c}=this,d=o[a];for(;a>0;){const m=a-1>>1,v=o[m];if(c(d,v)>=0)break;o[a]=v,a=m}o[a]=d}_down(a){const{data:o,compare:c}=this,d=this.length>>1,m=o[a];for(;a<d;){let v=1+(a<<1),x=o[v];const S=v+1;if(S<this.length&&c(o[S],x)<0&&(v=S,x=o[S]),c(x,m)>=0)break;o[a]=x,a=v}o[a]=m}};function pb(a,o){return a<o?-1:a>o?1:0}function db(a,o,c,d,m){O0(a,o,c,d||a.length-1,m||fb)}function O0(a,o,c,d,m){for(;d>c;){if(d-c>600){var v=d-c+1,x=o-c+1,S=Math.log(v),P=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*P*(v-P)/v)*(x-v/2<0?-1:1);O0(a,o,Math.max(c,Math.floor(o-x*P/v+M)),Math.min(d,Math.floor(o+(v-x)*P/v+M)),m)}var N=a[o],D=c,F=d;for($h(a,c,o),m(a[d],N)>0&&$h(a,c,d);D<F;){for($h(a,D,F),D++,F--;m(a[D],N)<0;)D++;for(;m(a[F],N)>0;)F--}m(a[c],N)===0?$h(a,c,F):$h(a,++F,d),F<=o&&(c=F+1),o<=F&&(d=F-1)}}function $h(a,o,c){var d=a[o];a[o]=a[c],a[c]=d}function fb(a,o){return a<o?-1:a>o?1:0}function hd(a,o){if(a.length<=1)return[a];const c=[];let d,m;for(const v of a){const x=gb(v);x!==0&&(v.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&c.push(d),d=[v]):d.push(v))}if(d&&c.push(d),o>1)for(let v=0;v<c.length;v++)c[v].length<=o||(db(c[v],o,1,c[v].length-1,mb),c[v]=c[v].slice(0,o));return c}function mb(a,o){return o.area-a.area}function gb(a){let o=0;for(let c,d,m=0,v=a.length,x=v-1;m<v;x=m++)c=a[m],d=a[x],o+=(d.x-c.x)*(c.y+d.y);return o}const z0=1/298.257223563,F0=z0*(2-z0),B0=Math.PI/180;class wm{constructor(o){const c=6378.137*B0*1e3,d=Math.cos(o*B0),m=1/(1-F0*(1-d*d)),v=Math.sqrt(m);this.kx=c*v*d,this.ky=c*v*m*(1-F0)}distance(o,c){const d=this.wrap(o[0]-c[0])*this.kx,m=(o[1]-c[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(o,c){let d,m,v,x,S=1/0;for(let P=0;P<o.length-1;P++){let M=o[P][0],N=o[P][1],D=this.wrap(o[P+1][0]-M)*this.kx,F=(o[P+1][1]-N)*this.ky,W=0;D===0&&F===0||(W=(this.wrap(c[0]-M)*this.kx*D+(c[1]-N)*this.ky*F)/(D*D+F*F),W>1?(M=o[P+1][0],N=o[P+1][1]):W>0&&(M+=D/this.kx*W,N+=F/this.ky*W)),D=this.wrap(c[0]-M)*this.kx,F=(c[1]-N)*this.ky;const X=D*D+F*F;X<S&&(S=X,d=M,m=N,v=P,x=W)}return{point:[d,m],index:v,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function j0(a,o){return o[0]-a[0]}function dc(a){return a[1]-a[0]+1}function Xa(a,o){return a[1]>=a[0]&&a[1]<o}function Sm(a,o){if(a[0]>a[1])return[null,null];const c=dc(a);if(o){if(c===2)return[a,null];const m=Math.floor(c/2);return[[a[0],a[0]+m],[a[0]+m,a[1]]]}if(c===1)return[a,null];const d=Math.floor(c/2)-1;return[[a[0],a[0]+d],[a[0]+d+1,a[1]]]}function Em(a,o){if(!Xa(o,a.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let d=o[0];d<=o[1];++d)Bh(c,a[d]);return c}function Cm(a){const o=[1/0,1/0,-1/0,-1/0];for(const c of a)for(const d of c)Bh(o,d);return o}function lr(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Im(a,o,c){if(!lr(a)||!lr(o))return NaN;let d=0,m=0;return a[2]<o[0]&&(d=o[0]-a[2]),a[0]>o[2]&&(d=a[0]-o[2]),a[1]>o[3]&&(m=a[1]-o[3]),a[3]<o[1]&&(m=o[1]-a[3]),c.distance([0,0],[d,m])}function Ht(a,o,c){const d=c.pointOnLine(o,a);return c.distance(a,d.point)}function Vh(a,o,c,d,m){const v=Math.min(Ht(a,[c,d],m),Ht(o,[c,d],m)),x=Math.min(Ht(c,[a,o],m),Ht(d,[a,o],m));return Math.min(v,x)}function Gn(a,o,c,d,m){if(!Xa(o,a.length)||!Xa(d,c.length))return 1/0;let v=1/0;for(let x=o[0];x<o[1];++x){const S=a[x],P=a[x+1];for(let M=d[0];M<d[1];++M){const N=c[M],D=c[M+1];if(cd(S,P,N,D))return 0;v=Math.min(v,Vh(S,P,N,D,m))}}return v}function Bn(a,o,c,d,m){if(!Xa(o,a.length)||!Xa(d,c.length))return NaN;let v=1/0;for(let x=o[0];x<=o[1];++x)for(let S=d[0];S<=d[1];++S)if(v=Math.min(v,m.distance(a[x],c[S])),v===0)return v;return v}function pd(a,o,c){if(pc(a,o,!0))return 0;let d=1/0;for(const m of o){const v=m[0],x=m[m.length-1];if(v!==x&&(d=Math.min(d,Ht(a,[x,v],c)),d===0))return d;const S=c.pointOnLine(m,a);if(d=Math.min(d,c.distance(a,S.point)),d===0)return d}return d}function $0(a,o,c,d){if(!Xa(o,a.length))return NaN;for(let v=o[0];v<=o[1];++v)if(pc(a[v],c,!0))return 0;let m=1/0;for(let v=o[0];v<o[1];++v){const x=a[v],S=a[v+1];for(const P of c)for(let M=0,N=P.length,D=N-1;M<N;D=M++){const F=P[D],W=P[M];if(cd(x,S,F,W))return 0;m=Math.min(m,Vh(x,S,F,W,d))}}return m}function V0(a,o){for(const c of a)for(const d of c)if(pc(d,o,!0))return!0;return!1}function yb(a,o,c,d=1/0){const m=Cm(a),v=Cm(o);if(d!==1/0&&Im(m,v,c)>=d)return d;if(jh(m,v)){if(V0(a,o))return 0}else if(V0(o,a))return 0;let x=1/0;for(const S of a)for(let P=0,M=S.length,N=M-1;P<M;N=P++){const D=S[N],F=S[P];for(const W of o)for(let X=0,Q=W.length,ie=Q-1;X<Q;ie=X++){const ue=W[ie],we=W[X];if(cd(D,F,ue,we))return 0;x=Math.min(x,Vh(D,F,ue,we,c))}}return x}function U0(a,o,c,d,m,v){if(!v)return;const x=Im(Em(d,v),m,c);x<o&&a.push([x,v,[0,0]])}function dd(a,o,c,d,m,v,x){if(!v||!x)return;const S=Im(Em(d,v),Em(m,x),c);S<o&&a.push([S,v,x])}function Uh(a,o,c,d,m=1/0){let v=Math.min(d.distance(a[0],c[0][0]),m);if(v===0)return v;const x=new D0([[0,[0,a.length-1],[0,0]]],j0),S=Cm(c);for(;x.length>0;){const P=x.pop();if(P[0]>=v)continue;const M=P[1],N=o?50:100;if(dc(M)<=N){if(!Xa(M,a.length))return NaN;if(o){const D=$0(a,M,c,d);if(isNaN(D)||D===0)return D;v=Math.min(v,D)}else for(let D=M[0];D<=M[1];++D){const F=pd(a[D],c,d);if(v=Math.min(v,F),v===0)return 0}}else{const D=Sm(M,o);U0(x,v,d,a,S,D[0]),U0(x,v,d,a,S,D[1])}}return v}function Gh(a,o,c,d,m,v=1/0){let x=Math.min(v,m.distance(a[0],c[0]));if(x===0)return x;const S=new D0([[0,[0,a.length-1],[0,c.length-1]]],j0);for(;S.length>0;){const P=S.pop();if(P[0]>=x)continue;const M=P[1],N=P[2],D=o?50:100,F=d?50:100;if(dc(M)<=D&&dc(N)<=F){if(!Xa(M,a.length)&&Xa(N,c.length))return NaN;let W;if(o&&d)W=Gn(a,M,c,N,m),x=Math.min(x,W);else if(o&&!d){const X=a.slice(M[0],M[1]+1);for(let Q=N[0];Q<=N[1];++Q)if(W=Ht(c[Q],X,m),x=Math.min(x,W),x===0)return x}else if(!o&&d){const X=c.slice(N[0],N[1]+1);for(let Q=M[0];Q<=M[1];++Q)if(W=Ht(a[Q],X,m),x=Math.min(x,W),x===0)return x}else W=Bn(a,M,c,N,m),x=Math.min(x,W)}else{const W=Sm(M,o),X=Sm(N,d);dd(S,x,m,a,c,W[0],X[0]),dd(S,x,m,a,c,W[0],X[1]),dd(S,x,m,a,c,W[1],X[0]),dd(S,x,m,a,c,W[1],X[1])}}return x}function fd(a){return a.type==="MultiPolygon"?a.coordinates.map(o=>({type:"Polygon",coordinates:o})):a.type==="MultiLineString"?a.coordinates.map(o=>({type:"LineString",coordinates:o})):a.type==="MultiPoint"?a.coordinates.map(o=>({type:"Point",coordinates:o})):[a]}class Tl{constructor(o,c){this.type=Ge,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Za(o[1])){const d=o[1];if(d.type==="FeatureCollection")return new Tl(d,d.features.map(m=>fd(m.geometry)).flat());if(d.type==="Feature")return new Tl(d,fd(d.geometry));if("type"in d&&"coordinates"in d)return new Tl(d,fd(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){const m=c.geometry(),v=m.flat().map(P=>xm([P.x,P.y],c.canonical));if(m.length===0)return NaN;const x=new wm(v[0][1]);let S=1/0;for(const P of d){switch(P.type){case"Point":S=Math.min(S,Gh(v,!1,[P.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Gh(v,!1,P.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Uh(v,!1,P.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){const m=c.geometry(),v=m.flat().map(P=>xm([P.x,P.y],c.canonical));if(m.length===0)return NaN;const x=new wm(v[0][1]);let S=1/0;for(const P of d){switch(P.type){case"Point":S=Math.min(S,Gh(v,!0,[P.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Gh(v,!0,P.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Uh(v,!0,P.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="Polygon")return function(c,d){const m=c.geometry();if(m.length===0||m[0].length===0)return NaN;const v=hd(m,0).map(P=>P.map(M=>M.map(N=>xm([N.x,N.y],c.canonical)))),x=new wm(v[0][0][0][1]);let S=1/0;for(const P of d)for(const M of v){switch(P.type){case"Point":S=Math.min(S,Uh([P.coordinates],!1,M,x,S));break;case"LineString":S=Math.min(S,Uh(P.coordinates,!0,M,x,S));break;case"Polygon":S=Math.min(S,yb(M,P.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Pl={"==":ib,"!=":T0,">":ob,"<":P0,">=":ab,"<=":sb,array:Ts,at:pm,boolean:Ts,case:id,coalesce:ad,collator:ld,format:ud,image:vm,in:rd,"index-of":Dh,interpolate:Fo,"interpolate-hcl":Fo,"interpolate-lab":Fo,length:Fh,let:nd,literal:hu,match:dm,number:Ts,"number-format":_m,object:Ts,slice:Oh,step:zh,string:Ts,"to-boolean":sa,"to-color":sa,"to-number":sa,"to-string":sa,var:cc,within:fu,distance:Tl};class ls{constructor(o,c,d,m){this.name=o,this.type=c,this._evaluate=d,this.args=m}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){const d=o[0],m=ls.definitions[d];if(!m)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([M])=>!Array.isArray(M)||M.length===o.length-1);let P=null;for(const[M,N]of S){P=new pn(c.registry,md,c.path,null,c.scope);const D=[];let F=!1;for(let W=1;W<o.length;W++){const X=o[W],Q=Array.isArray(M)?M[W-1]:M.type,ie=P.parse(X,1+D.length,Q);if(!ie){F=!0;break}D.push(ie)}if(!F)if(Array.isArray(M)&&M.length!==D.length)P.error(`Expected ${M.length} arguments, but found ${D.length} instead.`);else{for(let W=0;W<D.length;W++){const X=Array.isArray(M)?M[W]:M.type,Q=D[W];P.concat(W+1).checkSubtype(X,Q.type)}if(P.errors.length===0)return new ls(d,v,N,D)}}if(S.length===1)c.errors.push(...P.errors);else{const M=(S.length?S:x).map(([D])=>{return F=D,Array.isArray(F)?`(${F.map(K).join(", ")})`:`(${K(F.type)}...)`;var F}).join(" | "),N=[];for(let D=1;D<o.length;D++){const F=c.parse(o[D],1+N.length);if(!F)return null;N.push(K(F.type))}c.error(`Expected arguments of type ${M}, but found (${N.join(", ")}) instead.`)}return null}static register(o,c){ls.definitions=c;for(const d in c)o[d]=ls}}function G0(a,[o,c,d,m]){o=o.evaluate(a),c=c.evaluate(a),d=d.evaluate(a);const v=m?m.evaluate(a):1,x=C0(o,c,d,v);if(x)throw new ar(x);return new xn(o/255,c/255,d/255,v,!1)}function q0(a,o){return a in o}function Tm(a,o){const c=o[a];return c===void 0?null:c}function mu(a){return{type:a}}function md(a){if(a instanceof cc)return md(a.boundExpression);if(a instanceof ls&&a.name==="error"||a instanceof ld||a instanceof fu||a instanceof Tl)return!1;const o=a instanceof sa||a instanceof Ts;let c=!0;return a.eachChild(d=>{c=o?c&&md(d):c&&d instanceof hu}),!!c&&gd(a)&&Wh(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gd(a){if(a instanceof ls&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof fu||a instanceof Tl)return!1;let o=!0;return a.eachChild(c=>{o&&!gd(c)&&(o=!1)}),o}function qh(a){if(a instanceof ls&&a.name==="feature-state")return!1;let o=!0;return a.eachChild(c=>{o&&!qh(c)&&(o=!1)}),o}function Wh(a,o){if(a instanceof ls&&o.indexOf(a.name)>=0)return!1;let c=!0;return a.eachChild(d=>{c&&!Wh(d,o)&&(c=!1)}),c}function Pm(a){return{result:"success",value:a}}function Ka(a){return{result:"error",value:a}}function fc(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Lm(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Mm(a){return!!a.expression&&a.expression.interpolated}function on(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function gu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function yd(a){return a}function Am(a,o){const c=o.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),v=a.type||(Mm(o)?"exponential":"interval");if(c||o.type==="padding"){const N=c?xn.parse:zo.parse;(a=ii({},a)).stops&&(a.stops=a.stops.map(D=>[D[0],N(D[1])])),a.default=N(a.default?a.default:o.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,P,M;if(v==="exponential")S=Hh;else if(v==="interval")S=H0;else if(v==="categorical"){S=W0,P=Object.create(null);for(const N of a.stops)P[N[0]]=N[1];M=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=_b}if(d){const N={},D=[];for(let X=0;X<a.stops.length;X++){const Q=a.stops[X],ie=Q[0].zoom;N[ie]===void 0&&(N[ie]={zoom:ie,type:a.type,property:a.property,default:a.default,stops:[]},D.push(ie)),N[ie].stops.push([Q[0].value,Q[1]])}const F=[];for(const X of D)F.push([N[X].zoom,Am(N[X],o)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:Fo.interpolationFactor.bind(void 0,W),zoomStops:F.map(X=>X[0]),evaluate:({zoom:X},Q)=>Hh({stops:F,base:a.base},o,X).evaluate(X,Q)}}if(m){const N=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Fo.interpolationFactor.bind(void 0,N),zoomStops:a.stops.map(D=>D[0]),evaluate:({zoom:D})=>S(a,o,D,P,M)}}return{kind:"source",evaluate(N,D){const F=D&&D.properties?D.properties[a.property]:void 0;return F===void 0?yu(a.default,o.default):S(a,o,F,P,M)}}}function yu(a,o,c){return a!==void 0?a:o!==void 0?o:c!==void 0?c:void 0}function W0(a,o,c,d,m){return yu(typeof c===m?d[c]:void 0,a.default,o.default)}function H0(a,o,c){if(on(c)!=="number")return yu(a.default,o.default);const d=a.stops.length;if(d===1||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[d-1][0])return a.stops[d-1][1];const m=od(a.stops.map(v=>v[0]),c);return a.stops[m][1]}function Hh(a,o,c){const d=a.base!==void 0?a.base:1;if(on(c)!=="number")return yu(a.default,o.default);const m=a.stops.length;if(m===1||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[m-1][0])return a.stops[m-1][1];const v=od(a.stops.map(N=>N[0]),c),x=function(N,D,F,W){const X=W-F,Q=N-F;return X===0?0:D===1?Q/X:(Math.pow(D,Q)-1)/(Math.pow(D,X)-1)}(c,d,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],P=a.stops[v+1][1],M=Ji[o.type]||yd;return typeof S.evaluate=="function"?{evaluate(...N){const D=S.evaluate.apply(void 0,N),F=P.evaluate.apply(void 0,N);if(D!==void 0&&F!==void 0)return M(D,F,x,a.colorSpace)}}:M(S,P,x,a.colorSpace)}function _b(a,o,c){switch(o.type){case"color":c=xn.parse(c);break;case"formatted":c=Oo.fromString(c.toString());break;case"resolvedImage":c=as.fromString(c.toString());break;case"padding":c=zo.parse(c);break;default:on(c)===o.type||o.type==="enum"&&o.values[c]||(c=void 0)}return yu(c,a.default,o.default)}ls.register(Pl,{error:[{kind:"error"},[Nt],(a,[o])=>{throw new ar(o.evaluate(a))}],typeof:[Nt,[Rt],(a,[o])=>K(Rr(o.evaluate(a)))],"to-rgba":[H(Ge,4),[xi],(a,[o])=>{const[c,d,m,v]=o.evaluate(a).rgb;return[255*c,255*d,255*m,v]}],rgb:[xi,[Ge,Ge,Ge],G0],rgba:[xi,[Ge,Ge,Ge,Ge],G0],has:{type:Mt,overloads:[[[Nt],(a,[o])=>q0(o.evaluate(a),a.properties())],[[Nt,bi],(a,[o,c])=>q0(o.evaluate(a),c.evaluate(a))]]},get:{type:Rt,overloads:[[[Nt],(a,[o])=>Tm(o.evaluate(a),a.properties())],[[Nt,bi],(a,[o,c])=>Tm(o.evaluate(a),c.evaluate(a))]]},"feature-state":[Rt,[Nt],(a,[o])=>Tm(o.evaluate(a),a.featureState||{})],properties:[bi,[],a=>a.properties()],"geometry-type":[Nt,[],a=>a.geometryType()],id:[Rt,[],a=>a.id()],zoom:[Ge,[],a=>a.globals.zoom],"heatmap-density":[Ge,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ge,[],a=>a.globals.lineProgress||0],accumulated:[Rt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ge,mu(Ge),(a,o)=>{let c=0;for(const d of o)c+=d.evaluate(a);return c}],"*":[Ge,mu(Ge),(a,o)=>{let c=1;for(const d of o)c*=d.evaluate(a);return c}],"-":{type:Ge,overloads:[[[Ge,Ge],(a,[o,c])=>o.evaluate(a)-c.evaluate(a)],[[Ge],(a,[o])=>-o.evaluate(a)]]},"/":[Ge,[Ge,Ge],(a,[o,c])=>o.evaluate(a)/c.evaluate(a)],"%":[Ge,[Ge,Ge],(a,[o,c])=>o.evaluate(a)%c.evaluate(a)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(a,[o,c])=>Math.pow(o.evaluate(a),c.evaluate(a))],sqrt:[Ge,[Ge],(a,[o])=>Math.sqrt(o.evaluate(a))],log10:[Ge,[Ge],(a,[o])=>Math.log(o.evaluate(a))/Math.LN10],ln:[Ge,[Ge],(a,[o])=>Math.log(o.evaluate(a))],log2:[Ge,[Ge],(a,[o])=>Math.log(o.evaluate(a))/Math.LN2],sin:[Ge,[Ge],(a,[o])=>Math.sin(o.evaluate(a))],cos:[Ge,[Ge],(a,[o])=>Math.cos(o.evaluate(a))],tan:[Ge,[Ge],(a,[o])=>Math.tan(o.evaluate(a))],asin:[Ge,[Ge],(a,[o])=>Math.asin(o.evaluate(a))],acos:[Ge,[Ge],(a,[o])=>Math.acos(o.evaluate(a))],atan:[Ge,[Ge],(a,[o])=>Math.atan(o.evaluate(a))],min:[Ge,mu(Ge),(a,o)=>Math.min(...o.map(c=>c.evaluate(a)))],max:[Ge,mu(Ge),(a,o)=>Math.max(...o.map(c=>c.evaluate(a)))],abs:[Ge,[Ge],(a,[o])=>Math.abs(o.evaluate(a))],round:[Ge,[Ge],(a,[o])=>{const c=o.evaluate(a);return c<0?-Math.round(-c):Math.round(c)}],floor:[Ge,[Ge],(a,[o])=>Math.floor(o.evaluate(a))],ceil:[Ge,[Ge],(a,[o])=>Math.ceil(o.evaluate(a))],"filter-==":[Mt,[Nt,Rt],(a,[o,c])=>a.properties()[o.value]===c.value],"filter-id-==":[Mt,[Rt],(a,[o])=>a.id()===o.value],"filter-type-==":[Mt,[Nt],(a,[o])=>a.geometryType()===o.value],"filter-<":[Mt,[Nt,Rt],(a,[o,c])=>{const d=a.properties()[o.value],m=c.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Mt,[Rt],(a,[o])=>{const c=a.id(),d=o.value;return typeof c==typeof d&&c<d}],"filter->":[Mt,[Nt,Rt],(a,[o,c])=>{const d=a.properties()[o.value],m=c.value;return typeof d==typeof m&&d>m}],"filter-id->":[Mt,[Rt],(a,[o])=>{const c=a.id(),d=o.value;return typeof c==typeof d&&c>d}],"filter-<=":[Mt,[Nt,Rt],(a,[o,c])=>{const d=a.properties()[o.value],m=c.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Mt,[Rt],(a,[o])=>{const c=a.id(),d=o.value;return typeof c==typeof d&&c<=d}],"filter->=":[Mt,[Nt,Rt],(a,[o,c])=>{const d=a.properties()[o.value],m=c.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Mt,[Rt],(a,[o])=>{const c=a.id(),d=o.value;return typeof c==typeof d&&c>=d}],"filter-has":[Mt,[Rt],(a,[o])=>o.value in a.properties()],"filter-has-id":[Mt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Mt,[H(Nt)],(a,[o])=>o.value.indexOf(a.geometryType())>=0],"filter-id-in":[Mt,[H(Rt)],(a,[o])=>o.value.indexOf(a.id())>=0],"filter-in-small":[Mt,[Nt,H(Rt)],(a,[o,c])=>c.value.indexOf(a.properties()[o.value])>=0],"filter-in-large":[Mt,[Nt,H(Rt)],(a,[o,c])=>function(d,m,v,x){for(;v<=x;){const S=v+x>>1;if(m[S]===d)return!0;m[S]>d?x=S-1:v=S+1}return!1}(a.properties()[o.value],c.value,0,c.value.length-1)],all:{type:Mt,overloads:[[[Mt,Mt],(a,[o,c])=>o.evaluate(a)&&c.evaluate(a)],[mu(Mt),(a,o)=>{for(const c of o)if(!c.evaluate(a))return!1;return!0}]]},any:{type:Mt,overloads:[[[Mt,Mt],(a,[o,c])=>o.evaluate(a)||c.evaluate(a)],[mu(Mt),(a,o)=>{for(const c of o)if(c.evaluate(a))return!0;return!1}]]},"!":[Mt,[Mt],(a,[o])=>!o.evaluate(a)],"is-supported-script":[Mt,[Nt],(a,[o])=>{const c=a.globals&&a.globals.isSupportedScript;return!c||c(o.evaluate(a))}],upcase:[Nt,[Nt],(a,[o])=>o.evaluate(a).toUpperCase()],downcase:[Nt,[Nt],(a,[o])=>o.evaluate(a).toLowerCase()],concat:[Nt,mu(Rt),(a,o)=>o.map(c=>Rh(c.evaluate(a))).join("")],"resolved-locale":[Nt,[Is],(a,[o])=>o.evaluate(a).resolvedLocale()]});class km{constructor(o,c){var d;this.expression=o,this._warningHistory={},this._evaluator=new uc,this._defaultValue=c?(d=c).type==="color"&&gu(d.default)?new xn(0,0,0,0):d.type==="color"?xn.parse(d.default)||null:d.type==="padding"?zo.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?ki.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,c,d,m,v,x){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new ar(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function _d(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Pl}function vd(a,o){const c=new pn(Pl,md,[],o?function(m){const v={color:xi,string:Nt,number:Ge,enum:Nt,boolean:Mt,formatted:oa,padding:kr,resolvedImage:oe,variableAnchorOffsetCollection:q};return m.type==="array"?H(v[m.value]||Rt,m.length):v[m.type]}(o):void 0),d=c.parse(a,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Pm(new km(d,o)):Ka(c.errors)}class Nm{constructor(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!qh(c.expression)}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,m,v,x)}evaluate(o,c,d,m,v,x){return this._styleExpression.evaluate(o,c,d,m,v,x)}}class mc{constructor(o,c,d,m){this.kind=o,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!qh(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,m,v,x)}evaluate(o,c,d,m,v,x){return this._styleExpression.evaluate(o,c,d,m,v,x)}interpolationFactor(o,c,d){return this.interpolationType?Fo.interpolationFactor(this.interpolationType,o,c,d):0}}function Zh(a,o){const c=vd(a,o);if(c.result==="error")return c;const d=c.value.expression,m=gd(d);if(!m&&!fc(o))return Ka([new Mi("","data expressions not supported")]);const v=Wh(d,["zoom"]);if(!v&&!Lm(o))return Ka([new Mi("","zoom expressions not supported")]);const x=Ll(d);return x||v?x instanceof Mi?Ka([x]):x instanceof Fo&&!Mm(o)?Ka([new Mi("",'"interpolate" expressions cannot be used with this property')]):Pm(x?new mc(m?"camera":"composite",c.value,x.labels,x instanceof Fo?x.interpolation:void 0):new Nm(m?"constant":"source",c.value)):Ka([new Mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ni{constructor(o,c){this._parameters=o,this._specification=c,ii(this,Am(this._parameters,this._specification))}static deserialize(o){return new Ni(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ll(a){let o=null;if(a instanceof nd)o=Ll(a.result);else if(a instanceof ad){for(const c of a.args)if(o=Ll(c),o)break}else(a instanceof zh||a instanceof Fo)&&a.input instanceof ls&&a.input.name==="zoom"&&(o=a);return o instanceof Mi||a.eachChild(c=>{const d=Ll(c);d instanceof Mi?o=d:!o&&d?o=new Mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&d&&o!==d&&(o=new Mi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function xd(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const o of a.slice(1))if(!xd(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const vb={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Rm(a){if(a==null)return{filter:()=>!0,needGeometry:!1};xd(a)||(a=gc(a));const o=vd(a,vb);if(o.result==="error")throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,m)=>o.value.evaluate(c,d,{},m),needGeometry:Dm(a)}}function Xh(a,o){return a<o?-1:a>o?1:0}function Dm(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let o=1;o<a.length;o++)if(Dm(a[o]))return!0;return!1}function gc(a){if(!a)return!0;const o=a[0];return a.length<=1?o!=="any":o==="=="?Om(a[1],a[2],"=="):o==="!="?Ml(Om(a[1],a[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Om(a[1],a[2],o):o==="any"?(c=a.slice(1),["any"].concat(c.map(gc))):o==="all"?["all"].concat(a.slice(1).map(gc)):o==="none"?["all"].concat(a.slice(1).map(gc).map(Ml)):o==="in"?bd(a[1],a.slice(2)):o==="!in"?Ml(bd(a[1],a.slice(2))):o==="has"?Z0(a[1]):o!=="!has"||Ml(Z0(a[1]));var c}function Om(a,o,c){switch(a){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,a,o]}}function bd(a,o){if(o.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",a,["literal",o.sort(Xh)]]:["filter-in-small",a,["literal",o]]}}function Z0(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Ml(a){return["!",a]}function zm(a){const o=typeof a;if(o==="number"||o==="boolean"||o==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${zm(v)},`;return`${m}]`}const c=Object.keys(a).sort();let d="{";for(let m=0;m<c.length;m++)d+=`${JSON.stringify(c[m])}:${zm(a[c[m]])},`;return`${d}}`}function Fm(a){let o="";for(const c of Vr)o+=`/${zm(a[c])}`;return o}function Bm(a){const o=a.value;return o?[new Ze(a.key,o,"constants have been deprecated as of v8")]:[]}function qn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Al(a){if(Array.isArray(a))return a.map(Al);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const o={};for(const c in a)o[c]=Al(a[c]);return o}return qn(a)}function jo(a){const o=a.key,c=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let P=[];const M=on(c);if(M!=="object")return[new Ze(o,c,`object expected, ${M} found`)];for(const N in c){const D=N.split(".")[0],F=d[D]||d["*"];let W;if(m[D])W=m[D];else if(d[D])W=S;else if(m["*"])W=m["*"];else{if(!d["*"]){P.push(new Ze(o,c[N],`unknown property "${N}"`));continue}W=S}P=P.concat(W({key:(o&&`${o}.`)+N,value:c[N],valueSpec:F,style:v,styleSpec:x,object:c,objectKey:N,validateSpec:S},c))}for(const N in d)m[N]||d[N].required&&d[N].default===void 0&&c[N]===void 0&&P.push(new Ze(o,c,`missing required property "${N}"`));return P}function jm(a){const o=a.value,c=a.valueSpec,d=a.style,m=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(on(o)!=="array")return[new Ze(v,o,`array expected, ${on(o)} found`)];if(c.length&&o.length!==c.length)return[new Ze(v,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new Ze(v,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let S={type:c.value,values:c.values};m.$version<7&&(S.function=c.function),on(c.value)==="object"&&(S=c.value);let P=[];for(let M=0;M<o.length;M++)P=P.concat(x({array:o,arrayIndex:M,value:o[M],valueSpec:S,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${v}[${M}]`}));return P}function Kh(a){const o=a.key,c=a.value,d=a.valueSpec;let m=on(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new Ze(o,c,`number expected, ${m} found`)]:"minimum"in d&&c<d.minimum?[new Ze(o,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new Ze(o,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function Yh(a){const o=a.valueSpec,c=qn(a.value.type);let d,m,v,x={};const S=c!=="categorical"&&a.value.property===void 0,P=!S,M=on(a.value.stops)==="array"&&on(a.value.stops[0])==="array"&&on(a.value.stops[0][0])==="object",N=jo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(W){if(c==="identity")return[new Ze(W.key,W.value,'identity function may not have a "stops" property')];let X=[];const Q=W.value;return X=X.concat(jm({key:W.key,value:Q,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:D})),on(Q)==="array"&&Q.length===0&&X.push(new Ze(W.key,Q,"array must have at least one stop")),X},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:o,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return c==="identity"&&S&&N.push(new Ze(a.key,a.value,'missing required property "property"')),c==="identity"||a.value.stops||N.push(new Ze(a.key,a.value,'missing required property "stops"')),c==="exponential"&&a.valueSpec.expression&&!Mm(a.valueSpec)&&N.push(new Ze(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!fc(a.valueSpec)?N.push(new Ze(a.key,a.value,"property functions not supported")):S&&!Lm(a.valueSpec)&&N.push(new Ze(a.key,a.value,"zoom functions not supported"))),c!=="categorical"&&!M||a.value.property!==void 0||N.push(new Ze(a.key,a.value,'"property" property is required')),N;function D(W){let X=[];const Q=W.value,ie=W.key;if(on(Q)!=="array")return[new Ze(ie,Q,`array expected, ${on(Q)} found`)];if(Q.length!==2)return[new Ze(ie,Q,`array length 2 expected, length ${Q.length} found`)];if(M){if(on(Q[0])!=="object")return[new Ze(ie,Q,`object expected, ${on(Q[0])} found`)];if(Q[0].zoom===void 0)return[new Ze(ie,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new Ze(ie,Q,"object stop key must have value")];if(v&&v>qn(Q[0].zoom))return[new Ze(ie,Q[0].zoom,"stop zoom values must appear in ascending order")];qn(Q[0].zoom)!==v&&(v=qn(Q[0].zoom),m=void 0,x={}),X=X.concat(jo({key:`${ie}[0]`,value:Q[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Kh,value:F}}))}else X=X.concat(F({key:`${ie}[0]`,value:Q[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},Q));return _d(Al(Q[1]))?X.concat([new Ze(`${ie}[1]`,Q[1],"expressions are not allowed in function stops.")]):X.concat(W.validateSpec({key:`${ie}[1]`,value:Q[1],valueSpec:o,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function F(W,X){const Q=on(W.value),ie=qn(W.value),ue=W.value!==null?W.value:X;if(d){if(Q!==d)return[new Ze(W.key,ue,`${Q} stop domain type must match previous stop domain type ${d}`)]}else d=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new Ze(W.key,ue,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&c!=="categorical"){let we=`number expected, ${Q} found`;return fc(o)&&c===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ze(W.key,ue,we)]}return c!=="categorical"||Q!=="number"||isFinite(ie)&&Math.floor(ie)===ie?c!=="categorical"&&Q==="number"&&m!==void 0&&ie<m?[new Ze(W.key,ue,"stop domain values must appear in ascending order")]:(m=ie,c==="categorical"&&ie in x?[new Ze(W.key,ue,"stop domain values must be unique")]:(x[ie]=!0,[])):[new Ze(W.key,ue,`integer expected, found ${ie}`)]}}function _u(a){const o=(a.expressionContext==="property"?Zh:vd)(Al(a.value),a.valueSpec);if(o.result==="error")return o.value.map(d=>new Ze(`${a.key}${d.key}`,a.value,d.message));const c=o.value.expression||o.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!c.outputDefined())return[new Ze(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!qh(c))return[new Ze(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!qh(c))return[new Ze(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Wh(c,["zoom","feature-state"]))return[new Ze(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!gd(c))return[new Ze(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yc(a){const o=a.key,c=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(qn(c))===-1&&m.push(new Ze(o,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(qn(c))===-1&&m.push(new Ze(o,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function wd(a){return xd(Al(a.value))?_u(ii({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$m(a)}function $m(a){const o=a.value,c=a.key;if(on(o)!=="array")return[new Ze(c,o,`array expected, ${on(o)} found`)];const d=a.styleSpec;let m,v=[];if(o.length<1)return[new Ze(c,o,"filter array must have at least 1 element")];switch(v=v.concat(yc({key:`${c}[0]`,value:o[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),qn(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&qn(o[1])==="$type"&&v.push(new Ze(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&v.push(new Ze(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(m=on(o[1]),m!=="string"&&v.push(new Ze(`${c}[1]`,o[1],`string expected, ${m} found`)));for(let x=2;x<o.length;x++)m=on(o[x]),qn(o[1])==="$type"?v=v.concat(yc({key:`${c}[${x}]`,value:o[x],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ze(`${c}[${x}]`,o[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)v=v.concat($m({key:`${c}[${x}]`,value:o[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=on(o[1]),o.length!==2?v.push(new Ze(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ze(`${c}[1]`,o[1],`string expected, ${m} found`))}return v}function Sd(a,o){const c=a.key,d=a.validateSpec,m=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,P=v[`${o}_${a.layerType}`];if(!P)return[];const M=S.match(/^(.*)-transition$/);if(o==="paint"&&M&&P[M[1]]&&P[M[1]].transition)return d({key:c,value:x,valueSpec:v.transition,style:m,styleSpec:v});const N=a.valueSpec||P[S];if(!N)return[new Ze(c,x,`unknown property "${S}"`)];let D;if(on(x)==="string"&&fc(N)&&!N.tokens&&(D=/^{([^}]+)}$/.exec(x)))return[new Ze(c,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const F=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&F.push(new Ze(c,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&gu(Al(x))&&qn(x.type)==="identity"&&F.push(new Ze(c,x,'"text-font" does not support identity functions'))),F.concat(d({key:a.key,value:x,valueSpec:N,style:m,styleSpec:v,expressionContext:"property",propertyType:o,propertyKey:S}))}function Vm(a){return Sd(a,"paint")}function X0(a){return Sd(a,"layout")}function Um(a){let o=[];const c=a.value,d=a.key,m=a.style,v=a.styleSpec;c.type||c.ref||o.push(new Ze(d,c,'either "type" or "ref" is required'));let x=qn(c.type);const S=qn(c.ref);if(c.id){const P=qn(c.id);for(let M=0;M<a.arrayIndex;M++){const N=m.layers[M];qn(N.id)===P&&o.push(new Ze(d,c.id,`duplicate layer id "${c.id}", previously used at line ${N.id.__line__}`))}}if("ref"in c){let P;["type","source","source-layer","filter","layout"].forEach(M=>{M in c&&o.push(new Ze(d,c[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{qn(M.id)===S&&(P=M)}),P?P.ref?o.push(new Ze(d,c.ref,"ref cannot reference another ref layer")):x=qn(P.type):o.push(new Ze(d,c.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(c.source){const P=m.sources&&m.sources[c.source],M=P&&qn(P.type);P?M==="vector"&&x==="raster"?o.push(new Ze(d,c.source,`layer "${c.id}" requires a raster source`)):M!=="raster-dem"&&x==="hillshade"?o.push(new Ze(d,c.source,`layer "${c.id}" requires a raster-dem source`)):M==="raster"&&x!=="raster"?o.push(new Ze(d,c.source,`layer "${c.id}" requires a vector source`)):M!=="vector"||c["source-layer"]?M==="raster-dem"&&x!=="hillshade"?o.push(new Ze(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!c.paint||!c.paint["line-gradient"]||M==="geojson"&&P.lineMetrics||o.push(new Ze(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Ze(d,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new Ze(d,c.source,`source "${c.source}" not found`))}else o.push(new Ze(d,c,'missing required property "source"'));return o=o.concat(jo({key:d,value:c,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:c.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:c,objectKey:"type"}),filter:wd,layout:P=>jo({layer:c,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":M=>X0(ii({layerType:x},M))}}),paint:P=>jo({layer:c,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":M=>Vm(ii({layerType:x},M))}})}})),o}function vu(a){const o=a.value,c=a.key,d=on(o);return d!=="string"?[new Ze(c,o,`string expected, ${d} found`)]:[]}const Gm={promoteId:function({key:a,value:o}){if(on(o)==="string")return vu({key:a,value:o});{const c=[];for(const d in o)c.push(...vu({key:`${a}.${d}`,value:o[d]}));return c}}};function qm(a){const o=a.value,c=a.key,d=a.styleSpec,m=a.style,v=a.validateSpec;if(!o.type)return[new Ze(c,o,'"type" is required')];const x=qn(o.type);let S;switch(x){case"vector":case"raster":return S=jo({key:c,value:o,valueSpec:d[`source_${x.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Gm,validateSpec:v}),S;case"raster-dem":return S=function(P){var M;const N=(M=P.sourceName)!==null&&M!==void 0?M:"",D=P.value,F=P.styleSpec,W=F.source_raster_dem,X=P.style;let Q=[];const ie=on(D);if(D===void 0)return Q;if(ie!=="object")return Q.push(new Ze("source_raster_dem",D,`object expected, ${ie} found`)),Q;const ue=qn(D.encoding)==="custom",we=["redFactor","greenFactor","blueFactor","baseShift"],pe=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const xe in D)!ue&&we.includes(xe)?Q.push(new Ze(xe,D[xe],`In "${N}": "${xe}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):W[xe]?Q=Q.concat(P.validateSpec({key:xe,value:D[xe],valueSpec:W[xe],validateSpec:P.validateSpec,style:X,styleSpec:F})):Q.push(new Ze(xe,D[xe],`unknown property "${xe}"`));return Q}({sourceName:c,value:o,style:a.style,styleSpec:d,validateSpec:v}),S;case"geojson":if(S=jo({key:c,value:o,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:Gm}),o.cluster)for(const P in o.clusterProperties){const[M,N]=o.clusterProperties[P],D=typeof M=="string"?[M,["accumulated"],["get",P]]:M;S.push(..._u({key:`${c}.${P}.map`,value:N,validateSpec:v,expressionContext:"cluster-map"})),S.push(..._u({key:`${c}.${P}.reduce`,value:D,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return jo({key:c,value:o,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return jo({key:c,value:o,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new Ze(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yc({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function Wm(a){const o=a.value,c=a.styleSpec,d=c.light,m=a.style;let v=[];const x=on(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new Ze("light",o,`object expected, ${x} found`)]),v;for(const S in o){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&d[P[1]]&&d[P[1]].transition?a.validateSpec({key:S,value:o[S],valueSpec:c.transition,validateSpec:a.validateSpec,style:m,styleSpec:c}):d[S]?a.validateSpec({key:S,value:o[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:c}):[new Ze(S,o[S],`unknown property "${S}"`)])}return v}function K0(a){const o=a.value,c=a.styleSpec,d=c.sky,m=a.style,v=on(o);if(o===void 0)return[];if(v!=="object")return[new Ze("sky",o,`object expected, ${v} found`)];let x=[];for(const S in o)x=x.concat(d[S]?a.validateSpec({key:S,value:o[S],valueSpec:d[S],style:m,styleSpec:c}):[new Ze(S,o[S],`unknown property "${S}"`)]);return x}function Y0(a){const o=a.value,c=a.styleSpec,d=c.terrain,m=a.style;let v=[];const x=on(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new Ze("terrain",o,`object expected, ${x} found`)]),v;for(const S in o)v=v.concat(d[S]?a.validateSpec({key:S,value:o[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:c}):[new Ze(S,o[S],`unknown property "${S}"`)]);return v}function Hm(a){let o=[];const c=a.value,d=a.key;if(Array.isArray(c)){const m=[],v=[];for(const x in c)c[x].id&&m.includes(c[x].id)&&o.push(new Ze(d,c,`all the sprites' ids must be unique, but ${c[x].id} is duplicated`)),m.push(c[x].id),c[x].url&&v.includes(c[x].url)&&o.push(new Ze(d,c,`all the sprites' URLs must be unique, but ${c[x].url} is duplicated`)),v.push(c[x].url),o=o.concat(jo({key:`${d}[${x}]`,value:c[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return o}return vu({key:d,value:c})}const Zm={"*":()=>[],array:jm,boolean:function(a){const o=a.value,c=a.key,d=on(o);return d!=="boolean"?[new Ze(c,o,`boolean expected, ${d} found`)]:[]},number:Kh,color:function(a){const o=a.key,c=a.value,d=on(c);return d!=="string"?[new Ze(o,c,`color expected, ${d} found`)]:xn.parse(String(c))?[]:[new Ze(o,c,`color expected, "${c}" found`)]},constants:Bm,enum:yc,filter:wd,function:Yh,layer:Um,object:jo,source:qm,light:Wm,sky:K0,terrain:Y0,string:vu,formatted:function(a){return vu(a).length===0?[]:_u(a)},resolvedImage:function(a){return vu(a).length===0?[]:_u(a)},padding:function(a){const o=a.key,c=a.value;if(on(c)==="array"){if(c.length<1||c.length>4)return[new Ze(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<c.length;v++)m=m.concat(a.validateSpec({key:`${o}[${v}]`,value:c[v],validateSpec:a.validateSpec,valueSpec:d}));return m}return Kh({key:o,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const o=a.key,c=a.value,d=on(c),m=a.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new Ze(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<c.length;x+=2)v=v.concat(yc({key:`${o}[${x}]`,value:c[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(jm({key:`${o}[${x+1}]`,value:c[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:Hm};function _c(a){const o=a.value,c=a.valueSpec,d=a.styleSpec;return a.validateSpec=_c,c.expression&&gu(qn(o))?Yh(a):c.expression&&_d(Al(o))?_u(a):c.type&&Zm[c.type]?Zm[c.type](a):jo(ii({},a,{valueSpec:c.type?d[c.type]:c}))}function Xm(a){const o=a.value,c=a.key,d=vu(a);return d.length||(o.indexOf("{fontstack}")===-1&&d.push(new Ze(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&d.push(new Ze(c,o,'"glyphs" url must include a "{range}" token'))),d}function go(a,o=ze){let c=[];return c=c.concat(_c({key:"",value:a,valueSpec:o.$root,styleSpec:o,style:a,validateSpec:_c,objectElementValidators:{glyphs:Xm,"*":()=>[]}})),a.constants&&(c=c.concat(Bm({key:"constants",value:a.constants,style:a,styleSpec:o,validateSpec:_c}))),Ed(c)}function aa(a){return function(o){return a({...o,validateSpec:_c})}}function Ed(a){return[].concat(a).sort((o,c)=>o.line-c.line)}function la(a){return function(...o){return Ed(a.apply(this,o))}}go.source=la(aa(qm)),go.sprite=la(aa(Hm)),go.glyphs=la(aa(Xm)),go.light=la(aa(Wm)),go.sky=la(aa(K0)),go.terrain=la(aa(Y0)),go.layer=la(aa(Um)),go.filter=la(aa(wd)),go.paintProperty=la(aa(Vm)),go.layoutProperty=la(aa(X0));const Jh=go,J0=Jh.light,Q0=Jh.paintProperty,e_=Jh.layoutProperty;function t_(a,o){let c=!1;if(o&&o.length)for(const d of o)a.fire(new Jt(new Error(d.message))),c=!0;return c}class Qh{constructor(o,c,d){const m=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(c=x[1])+2*(d=x[2]);for(let P=0;P<this.d*this.d;P++){const M=x[3+P],N=x[3+P+1];m.push(M===N?null:x.subarray(M,N))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=d,this.scale=c/o,this.uid=0;const v=d/c*o;this.min=-v,this.max=o+v}insert(o,c,d,m,v){this._forEachCell(c,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,d,m,v,x){this.cells[v].push(x)}query(o,c,d,m,v){const x=this.min,S=this.max;if(o<=x&&c<=x&&S<=d&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(o,c,d,m,this._queryCell,P,{},v),P}}_queryCell(o,c,d,m,v,x,S,P){const M=this.cells[v];if(M!==null){const N=this.keys,D=this.bboxes;for(let F=0;F<M.length;F++){const W=M[F];if(S[W]===void 0){const X=4*W;(P?P(D[X+0],D[X+1],D[X+2],D[X+3]):o<=D[X+2]&&c<=D[X+3]&&d>=D[X+0]&&m>=D[X+1])?(S[W]=!0,x.push(N[W])):S[W]=!1}}}}_forEachCell(o,c,d,m,v,x,S,P){const M=this._convertToCellCoord(o),N=this._convertToCellCoord(c),D=this._convertToCellCoord(d),F=this._convertToCellCoord(m);for(let W=M;W<=D;W++)for(let X=N;X<=F;X++){const Q=this.d*X+W;if((!P||P(this._convertFromCellCoord(W),this._convertFromCellCoord(X),this._convertFromCellCoord(W+1),this._convertFromCellCoord(X+1)))&&v.call(this,o,c,d,m,Q,x,S,P))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,c=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const m=new Int32Array(c+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=c;for(let x=0;x<o.length;x++){const S=o[x];m[3+x]=v,m.set(S,v),v+=S.length}return m[3+o.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+o.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(o,c){const d=o.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(o){return new Qh(o.buffer)}}const kl={};function lt(a,o,c={}){if(kl[a])throw new Error(`${a} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:a,writeable:!1}),kl[a]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}lt("Object",Object),lt("TransferableGridIndex",Qh),lt("Color",xn),lt("Error",Error),lt("AJAXError",ri),lt("ResolvedImage",as),lt("StylePropertyFunction",Ni),lt("StyleExpression",km,{omit:["_evaluator"]}),lt("ZoomDependentExpression",mc),lt("ZoomConstantExpression",Nm),lt("CompoundExpression",ls,{omit:["_evaluate"]});for(const a in Pl)Pl[a]._classRegistryKey||lt(`Expression_${a}`,Pl[a]);function n_(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ua(a,o){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error)return a;if(n_(a)||Gt(a))return o&&o.push(a),a;if(ArrayBuffer.isView(a)){const c=a;return o&&o.push(c.buffer),c}if(a instanceof ImageData)return o&&o.push(a.data.buffer),a;if(Array.isArray(a)){const c=[];for(const d of a)c.push(ua(d,o));return c}if(typeof a=="object"){const c=a.constructor,d=c._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${c.name}`);if(!kl[d])throw new Error(`${d} is not registered.`);const m=c.serialize?c.serialize(a,o):{};if(c.serialize){if(o&&m===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||kl[d].omit.indexOf(v)>=0)continue;const x=a[v];m[v]=kl[d].shallow.indexOf(v)>=0?x:ua(x,o)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function ep(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||n_(a)||Gt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(ep);if(typeof a=="object"){const o=a.$name||"Object";if(!kl[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:c}=kl[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(a);const d=Object.create(c.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];d[m]=kl[o].shallow.indexOf(m)>=0?v:ep(v)}return d}throw new Error("can't deserialize object of type "+typeof a)}class r_{constructor(){this.first=!0}update(o,c){const d=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=d,!0))}}const ot={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Km(a){for(const o of a)if(Ym(o.charCodeAt(0)))return!0;return!1}function i_(a){for(const o of a)if(!xb(o.charCodeAt(0)))return!1;return!0}function xb(a){return!(ot.Arabic(a)||ot["Arabic Supplement"](a)||ot["Arabic Extended-A"](a)||ot["Arabic Presentation Forms-A"](a)||ot["Arabic Presentation Forms-B"](a))}function Ym(a){return!(a!==746&&a!==747&&(a<4352||!(ot["Bopomofo Extended"](a)||ot.Bopomofo(a)||ot["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||ot["CJK Compatibility Ideographs"](a)||ot["CJK Compatibility"](a)||ot["CJK Radicals Supplement"](a)||ot["CJK Strokes"](a)||!(!ot["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||ot["CJK Unified Ideographs Extension A"](a)||ot["CJK Unified Ideographs"](a)||ot["Enclosed CJK Letters and Months"](a)||ot["Hangul Compatibility Jamo"](a)||ot["Hangul Jamo Extended-A"](a)||ot["Hangul Jamo Extended-B"](a)||ot["Hangul Jamo"](a)||ot["Hangul Syllables"](a)||ot.Hiragana(a)||ot["Ideographic Description Characters"](a)||ot.Kanbun(a)||ot["Kangxi Radicals"](a)||ot["Katakana Phonetic Extensions"](a)||ot.Katakana(a)&&a!==12540||!(!ot["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!ot["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||ot["Unified Canadian Aboriginal Syllabics"](a)||ot["Unified Canadian Aboriginal Syllabics Extended"](a)||ot["Vertical Forms"](a)||ot["Yijing Hexagram Symbols"](a)||ot["Yi Syllables"](a)||ot["Yi Radicals"](a))))}function Nl(a){return!(Ym(a)||function(o){return!!(ot["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||ot["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||ot["Letterlike Symbols"](o)||ot["Number Forms"](o)||ot["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||ot["Control Pictures"](o)&&o!==9251||ot["Optical Character Recognition"](o)||ot["Enclosed Alphanumerics"](o)||ot["Geometric Shapes"](o)||ot["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||ot["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||ot["CJK Symbols and Punctuation"](o)||ot.Katakana(o)||ot["Private Use Area"](o)||ot["CJK Compatibility Forms"](o)||ot["Small Form Variants"](o)||ot["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(a))}function Jm(a){return a>=1424&&a<=2303||ot["Arabic Presentation Forms-A"](a)||ot["Arabic Presentation Forms-B"](a)}function Qm(a,o){return!(!o&&Jm(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||ot.Khmer(a))}function o_(a){for(const o of a)if(Jm(o.charCodeAt(0)))return!0;return!1}const Ya=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jn{constructor(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r_,this.transition={})}isSupportedScript(o){return function(c,d){for(const m of c)if(!Qm(m.charCodeAt(0),d))return!1;return!0}(o,Ya.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,c=o-Math.floor(o),d=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class xu{constructor(o,c){this.property=o,this.value=c,this.expression=function(d,m){if(gu(d))return new Ni(d,m);if(_d(d)){const v=Zh(d,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=xn.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=ki.parse(d)):v=zo.parse(d),{kind:"constant",evaluate:()=>v}}}(c===void 0?o.specification.default:c,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,c,d){return this.property.possiblyEvaluate(this,o,c,d)}}class bu{constructor(o){this.property=o,this.value=new xu(o,void 0)}transitioned(o,c){return new eg(this.property,this.value,c,fe({},o.transition,this.transition),o.now)}untransitioned(){return new eg(this.property,this.value,null,{},0)}}class s_{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ue(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new bu(this._values[o].property)),this._values[o].value=new xu(this._values[o].property,c===null?void 0:Ue(c))}getTransition(o){return Ue(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new bu(this._values[o].property)),this._values[o].transition=Ue(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d);const m=this.getTransition(c);m!==void 0&&(o[`${c}-transition`]=m)}return o}transitioned(o,c){const d=new vc(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(o,c._values[m]);return d}untransitioned(){const o=new vc(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class eg{constructor(o,c,d,m,v){this.property=o,this.value=c,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,o.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(o,c,d){const m=o.now||0,v=this.value.possiblyEvaluate(o,c,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(o,c,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,c,d),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const M=P*P,N=M*P;return 4*(P<.5?N:3*(P-M)+N-.75)}(S))}}return v}}class vc{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,d){const m=new tp(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(o,c,d);return m}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class bb{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Ue(this._values[o].value)}setValue(o,c){this._values[o]=new xu(this._values[o].property,c===null?void 0:Ue(c))}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d)}return o}possiblyEvaluate(o,c,d){const m=new tp(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(o,c,d);return m}}class ca{constructor(o,c,d){this.property=o,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,c,d,m){return this.property.evaluate(this.value,this.parameters,o,c,d,m)}}class tp{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class ft{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,d){const m=Ji[this.specification.type];return m?m(o,c,d):o}}class _{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,d,m){return new ca(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},d,m)}:o.expression,c)}interpolate(o,c,d){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new ca(this,{kind:"constant",value:void 0},o.parameters);const m=Ji[this.specification.type];if(m){const v=m(o.value.value,c.value.value,d);return new ca(this,{kind:"constant",value:v},o.parameters)}return o}evaluate(o,c,d,m,v,x){return o.kind==="constant"?o.value:o.evaluate(c,d,m,v,x)}}class s extends _{possiblyEvaluate(o,c,d,m){if(o.value===void 0)return new ca(this,{kind:"constant",value:void 0},c);if(o.expression.kind==="constant"){const v=o.expression.evaluate(c,null,{},d,m),x=o.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,c);return new ca(this,{kind:"constant",value:S},c)}if(o.expression.kind==="camera"){const v=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new ca(this,{kind:"constant",value:v},c)}return new ca(this,o.expression,c)}evaluate(o,c,d,m,v,x){if(o.kind==="source"){const S=o.evaluate(c,d,m,v,x);return this._calculate(S,S,S,c)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},d,m),o.evaluate({zoom:Math.floor(c.zoom)},d,m),o.evaluate({zoom:Math.floor(c.zoom)+1},d,m),c):o.value}_calculate(o,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class p{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,m){if(o.value!==void 0){if(o.expression.kind==="constant"){const v=o.expression.evaluate(c,null,{},d,m);return this._calculate(v,v,v,c)}return this._calculate(o.expression.evaluate(new jn(Math.floor(c.zoom-1),c)),o.expression.evaluate(new jn(Math.floor(c.zoom),c)),o.expression.evaluate(new jn(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class f{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,m){return!!o.expression.evaluate(c,null,{},d,m)}interpolate(){return!1}}class g{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in o){const d=o[c];d.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new xu(d,void 0),v=this.defaultTransitionablePropertyValues[c]=new bu(d);this.defaultTransitioningPropertyValues[c]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}lt("DataDrivenProperty",_),lt("DataConstantProperty",ft),lt("CrossFadedDataDrivenProperty",s),lt("CrossFadedProperty",p),lt("ColorRampProperty",f);const b="-transition";class I extends Wt{constructor(o,c){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),c.layout&&(this._unevaluatedLayout=new bb(c.layout)),c.paint)){this._transitionablePaint=new s_(c.paint);for(const d in o.paint)this.setPaintProperty(d,o.paint[d],{validate:!1});for(const d in o.layout)this.setLayoutProperty(d,o.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tp(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,c,d={}){c!=null&&this._validate(e_,`layers.${this.id}.layout.${o}`,o,c,d)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,c):this.visibility=c)}getPaintProperty(o){return o.endsWith(b)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,d={}){if(c!=null&&this._validate(Q0,`layers.${this.id}.paint.${o}`,o,c,d))return!1;if(o.endsWith(b))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[o],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);const P=this._transitionablePaint._values[o].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(o,S,P)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),De(o,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(o,c,d,m,v={}){return(!v||v.validate!==!1)&&t_(this,o.call(Jh,{key:c,layerType:this.type,objectKey:d,value:m,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof ca&&fc(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const L={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class A{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class k{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function z(a,o=1){let c=0,d=0;return{members:a.map(m=>{const v=L[m.type].BYTES_PER_ELEMENT,x=c=V(c,Math.max(o,v)),S=m.components||1;return d=Math.max(d,v),c+=v*S,{name:m.name,type:m.type,components:S,offset:x}}),size:V(c,Math.max(d,o)),alignment:o}}function V(a,o){return Math.ceil(a/o)*o}class Z extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const m=2*o;return this.int16[m+0]=c,this.int16[m+1]=d,o}}Z.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",Z);class te extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){const v=3*o;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=m,o}}te.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",te);class ne extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,d,m)}emplace(o,c,d,m,v){const x=4*o;return this.int16[x+0]=c,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=v,o}}ne.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",ne);class se extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,S){const P=6*o;return this.int16[P+0]=c,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,o}}se.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",se);class ee extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,S){const P=4*o,M=8*o;return this.int16[P+0]=c,this.int16[P+1]=d,this.uint8[M+4]=m,this.uint8[M+5]=v,this.uint8[M+6]=x,this.uint8[M+7]=S,o}}ee.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",ee);class de extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const m=2*o;return this.float32[m+0]=c,this.float32[m+1]=d,o}}de.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",de);class Ce extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,S,P,M,N){const D=this.length;return this.resize(D+1),this.emplace(D,o,c,d,m,v,x,S,P,M,N)}emplace(o,c,d,m,v,x,S,P,M,N,D){const F=10*o;return this.uint16[F+0]=c,this.uint16[F+1]=d,this.uint16[F+2]=m,this.uint16[F+3]=v,this.uint16[F+4]=x,this.uint16[F+5]=S,this.uint16[F+6]=P,this.uint16[F+7]=M,this.uint16[F+8]=N,this.uint16[F+9]=D,o}}Ce.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",Ce);class le extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,S,P,M,N,D,F){const W=this.length;return this.resize(W+1),this.emplace(W,o,c,d,m,v,x,S,P,M,N,D,F)}emplace(o,c,d,m,v,x,S,P,M,N,D,F,W){const X=12*o;return this.int16[X+0]=c,this.int16[X+1]=d,this.int16[X+2]=m,this.int16[X+3]=v,this.uint16[X+4]=x,this.uint16[X+5]=S,this.uint16[X+6]=P,this.uint16[X+7]=M,this.int16[X+8]=N,this.int16[X+9]=D,this.int16[X+10]=F,this.int16[X+11]=W,o}}le.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",le);class ve extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){const v=3*o;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,o}}ve.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",ve);class Te extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}Te.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",Te);class Me extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,S,P,M){const N=this.length;return this.resize(N+1),this.emplace(N,o,c,d,m,v,x,S,P,M)}emplace(o,c,d,m,v,x,S,P,M,N){const D=10*o,F=5*o;return this.int16[D+0]=c,this.int16[D+1]=d,this.int16[D+2]=m,this.int16[D+3]=v,this.int16[D+4]=x,this.int16[D+5]=S,this.uint32[F+3]=P,this.uint16[D+8]=M,this.uint16[D+9]=N,o}}Me.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",Me);class Re extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,S){const P=6*o;return this.int16[P+0]=c,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,o}}Re.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",Re);class Ve extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,c,d,m,v)}emplace(o,c,d,m,v,x){const S=4*o,P=8*o;return this.float32[S+0]=c,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[P+6]=v,this.int16[P+7]=x,o}}Ve.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",Ve);class $e extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,d,m)}emplace(o,c,d,m,v){const x=12*o,S=3*o;return this.uint8[x+0]=c,this.uint8[x+1]=d,this.float32[S+1]=m,this.float32[S+2]=v,o}}$e.prototype.bytesPerElement=12,lt("StructArrayLayout2ub2f12",$e);class qe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){const v=3*o;return this.uint16[v+0]=c,this.uint16[v+1]=d,this.uint16[v+2]=m,o}}qe.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",qe);class at extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue){const we=this.length;return this.resize(we+1),this.emplace(we,o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue)}emplace(o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue,we){const pe=24*o,xe=12*o,Fe=48*o;return this.int16[pe+0]=c,this.int16[pe+1]=d,this.uint16[pe+2]=m,this.uint16[pe+3]=v,this.uint32[xe+2]=x,this.uint32[xe+3]=S,this.uint32[xe+4]=P,this.uint16[pe+10]=M,this.uint16[pe+11]=N,this.uint16[pe+12]=D,this.float32[xe+7]=F,this.float32[xe+8]=W,this.uint8[Fe+36]=X,this.uint8[Fe+37]=Q,this.uint8[Fe+38]=ie,this.uint32[xe+10]=ue,this.int16[pe+22]=we,o}}at.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",at);class Dt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue,we,pe,xe,Fe,Be,st,pt,nt,tt,ut,mt){const rt=this.length;return this.resize(rt+1),this.emplace(rt,o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue,we,pe,xe,Fe,Be,st,pt,nt,tt,ut,mt)}emplace(o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q,ie,ue,we,pe,xe,Fe,Be,st,pt,nt,tt,ut,mt,rt){const je=32*o,ht=16*o;return this.int16[je+0]=c,this.int16[je+1]=d,this.int16[je+2]=m,this.int16[je+3]=v,this.int16[je+4]=x,this.int16[je+5]=S,this.int16[je+6]=P,this.int16[je+7]=M,this.uint16[je+8]=N,this.uint16[je+9]=D,this.uint16[je+10]=F,this.uint16[je+11]=W,this.uint16[je+12]=X,this.uint16[je+13]=Q,this.uint16[je+14]=ie,this.uint16[je+15]=ue,this.uint16[je+16]=we,this.uint16[je+17]=pe,this.uint16[je+18]=xe,this.uint16[je+19]=Fe,this.uint16[je+20]=Be,this.uint16[je+21]=st,this.uint16[je+22]=pt,this.uint32[ht+12]=nt,this.float32[ht+13]=tt,this.float32[ht+14]=ut,this.uint16[je+30]=mt,this.uint16[je+31]=rt,o}}Dt.prototype.bytesPerElement=64,lt("StructArrayLayout8i15ui1ul2f2ui64",Dt);class Ke extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}Ke.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",Ke);class Et extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){const v=3*o;return this.uint16[6*o+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,o}}Et.prototype.bytesPerElement=12,lt("StructArrayLayout1ui2f12",Et);class Ot extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){const v=4*o;return this.uint32[2*o+0]=c,this.uint16[v+2]=d,this.uint16[v+3]=m,o}}Ot.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",Ot);class Qt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const m=2*o;return this.uint16[m+0]=c,this.uint16[m+1]=d,o}}Qt.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",Qt);class Tt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}Tt.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",Tt);class jt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,d,m)}emplace(o,c,d,m,v){const x=4*o;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=v,o}}jt.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",jt);class qt extends A{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}qt.prototype.size=20;class ur extends Me{get(o){return new qt(this,o)}}lt("CollisionBoxArray",ur);class Mn extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Mn.prototype.size=48;class $o extends at{get(o){return new Mn(this,o)}}lt("PlacedSymbolArray",$o);class oi extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oi.prototype.size=64;class cr extends Dt{get(o){return new oi(this,o)}}lt("SymbolInstanceArray",cr);class yo extends Ke{getoffsetX(o){return this.float32[1*o+0]}}lt("GlyphOffsetArray",yo);class Ps extends te{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}lt("SymbolLineVertexArray",Ps);class ha extends A{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ha.prototype.size=12;class Rl extends Et{get(o){return new ha(this,o)}}lt("TextAnchorOffsetArray",Rl);class xc extends A{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xc.prototype.size=8;class wu extends Ot{get(o){return new xc(this,o)}}lt("FeatureIndexArray",wu);class Su extends Z{}class Qi extends Z{}class Ri extends Z{}class eo extends se{}class np extends ee{}class Gr extends de{}class Qn extends Ce{}class us extends le{}class qr extends ve{}class wb extends Te{}class a_ extends Re{}class Sb extends $e{}class bc extends qe{}class tg extends Qt{}const Eb=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:wc}=Eb;class si{constructor(o=[]){this.segments=o}prepareSegment(o,c,d,m){let v=this.segments[this.segments.length-1];return o>si.MAX_VERTEX_ARRAY_LENGTH&&wt(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!v||v.vertexLength+o>si.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:c.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,d,m){return new si([{vertexOffset:o,primitiveOffset:c,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function ng(a,o){return 256*(a=he(Math.floor(a),0,255))+he(Math.floor(o),0,255)}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",si);const rp=z([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Sc={exports:{}},rg={exports:{}};rg.exports=function(a,o){var c,d,m,v,x,S,P,M;for(d=a.length-(c=3&a.length),m=o,x=3432918353,S=461845907,M=0;M<d;)P=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,c){case 3:P^=(255&a.charCodeAt(M+2))<<16;case 2:P^=(255&a.charCodeAt(M+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(M)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var ig=rg.exports,vI={exports:{}};vI.exports=function(a,o){for(var c,d=a.length,m=o^d,v=0;d>=4;)c=1540483477*(65535&(c=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var xI=ig,CD=vI.exports;Sc.exports=xI,Sc.exports.murmur3=xI,Sc.exports.murmur2=CD;var Cb=y(Sc.exports);class l_{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,d,m){this.ids.push(bI(o)),this.positions.push(c,d,m)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=bI(o);let d=0,m=this.ids.length-1;for(;d<m;){const x=d+m>>1;this.ids[x]>=c?m=x:d=x+1}const v=[];for(;this.ids[d]===c;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(o,c){const d=new Float64Array(o.ids),m=new Uint32Array(o.positions);return Ib(d,m,0,d.length-1),c&&c.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(o){const c=new l_;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function bI(a){const o=+a;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Cb(String(a))}function Ib(a,o,c,d){for(;c<d;){const m=a[c+d>>1];let v=c-1,x=d+1;for(;;){do v++;while(a[v]<m);do x--;while(a[x]>m);if(v>=x)break;u_(a,v,x),u_(o,3*v,3*x),u_(o,3*v+1,3*x+1),u_(o,3*v+2,3*x+2)}x-c<d-x?(Ib(a,o,c,x),c=x+1):(Ib(a,o,x+1,d),d=x)}}function u_(a,o,c){const d=a[o];a[o]=a[c],a[c]=d}lt("FeaturePositionMap",l_);class ip{constructor(o,c){this.gl=o.gl,this.location=c}}class c_ extends ip{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class wI extends ip{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class SI extends ip{constructor(o,c){super(o,c),this.current=xn.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const ID=new Float32Array(16);function Tb(a){return[ng(255*a.r,255*a.g),ng(255*a.b,255*a.a)]}class og{constructor(o,c,d){this.value=o,this.uniformNames=c.map(m=>`u_${m}`),this.type=d}setUniform(o,c,d){o.set(d.constantOr(this.value))}getBinding(o,c,d){return this.type==="color"?new SI(o,c):new c_(o,c)}}class Cd{constructor(o,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setUniform(o,c,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&o.set(v)}getBinding(o,c,d){return d.substr(0,9)==="u_pattern"?new wI(o,c):new c_(o,c)}}class Eu{constructor(o,c,d,m){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,c,d,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new jn(0),c,{},m,[],v);this.paintVertexArray.resize(o),this._setPaintValue(x,o,S)}updatePaintArray(o,c,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(o,c,v)}_setPaintValue(o,c,d){if(this.type==="color"){const m=Tb(d);for(let v=o;v<c;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=o;m<c;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ja{constructor(o,c,d,m,v,x){this.expression=o,this.uniformNames=c.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=c.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,c,d,m,v){const x=this.expression.evaluate(new jn(this.zoom),c,{},m,[],v),S=this.expression.evaluate(new jn(this.zoom+1),c,{},m,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(P,o,x,S)}updatePaintArray(o,c,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),x=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(o,c,v,x)}_setPaintValue(o,c,d,m){if(this.type==="color"){const v=Tb(d),x=Tb(m);for(let S=o;S<c;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=o;v<c;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){const d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=he(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);o.set(m)}getBinding(o,c,d){return new c_(o,c)}}class Ec{constructor(o,c,d,m,v,x){this.expression=o,this.type=c,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(o,c,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(m,o,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(o,c,d,m,v){this._setPaintValues(o,c,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(o,c,d,m){if(!m||!d)return;const{min:v,mid:x,max:S}=d,P=m[v],M=m[x],N=m[S];if(P&&M&&N)for(let D=o;D<c;D++)this.zoomInPaintVertexArray.emplace(D,M.tl[0],M.tl[1],M.br[0],M.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],M.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,M.tl[0],M.tl[1],M.br[0],M.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],M.pixelRatio,N.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,rp.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,rp.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class EI{constructor(o,c,d){this.binders={},this._buffers=[];const m=[];for(const v in o.paint._values){if(!d(v))continue;const x=o.paint.get(v);if(!(x instanceof ca&&fc(x.property.specification)))continue;const S=TD(v,o.type),P=x.value,M=x.property.specification.type,N=x.property.useIntegerZoom,D=x.property.specification["property-type"],F=D==="cross-faded"||D==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=F?new Cd(P.value,S):new og(P.value,S,M),m.push(`/u_${v}`);else if(P.kind==="source"||F){const W=CI(v,M,"source");this.binders[v]=F?new Ec(P,M,N,c,W,o.id):new Eu(P,S,M,W),m.push(`/a_${v}`)}else{const W=CI(v,M,"composite");this.binders[v]=new Ja(P,S,M,N,c,W),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof Eu||c instanceof Ja?c.maxValue:0}populatePaintArrays(o,c,d,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Eu||S instanceof Ja||S instanceof Ec)&&S.populatePaintArray(o,c,d,m,v)}}setConstantPatternPositions(o,c){for(const d in this.binders){const m=this.binders[d];m instanceof Cd&&m.setConstantPatternPositions(o,c)}}updatePaintArrays(o,c,d,m,v){let x=!1;for(const S in o){const P=c.getPositions(S);for(const M of P){const N=d.feature(M.index);for(const D in this.binders){const F=this.binders[D];if((F instanceof Eu||F instanceof Ja||F instanceof Ec)&&F.expression.isStateDependent===!0){const W=m.paint.get(D);F.expression=W.value,F.updatePaintArray(M.start,M.end,N,o[S],v),x=!0}}}}return x}defines(){const o=[];for(const c in this.binders){const d=this.binders[c];(d instanceof og||d instanceof Cd)&&o.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Eu||d instanceof Ja)for(let m=0;m<d.paintVertexAttributes.length;m++)o.push(d.paintVertexAttributes[m].name);else if(d instanceof Ec)for(let m=0;m<rp.members.length;m++)o.push(rp.members[m].name)}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof og||d instanceof Cd||d instanceof Ja)for(const m of d.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof og||v instanceof Cd||v instanceof Ja){for(const x of v.uniformNames)if(c[x]){const S=v.getBinding(o,c[x],x);d.push({name:x,property:m,binding:S})}}}return d}setUniforms(o,c,d,m){for(const{name:v,property:x,binding:S}of c)this.binders[x].setUniform(S,m,d.get(x),v)}updatePaintBuffers(o){this._buffers=[];for(const c in this.binders){const d=this.binders[c];if(o&&d instanceof Ec){const m=o.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof Eu||d instanceof Ja)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const c in this.binders){const d=this.binders[c];(d instanceof Eu||d instanceof Ja||d instanceof Ec)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof Eu||c instanceof Ja||c instanceof Ec)&&c.destroy()}}}class op{constructor(o,c,d=()=>!0){this.programConfigurations={};for(const m of o)this.programConfigurations[m.id]=new EI(m,c,d);this.needsUpload=!1,this._featureMap=new l_,this._bufferOffset=0}populatePaintArrays(o,c,d,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,c,m,v,x);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(o,this._featureMap,c,v,m)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function TD(a,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${o}-`,"").replace(/-/g,"_")]}function CI(a,o,c){const d={color:{source:de,composite:jt},number:{source:Ke,composite:de}},m=function(v){return{"line-pattern":{source:Qn,composite:Qn},"fill-pattern":{source:Qn,composite:Qn},"fill-extrusion-pattern":{source:Qn,composite:Qn}}[v]}(a);return m&&m[c]||d[o][c]}lt("ConstantBinder",og),lt("CrossFadedConstantBinder",Cd),lt("SourceExpressionBinder",Eu),lt("CrossFadedCompositeBinder",Ec),lt("CompositeExpressionBinder",Ja),lt("ProgramConfiguration",EI,{omit:["_buffers"]}),lt("ProgramConfigurationSet",op);const Dr=8192,Pb=Math.pow(2,14)-1,II=-Pb-1;function sp(a){const o=Dr/a.extent,c=a.loadGeometry();for(let d=0;d<c.length;d++){const m=c[d];for(let v=0;v<m.length;v++){const x=m[v],S=Math.round(x.x*o),P=Math.round(x.y*o);x.x=he(S,II,Pb),x.y=he(P,II,Pb),(S<x.x||S>x.x+1||P<x.y||P>x.y+1)&&wt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function ap(a,o){return{type:a.type,id:a.id,properties:a.properties,geometry:o?sp(a):[]}}function h_(a,o,c,d,m){a.emplaceBack(2*o+(d+1)/2,2*c+(m+1)/2)}class Lb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Qi,this.indexArray=new bc,this.segments=new si,this.programConfigurations=new op(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){const m=this.layers[0],v=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:P,id:M,index:N,sourceLayerIndex:D}of o){const F=this.layers[0]._featureFilter.needGeometry,W=ap(P,F);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom),W,d))continue;const X=S?x.evaluate(W,{},d):void 0,Q={id:M,properties:P.properties,type:P.type,sourceLayerIndex:D,index:N,geometry:F?W.geometry:sp(P),patterns:{},sortKey:X};v.push(Q)}S&&v.sort((P,M)=>P.sortKey-M.sortKey);for(const P of v){const{geometry:M,index:N,sourceLayerIndex:D}=P,F=o[N].feature;this.addFeature(P,M,N,d),c.featureIndex.insert(F,M,N,D,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,wc),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,d,m){for(const v of c)for(const x of v){const S=x.x,P=x.y;if(S<0||S>=Dr||P<0||P>=Dr)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),N=M.vertexLength;h_(this.layoutVertexArray,S,P,-1,-1),h_(this.layoutVertexArray,S,P,1,-1),h_(this.layoutVertexArray,S,P,1,1),h_(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(N,N+1,N+2),this.indexArray.emplaceBack(N,N+3,N+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},m)}}function TI(a,o){for(let c=0;c<a.length;c++)if(Id(o,a[c]))return!0;for(let c=0;c<o.length;c++)if(Id(a,o[c]))return!0;return!!Mb(a,o)}function PD(a,o,c){return!!Id(a,o)||!!Ab(o,a,c)}function PI(a,o){if(a.length===1)return MI(o,a[0]);for(let c=0;c<o.length;c++){const d=o[c];for(let m=0;m<d.length;m++)if(Id(a,d[m]))return!0}for(let c=0;c<a.length;c++)if(MI(o,a[c]))return!0;for(let c=0;c<o.length;c++)if(Mb(a,o[c]))return!0;return!1}function LD(a,o,c){if(a.length>1){if(Mb(a,o))return!0;for(let d=0;d<o.length;d++)if(Ab(o[d],a,c))return!0}for(let d=0;d<a.length;d++)if(Ab(a[d],o,c))return!0;return!1}function Mb(a,o){if(a.length===0||o.length===0)return!1;for(let c=0;c<a.length-1;c++){const d=a[c],m=a[c+1];for(let v=0;v<o.length-1;v++)if(MD(d,m,o[v],o[v+1]))return!0}return!1}function MD(a,o,c,d){return Ae(a,c,d)!==Ae(o,c,d)&&Ae(a,o,c)!==Ae(a,o,d)}function Ab(a,o,c){const d=c*c;if(o.length===1)return a.distSqr(o[0])<d;for(let m=1;m<o.length;m++)if(LI(a,o[m-1],o[m])<d)return!0;return!1}function LI(a,o,c){const d=o.distSqr(c);if(d===0)return a.distSqr(o);const m=((a.x-o.x)*(c.x-o.x)+(a.y-o.y)*(c.y-o.y))/d;return a.distSqr(m<0?o:m>1?c:c.sub(o)._mult(m)._add(o))}function MI(a,o){let c,d,m,v=!1;for(let x=0;x<a.length;x++){c=a[x];for(let S=0,P=c.length-1;S<c.length;P=S++)d=c[S],m=c[P],d.y>o.y!=m.y>o.y&&o.x<(m.x-d.x)*(o.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function Id(a,o){let c=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const v=a[d],x=a[m];v.y>o.y!=x.y>o.y&&o.x<(x.x-v.x)*(o.y-v.y)/(x.y-v.y)+v.x&&(c=!c)}return c}function AD(a,o,c){const d=c[0],m=c[2];if(a.x<d.x&&o.x<d.x||a.x>m.x&&o.x>m.x||a.y<d.y&&o.y<d.y||a.y>m.y&&o.y>m.y)return!1;const v=Ae(a,o,c[0]);return v!==Ae(a,o,c[1])||v!==Ae(a,o,c[2])||v!==Ae(a,o,c[3])}function sg(a,o,c){const d=o.paint.get(a).value;return d.kind==="constant"?d.value:c.programConfigurations.get(o.id).getMaxValue(a)}function p_(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function d_(a,o,c,d,m){if(!o[0]&&!o[1])return a;const v=C.convert(o)._mult(m);c==="viewport"&&v._rotate(-d);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let AI,kI;lt("CircleBucket",Lb,{omit:["layers"]});var kD={get paint(){return kI=kI||new g({"circle-radius":new _(ze.paint_circle["circle-radius"]),"circle-color":new _(ze.paint_circle["circle-color"]),"circle-blur":new _(ze.paint_circle["circle-blur"]),"circle-opacity":new _(ze.paint_circle["circle-opacity"]),"circle-translate":new ft(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return AI=AI||new g({"circle-sort-key":new _(ze.layout_circle["circle-sort-key"])})}},_o=1e-6,Td=typeof Float32Array<"u"?Float32Array:Array;function kb(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function NI(a,o,c){var d=o[0],m=o[1],v=o[2],x=o[3],S=o[4],P=o[5],M=o[6],N=o[7],D=o[8],F=o[9],W=o[10],X=o[11],Q=o[12],ie=o[13],ue=o[14],we=o[15],pe=c[0],xe=c[1],Fe=c[2],Be=c[3];return a[0]=pe*d+xe*S+Fe*D+Be*Q,a[1]=pe*m+xe*P+Fe*F+Be*ie,a[2]=pe*v+xe*M+Fe*W+Be*ue,a[3]=pe*x+xe*N+Fe*X+Be*we,a[4]=(pe=c[4])*d+(xe=c[5])*S+(Fe=c[6])*D+(Be=c[7])*Q,a[5]=pe*m+xe*P+Fe*F+Be*ie,a[6]=pe*v+xe*M+Fe*W+Be*ue,a[7]=pe*x+xe*N+Fe*X+Be*we,a[8]=(pe=c[8])*d+(xe=c[9])*S+(Fe=c[10])*D+(Be=c[11])*Q,a[9]=pe*m+xe*P+Fe*F+Be*ie,a[10]=pe*v+xe*M+Fe*W+Be*ue,a[11]=pe*x+xe*N+Fe*X+Be*we,a[12]=(pe=c[12])*d+(xe=c[13])*S+(Fe=c[14])*D+(Be=c[15])*Q,a[13]=pe*m+xe*P+Fe*F+Be*ie,a[14]=pe*v+xe*M+Fe*W+Be*ue,a[15]=pe*x+xe*N+Fe*X+Be*we,a}Math.hypot||(Math.hypot=function(){for(var a=0,o=arguments.length;o--;)a+=arguments[o]*arguments[o];return Math.sqrt(a)});var ag,ND=NI;function f_(a,o,c){var d=o[0],m=o[1],v=o[2],x=o[3];return a[0]=c[0]*d+c[4]*m+c[8]*v+c[12]*x,a[1]=c[1]*d+c[5]*m+c[9]*v+c[13]*x,a[2]=c[2]*d+c[6]*m+c[10]*v+c[14]*x,a[3]=c[3]*d+c[7]*m+c[11]*v+c[15]*x,a}ag=new Td(4),Td!=Float32Array&&(ag[0]=0,ag[1]=0,ag[2]=0,ag[3]=0);class RD extends I{constructor(o){super(o,kD)}createBucket(o){return new Lb(o)}queryRadius(o){const c=o;return sg("circle-radius",this,c)+sg("circle-stroke-width",this,c)+p_(this.paint.get("circle-translate"))}queryIntersectsFeature(o,c,d,m,v,x,S,P){const M=d_(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),N=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),D=this.paint.get("circle-pitch-alignment")==="map",F=D?M:function(X,Q){return X.map(ie=>RI(ie,Q))}(M,P),W=D?N*S:N;for(const X of m)for(const Q of X){const ie=D?Q:RI(Q,P);let ue=W;const we=f_([],[Q.x,Q.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=we[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=x.cameraToCenterDistance/we[3]),PD(F,ie,ue))return!0}return!1}}function RI(a,o){const c=f_([],[a.x,a.y,0,1],o);return new C(c[0]/c[3],c[1]/c[3])}class DI extends Lb{}let OI;lt("HeatmapBucket",DI,{omit:["layers"]});var DD={get paint(){return OI=OI||new g({"heatmap-radius":new _(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new f(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(ze.paint_heatmap["heatmap-opacity"])})}};function Nb(a,{width:o,height:c},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*c*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${o*c*d}`)}else m=new Uint8Array(o*c*d);return a.width=o,a.height=c,a.data=m,a}function zI(a,{width:o,height:c},d){if(o===a.width&&c===a.height)return;const m=Nb({},{width:o,height:c},d);Rb(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,o),height:Math.min(a.height,c)},d),a.width=o,a.height=c,a.data=m.data}function Rb(a,o,c,d,m,v){if(m.width===0||m.height===0)return o;if(m.width>a.width||m.height>a.height||c.x>a.width-m.width||c.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||d.x>o.width-m.width||d.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=o.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const M=((c.y+P)*a.width+c.x)*v,N=((d.y+P)*o.width+d.x)*v;for(let D=0;D<m.width*v;D++)S[N+D]=x[M+D]}return o}class lg{constructor(o,c){Nb(this,o,1,c)}resize(o){zI(this,o,1)}clone(){return new lg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,m,v){Rb(o,c,d,m,v,1)}}class Ls{constructor(o,c){Nb(this,o,4,c)}resize(o){zI(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Ls({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,m,v){Rb(o,c,d,m,v,4)}}function FI(a){const o={},c=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new Ls({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const v=(x,S,P)=>{o[a.evaluationKey]=P;const M=a.expression.evaluate(o);m.data[x+S+0]=Math.floor(255*M.r/M.a),m.data[x+S+1]=Math.floor(255*M.g/M.a),m.data[x+S+2]=Math.floor(255*M.b/M.a),m.data[x+S+3]=Math.floor(255*M.a)};if(a.clips)for(let x=0,S=0;x<d;++x,S+=4*c)for(let P=0,M=0;P<c;P++,M+=4){const N=P/(c-1),{start:D,end:F}=a.clips[x];v(S,M,D*(1-N)+F*N)}else for(let x=0,S=0;x<c;x++,S+=4)v(0,S,x/(c-1));return m}lt("AlphaImage",lg),lt("RGBAImage",Ls);class OD extends I{createBucket(o){return new DI(o)}constructor(o){super(o,DD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=FI({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let BI;var zD={get paint(){return BI=BI||new g({"hillshade-illumination-direction":new ft(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(ze.paint_hillshade["hillshade-accent-color"])})}};class FD extends I{constructor(o){super(o,zD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const BD=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:jD}=BD;var Db={exports:{}};function m_(a,o,c){c=c||2;var d,m,v,x,S,P,M,N=o&&o.length,D=N?o[0]*c:a.length,F=jI(a,0,D,c,!0),W=[];if(!F||F.next===F.prev)return W;if(N&&(F=function(Q,ie,ue,we){var pe,xe,Fe,Be=[];for(pe=0,xe=ie.length;pe<xe;pe++)(Fe=jI(Q,ie[pe]*we,pe<xe-1?ie[pe+1]*we:Q.length,we,!1))===Fe.next&&(Fe.steiner=!0),Be.push(ZD(Fe));for(Be.sort(qD),pe=0;pe<Be.length;pe++)ue=WD(Be[pe],ue);return ue}(a,o,F,c)),a.length>80*c){d=v=a[0],m=x=a[1];for(var X=c;X<D;X+=c)(S=a[X])<d&&(d=S),(P=a[X+1])<m&&(m=P),S>v&&(v=S),P>x&&(x=P);M=(M=Math.max(v-d,x-m))!==0?32767/M:0}return ug(F,W,c,d,m,M,0),W}function jI(a,o,c,d,m){var v,x;if(m===Fb(a,o,c,d)>0)for(v=o;v<c;v+=d)x=UI(v,a[v],a[v+1],x);else for(v=c-d;v>=o;v-=d)x=UI(v,a[v],a[v+1],x);return x&&g_(x,x.next)&&(hg(x),x=x.next),x}function lp(a,o){if(!a)return a;o||(o=a);var c,d=a;do if(c=!1,d.steiner||!g_(d,d.next)&&xr(d.prev,d,d.next)!==0)d=d.next;else{if(hg(d),(d=o=d.prev)===d.next)break;c=!0}while(c||d!==o);return o}function ug(a,o,c,d,m,v,x){if(a){!x&&v&&function(N,D,F,W){var X=N;do X.z===0&&(X.z=Ob(X.x,X.y,D,F,W)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==N);X.prevZ.nextZ=null,X.prevZ=null,function(Q){var ie,ue,we,pe,xe,Fe,Be,st,pt=1;do{for(ue=Q,Q=null,xe=null,Fe=0;ue;){for(Fe++,we=ue,Be=0,ie=0;ie<pt&&(Be++,we=we.nextZ);ie++);for(st=pt;Be>0||st>0&&we;)Be!==0&&(st===0||!we||ue.z<=we.z)?(pe=ue,ue=ue.nextZ,Be--):(pe=we,we=we.nextZ,st--),xe?xe.nextZ=pe:Q=pe,pe.prevZ=xe,xe=pe;ue=we}xe.nextZ=null,pt*=2}while(Fe>1)}(X)}(a,d,m,v);for(var S,P,M=a;a.prev!==a.next;)if(S=a.prev,P=a.next,v?VD(a,d,m,v):$D(a))o.push(S.i/c|0),o.push(a.i/c|0),o.push(P.i/c|0),hg(a),a=P.next,M=P.next;else if((a=P)===M){x?x===1?ug(a=UD(lp(a),o,c),o,c,d,m,v,2):x===2&&GD(a,o,c,d,m,v):ug(lp(a),o,c,d,m,v,1);break}}}function $D(a){var o=a.prev,c=a,d=a.next;if(xr(o,c,d)>=0)return!1;for(var m=o.x,v=c.x,x=d.x,S=o.y,P=c.y,M=d.y,N=m<v?m<x?m:x:v<x?v:x,D=S<P?S<M?S:M:P<M?P:M,F=m>v?m>x?m:x:v>x?v:x,W=S>P?S>M?S:M:P>M?P:M,X=d.next;X!==o;){if(X.x>=N&&X.x<=F&&X.y>=D&&X.y<=W&&Pd(m,S,v,P,x,M,X.x,X.y)&&xr(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function VD(a,o,c,d){var m=a.prev,v=a,x=a.next;if(xr(m,v,x)>=0)return!1;for(var S=m.x,P=v.x,M=x.x,N=m.y,D=v.y,F=x.y,W=S<P?S<M?S:M:P<M?P:M,X=N<D?N<F?N:F:D<F?D:F,Q=S>P?S>M?S:M:P>M?P:M,ie=N>D?N>F?N:F:D>F?D:F,ue=Ob(W,X,o,c,d),we=Ob(Q,ie,o,c,d),pe=a.prevZ,xe=a.nextZ;pe&&pe.z>=ue&&xe&&xe.z<=we;){if(pe.x>=W&&pe.x<=Q&&pe.y>=X&&pe.y<=ie&&pe!==m&&pe!==x&&Pd(S,N,P,D,M,F,pe.x,pe.y)&&xr(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,xe.x>=W&&xe.x<=Q&&xe.y>=X&&xe.y<=ie&&xe!==m&&xe!==x&&Pd(S,N,P,D,M,F,xe.x,xe.y)&&xr(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;pe&&pe.z>=ue;){if(pe.x>=W&&pe.x<=Q&&pe.y>=X&&pe.y<=ie&&pe!==m&&pe!==x&&Pd(S,N,P,D,M,F,pe.x,pe.y)&&xr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;xe&&xe.z<=we;){if(xe.x>=W&&xe.x<=Q&&xe.y>=X&&xe.y<=ie&&xe!==m&&xe!==x&&Pd(S,N,P,D,M,F,xe.x,xe.y)&&xr(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function UD(a,o,c){var d=a;do{var m=d.prev,v=d.next.next;!g_(m,v)&&$I(m,d,d.next,v)&&cg(m,v)&&cg(v,m)&&(o.push(m.i/c|0),o.push(d.i/c|0),o.push(v.i/c|0),hg(d),hg(d.next),d=a=v),d=d.next}while(d!==a);return lp(d)}function GD(a,o,c,d,m,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&XD(x,S)){var P=VI(x,S);return x=lp(x,x.next),P=lp(P,P.next),ug(x,o,c,d,m,v,0),void ug(P,o,c,d,m,v,0)}S=S.next}x=x.next}while(x!==a)}function qD(a,o){return a.x-o.x}function WD(a,o){var c=function(m,v){var x,S=v,P=m.x,M=m.y,N=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var D=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(D<=P&&D>N&&(N=D,x=S.x<S.next.x?S:S.next,D===P))return x}S=S.next}while(S!==v);if(!x)return null;var F,W=x,X=x.x,Q=x.y,ie=1/0;S=x;do P>=S.x&&S.x>=X&&P!==S.x&&Pd(M<Q?P:N,M,X,Q,M<Q?N:P,M,S.x,S.y)&&(F=Math.abs(M-S.y)/(P-S.x),cg(S,m)&&(F<ie||F===ie&&(S.x>x.x||S.x===x.x&&HD(x,S)))&&(x=S,ie=F)),S=S.next;while(S!==W);return x}(a,o);if(!c)return o;var d=VI(c,a);return lp(d,d.next),lp(c,c.next)}function HD(a,o){return xr(a.prev,a,o.prev)<0&&xr(o.next,a,a.next)<0}function Ob(a,o,c,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-c)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function ZD(a){var o=a,c=a;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==a);return c}function Pd(a,o,c,d,m,v,x,S){return(m-x)*(o-S)>=(a-x)*(v-S)&&(a-x)*(d-S)>=(c-x)*(o-S)&&(c-x)*(v-S)>=(m-x)*(d-S)}function XD(a,o){return a.next.i!==o.i&&a.prev.i!==o.i&&!function(c,d){var m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==d.i&&m.next.i!==d.i&&$I(m,m.next,c,d))return!0;m=m.next}while(m!==c);return!1}(a,o)&&(cg(a,o)&&cg(o,a)&&function(c,d){var m=c,v=!1,x=(c.x+d.x)/2,S=(c.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==c);return v}(a,o)&&(xr(a.prev,a,o.prev)||xr(a,o.prev,o))||g_(a,o)&&xr(a.prev,a,a.next)>0&&xr(o.prev,o,o.next)>0)}function xr(a,o,c){return(o.y-a.y)*(c.x-o.x)-(o.x-a.x)*(c.y-o.y)}function g_(a,o){return a.x===o.x&&a.y===o.y}function $I(a,o,c,d){var m=__(xr(a,o,c)),v=__(xr(a,o,d)),x=__(xr(c,d,a)),S=__(xr(c,d,o));return m!==v&&x!==S||!(m!==0||!y_(a,c,o))||!(v!==0||!y_(a,d,o))||!(x!==0||!y_(c,a,d))||!(S!==0||!y_(c,o,d))}function y_(a,o,c){return o.x<=Math.max(a.x,c.x)&&o.x>=Math.min(a.x,c.x)&&o.y<=Math.max(a.y,c.y)&&o.y>=Math.min(a.y,c.y)}function __(a){return a>0?1:a<0?-1:0}function cg(a,o){return xr(a.prev,a,a.next)<0?xr(a,o,a.next)>=0&&xr(a,a.prev,o)>=0:xr(a,o,a.prev)<0||xr(a,a.next,o)<0}function VI(a,o){var c=new zb(a.i,a.x,a.y),d=new zb(o.i,o.x,o.y),m=a.next,v=o.prev;return a.next=o,o.prev=a,c.next=m,m.prev=c,d.next=c,c.prev=d,v.next=d,d.prev=v,d}function UI(a,o,c,d){var m=new zb(a,o,c);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function hg(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function zb(a,o,c){this.i=a,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fb(a,o,c,d){for(var m=0,v=o,x=c-d;v<c;v+=d)m+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return m}Db.exports=m_,Db.exports.default=m_,m_.deviation=function(a,o,c,d){var m=o&&o.length,v=Math.abs(Fb(a,0,m?o[0]*c:a.length,c));if(m)for(var x=0,S=o.length;x<S;x++)v-=Math.abs(Fb(a,o[x]*c,x<S-1?o[x+1]*c:a.length,c));var P=0;for(x=0;x<d.length;x+=3){var M=d[x]*c,N=d[x+1]*c,D=d[x+2]*c;P+=Math.abs((a[M]-a[D])*(a[N+1]-a[M+1])-(a[M]-a[N])*(a[D+1]-a[M+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},m_.flatten=function(a){for(var o=a[0][0].length,c={vertices:[],holes:[],dimensions:o},d=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var x=0;x<o;x++)c.vertices.push(a[m][v][x]);m>0&&c.holes.push(d+=a[m-1].length)}return c};var GI=y(Db.exports);function Bb(a,o,c){const d=c.patternDependencies;let m=!1;for(const v of o){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function jb(a,o,c,d,m){const v=m.patternDependencies;for(const x of o){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:d-1},c,{},m.availableImages),M=S.evaluate({zoom:d},c,{},m.availableImages),N=S.evaluate({zoom:d+1},c,{},m.availableImages);P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,N=N&&N.name?N.name:N,v[P]=!0,v[M]=!0,v[N]=!0,c.patterns[x.id]={min:P,mid:M,max:N}}}return c}class $b{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ri,this.indexArray=new bc,this.indexArray2=new tg,this.programConfigurations=new op(o.layers,o.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=Bb("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:P,index:M,sourceLayerIndex:N}of o){const D=this.layers[0]._featureFilter.needGeometry,F=ap(S,D);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom),F,d))continue;const W=v?m.evaluate(F,{},d,c.availableImages):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:N,index:M,geometry:D?F.geometry:sp(S),patterns:{},sortKey:W};x.push(X)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:M,sourceLayerIndex:N}=S;if(this.hasPattern){const D=jb("fill",this.layers,S,this.zoom,c);this.patternFeatures.push(D)}else this.addFeature(S,P,M,d,{});c.featureIndex.insert(o[M].feature,P,M,N,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jD),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,d,m,v){for(const x of hd(c,500)){let S=0;for(const W of x)S+=W.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=P.vertexLength,N=[],D=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&D.push(N.length/2);const X=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),Q=X.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(Q+W.length-1,Q),N.push(W[0].x),N.push(W[0].y);for(let ie=1;ie<W.length;ie++)this.layoutVertexArray.emplaceBack(W[ie].x,W[ie].y),this.indexArray2.emplaceBack(Q+ie-1,Q+ie),N.push(W[ie].x),N.push(W[ie].y);X.vertexLength+=W.length,X.primitiveLength+=W.length}const F=GI(N,D);for(let W=0;W<F.length;W+=3)this.indexArray.emplaceBack(M+F[W],M+F[W+1],M+F[W+2]);P.vertexLength+=S,P.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}}let qI,WI;lt("FillBucket",$b,{omit:["layers","patternFeatures"]});var KD={get paint(){return WI=WI||new g({"fill-antialias":new ft(ze.paint_fill["fill-antialias"]),"fill-opacity":new _(ze.paint_fill["fill-opacity"]),"fill-color":new _(ze.paint_fill["fill-color"]),"fill-outline-color":new _(ze.paint_fill["fill-outline-color"]),"fill-translate":new ft(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new s(ze.paint_fill["fill-pattern"])})},get layout(){return qI=qI||new g({"fill-sort-key":new _(ze.layout_fill["fill-sort-key"])})}};class YD extends I{constructor(o){super(o,KD)}recalculate(o,c){super.recalculate(o,c);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new $b(o)}queryRadius(){return p_(this.paint.get("fill-translate"))}queryIntersectsFeature(o,c,d,m,v,x,S){return PI(d_(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const JD=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),QD=z([{name:"a_centroid",components:2,type:"Int16"}],4),{members:eO}=JD;var Cc={},tO=w,HI=Ld;function Ld(a,o,c,d,m){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(nO,this,o)}function nO(a,o,c){a==1?o.id=c.readVarint():a==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[x]=S}}(c,o):a==3?o.type=c.readVarint():a==4&&(o._geometry=c.pos)}function rO(a){for(var o,c,d=0,m=0,v=a.length,x=v-1;m<v;x=m++)d+=((c=a[x]).x-(o=a[m]).x)*(o.y+c.y);return d}Ld.types=["Unknown","Point","LineString","Polygon"],Ld.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var o,c=a.readVarint()+a.pos,d=1,m=0,v=0,x=0,S=[];a.pos<c;){if(m<=0){var P=a.readVarint();d=7&P,m=P>>3}if(m--,d===1||d===2)v+=a.readSVarint(),x+=a.readSVarint(),d===1&&(o&&S.push(o),o=[]),o.push(new tO(v,x));else{if(d!==7)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&S.push(o),S},Ld.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var o=a.readVarint()+a.pos,c=1,d=0,m=0,v=0,x=1/0,S=-1/0,P=1/0,M=-1/0;a.pos<o;){if(d<=0){var N=a.readVarint();c=7&N,d=N>>3}if(d--,c===1||c===2)(m+=a.readSVarint())<x&&(x=m),m>S&&(S=m),(v+=a.readSVarint())<P&&(P=v),v>M&&(M=v);else if(c!==7)throw new Error("unknown command "+c)}return[x,P,S,M]},Ld.prototype.toGeoJSON=function(a,o,c){var d,m,v=this.extent*Math.pow(2,c),x=this.extent*a,S=this.extent*o,P=this.loadGeometry(),M=Ld.types[this.type];function N(W){for(var X=0;X<W.length;X++){var Q=W[X];W[X]=[360*(Q.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(d=0;d<P.length;d++)D[d]=P[d][0];N(P=D);break;case 2:for(d=0;d<P.length;d++)N(P[d]);break;case 3:for(P=function(W){var X=W.length;if(X<=1)return[W];for(var Q,ie,ue=[],we=0;we<X;we++){var pe=rO(W[we]);pe!==0&&(ie===void 0&&(ie=pe<0),ie===pe<0?(Q&&ue.push(Q),Q=[W[we]]):Q.push(W[we]))}return Q&&ue.push(Q),ue}(P),d=0;d<P.length;d++)for(m=0;m<P[d].length;m++)N(P[d][m])}P.length===1?P=P[0]:M="Multi"+M;var F={type:"Feature",geometry:{type:M,coordinates:P},properties:this.properties};return"id"in this&&(F.id=this.id),F};var iO=HI,ZI=XI;function XI(a,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(oO,this,o),this.length=this._features.length}function oO(a,o,c){a===15?o.version=c.readVarint():a===1?o.name=c.readString():a===5?o.extent=c.readVarint():a===2?o._features.push(c.pos):a===3?o._keys.push(c.readString()):a===4&&o._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;m=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return m}(c))}XI.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var o=this._pbf.readVarint()+this._pbf.pos;return new iO(this._pbf,o,this.extent,this._keys,this._values)};var sO=ZI;function aO(a,o,c){if(a===3){var d=new sO(c,c.readVarint()+c.pos);d.length&&(o[d.name]=d)}}Cc.VectorTile=function(a,o){this.layers=a.readFields(aO,{},o)},Cc.VectorTileFeature=HI,Cc.VectorTileLayer=ZI;const lO=Cc.VectorTileFeature.types,Vb=Math.pow(2,13);function pg(a,o,c,d,m,v,x,S){a.emplaceBack(o,c,2*Math.floor(d*Vb)+x,m*Vb*2,v*Vb*2,Math.round(S))}class Ub{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new eo,this.centroidVertexArray=new Su,this.indexArray=new bc,this.programConfigurations=new op(o.layers,o.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.features=[],this.hasPattern=Bb("fill-extrusion",this.layers,c);for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of o){const P=this.layers[0]._featureFilter.needGeometry,M=ap(m,P);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom),M,d))continue;const N={id:v,sourceLayerIndex:S,index:x,geometry:P?M.geometry:sp(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(jb("fill-extrusion",this.layers,N,this.zoom,c)):this.addFeature(N,N.geometry,x,d,{}),c.featureIndex.insert(m,N.geometry,x,S,this.index,!0)}}addFeatures(o,c,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,c,d)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,eO),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,QD.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,d,m,v){const x={x:0,y:0,vertexCount:0};for(const S of hd(c,500)){let P=0;for(const X of S)P+=X.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const X of S){if(X.length===0||cO(X))continue;let Q=0;for(let ie=0;ie<X.length;ie++){const ue=X[ie];if(ie>=1){const we=X[ie-1];if(!uO(ue,we)){M.vertexLength+4>si.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=ue.sub(we)._perp()._unit(),xe=we.dist(ue);Q+xe>32768&&(Q=0),pg(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,0,Q),pg(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,1,Q),x.x+=2*ue.x,x.y+=2*ue.y,x.vertexCount+=2,Q+=xe,pg(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,0,Q),pg(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,1,Q),x.x+=2*we.x,x.y+=2*we.y,x.vertexCount+=2;const Fe=M.vertexLength;this.indexArray.emplaceBack(Fe,Fe+2,Fe+1),this.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+P>si.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),lO[o.type]!=="Polygon")continue;const N=[],D=[],F=M.vertexLength;for(const X of S)if(X.length!==0){X!==S[0]&&D.push(N.length/2);for(let Q=0;Q<X.length;Q++){const ie=X[Q];pg(this.layoutVertexArray,ie.x,ie.y,0,0,1,1,0),x.x+=ie.x,x.y+=ie.y,x.vertexCount+=1,N.push(ie.x),N.push(ie.y)}}const W=GI(N,D);for(let X=0;X<W.length;X+=3)this.indexArray.emplaceBack(F+W[X],F+W[X+2],F+W[X+1]);M.primitiveLength+=W.length/3,M.vertexLength+=P}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}}function uO(a,o){return a.x===o.x&&(a.x<0||a.x>Dr)||a.y===o.y&&(a.y<0||a.y>Dr)}function cO(a){return a.every(o=>o.x<0)||a.every(o=>o.x>Dr)||a.every(o=>o.y<0)||a.every(o=>o.y>Dr)}let KI;lt("FillExtrusionBucket",Ub,{omit:["layers","features"]});var hO={get paint(){return KI=KI||new g({"fill-extrusion-opacity":new ft(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new s(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class pO extends I{constructor(o){super(o,hO)}createBucket(o){return new Ub(o)}queryRadius(){return p_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,c,d,m,v,x,S,P){const M=d_(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),N=this.paint.get("fill-extrusion-height").evaluate(c,d),D=this.paint.get("fill-extrusion-base").evaluate(c,d),F=function(X,Q,ie,ue){const we=[];for(const pe of X){const xe=[pe.x,pe.y,0,1];f_(xe,xe,Q),we.push(new C(xe[0]/xe[3],xe[1]/xe[3]))}return we}(M,P),W=function(X,Q,ie,ue){const we=[],pe=[],xe=ue[8]*Q,Fe=ue[9]*Q,Be=ue[10]*Q,st=ue[11]*Q,pt=ue[8]*ie,nt=ue[9]*ie,tt=ue[10]*ie,ut=ue[11]*ie;for(const mt of X){const rt=[],je=[];for(const ht of mt){const ct=ht.x,$t=ht.y,En=ue[0]*ct+ue[4]*$t+ue[12],Cn=ue[1]*ct+ue[5]*$t+ue[13],Or=ue[2]*ct+ue[6]*$t+ue[14],As=ue[3]*ct+ue[7]*$t+ue[15],to=Or+Be,Hr=As+st,wi=En+pt,no=Cn+nt,vo=Or+tt,ro=As+ut,zr=new C((En+xe)/Hr,(Cn+Fe)/Hr);zr.z=to/Hr,rt.push(zr);const ai=new C(wi/ro,no/ro);ai.z=vo/ro,je.push(ai)}we.push(rt),pe.push(je)}return[we,pe]}(m,D,N,P);return function(X,Q,ie){let ue=1/0;PI(ie,Q)&&(ue=YI(ie,Q[0]));for(let we=0;we<Q.length;we++){const pe=Q[we],xe=X[we];for(let Fe=0;Fe<pe.length-1;Fe++){const Be=pe[Fe],st=[Be,pe[Fe+1],xe[Fe+1],xe[Fe],Be];TI(ie,st)&&(ue=Math.min(ue,YI(ie,st)))}}return ue!==1/0&&ue}(W[0],W[1],F)}}function dg(a,o){return a.x*o.x+a.y*o.y}function YI(a,o){if(a.length===1){let c=0;const d=o[c++];let m;for(;!m||d.equals(m);)if(m=o[c++],!m)return 1/0;for(;c<o.length;c++){const v=o[c],x=a[0],S=m.sub(d),P=v.sub(d),M=x.sub(d),N=dg(S,S),D=dg(S,P),F=dg(P,P),W=dg(M,S),X=dg(M,P),Q=N*F-D*D,ie=(F*W-D*X)/Q,ue=(N*X-D*W)/Q,we=d.z*(1-ie-ue)+m.z*ie+v.z*ue;if(isFinite(we))return we}return 1/0}{let c=1/0;for(const d of o)c=Math.min(c,d.z);return c}}const dO=z([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:fO}=dO,mO=z([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:gO}=mO,yO=Cc.VectorTileFeature.types,_O=Math.cos(Math.PI/180*37.5),JI=Math.pow(2,14)/.5;class Gb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new np,this.layoutVertexArray2=new Gr,this.indexArray=new bc,this.programConfigurations=new op(o.layers,o.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=Bb("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:P,index:M,sourceLayerIndex:N}of o){const D=this.layers[0]._featureFilter.needGeometry,F=ap(S,D);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom),F,d))continue;const W=v?m.evaluate(F,{},d):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:N,index:M,geometry:D?F.geometry:sp(S),patterns:{},sortKey:W};x.push(X)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:M,sourceLayerIndex:N}=S;if(this.hasPattern){const D=jb("line",this.layers,S,this.zoom,c);this.patternFeatures.push(D)}else this.addFeature(S,P,M,d,{});c.featureIndex.insert(o[M].feature,P,M,N,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,gO)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,fO),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,d,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(o,{}),P=x.get("line-cap"),M=x.get("line-miter-limit"),N=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const D of c)this.addLine(D,o,S,P,M,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}addLine(o,c,d,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<o.length-1;ue++)this.totalDistance+=o[ue].dist(o[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=yO[c.type]==="Polygon";let P=o.length;for(;P>=2&&o[P-1].equals(o[P-2]);)P--;let M=0;for(;M<P-1&&o[M].equals(o[M+1]);)M++;if(P<(S?3:2))return;d==="bevel"&&(v=1.05);const N=this.overscaling<=16?15*Dr/(512*this.overscaling):0,D=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let F,W,X,Q,ie;this.e1=this.e2=-1,S&&(F=o[P-2],ie=o[M].sub(F)._unit()._perp());for(let ue=M;ue<P;ue++){if(X=ue===P-1?S?o[M+1]:void 0:o[ue+1],X&&o[ue].equals(X))continue;ie&&(Q=ie),F&&(W=F),F=o[ue],ie=X?X.sub(F)._unit()._perp():Q,Q=Q||ie;let we=Q.add(ie);we.x===0&&we.y===0||we._unit();const pe=Q.x*ie.x+Q.y*ie.y,xe=we.x*ie.x+we.y*ie.y,Fe=xe!==0?1/xe:1/0,Be=2*Math.sqrt(2-2*xe),st=xe<_O&&W&&X,pt=Q.x*ie.y-Q.y*ie.x>0;if(st&&ue>M){const ut=F.dist(W);if(ut>2*N){const mt=F.sub(F.sub(W)._mult(N/ut)._round());this.updateDistance(W,mt),this.addCurrentVertex(mt,Q,0,0,D),W=mt}}const nt=W&&X;let tt=nt?d:S?"butt":m;if(nt&&tt==="round"&&(Fe<x?tt="miter":Fe<=2&&(tt="fakeround")),tt==="miter"&&Fe>v&&(tt="bevel"),tt==="bevel"&&(Fe>2&&(tt="flipbevel"),Fe<v&&(tt="miter")),W&&this.updateDistance(W,F),tt==="miter")we._mult(Fe),this.addCurrentVertex(F,we,0,0,D);else if(tt==="flipbevel"){if(Fe>100)we=ie.mult(-1);else{const ut=Fe*Q.add(ie).mag()/Q.sub(ie).mag();we._perp()._mult(ut*(pt?-1:1))}this.addCurrentVertex(F,we,0,0,D),this.addCurrentVertex(F,we.mult(-1),0,0,D)}else if(tt==="bevel"||tt==="fakeround"){const ut=-Math.sqrt(Fe*Fe-1),mt=pt?ut:0,rt=pt?0:ut;if(W&&this.addCurrentVertex(F,Q,mt,rt,D),tt==="fakeround"){const je=Math.round(180*Be/Math.PI/20);for(let ht=1;ht<je;ht++){let ct=ht/je;if(ct!==.5){const En=ct-.5;ct+=ct*En*(ct-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*En*En+(.848013+pe*(.215638*pe-1.06021)))}const $t=ie.sub(Q)._mult(ct)._add(Q)._unit()._mult(pt?-1:1);this.addHalfVertex(F,$t.x,$t.y,!1,pt,0,D)}}X&&this.addCurrentVertex(F,ie,-mt,-rt,D)}else if(tt==="butt")this.addCurrentVertex(F,we,0,0,D);else if(tt==="square"){const ut=W?1:-1;this.addCurrentVertex(F,we,ut,ut,D)}else tt==="round"&&(W&&(this.addCurrentVertex(F,Q,0,0,D),this.addCurrentVertex(F,Q,1,1,D,!0)),X&&(this.addCurrentVertex(F,ie,-1,-1,D,!0),this.addCurrentVertex(F,ie,0,0,D)));if(st&&ue<P-1){const ut=F.dist(X);if(ut>2*N){const mt=F.add(X.sub(F)._mult(N/ut)._round());this.updateDistance(F,mt),this.addCurrentVertex(mt,ie,0,0,D),F=mt}}}}addCurrentVertex(o,c,d,m,v,x=!1){const S=c.y*m-c.x,P=-c.y-c.x*m;this.addHalfVertex(o,c.x+c.y*d,c.y-c.x*d,x,!1,d,v),this.addHalfVertex(o,S,P,x,!0,-m,v),this.distance>JI/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,d,m,v,x))}addHalfVertex({x:o,y:c},d,m,v,x,S,P){const M=.5*(this.lineClips?this.scaledDistance*(JI-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(v?1:0),(c<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),P.primitiveLength++),x?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}let QI,eT;lt("LineBucket",Gb,{omit:["layers","patternFeatures"]});var tT={get paint(){return eT=eT||new g({"line-opacity":new _(ze.paint_line["line-opacity"]),"line-color":new _(ze.paint_line["line-color"]),"line-translate":new ft(ze.paint_line["line-translate"]),"line-translate-anchor":new ft(ze.paint_line["line-translate-anchor"]),"line-width":new _(ze.paint_line["line-width"]),"line-gap-width":new _(ze.paint_line["line-gap-width"]),"line-offset":new _(ze.paint_line["line-offset"]),"line-blur":new _(ze.paint_line["line-blur"]),"line-dasharray":new p(ze.paint_line["line-dasharray"]),"line-pattern":new s(ze.paint_line["line-pattern"]),"line-gradient":new f(ze.paint_line["line-gradient"])})},get layout(){return QI=QI||new g({"line-cap":new ft(ze.layout_line["line-cap"]),"line-join":new _(ze.layout_line["line-join"]),"line-miter-limit":new ft(ze.layout_line["line-miter-limit"]),"line-round-limit":new ft(ze.layout_line["line-round-limit"]),"line-sort-key":new _(ze.layout_line["line-sort-key"])})}};class vO extends _{possiblyEvaluate(o,c){return c=new jn(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,d,m){return c=fe({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,d,m)}}let v_;class xO extends I{constructor(o){super(o,tT),this.gradientVersion=0,v_||(v_=new vO(tT.paint.properties["line-width"].specification),v_.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof zh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=v_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Gb(o)}queryRadius(o){const c=o,d=nT(sg("line-width",this,c),sg("line-gap-width",this,c)),m=sg("line-offset",this,c);return d/2+Math.abs(m)+p_(this.paint.get("line-translate"))}queryIntersectsFeature(o,c,d,m,v,x,S){const P=d_(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),M=S/2*nT(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),N=this.paint.get("line-offset").evaluate(c,d);return N&&(m=function(D,F){const W=[];for(let X=0;X<D.length;X++){const Q=D[X],ie=[];for(let ue=0;ue<Q.length;ue++){const we=Q[ue-1],pe=Q[ue],xe=Q[ue+1],Fe=ue===0?new C(0,0):pe.sub(we)._unit()._perp(),Be=ue===Q.length-1?new C(0,0):xe.sub(pe)._unit()._perp(),st=Fe._add(Be)._unit(),pt=st.x*Be.x+st.y*Be.y;pt!==0&&st._mult(1/pt),ie.push(st._mult(F)._add(pe))}W.push(ie)}return W}(m,N*S)),function(D,F,W){for(let X=0;X<F.length;X++){const Q=F[X];if(D.length>=3){for(let ie=0;ie<Q.length;ie++)if(Id(D,Q[ie]))return!0}if(LD(D,Q,W))return!0}return!1}(P,m,M)}isTileClipped(){return!0}}function nT(a,o){return o>0?o+2*a:a}const bO=z([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wO=z([{name:"a_projected_pos",components:3,type:"Float32"}],4);z([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const SO=z([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);z([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rT=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EO=z([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function CO(a,o,c){return a.sections.forEach(d=>{d.text=function(m,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Ya.applyArabicShaping&&(m=Ya.applyArabicShaping(m)),m}(d.text,o,c)}),a}z([{name:"triangle",components:3,type:"Uint16"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),z([{type:"Float32",name:"offsetX"}]),z([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),z([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const fg={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Wr=24,iT=Sn,oT=function(a,o,c,d,m){var v,x,S=8*m-d-1,P=(1<<S)-1,M=P>>1,N=-7,D=m-1,F=-1,W=a[o+D];for(D+=F,v=W&(1<<-N)-1,W>>=-N,N+=S;N>0;v=256*v+a[o+D],D+=F,N-=8);for(x=v&(1<<-N)-1,v>>=-N,N+=d;N>0;x=256*x+a[o+D],D+=F,N-=8);if(v===0)v=1-M;else{if(v===P)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,d),v-=M}return(W?-1:1)*x*Math.pow(2,v-d)},sT=function(a,o,c,d,m,v){var x,S,P,M=8*v-m-1,N=(1<<M)-1,D=N>>1,F=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=0,X=1,Q=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(S=isNaN(o)?1:0,x=N):(x=Math.floor(Math.log(o)/Math.LN2),o*(P=Math.pow(2,-x))<1&&(x--,P*=2),(o+=x+D>=1?F/P:F*Math.pow(2,1-D))*P>=2&&(x++,P/=2),x+D>=N?(S=0,x=N):x+D>=1?(S=(o*P-1)*Math.pow(2,m),x+=D):(S=o*Math.pow(2,D-1)*Math.pow(2,m),x=0));m>=8;a[c+W]=255&S,W+=X,S/=256,m-=8);for(x=x<<m|S,M+=m;M>0;a[c+W]=255&x,W+=X,x/=256,M-=8);a[c+W-X]|=128*Q};function Sn(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Sn.Varint=0,Sn.Fixed64=1,Sn.Bytes=2,Sn.Fixed32=5;var qb=4294967296,aT=1/qb,lT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cu(a){return a.type===Sn.Bytes?a.readVarint()+a.pos:a.pos+1}function Md(a,o,c){return c?4294967296*o+(a>>>0):4294967296*(o>>>0)+(a>>>0)}function uT(a,o,c){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(d);for(var m=c.pos-1;m>=a;m--)c.buf[m+d]=c.buf[m]}function IO(a,o){for(var c=0;c<a.length;c++)o.writeVarint(a[c])}function TO(a,o){for(var c=0;c<a.length;c++)o.writeSVarint(a[c])}function PO(a,o){for(var c=0;c<a.length;c++)o.writeFloat(a[c])}function LO(a,o){for(var c=0;c<a.length;c++)o.writeDouble(a[c])}function MO(a,o){for(var c=0;c<a.length;c++)o.writeBoolean(a[c])}function AO(a,o){for(var c=0;c<a.length;c++)o.writeFixed32(a[c])}function kO(a,o){for(var c=0;c<a.length;c++)o.writeSFixed32(a[c])}function NO(a,o){for(var c=0;c<a.length;c++)o.writeFixed64(a[c])}function RO(a,o){for(var c=0;c<a.length;c++)o.writeSFixed64(a[c])}function x_(a,o){return(a[o]|a[o+1]<<8|a[o+2]<<16)+16777216*a[o+3]}function Ad(a,o,c){a[c]=o,a[c+1]=o>>>8,a[c+2]=o>>>16,a[c+3]=o>>>24}function cT(a,o){return(a[o]|a[o+1]<<8|a[o+2]<<16)+(a[o+3]<<24)}Sn.prototype={destroy:function(){this.buf=null},readFields:function(a,o,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,a(m,o,this),this.pos===v&&this.skip(d)}return o},readMessage:function(a,o){return this.readFields(a,o,this.readVarint()+this.pos)},readFixed32:function(){var a=x_(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=cT(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=x_(this.buf,this.pos)+x_(this.buf,this.pos+4)*qb;return this.pos+=8,a},readSFixed64:function(){var a=x_(this.buf,this.pos)+cT(this.buf,this.pos+4)*qb;return this.pos+=8,a},readFloat:function(){var a=oT(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=oT(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var o,c,d=this.buf;return o=127&(c=d[this.pos++]),c<128?o:(o|=(127&(c=d[this.pos++]))<<7,c<128?o:(o|=(127&(c=d[this.pos++]))<<14,c<128?o:(o|=(127&(c=d[this.pos++]))<<21,c<128?o:function(m,v,x){var S,P,M=x.buf;if(S=(112&(P=M[x.pos++]))>>4,P<128||(S|=(127&(P=M[x.pos++]))<<3,P<128)||(S|=(127&(P=M[x.pos++]))<<10,P<128)||(S|=(127&(P=M[x.pos++]))<<17,P<128)||(S|=(127&(P=M[x.pos++]))<<24,P<128)||(S|=(1&(P=M[x.pos++]))<<31,P<128))return Md(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(c=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,o=this.pos;return this.pos=a,a-o>=12&&lT?function(c,d,m){return lT.decode(c.subarray(d,m))}(this.buf,o,a):function(c,d,m){for(var v="",x=d;x<m;){var S,P,M,N=c[x],D=null,F=N>239?4:N>223?3:N>191?2:1;if(x+F>m)break;F===1?N<128&&(D=N):F===2?(192&(S=c[x+1]))==128&&(D=(31&N)<<6|63&S)<=127&&(D=null):F===3?(P=c[x+2],(192&(S=c[x+1]))==128&&(192&P)==128&&((D=(15&N)<<12|(63&S)<<6|63&P)<=2047||D>=55296&&D<=57343)&&(D=null)):F===4&&(P=c[x+2],M=c[x+3],(192&(S=c[x+1]))==128&&(192&P)==128&&(192&M)==128&&((D=(15&N)<<18|(63&S)<<12|(63&P)<<6|63&M)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,F=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),x+=F}return v}(this.buf,o,a)},readBytes:function(){var a=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,a);return this.pos=a,o},readPackedVarint:function(a,o){if(this.type!==Sn.Bytes)return a.push(this.readVarint(o));var c=Cu(this);for(a=a||[];this.pos<c;)a.push(this.readVarint(o));return a},readPackedSVarint:function(a){if(this.type!==Sn.Bytes)return a.push(this.readSVarint());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Sn.Bytes)return a.push(this.readBoolean());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Sn.Bytes)return a.push(this.readFloat());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Sn.Bytes)return a.push(this.readDouble());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Sn.Bytes)return a.push(this.readFixed32());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Sn.Bytes)return a.push(this.readSFixed32());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Sn.Bytes)return a.push(this.readFixed64());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Sn.Bytes)return a.push(this.readSFixed64());var o=Cu(this);for(a=a||[];this.pos<o;)a.push(this.readSFixed64());return a},skip:function(a){var o=7&a;if(o===Sn.Varint)for(;this.buf[this.pos++]>127;);else if(o===Sn.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Sn.Fixed32)this.pos+=4;else{if(o!==Sn.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(a,o){this.writeVarint(a<<3|o)},realloc:function(a){for(var o=this.length||16;o<this.pos+a;)o*=2;if(o!==this.length){var c=new Uint8Array(o);c.set(this.buf),this.buf=c,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Ad(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Ad(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Ad(this.buf,-1&a,this.pos),Ad(this.buf,Math.floor(a*aT),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Ad(this.buf,-1&a,this.pos),Ad(this.buf,Math.floor(a*aT),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(o,c){var d,m;if(o>=0?(d=o%4294967296|0,m=o/4294967296|0):(m=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,m=m+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(d,0,c),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,c)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var o=this.pos;this.pos=function(d,m,v){for(var x,S,P=0;P<m.length;P++){if((x=m.charCodeAt(P))>55295&&x<57344){if(!S){x>56319||P+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):S=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(d[v++]=239,d[v++]=191,d[v++]=189,S=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,a,this.pos);var c=this.pos-o;c>=128&&uT(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeFloat:function(a){this.realloc(4),sT(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),sT(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var o=a.length;this.writeVarint(o),this.realloc(o);for(var c=0;c<o;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,o){this.pos++;var c=this.pos;a(o,this);var d=this.pos-c;d>=128&&uT(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,o,c){this.writeTag(a,Sn.Bytes),this.writeRawMessage(o,c)},writePackedVarint:function(a,o){o.length&&this.writeMessage(a,IO,o)},writePackedSVarint:function(a,o){o.length&&this.writeMessage(a,TO,o)},writePackedBoolean:function(a,o){o.length&&this.writeMessage(a,MO,o)},writePackedFloat:function(a,o){o.length&&this.writeMessage(a,PO,o)},writePackedDouble:function(a,o){o.length&&this.writeMessage(a,LO,o)},writePackedFixed32:function(a,o){o.length&&this.writeMessage(a,AO,o)},writePackedSFixed32:function(a,o){o.length&&this.writeMessage(a,kO,o)},writePackedFixed64:function(a,o){o.length&&this.writeMessage(a,NO,o)},writePackedSFixed64:function(a,o){o.length&&this.writeMessage(a,RO,o)},writeBytesField:function(a,o){this.writeTag(a,Sn.Bytes),this.writeBytes(o)},writeFixed32Field:function(a,o){this.writeTag(a,Sn.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(a,o){this.writeTag(a,Sn.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(a,o){this.writeTag(a,Sn.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(a,o){this.writeTag(a,Sn.Fixed64),this.writeSFixed64(o)},writeVarintField:function(a,o){this.writeTag(a,Sn.Varint),this.writeVarint(o)},writeSVarintField:function(a,o){this.writeTag(a,Sn.Varint),this.writeSVarint(o)},writeStringField:function(a,o){this.writeTag(a,Sn.Bytes),this.writeString(o)},writeFloatField:function(a,o){this.writeTag(a,Sn.Fixed32),this.writeFloat(o)},writeDoubleField:function(a,o){this.writeTag(a,Sn.Fixed64),this.writeDouble(o)},writeBooleanField:function(a,o){this.writeVarintField(a,!!o)}};var Wb=y(iT);const Hb=3;function DO(a,o,c){a===1&&c.readMessage(OO,o)}function OO(a,o,c){if(a===3){const{id:d,bitmap:m,width:v,height:x,left:S,top:P,advance:M}=c.readMessage(zO,{});o.push({id:d,bitmap:new lg({width:v+2*Hb,height:x+2*Hb},m),metrics:{width:v,height:x,left:S,top:P,advance:M}})}}function zO(a,o,c){a===1?o.id=c.readVarint():a===2?o.bitmap=c.readBytes():a===3?o.width=c.readVarint():a===4?o.height=c.readVarint():a===5?o.left=c.readSVarint():a===6?o.top=c.readSVarint():a===7&&(o.advance=c.readVarint())}const hT=Hb;function pT(a){let o=0,c=0;for(const x of a)o+=x.w*x.h,c=Math.max(c,x.w);a.sort((x,S)=>S.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let m=0,v=0;for(const x of a)for(let S=d.length-1;S>=0;S--){const P=d[S];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===P.w&&x.h===P.h){const M=d.pop();S<d.length&&(d[S]=M)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(d.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:m,h:v,fill:o/(m*v)||0}}const Vo=1;class Zb{constructor(o,{pixelRatio:c,version:d,stretchX:m,stretchY:v,content:x,textFitWidth:S,textFitHeight:P}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=m,this.stretchY=v,this.content=x,this.version=d,this.textFitWidth=S,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Vo,this.paddedRect.y+Vo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Vo,this.paddedRect.y+this.paddedRect.h-Vo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Vo)/this.pixelRatio,(this.paddedRect.h-2*Vo)/this.pixelRatio]}}class dT{constructor(o,c){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(o,d,v),this.addImages(c,m,v);const{w:x,h:S}=pT(v),P=new Ls({width:x||1,height:S||1});for(const M in o){const N=o[M],D=d[M].paddedRect;Ls.copy(N.data,P,{x:0,y:0},{x:D.x+Vo,y:D.y+Vo},N.data)}for(const M in c){const N=c[M],D=m[M].paddedRect,F=D.x+Vo,W=D.y+Vo,X=N.data.width,Q=N.data.height;Ls.copy(N.data,P,{x:0,y:0},{x:F,y:W},N.data),Ls.copy(N.data,P,{x:0,y:Q-1},{x:F,y:W-1},{width:X,height:1}),Ls.copy(N.data,P,{x:0,y:0},{x:F,y:W+Q},{width:X,height:1}),Ls.copy(N.data,P,{x:X-1,y:0},{x:F-1,y:W},{width:1,height:Q}),Ls.copy(N.data,P,{x:0,y:0},{x:F+X,y:W},{width:1,height:Q})}this.image=P,this.iconPositions=d,this.patternPositions=m}addImages(o,c,d){for(const m in o){const v=o[m],x={x:0,y:0,w:v.data.width+2*Vo,h:v.data.height+2*Vo};d.push(x),c[m]=new Zb(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),c)}patchUpdatedImage(o,c,d){if(!o||!c||o.version===c.version)return;o.version=c.version;const[m,v]=o.tl;d.update(c.data,void 0,{x:m,y:v})}}var Ic;lt("ImagePosition",Zb),lt("ImageAtlas",dT),h.ah=void 0,(Ic=h.ah||(h.ah={}))[Ic.none=0]="none",Ic[Ic.horizontal=1]="horizontal",Ic[Ic.vertical=2]="vertical",Ic[Ic.horizontalOnly=3]="horizontalOnly";const mg=-17;class gg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,c){const d=new gg;return d.scale=o||1,d.fontStack=c,d}static forImage(o){const c=new gg;return c.imageName=o,c}}class kd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){const d=new kd;for(let m=0;m<o.sections.length;m++){const v=o.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,c)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let c="";for(let d=0;d<o.length;d++){const m=o.charCodeAt(d+1)||null,v=o.charCodeAt(d-1)||null;c+=m&&Nl(m)&&!fg[o[d+1]]||v&&Nl(v)&&!fg[o[d-1]]||!fg[o[d]]?o[d]:fg[o[d]]}return c}(this.text)}trim(){let o=0;for(let d=0;d<this.text.length&&w_[this.text.charCodeAt(d)];d++)o++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&w_[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){const d=new kd;return d.text=this.text.substring(o,c),d.sectionIndex=this.sectionIndex.slice(o,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}addTextSection(o,c){this.text+=o.text,this.sections.push(gg.forText(o.scale,o.fontStack||c));const d=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(d)}addImageSection(o){const c=o.image?o.image.name:"";if(c.length===0)return void wt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(gg.forImage(c)),this.sectionIndex.push(this.sections.length-1)):wt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function b_(a,o,c,d,m,v,x,S,P,M,N,D,F,W,X,Q){const ie=kd.fromFeature(a,m);let ue;D===h.ah.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:pe}=Ya;if(we&&ie.sections.length===1){ue=[];const Be=we(ie.toString(),Xb(ie,M,v,o,d,W,X));for(const st of Be){const pt=new kd;pt.text=st,pt.sections=ie.sections;for(let nt=0;nt<st.length;nt++)pt.sectionIndex.push(0);ue.push(pt)}}else if(pe){ue=[];const Be=pe(ie.text,ie.sectionIndex,Xb(ie,M,v,o,d,W,X));for(const st of Be){const pt=new kd;pt.text=st[0],pt.sectionIndex=st[1],pt.sections=ie.sections,ue.push(pt)}}else ue=function(Be,st){const pt=[],nt=Be.text;let tt=0;for(const ut of st)pt.push(Be.substring(tt,ut)),tt=ut;return tt<nt.length&&pt.push(Be.substring(tt,nt.length)),pt}(ie,Xb(ie,M,v,o,d,W,X));const xe=[],Fe={positionedLines:xe,text:ie.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Be,st,pt,nt,tt,ut,mt,rt,je,ht,ct,$t){let En=0,Cn=mg,Or=0,As=0;const to=rt==="right"?1:rt==="left"?0:.5;let Hr=0;for(const zr of tt){zr.trim();const ai=zr.getMaxScale(),xo=(ai-1)*Wr,Uo={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Hr]=Uo;const Oi=Uo.positionedGlyphs;let Go=0;if(!zr.length()){Cn+=ut,++Hr;continue}for(let hr=0;hr<zr.length();hr++){const Xt=zr.getSection(hr),Fr=zr.getSectionIndex(hr),zi=zr.getCharCode(hr);let Zr=0,pa=null,Qa=null,el=null,Iu=Wr;const da=!(je===h.ah.horizontal||!ct&&!Ym(zi)||ct&&(w_[zi]||(wi=zi,ot.Arabic(wi)||ot["Arabic Supplement"](wi)||ot["Arabic Extended-A"](wi)||ot["Arabic Presentation Forms-A"](wi)||ot["Arabic Presentation Forms-B"](wi))));if(Xt.imageName){const Ns=nt[Xt.imageName];if(!Ns)continue;el=Xt.imageName,Be.iconsInText=Be.iconsInText||!0,Qa=Ns.paddedRect;const qo=Ns.displaySize;Xt.scale=Xt.scale*Wr/$t,pa={width:qo[0],height:qo[1],left:Vo,top:-hT,advance:da?qo[1]:qo[0]},Zr=xo+(Wr-qo[1]*Xt.scale),Iu=pa.advance;const Tu=da?qo[0]*Xt.scale-Wr*ai:qo[1]*Xt.scale-Wr*ai;Tu>0&&Tu>Go&&(Go=Tu)}else{const Ns=pt[Xt.fontStack],qo=Ns&&Ns[zi];if(qo&&qo.rect)Qa=qo.rect,pa=qo.metrics;else{const Tu=st[Xt.fontStack],bg=Tu&&Tu[zi];if(!bg)continue;pa=bg.metrics}Zr=(ai-Xt.scale)*Wr}da?(Be.verticalizable=!0,Oi.push({glyph:zi,imageName:el,x:En,y:Cn+Zr,vertical:da,scale:Xt.scale,fontStack:Xt.fontStack,sectionIndex:Fr,metrics:pa,rect:Qa}),En+=Iu*Xt.scale+ht):(Oi.push({glyph:zi,imageName:el,x:En,y:Cn+Zr,vertical:da,scale:Xt.scale,fontStack:Xt.fontStack,sectionIndex:Fr,metrics:pa,rect:Qa}),En+=pa.advance*Xt.scale+ht)}Oi.length!==0&&(Or=Math.max(En-ht,Or),jO(Oi,0,Oi.length-1,to,Go)),En=0;const ks=ut*ai+Go;Uo.lineOffset=Math.max(Go,xo),Cn+=ks,As=Math.max(ks,As),++Hr}var wi;const no=Cn-mg,{horizontalAlign:vo,verticalAlign:ro}=Kb(mt);(function(zr,ai,xo,Uo,Oi,Go,ks,hr,Xt){const Fr=(ai-xo)*Oi;let zi=0;zi=Go!==ks?-hr*Uo-mg:(-Uo*Xt+.5)*ks;for(const Zr of zr)for(const pa of Zr.positionedGlyphs)pa.x+=Fr,pa.y+=zi})(Be.positionedLines,to,vo,ro,Or,As,ut,no,tt.length),Be.top+=-ro*no,Be.bottom=Be.top+no,Be.left+=-vo*Or,Be.right=Be.left+Or}(Fe,o,c,d,ue,x,S,P,D,M,F,Q),!function(Be){for(const st of Be)if(st.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Fe}const w_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},FO={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fT(a,o,c,d,m,v){if(o.imageName){const x=d[o.imageName];return x?x.displaySize[0]*o.scale*Wr/v+m:0}{const x=c[o.fontStack],S=x&&x[a];return S?S.metrics.advance*o.scale+m:0}}function mT(a,o,c,d){const m=Math.pow(a-o,2);return d?a<o?m/2:2*m:m+Math.abs(c)*c}function BO(a,o,c){let d=0;return a===10&&(d-=1e4),c&&(d+=150),a!==40&&a!==65288||(d+=50),o!==41&&o!==65289||(d+=50),d}function gT(a,o,c,d,m,v){let x=null,S=mT(o,c,m,v);for(const P of d){const M=mT(o-P.x,c,m,v)+P.badness;M<=S&&(x=P,S=M)}return{index:a,x:o,priorBreak:x,badness:S}}function yT(a){return a?yT(a.priorBreak).concat(a.index):[]}function Xb(a,o,c,d,m,v,x){if(v!=="point")return[];if(!a)return[];const S=[],P=function(F,W,X,Q,ie,ue){let we=0;for(let pe=0;pe<F.length();pe++){const xe=F.getSection(pe);we+=fT(F.getCharCode(pe),xe,Q,ie,W,ue)}return we/Math.max(1,Math.ceil(we/X))}(a,o,c,d,m,x),M=a.text.indexOf("​")>=0;let N=0;for(let F=0;F<a.length();F++){const W=a.getSection(F),X=a.getCharCode(F);if(w_[X]||(N+=fT(X,W,d,m,o,x)),F<a.length()-1){const Q=!((D=X)<11904||!(ot["Bopomofo Extended"](D)||ot.Bopomofo(D)||ot["CJK Compatibility Forms"](D)||ot["CJK Compatibility Ideographs"](D)||ot["CJK Compatibility"](D)||ot["CJK Radicals Supplement"](D)||ot["CJK Strokes"](D)||ot["CJK Symbols and Punctuation"](D)||ot["CJK Unified Ideographs Extension A"](D)||ot["CJK Unified Ideographs"](D)||ot["Enclosed CJK Letters and Months"](D)||ot["Halfwidth and Fullwidth Forms"](D)||ot.Hiragana(D)||ot["Ideographic Description Characters"](D)||ot["Kangxi Radicals"](D)||ot["Katakana Phonetic Extensions"](D)||ot.Katakana(D)||ot["Vertical Forms"](D)||ot["Yi Radicals"](D)||ot["Yi Syllables"](D)));(FO[X]||Q||W.imageName)&&S.push(gT(F+1,N,P,S,BO(X,a.getCharCode(F+1),Q&&M),!1))}}var D;return yT(gT(a.length(),N,P,S,0,!0))}function Kb(a){let o=.5,c=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function jO(a,o,c,d,m){if(!d&&!m)return;const v=a[c],x=(a[c].x+v.metrics.advance*v.scale)*d;for(let S=o;S<=c;S++)a[S].x-=x,a[S].y+=m}function $O(a,o,c){const{horizontalAlign:d,verticalAlign:m}=Kb(c),v=o[0]-a.displaySize[0]*d,x=o[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function _T(a){var o,c;let d=a.left,m=a.top,v=a.right-d,x=a.bottom-m;const S=(o=a.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",P=(c=a.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",M=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(P==="proportional"){if(S==="stretchOnly"&&v/x<M||S==="proportional"){const N=Math.ceil(x*M);d*=N/v,v=N}}else if(S==="proportional"&&P==="stretchOnly"&&M!==0&&v/x>M){const N=Math.ceil(v/M);m*=N/x,x=N}return{x1:d,y1:m,x2:d+v,y2:m+x}}function vT(a,o,c,d,m,v){const x=a.image;let S;if(x.content){const ie=x.content,ue=x.pixelRatio||1;S=[ie[0]/ue,ie[1]/ue,x.displaySize[0]-ie[2]/ue,x.displaySize[1]-ie[3]/ue]}const P=o.left*v,M=o.right*v;let N,D,F,W;c==="width"||c==="both"?(W=m[0]+P-d[3],D=m[0]+M+d[1]):(W=m[0]+(P+M-x.displaySize[0])/2,D=W+x.displaySize[0]);const X=o.top*v,Q=o.bottom*v;return c==="height"||c==="both"?(N=m[1]+X-d[0],F=m[1]+Q+d[2]):(N=m[1]+(X+Q-x.displaySize[1])/2,F=N+x.displaySize[1]),{image:x,top:N,right:D,bottom:F,left:W,collisionPadding:S}}const yg=255,Dl=128,Tc=yg*Dl;function xT(a,o){const{expression:c}=o;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new jn(a+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=c;let v=0;for(;v<d.length&&d[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<a+1;)x++;x=Math.min(d.length-1,x);const S=d[v],P=d[x];return c.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:c.evaluate(new jn(S)),maxSize:c.evaluate(new jn(P)),interpolationType:m}}}function Yb(a,o,c){let d="never";const m=a.get(o);return m?d=m:a.get(c)&&(d="always"),d}const VO=Cc.VectorTileFeature.types,UO=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function S_(a,o,c,d,m,v,x,S,P,M,N,D,F){const W=S?Math.min(Tc,Math.round(S[0])):0,X=S?Math.min(Tc,Math.round(S[1])):0;a.emplaceBack(o,c,Math.round(32*d),Math.round(32*m),v,x,(W<<1)+(P?1:0),X,16*M,16*N,256*D,256*F)}function Jb(a,o,c){a.emplaceBack(o.x,o.y,c),a.emplaceBack(o.x,o.y,c),a.emplaceBack(o.x,o.y,c),a.emplaceBack(o.x,o.y,c)}function GO(a){for(const o of a.sections)if(o_(o.text))return!0;return!1}class Qb{constructor(o){this.layoutVertexArray=new us,this.indexArray=new bc,this.programConfigurations=o,this.segments=new si,this.dynamicLayoutVertexArray=new qr,this.opacityVertexArray=new wb,this.hasVisibleVertices=!1,this.placedSymbolArray=new $o}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,c,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bO.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,wO.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,UO,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}lt("SymbolBuffers",Qb);class ew{constructor(o,c,d){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new d,this.segments=new si,this.collisionVertexArray=new Sb}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,SO.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}lt("CollisionBuffers",ew);class Nd{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kb([]),this.placementViewportMatrix=kb([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xT(this.zoom,c["text-size"]),this.iconSizeData=xT(this.zoom,c["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=Yb(d,"text-overlap","text-allow-overlap")!=="never"||Yb(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>h.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new Qb(new op(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Qb(new op(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new yo,this.lineVertexArray=new Ps,this.symbolInstances=new cr,this.textAnchorOffsets=new Rl}calculateGlyphDependencies(o,c,d,m,v){for(let x=0;x<o.length;x++)if(c[o.charCodeAt(x)]=!0,(d||m)&&v){const S=fg[o.charAt(x)];S&&(c[S.charCodeAt(0)]=!0)}}populate(o,c,d){const m=this.layers[0],v=m.layout,x=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof Oo&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),N=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,D=v.get("symbol-sort-key");if(this.features=[],!M&&!N)return;const F=c.iconDependencies,W=c.glyphDependencies,X=c.availableImages,Q=new jn(this.zoom);for(const{feature:ie,id:ue,index:we,sourceLayerIndex:pe}of o){const xe=m._featureFilter.needGeometry,Fe=ap(ie,xe);if(!m._featureFilter.filter(Q,Fe,d))continue;let Be,st;if(xe||(Fe.geometry=sp(ie)),M){const nt=m.getValueAndResolveTokens("text-field",Fe,d,X),tt=Oo.factory(nt),ut=this.hasRTLText=this.hasRTLText||GO(tt);(!ut||Ya.getRTLTextPluginStatus()==="unavailable"||ut&&Ya.isParsed())&&(Be=CO(tt,m,Fe))}if(N){const nt=m.getValueAndResolveTokens("icon-image",Fe,d,X);st=nt instanceof as?nt:as.fromString(nt)}if(!Be&&!st)continue;const pt=this.sortFeaturesByKey?D.evaluate(Fe,{},d):void 0;if(this.features.push({id:ue,text:Be,icon:st,index:we,sourceLayerIndex:pe,geometry:Fe.geometry,properties:ie.properties,type:VO[ie.type],sortKey:pt}),st&&(F[st.name]=!0),Be){const nt=x.evaluate(Fe,{},d).join(","),tt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const ut of Be.sections)if(ut.image)F[ut.image.name]=!0;else{const mt=Km(Be.toString()),rt=ut.fontStack||nt,je=W[rt]=W[rt]||{};this.calculateGlyphDependencies(ut.text,je,tt,this.allowVerticalPlacement,mt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ie){const ue={},we={},pe=[];let xe=0;function Fe(nt){pe.push(ie[nt]),xe++}function Be(nt,tt,ut){const mt=we[nt];return delete we[nt],we[tt]=mt,pe[mt].geometry[0].pop(),pe[mt].geometry[0]=pe[mt].geometry[0].concat(ut[0]),mt}function st(nt,tt,ut){const mt=ue[tt];return delete ue[tt],ue[nt]=mt,pe[mt].geometry[0].shift(),pe[mt].geometry[0]=ut[0].concat(pe[mt].geometry[0]),mt}function pt(nt,tt,ut){const mt=ut?tt[0][tt[0].length-1]:tt[0][0];return`${nt}:${mt.x}:${mt.y}`}for(let nt=0;nt<ie.length;nt++){const tt=ie[nt],ut=tt.geometry,mt=tt.text?tt.text.toString():null;if(!mt){Fe(nt);continue}const rt=pt(mt,ut),je=pt(mt,ut,!0);if(rt in we&&je in ue&&we[rt]!==ue[je]){const ht=st(rt,je,ut),ct=Be(rt,je,pe[ht].geometry);delete ue[rt],delete we[je],we[pt(mt,pe[ct].geometry,!0)]=ct,pe[ht].geometry=null}else rt in we?Be(rt,je,ut):je in ue?st(rt,je,ut):(Fe(nt),ue[rt]=xe-1,we[je]=xe-1)}return pe.filter(nt=>nt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,ue)=>ie.sortKey-ue.sortKey)}update(o,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const d=this.lineVertexArray.length;if(o.segment!==void 0){let m=o.dist(c[o.segment+1]),v=o.dist(c[o.segment]);const x={};for(let S=o.segment+1;S<c.length;S++)x[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:m},S<c.length-1&&(m+=c[S+1].dist(c[S]));for(let S=o.segment||0;S>=0;S--)x[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=c[S-1].dist(c[S]));for(let S=0;S<c.length;S++){const P=x[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,c,d,m,v,x,S,P,M,N,D,F){const W=o.indexArray,X=o.layoutVertexArray,Q=o.segments.prepareSegment(4*c.length,X,W,this.canOverlap?x.sortKey:void 0),ie=this.glyphOffsetArray.length,ue=Q.vertexLength,we=this.allowVerticalPlacement&&S===h.ah.vertical?Math.PI/2:0,pe=x.text&&x.text.sections;for(let xe=0;xe<c.length;xe++){const{tl:Fe,tr:Be,bl:st,br:pt,tex:nt,pixelOffsetTL:tt,pixelOffsetBR:ut,minFontScaleX:mt,minFontScaleY:rt,glyphOffset:je,isSDF:ht,sectionIndex:ct}=c[xe],$t=Q.vertexLength,En=je[1];S_(X,P.x,P.y,Fe.x,En+Fe.y,nt.x,nt.y,d,ht,tt.x,tt.y,mt,rt),S_(X,P.x,P.y,Be.x,En+Be.y,nt.x+nt.w,nt.y,d,ht,ut.x,tt.y,mt,rt),S_(X,P.x,P.y,st.x,En+st.y,nt.x,nt.y+nt.h,d,ht,tt.x,ut.y,mt,rt),S_(X,P.x,P.y,pt.x,En+pt.y,nt.x+nt.w,nt.y+nt.h,d,ht,ut.x,ut.y,mt,rt),Jb(o.dynamicLayoutVertexArray,P,we),W.emplaceBack($t,$t+1,$t+2),W.emplaceBack($t+1,$t+2,$t+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(je[0]),xe!==c.length-1&&ct===c[xe+1].sectionIndex||o.programConfigurations.populatePaintArrays(X.length,x,x.index,{},F,pe&&pe[ct])}o.placedSymbolArray.emplaceBack(P.x,P.y,ie,this.glyphOffsetArray.length-ie,ue,M,N,P.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,D)}_addCollisionDebugVertex(o,c,d,m,v,x){return c.emplaceBack(0,0),o.emplaceBack(d.x,d.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,c,d,m,v,x,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),M=P.vertexLength,N=v.layoutVertexArray,D=v.collisionVertexArray,F=S.anchorX,W=S.anchorY;this._addCollisionDebugVertex(N,D,x,F,W,new C(o,c)),this._addCollisionDebugVertex(N,D,x,F,W,new C(d,c)),this._addCollisionDebugVertex(N,D,x,F,W,new C(d,m)),this._addCollisionDebugVertex(N,D,x,F,W,new C(o,m)),P.vertexLength+=4;const X=v.indexArray;X.emplaceBack(M,M+1),X.emplaceBack(M+1,M+2),X.emplaceBack(M+2,M+3),X.emplaceBack(M+3,M),P.primitiveLength+=4}addDebugCollisionBoxes(o,c,d,m){for(let v=o;v<c;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ew(a_,rT.members,tg),this.iconCollisionBox=new ew(a_,rT.members,tg);for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,d,m,v,x,S,P,M){const N={};for(let D=c;D<d;D++){const F=o.get(D);N.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},N.textFeatureIndex=F.featureIndex;break}for(let D=m;D<v;D++){const F=o.get(D);N.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},N.verticalTextFeatureIndex=F.featureIndex;break}for(let D=x;D<S;D++){const F=o.get(D);N.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},N.iconFeatureIndex=F.featureIndex;break}for(let D=P;D<M;D++){const F=o.get(D);N.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},N.verticalIconFeatureIndex=F.featureIndex;break}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){const d=o.placedSymbolArray.get(c),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)o.indexArray.emplaceBack(v,v+1,v+2),o.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(o),d=Math.cos(o),m=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(c*P.anchorX+d*P.anchorY)),v.push(P.featureIndex)}return x.sort((S,P)=>m[S]-m[P]||v[P]-v[S]),x}addToSortKeyRanges(o,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bT,wT;lt("SymbolBucket",Nd,{omit:["layers","collisionBoxArray","features","compareText"]}),Nd.MAX_GLYPHS=65535,Nd.addDynamicAttributes=Jb;var tw={get paint(){return wT=wT||new g({"icon-opacity":new _(ze.paint_symbol["icon-opacity"]),"icon-color":new _(ze.paint_symbol["icon-color"]),"icon-halo-color":new _(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new _(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new _(ze.paint_symbol["text-opacity"]),"text-color":new _(ze.paint_symbol["text-color"],{runtimeType:xi,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new _(ze.paint_symbol["text-halo-color"]),"text-halo-width":new _(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new _(ze.paint_symbol["text-halo-blur"]),"text-translate":new ft(ze.paint_symbol["text-translate"]),"text-translate-anchor":new ft(ze.paint_symbol["text-translate-anchor"])})},get layout(){return bT=bT||new g({"symbol-placement":new ft(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new _(ze.layout_symbol["icon-size"]),"icon-text-fit":new ft(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new _(ze.layout_symbol["icon-image"]),"icon-rotate":new _(ze.layout_symbol["icon-rotate"]),"icon-padding":new _(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new _(ze.layout_symbol["icon-offset"]),"icon-anchor":new _(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(ze.layout_symbol["text-rotation-alignment"]),"text-field":new _(ze.layout_symbol["text-field"]),"text-font":new _(ze.layout_symbol["text-font"]),"text-size":new _(ze.layout_symbol["text-size"]),"text-max-width":new _(ze.layout_symbol["text-max-width"]),"text-line-height":new ft(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new _(ze.layout_symbol["text-letter-spacing"]),"text-justify":new _(ze.layout_symbol["text-justify"]),"text-radial-offset":new _(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _(ze.layout_symbol["text-anchor"]),"text-max-angle":new ft(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(ze.layout_symbol["text-writing-mode"]),"text-rotate":new _(ze.layout_symbol["text-rotate"]),"text-padding":new ft(ze.layout_symbol["text-padding"]),"text-keep-upright":new ft(ze.layout_symbol["text-keep-upright"]),"text-transform":new _(ze.layout_symbol["text-transform"]),"text-offset":new _(ze.layout_symbol["text-offset"]),"text-allow-overlap":new ft(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(ze.layout_symbol["text-ignore-placement"]),"text-optional":new ft(ze.layout_symbol["text-optional"])})}};class ST{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Ha,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lt("FormatSectionOverride",ST,{omit:["defaultValue"]});class E_ extends I{constructor(o){super(o,tw)}recalculate(o,c){if(super.recalculate(o,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,d,m){const v=this.layout.get(o).evaluate(c,{},d,m),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||_d(x.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(M,N)=>S&&N in S?String(S[N]):"")}(c.properties,v)}createBucket(o){return new Nd(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of tw.paint.overridableProperties){if(!E_.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),d=new ST(c),m=new km(d,c.property.specification);let v=null;v=c.value.kind==="constant"||c.value.kind==="source"?new Nm("source",m):new mc("composite",m,c.value.zoomStops),this.paint._values[o]=new ca(c.property,v,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&E_.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const d=o.get("text-field"),m=tw.paint.properties[c];let v=!1;const x=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Oo)x(d.value.value.sections);else if(d.value.kind==="source"){const S=M=>{v||(M instanceof hu&&Rr(M.value)===oa?x(M.value.sections):M instanceof ud?x(M.sections):M.eachChild(S))},P=d.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let ET;var qO={get paint(){return ET=ET||new g({"background-color":new ft(ze.paint_background["background-color"]),"background-pattern":new p(ze.paint_background["background-pattern"]),"background-opacity":new ft(ze.paint_background["background-opacity"])})}};class WO extends I{constructor(o){super(o,qO)}}let CT;var HO={get paint(){return CT=CT||new g({"raster-opacity":new ft(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(ze.paint_raster["raster-saturation"]),"raster-contrast":new ft(ze.paint_raster["raster-contrast"]),"raster-resampling":new ft(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(ze.paint_raster["raster-fade-duration"])})}};class ZO extends I{constructor(o){super(o,HO)}}class XO extends I{constructor(o){super(o,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class KO{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const nw=63710088e-1;class Pc{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pc(_e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,d=this.lat*c,m=o.lat*c,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((o.lng-this.lng)*c);return nw*Math.acos(Math.min(v,1))}static convert(o){if(o instanceof Pc)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Pc(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Pc(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const IT=2*Math.PI*nw;function TT(a){return IT*Math.cos(a*Math.PI/180)}function PT(a){return(180+a)/360}function LT(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function MT(a,o){return a/TT(o)}function rw(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class C_{constructor(o,c,d=0){this.x=+o,this.y=+c,this.z=+d}static fromLngLat(o,c=0){const d=Pc.convert(o);return new C_(PT(d.lng),LT(d.lat),MT(c,d.lat))}toLngLat(){return new Pc(360*this.x-180,rw(this.y))}toAltitude(){return this.z*TT(rw(this.y))}meterInMercatorCoordinateUnits(){return 1/IT*(o=rw(this.y),1/Math.cos(o*Math.PI/180));var o}}function AT(a,o,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[a*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}class iw{constructor(o,c,d){if(o<0||o>25||d<0||d>=Math.pow(2,o)||c<0||c>=Math.pow(2,o))throw new Error(`x=${c}, y=${d}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=d,this.key=_g(0,o,o,c,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,d){const m=(x=this.y,S=this.z,P=AT(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),M=AT(256*(v+1),256*(x+1),S),P[0]+","+P[1]+","+M[0]+","+M[1]);var v,x,S,P,M;const N=function(D,F,W){let X,Q="";for(let ie=D;ie>0;ie--)X=1<<ie-1,Q+=(F&X?1:0)+(W&X?2:0);return Q}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,m)}isChildOf(o){const c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){const c=Math.pow(2,this.z);return new C((o.x*c-this.x)*Dr,(o.y*c-this.y)*Dr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class kT{constructor(o,c){this.wrap=o,this.canonical=c,this.key=_g(o,c.z,c.z,c.x,c.y)}}class Ms{constructor(o,c,d,m,v){if(o<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${d}`);this.overscaledZ=o,this.wrap=c,this.canonical=new iw(d,+m,+v),this.key=_g(c,o,d,m,v)}clone(){return new Ms(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-o;return o>this.canonical.z?new Ms(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ms(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?_g(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):_g(this.wrap*+c,o,o,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new Ms(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Ms(c,this.wrap,c,d,m),new Ms(c,this.wrap,c,d+1,m),new Ms(c,this.wrap,c,d,m+1),new Ms(c,this.wrap,c,d+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ms(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ms(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new kT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new C_(o.x-this.wrap,o.y))}}function _g(a,o,c,d,m){(a*=2)<0&&(a=-1*a-1);const v=1<<c;return(v*v*a+v*m+d).toString(36)+c.toString(36)+o.toString(36)}lt("CanonicalTileID",iw),lt("OverscaledTileID",Ms,{omit:["posMatrix"]});class NT{constructor(o,c,d,m=1,v=1,x=1,S=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void wt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const P=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<P;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(P,M)]=this.data[this._idx(P-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,P)]=this.data[this._idx(M,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<P;M++)for(let N=0;N<P;N++){const D=this.get(M,N);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(o,c){const d=new Uint8Array(this.data.buffer),m=4*this._idx(o,c);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}unpack(o,c,d){return o*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Ls({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,v=c*this.dim+this.dim,x=d*this.dim,S=d*this.dim+this.dim;switch(c){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:x=S-1;break;case 1:S=x+1}const P=-c*this.dim,M=-d*this.dim;for(let N=x;N<S;N++)for(let D=m;D<v;D++)this.data[this._idx(D,N)]=o.data[this._idx(D+P,N+M)]}}lt("DEMData",NT);class RT{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const d=o[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class DT{constructor(o,c,d,m,v){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=d,o._y=m,this.properties=o.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(o[c]=this[c]);return o}}class OT{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Qh(Dr,16,0),this.grid3D=new Qh(Dr,16,0),this.featureIndexArray=new wu,this.promoteId=c}insert(o,c,d,m,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const P=x?this.grid3D:this.grid;for(let M=0;M<c.length;M++){const N=c[M],D=[1/0,1/0,-1/0,-1/0];for(let F=0;F<N.length;F++){const W=N[F];D[0]=Math.min(D[0],W.x),D[1]=Math.min(D[1],W.y),D[2]=Math.max(D[2],W.x),D[3]=Math.max(D[3],W.y)}D[0]<Dr&&D[1]<Dr&&D[2]>=0&&D[3]>=0&&P.insert(S,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Cc.VectorTile(new Wb(this.rawTileData)).layers,this.sourceLayerCoder=new RT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,c,d,m){this.loadVTLayers();const v=o.params||{},x=Dr/o.tileSize/o.scale,S=Rm(v.filter),P=o.queryGeometry,M=o.queryPadding*x,N=FT(P),D=this.grid.query(N.minX-M,N.minY-M,N.maxX+M,N.maxY+M),F=FT(o.cameraQueryGeometry),W=this.grid3D.query(F.minX-M,F.minY-M,F.maxX+M,F.maxY+M,(ie,ue,we,pe)=>function(xe,Fe,Be,st,pt){for(const tt of xe)if(Fe<=tt.x&&Be<=tt.y&&st>=tt.x&&pt>=tt.y)return!0;const nt=[new C(Fe,Be),new C(Fe,pt),new C(st,pt),new C(st,Be)];if(xe.length>2){for(const tt of nt)if(Id(xe,tt))return!0}for(let tt=0;tt<xe.length-1;tt++)if(AD(xe[tt],xe[tt+1],nt))return!0;return!1}(o.cameraQueryGeometry,ie-M,ue-M,we+M,pe+M));for(const ie of W)D.push(ie);D.sort(YO);const X={};let Q;for(let ie=0;ie<D.length;ie++){const ue=D[ie];if(ue===Q)continue;Q=ue;const we=this.featureIndexArray.get(ue);let pe=null;this.loadMatchingFeature(X,we.bucketIndex,we.sourceLayerIndex,we.featureIndex,S,v.layers,v.availableImages,c,d,m,(xe,Fe,Be)=>(pe||(pe=sp(xe)),Fe.queryIntersectsFeature(P,xe,Be,pe,this.z,o.transform,x,o.pixelPosMatrix)))}return X}loadMatchingFeature(o,c,d,m,v,x,S,P,M,N,D){const F=this.bucketLayerIDs[c];if(x&&!function(ie,ue){for(let we=0;we<ie.length;we++)if(ue.indexOf(ie[we])>=0)return!0;return!1}(x,F))return;const W=this.sourceLayerCoder.decode(d),X=this.vtLayers[W].feature(m);if(v.needGeometry){const ie=ap(X,!0);if(!v.filter(new jn(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!v.filter(new jn(this.tileID.overscaledZ),X))return;const Q=this.getId(X,W);for(let ie=0;ie<F.length;ie++){const ue=F[ie];if(x&&x.indexOf(ue)<0)continue;const we=P[ue];if(!we)continue;let pe={};Q&&N&&(pe=N.getState(we.sourceLayer||"_geojsonTileLayer",Q));const xe=fe({},M[ue]);xe.paint=zT(xe.paint,we.paint,X,pe,S),xe.layout=zT(xe.layout,we.layout,X,pe,S);const Fe=!D||D(X,we,pe);if(!Fe)continue;const Be=new DT(X,this.z,this.x,this.y,Q);Be.layer=xe;let st=o[ue];st===void 0&&(st=o[ue]=[]),st.push({featureIndex:m,feature:Be,intersectionZ:Fe})}}lookupSymbolFeatures(o,c,d,m,v,x,S,P){const M={};this.loadVTLayers();const N=Rm(v);for(const D of o)this.loadMatchingFeature(M,d,m,D,N,x,S,P,c);return M}hasLayer(o){for(const c of this.bucketLayerIDs)for(const d of c)if(o===d)return!0;return!1}getId(o,c){let d=o.id;return this.promoteId&&(d=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof d=="boolean"&&(d=Number(d))),d}}function zT(a,o,c,d,m){return Pe(a,(v,x)=>{const S=o instanceof tp?o.get(x):null;return S&&S.evaluate?S.evaluate(c,d,m):S})}function FT(a){let o=1/0,c=1/0,d=-1/0,m=-1/0;for(const v of a)o=Math.min(o,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:o,minY:c,maxX:d,maxY:m}}function YO(a,o){return o-a}function BT(a,o,c,d,m){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let P;for(let M=0;M<S.length-1;M++){let N=S[M],D=S[M+1];N.x<o&&D.x<o||(N.x<o?N=new C(o,N.y+(o-N.x)/(D.x-N.x)*(D.y-N.y))._round():D.x<o&&(D=new C(o,N.y+(o-N.x)/(D.x-N.x)*(D.y-N.y))._round()),N.y<c&&D.y<c||(N.y<c?N=new C(N.x+(c-N.y)/(D.y-N.y)*(D.x-N.x),c)._round():D.y<c&&(D=new C(N.x+(c-N.y)/(D.y-N.y)*(D.x-N.x),c)._round()),N.x>=d&&D.x>=d||(N.x>=d?N=new C(d,N.y+(d-N.x)/(D.x-N.x)*(D.y-N.y))._round():D.x>=d&&(D=new C(d,N.y+(d-N.x)/(D.x-N.x)*(D.y-N.y))._round()),N.y>=m&&D.y>=m||(N.y>=m?N=new C(N.x+(m-N.y)/(D.y-N.y)*(D.x-N.x),m)._round():D.y>=m&&(D=new C(N.x+(m-N.y)/(D.y-N.y)*(D.x-N.x),m)._round()),P&&N.equals(P[P.length-1])||(P=[N],v.push(P)),P.push(D)))))}}return v}lt("FeatureIndex",OT,{omit:["rawTileData","sourceLayerCoder"]});class Lc extends C{constructor(o,c,d,m){super(o,c),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new Lc(this.x,this.y,this.angle,this.segment)}}function jT(a,o,c,d,m){if(o.segment===void 0||c===0)return!0;let v=o,x=o.segment+1,S=0;for(;S>-c/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const P=[];let M=0;for(;S<c/2;){const N=a[x],D=a[x+1];if(!D)return!1;let F=a[x-1].angleTo(N)-N.angleTo(D);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:F}),M+=F;S-P[0].distance>d;)M-=P.shift().angleDelta;if(M>m)return!1;x++,S+=N.dist(D)}return!0}function $T(a){let o=0;for(let c=0;c<a.length-1;c++)o+=a[c].dist(a[c+1]);return o}function VT(a,o,c){return a?.6*o*c:0}function UT(a,o){return Math.max(a?a.right-a.left:0,o?o.right-o.left:0)}function JO(a,o,c,d,m,v){const x=VT(c,m,v),S=UT(c,d)*v;let P=0;const M=$T(a)/2;for(let N=0;N<a.length-1;N++){const D=a[N],F=a[N+1],W=D.dist(F);if(P+W>M){const X=(M-P)/W,Q=Ji.number(D.x,F.x,X),ie=Ji.number(D.y,F.y,X),ue=new Lc(Q,ie,F.angleTo(D),N);return ue._round(),!x||jT(a,ue,S,x,o)?ue:void 0}P+=W}}function QO(a,o,c,d,m,v,x,S,P){const M=VT(d,v,x),N=UT(d,m),D=N*x,F=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return o-D<o/4&&(o=D+o/4),GT(a,F?o/2*S%o:(N/2+2*v)*x*S%o,o,M,c,D,F,!1,P)}function GT(a,o,c,d,m,v,x,S,P){const M=v/2,N=$T(a);let D=0,F=o-c,W=[];for(let X=0;X<a.length-1;X++){const Q=a[X],ie=a[X+1],ue=Q.dist(ie),we=ie.angleTo(Q);for(;F+c<D+ue;){F+=c;const pe=(F-D)/ue,xe=Ji.number(Q.x,ie.x,pe),Fe=Ji.number(Q.y,ie.y,pe);if(xe>=0&&xe<P&&Fe>=0&&Fe<P&&F-M>=0&&F+M<=N){const Be=new Lc(xe,Fe,we,X);Be._round(),d&&!jT(a,Be,v,d,m)||W.push(Be)}}D+=ue}return S||W.length||x||(W=GT(a,D/2,c,d,m,v,x,!0,P)),W}lt("Anchor",Lc);const Rd=Vo;function qT(a,o,c,d){const m=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*Rd,P=v.paddedRect.h-2*Rd;let M={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const N=v.stretchX||[[0,S]],D=v.stretchY||[[0,P]],F=(je,ht)=>je+ht[1]-ht[0],W=N.reduce(F,0),X=D.reduce(F,0),Q=S-W,ie=P-X;let ue=0,we=W,pe=0,xe=X,Fe=0,Be=Q,st=0,pt=ie;if(v.content&&d){const je=v.content,ht=je[2]-je[0],ct=je[3]-je[1];(v.textFitWidth||v.textFitHeight)&&(M=_T(a)),ue=I_(N,0,je[0]),pe=I_(D,0,je[1]),we=I_(N,je[0],je[2]),xe=I_(D,je[1],je[3]),Fe=je[0]-ue,st=je[1]-pe,Be=ht-we,pt=ct-xe}const nt=M.x1,tt=M.y1,ut=M.x2-nt,mt=M.y2-tt,rt=(je,ht,ct,$t)=>{const En=T_(je.stretch-ue,we,ut,nt),Cn=P_(je.fixed-Fe,Be,je.stretch,W),Or=T_(ht.stretch-pe,xe,mt,tt),As=P_(ht.fixed-st,pt,ht.stretch,X),to=T_(ct.stretch-ue,we,ut,nt),Hr=P_(ct.fixed-Fe,Be,ct.stretch,W),wi=T_($t.stretch-pe,xe,mt,tt),no=P_($t.fixed-st,pt,$t.stretch,X),vo=new C(En,Or),ro=new C(to,Or),zr=new C(to,wi),ai=new C(En,wi),xo=new C(Cn/x,As/x),Uo=new C(Hr/x,no/x),Oi=o*Math.PI/180;if(Oi){const hr=Math.sin(Oi),Xt=Math.cos(Oi),Fr=[Xt,-hr,hr,Xt];vo._matMult(Fr),ro._matMult(Fr),ai._matMult(Fr),zr._matMult(Fr)}const Go=je.stretch+je.fixed,ks=ht.stretch+ht.fixed;return{tl:vo,tr:ro,bl:ai,br:zr,tex:{x:v.paddedRect.x+Rd+Go,y:v.paddedRect.y+Rd+ks,w:ct.stretch+ct.fixed-Go,h:$t.stretch+$t.fixed-ks},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xo,pixelOffsetBR:Uo,minFontScaleX:Be/x/ut,minFontScaleY:pt/x/mt,isSDF:c}};if(d&&(v.stretchX||v.stretchY)){const je=WT(N,Q,W),ht=WT(D,ie,X);for(let ct=0;ct<je.length-1;ct++){const $t=je[ct],En=je[ct+1];for(let Cn=0;Cn<ht.length-1;Cn++)m.push(rt($t,ht[Cn],En,ht[Cn+1]))}}else m.push(rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function I_(a,o,c){let d=0;for(const m of a)d+=Math.max(o,Math.min(c,m[1]))-Math.max(o,Math.min(c,m[0]));return d}function WT(a,o,c){const d=[{fixed:-Rd,stretch:0}];for(const[m,v]of a){const x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return d.push({fixed:o+Rd,stretch:c}),d}function T_(a,o,c,d){return a/o*c+d}function P_(a,o,c,d){return a-o*c/d}class L_{constructor(o,c,d,m,v,x,S,P,M,N){var D;if(this.boxStartIndex=o.length,M){let F=x.top,W=x.bottom;const X=x.collisionPadding;X&&(F-=X[1],W+=X[3]);let Q=W-F;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{const F=!((D=x.image)===null||D===void 0)&&D.content&&(x.image.textFitWidth||x.image.textFitHeight)?_T(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};F.y1=F.y1*S-P[0],F.y2=F.y2*S+P[2],F.x1=F.x1*S-P[3],F.x2=F.x2*S+P[1];const W=x.collisionPadding;if(W&&(F.x1-=W[0]*S,F.y1-=W[1]*S,F.x2+=W[2]*S,F.y2+=W[3]*S),N){const X=new C(F.x1,F.y1),Q=new C(F.x2,F.y1),ie=new C(F.x1,F.y2),ue=new C(F.x2,F.y2),we=N*Math.PI/180;X._rotate(we),Q._rotate(we),ie._rotate(we),ue._rotate(we),F.x1=Math.min(X.x,Q.x,ie.x,ue.x),F.x2=Math.max(X.x,Q.x,ie.x,ue.x),F.y1=Math.min(X.y,Q.y,ie.y,ue.y),F.y2=Math.max(X.y,Q.y,ie.y,ue.y)}o.emplaceBack(c.x,c.y,F.x1,F.y1,F.x2,F.y2,d,m,v)}this.boxEndIndex=o.length}}class ez{constructor(o=[],c=tz){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:c,compare:d}=this,m=c[o];for(;o>0;){const v=o-1>>1,x=c[v];if(d(m,x)>=0)break;c[o]=x,o=v}c[o]=m}_down(o){const{data:c,compare:d}=this,m=this.length>>1,v=c[o];for(;o<m;){let x=1+(o<<1),S=c[x];const P=x+1;if(P<this.length&&d(c[P],S)<0&&(x=P,S=c[P]),d(S,v)>=0)break;c[o]=S,o=x}c[o]=v}}function tz(a,o){return a<o?-1:a>o?1:0}function nz(a,o=1,c=!1){let d=1/0,m=1/0,v=-1/0,x=-1/0;const S=a[0];for(let W=0;W<S.length;W++){const X=S[W];(!W||X.x<d)&&(d=X.x),(!W||X.y<m)&&(m=X.y),(!W||X.x>v)&&(v=X.x),(!W||X.y>x)&&(x=X.y)}const P=Math.min(v-d,x-m);let M=P/2;const N=new ez([],rz);if(P===0)return new C(d,m);for(let W=d;W<v;W+=P)for(let X=m;X<x;X+=P)N.push(new Dd(W+M,X+M,M,a));let D=function(W){let X=0,Q=0,ie=0;const ue=W[0];for(let we=0,pe=ue.length,xe=pe-1;we<pe;xe=we++){const Fe=ue[we],Be=ue[xe],st=Fe.x*Be.y-Be.x*Fe.y;Q+=(Fe.x+Be.x)*st,ie+=(Fe.y+Be.y)*st,X+=3*st}return new Dd(Q/X,ie/X,0,W)}(a),F=N.length;for(;N.length;){const W=N.pop();(W.d>D.d||!D.d)&&(D=W,c&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,F)),W.max-D.d<=o||(M=W.h/2,N.push(new Dd(W.p.x-M,W.p.y-M,M,a)),N.push(new Dd(W.p.x+M,W.p.y-M,M,a)),N.push(new Dd(W.p.x-M,W.p.y+M,M,a)),N.push(new Dd(W.p.x+M,W.p.y+M,M,a)),F+=4)}return c&&(console.log(`num probes: ${F}`),console.log(`best distance: ${D.d}`)),D.p}function rz(a,o){return o.max-a.max}function Dd(a,o,c,d){this.p=new C(a,o),this.h=c,this.d=function(m,v){let x=!1,S=1/0;for(let P=0;P<v.length;P++){const M=v[P];for(let N=0,D=M.length,F=D-1;N<D;F=N++){const W=M[N],X=M[F];W.y>m.y!=X.y>m.y&&m.x<(X.x-W.x)*(m.y-W.y)/(X.y-W.y)+W.x&&(x=!x),S=Math.min(S,LI(m,W,X))}}return(x?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Di;h.ap=void 0,(Di=h.ap||(h.ap={}))[Di.center=1]="center",Di[Di.left=2]="left",Di[Di.right=3]="right",Di[Di.top=4]="top",Di[Di.bottom=5]="bottom",Di[Di["top-left"]=6]="top-left",Di[Di["top-right"]=7]="top-right",Di[Di["bottom-left"]=8]="bottom-left",Di[Di["bottom-right"]=9]="bottom-right";const Mc=7,ow=Number.POSITIVE_INFINITY;function HT(a,o){return o[1]!==ow?function(c,d,m){let v=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),c){case"top-right":case"top-left":case"top":x=m-Mc;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Mc}switch(c){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(a,o[0],o[1]):function(c,d){let m=0,v=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(c){case"top-right":case"top-left":v=x-Mc;break;case"bottom-right":case"bottom-left":v=-x+Mc;break;case"bottom":v=-d+Mc;break;case"top":v=d-Mc}switch(c){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(a,o[0])}function ZT(a,o,c){var d;const m=a.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(o,{},c);if(v){const S=v.values,P=[];for(let M=0;M<S.length;M+=2){const N=P[M]=S[M],D=S[M+1].map(F=>F*Wr);N.startsWith("top")?D[1]-=Mc:N.startsWith("bottom")&&(D[1]+=Mc),P[M+1]=D}return new ki(P)}const x=m.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(o,{},c)*Wr,ow]:m.get("text-offset").evaluate(o,{},c).map(M=>M*Wr);const P=[];for(const M of x)P.push(M,HT(M,S));return new ki(P)}return null}function sw(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iz(a,o,c,d,m,v,x,S,P,M,N){let D=v.textMaxSize.evaluate(o,{});D===void 0&&(D=x);const F=a.layers[0].layout,W=F.get("icon-offset").evaluate(o,{},N),X=KT(c.horizontal),Q=x/24,ie=a.tilePixelRatio*Q,ue=a.tilePixelRatio*D/24,we=a.tilePixelRatio*S,pe=a.tilePixelRatio*F.get("symbol-spacing"),xe=F.get("text-padding")*a.tilePixelRatio,Fe=function(je,ht,ct,$t=1){const En=je.get("icon-padding").evaluate(ht,{},ct),Cn=En&&En.values;return[Cn[0]*$t,Cn[1]*$t,Cn[2]*$t,Cn[3]*$t]}(F,o,N,a.tilePixelRatio),Be=F.get("text-max-angle")/180*Math.PI,st=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",pt=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",nt=F.get("symbol-placement"),tt=pe/2,ut=F.get("icon-text-fit");let mt;d&&ut!=="none"&&(a.allowVerticalPlacement&&c.vertical&&(mt=vT(d,c.vertical,ut,F.get("icon-text-fit-padding"),W,Q)),X&&(d=vT(d,X,ut,F.get("icon-text-fit-padding"),W,Q)));const rt=(je,ht)=>{ht.x<0||ht.x>=Dr||ht.y<0||ht.y>=Dr||function(ct,$t,En,Cn,Or,As,to,Hr,wi,no,vo,ro,zr,ai,xo,Uo,Oi,Go,ks,hr,Xt,Fr,zi,Zr,pa){const Qa=ct.addToLineVertexArray($t,En);let el,Iu,da,Ns,qo=0,Tu=0,bg=0,eP=0,fw=-1,mw=-1;const Pu={};let tP=Cb("");if(ct.allowVerticalPlacement&&Cn.vertical){const io=Hr.layout.get("text-rotate").evaluate(Xt,{},Zr)+90;da=new L_(wi,$t,no,vo,ro,Cn.vertical,zr,ai,xo,io),to&&(Ns=new L_(wi,$t,no,vo,ro,to,Oi,Go,xo,io))}if(Or){const io=Hr.layout.get("icon-rotate").evaluate(Xt,{}),Rs=Hr.layout.get("icon-text-fit")!=="none",up=qT(Or,io,zi,Rs),nl=to?qT(to,io,zi,Rs):void 0;Iu=new L_(wi,$t,no,vo,ro,Or,Oi,Go,!1,io),qo=4*up.length;const cp=ct.iconSizeData;let Ol=null;cp.kind==="source"?(Ol=[Dl*Hr.layout.get("icon-size").evaluate(Xt,{})],Ol[0]>Tc&&wt(`${ct.layerIds[0]}: Value for "icon-size" is >= ${yg}. Reduce your "icon-size".`)):cp.kind==="composite"&&(Ol=[Dl*Fr.compositeIconSizes[0].evaluate(Xt,{},Zr),Dl*Fr.compositeIconSizes[1].evaluate(Xt,{},Zr)],(Ol[0]>Tc||Ol[1]>Tc)&&wt(`${ct.layerIds[0]}: Value for "icon-size" is >= ${yg}. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,up,Ol,hr,ks,Xt,h.ah.none,$t,Qa.lineStartIndex,Qa.lineLength,-1,Zr),fw=ct.icon.placedSymbolArray.length-1,nl&&(Tu=4*nl.length,ct.addSymbols(ct.icon,nl,Ol,hr,ks,Xt,h.ah.vertical,$t,Qa.lineStartIndex,Qa.lineLength,-1,Zr),mw=ct.icon.placedSymbolArray.length-1)}const nP=Object.keys(Cn.horizontal);for(const io of nP){const Rs=Cn.horizontal[io];if(!el){tP=Cb(Rs.text);const nl=Hr.layout.get("text-rotate").evaluate(Xt,{},Zr);el=new L_(wi,$t,no,vo,ro,Rs,zr,ai,xo,nl)}const up=Rs.positionedLines.length===1;if(bg+=XT(ct,$t,Rs,As,Hr,xo,Xt,Uo,Qa,Cn.vertical?h.ah.horizontal:h.ah.horizontalOnly,up?nP:[io],Pu,fw,Fr,Zr),up)break}Cn.vertical&&(eP+=XT(ct,$t,Cn.vertical,As,Hr,xo,Xt,Uo,Qa,h.ah.vertical,["vertical"],Pu,mw,Fr,Zr));const az=el?el.boxStartIndex:ct.collisionBoxArray.length,lz=el?el.boxEndIndex:ct.collisionBoxArray.length,uz=da?da.boxStartIndex:ct.collisionBoxArray.length,cz=da?da.boxEndIndex:ct.collisionBoxArray.length,hz=Iu?Iu.boxStartIndex:ct.collisionBoxArray.length,pz=Iu?Iu.boxEndIndex:ct.collisionBoxArray.length,dz=Ns?Ns.boxStartIndex:ct.collisionBoxArray.length,fz=Ns?Ns.boxEndIndex:ct.collisionBoxArray.length;let tl=-1;const A_=(io,Rs)=>io&&io.circleDiameter?Math.max(io.circleDiameter,Rs):Rs;tl=A_(el,tl),tl=A_(da,tl),tl=A_(Iu,tl),tl=A_(Ns,tl);const rP=tl>-1?1:0;rP&&(tl*=pa/Wr),ct.glyphOffsetArray.length>=Nd.MAX_GLYPHS&&wt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xt.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,Xt.sortKey);const mz=ZT(Hr,Xt,Zr),[gz,yz]=function(io,Rs){const up=io.length,nl=Rs==null?void 0:Rs.values;if((nl==null?void 0:nl.length)>0)for(let cp=0;cp<nl.length;cp+=2){const Ol=nl[cp+1];io.emplaceBack(h.ap[nl[cp]],Ol[0],Ol[1])}return[up,io.length]}(ct.textAnchorOffsets,mz);ct.symbolInstances.emplaceBack($t.x,$t.y,Pu.right>=0?Pu.right:-1,Pu.center>=0?Pu.center:-1,Pu.left>=0?Pu.left:-1,Pu.vertical||-1,fw,mw,tP,az,lz,uz,cz,hz,pz,dz,fz,no,bg,eP,qo,Tu,rP,0,zr,tl,gz,yz)}(a,ht,je,c,d,m,mt,a.layers[0],a.collisionBoxArray,o.index,o.sourceLayerIndex,a.index,ie,[xe,xe,xe,xe],st,P,we,Fe,pt,W,o,v,M,N,x)};if(nt==="line")for(const je of BT(o.geometry,0,0,Dr,Dr)){const ht=QO(je,pe,Be,c.vertical||X,d,24,ue,a.overscaling,Dr);for(const ct of ht)X&&oz(a,X.text,tt,ct)||rt(je,ct)}else if(nt==="line-center"){for(const je of o.geometry)if(je.length>1){const ht=JO(je,Be,c.vertical||X,d,24,ue);ht&&rt(je,ht)}}else if(o.type==="Polygon")for(const je of hd(o.geometry,0)){const ht=nz(je,16);rt(je[0],new Lc(ht.x,ht.y,0))}else if(o.type==="LineString")for(const je of o.geometry)rt(je,new Lc(je[0].x,je[0].y,0));else if(o.type==="Point")for(const je of o.geometry)for(const ht of je)rt([ht],new Lc(ht.x,ht.y,0))}function XT(a,o,c,d,m,v,x,S,P,M,N,D,F,W,X){const Q=function(we,pe,xe,Fe,Be,st,pt,nt){const tt=Fe.layout.get("text-rotate").evaluate(st,{})*Math.PI/180,ut=[];for(const mt of pe.positionedLines)for(const rt of mt.positionedGlyphs){if(!rt.rect)continue;const je=rt.rect||{};let ht=hT+1,ct=!0,$t=1,En=0;const Cn=(Be||nt)&&rt.vertical,Or=rt.metrics.advance*rt.scale/2;if(nt&&pe.verticalizable&&(En=mt.lineOffset/2-(rt.imageName?-(Wr-rt.metrics.width*rt.scale)/2:(rt.scale-1)*Wr)),rt.imageName){const hr=pt[rt.imageName];ct=hr.sdf,$t=hr.pixelRatio,ht=Vo/$t}const As=Be?[rt.x+Or,rt.y]:[0,0];let to=Be?[0,0]:[rt.x+Or+xe[0],rt.y+xe[1]-En],Hr=[0,0];Cn&&(Hr=to,to=[0,0]);const wi=rt.metrics.isDoubleResolution?2:1,no=(rt.metrics.left-ht)*rt.scale-Or+to[0],vo=(-rt.metrics.top-ht)*rt.scale+to[1],ro=no+je.w/wi*rt.scale/$t,zr=vo+je.h/wi*rt.scale/$t,ai=new C(no,vo),xo=new C(ro,vo),Uo=new C(no,zr),Oi=new C(ro,zr);if(Cn){const hr=new C(-Or,Or-mg),Xt=-Math.PI/2,Fr=Wr/2-Or,zi=new C(5-mg-Fr,-(rt.imageName?Fr:0)),Zr=new C(...Hr);ai._rotateAround(Xt,hr)._add(zi)._add(Zr),xo._rotateAround(Xt,hr)._add(zi)._add(Zr),Uo._rotateAround(Xt,hr)._add(zi)._add(Zr),Oi._rotateAround(Xt,hr)._add(zi)._add(Zr)}if(tt){const hr=Math.sin(tt),Xt=Math.cos(tt),Fr=[Xt,-hr,hr,Xt];ai._matMult(Fr),xo._matMult(Fr),Uo._matMult(Fr),Oi._matMult(Fr)}const Go=new C(0,0),ks=new C(0,0);ut.push({tl:ai,tr:xo,bl:Uo,br:Oi,tex:je,writingMode:pe.writingMode,glyphOffset:As,sectionIndex:rt.sectionIndex,isSDF:ct,pixelOffsetTL:Go,pixelOffsetBR:ks,minFontScaleX:0,minFontScaleY:0})}return ut}(0,c,S,m,v,x,d,a.allowVerticalPlacement),ie=a.textSizeData;let ue=null;ie.kind==="source"?(ue=[Dl*m.layout.get("text-size").evaluate(x,{})],ue[0]>Tc&&wt(`${a.layerIds[0]}: Value for "text-size" is >= ${yg}. Reduce your "text-size".`)):ie.kind==="composite"&&(ue=[Dl*W.compositeTextSizes[0].evaluate(x,{},X),Dl*W.compositeTextSizes[1].evaluate(x,{},X)],(ue[0]>Tc||ue[1]>Tc)&&wt(`${a.layerIds[0]}: Value for "text-size" is >= ${yg}. Reduce your "text-size".`)),a.addSymbols(a.text,Q,ue,S,v,x,M,o,P.lineStartIndex,P.lineLength,F,X);for(const we of N)D[we]=a.text.placedSymbolArray.length-1;return 4*Q.length}function KT(a){for(const o in a)return a[o];return null}function oz(a,o,c,d){const m=a.compareText;if(o in m){const v=m[o];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<c)return!0}else m[o]=[];return m[o].push(d),!1}const YT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class aw{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,d]=new Uint8Array(o,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=YT[15&d];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(o,2,1),[S]=new Uint32Array(o,4,1);return new aw(S,x,v,o)}constructor(o,c=64,d=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const v=YT.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,S=o*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+P,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+P),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+P,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=o,this.coords[this._pos++]=c,d}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return lw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,P=[0,v.length-1,0],M=[];for(;P.length;){const N=P.pop()||0,D=P.pop()||0,F=P.pop()||0;if(D-F<=S){for(let ie=F;ie<=D;ie++){const ue=x[2*ie],we=x[2*ie+1];ue>=o&&ue<=d&&we>=c&&we<=m&&M.push(v[ie])}continue}const W=F+D>>1,X=x[2*W],Q=x[2*W+1];X>=o&&X<=d&&Q>=c&&Q<=m&&M.push(v[W]),(N===0?o<=X:c<=Q)&&(P.push(F),P.push(W-1),P.push(1-N)),(N===0?d>=X:m>=Q)&&(P.push(W+1),P.push(D),P.push(1-N))}return M}within(o,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],P=[],M=d*d;for(;S.length;){const N=S.pop()||0,D=S.pop()||0,F=S.pop()||0;if(D-F<=x){for(let ie=F;ie<=D;ie++)QT(v[2*ie],v[2*ie+1],o,c)<=M&&P.push(m[ie]);continue}const W=F+D>>1,X=v[2*W],Q=v[2*W+1];QT(X,Q,o,c)<=M&&P.push(m[W]),(N===0?o-d<=X:c-d<=Q)&&(S.push(F),S.push(W-1),S.push(1-N)),(N===0?o+d>=X:c+d>=Q)&&(S.push(W+1),S.push(D),S.push(1-N))}return P}}function lw(a,o,c,d,m,v){if(m-d<=c)return;const x=d+m>>1;JT(a,o,x,d,m,v),lw(a,o,c,d,x-1,1-v),lw(a,o,c,x+1,m,1-v)}function JT(a,o,c,d,m,v){for(;m>d;){if(m-d>600){const M=m-d+1,N=c-d+1,D=Math.log(M),F=.5*Math.exp(2*D/3),W=.5*Math.sqrt(D*F*(M-F)/M)*(N-M/2<0?-1:1);JT(a,o,c,Math.max(d,Math.floor(c-N*F/M+W)),Math.min(m,Math.floor(c+(M-N)*F/M+W)),v)}const x=o[2*c+v];let S=d,P=m;for(vg(a,o,d,c),o[2*m+v]>x&&vg(a,o,d,m);S<P;){for(vg(a,o,S,P),S++,P--;o[2*S+v]<x;)S++;for(;o[2*P+v]>x;)P--}o[2*d+v]===x?vg(a,o,d,P):(P++,vg(a,o,P,m)),P<=c&&(d=P+1),c<=P&&(m=P-1)}}function vg(a,o,c,d){uw(a,c,d),uw(o,2*c,2*d),uw(o,2*c+1,2*d+1)}function uw(a,o,c){const d=a[o];a[o]=a[c],a[c]=d}function QT(a,o,c,d){const m=a-c,v=o-d;return m*m+v*v}var cw;h.bd=void 0,(cw=h.bd||(h.bd={})).create="create",cw.load="load",cw.fullLoad="fullLoad";let M_=null,xg=[];const hw=1e3/60,pw="loadTime",dw="fullLoadTime",sz={mark(a){performance.mark(a)},frame(a){const o=a;M_!=null&&xg.push(o-M_),M_=o},clearMetrics(){M_=null,xg=[],performance.clearMeasures(pw),performance.clearMeasures(dw);for(const a in h.bd)performance.clearMarks(h.bd[a])},getPerformanceMetrics(){performance.measure(pw,h.bd.create,h.bd.load),performance.measure(dw,h.bd.create,h.bd.fullLoad);const a=performance.getEntriesByName(pw)[0].duration,o=performance.getEntriesByName(dw)[0].duration,c=xg.length,d=1/(xg.reduce((v,x)=>v+x,0)/c/1e3),m=xg.filter(v=>v>hw).reduce((v,x)=>v+(x-hw)/hw,0);return{loadTime:a,fullLoadTime:o,fps:d,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};h.$=si,h.A=Td,h.B=function(a){if(vt==null){const o=a.navigator?a.navigator.userAgent:null;vt=!!a.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return vt},h.C=class{constructor(a,o){this.target=a,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new KO(()=>this.process()),this.subscription=function(c,d,m,v){return c.addEventListener(d,m,!1),{unsubscribe:()=>{c.removeEventListener(d,m,!1)}}}(this.target,"message",c=>this.receive(c)),this.globalScope=Je(self)?a:window}registerMessageHandler(a,o){this.messageHandlers[a]=o}sendAsync(a,o){return new Promise((c,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:c,reject:d},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const v=[],x=Object.assign(Object.assign({},a),{id:m,sourceMapId:this.mapId,origin:location.origin,data:ua(a.data,v)});this.target.postMessage(x,{transfer:v})})}receive(a){const o=a.data,c=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[c];const d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(Je(self)||o.mustQueue)return this.tasks[c]=o,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,o)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),o=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(a,o)}processTask(a,o){return u(this,void 0,void 0,function*(){if(o.type==="<response>"){const m=this.resolveRejects[a];return delete this.resolveRejects[a],m?void(o.error?m.reject(ep(o.error)):m.resolve(ep(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=ep(o.data),d=new AbortController;this.abortControllers[a]=d;try{const m=yield this.messageHandlers[o.type](o.sourceMapId,c,d);this.completeTask(a,null,m)}catch(m){this.completeTask(a,m)}})}completeTask(a,o,c){const d=[];delete this.abortControllers[a];const m={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?ua(o):null,data:ua(c,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.D=ft,h.E=Wt,h.F=function(){var a=new Td(16);return Td!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},h.G=vr,h.H=function(a,o,c){var d,m,v,x,S,P,M,N,D,F,W,X,Q=c[0],ie=c[1],ue=c[2];return o===a?(a[12]=o[0]*Q+o[4]*ie+o[8]*ue+o[12],a[13]=o[1]*Q+o[5]*ie+o[9]*ue+o[13],a[14]=o[2]*Q+o[6]*ie+o[10]*ue+o[14],a[15]=o[3]*Q+o[7]*ie+o[11]*ue+o[15]):(m=o[1],v=o[2],x=o[3],S=o[4],P=o[5],M=o[6],N=o[7],D=o[8],F=o[9],W=o[10],X=o[11],a[0]=d=o[0],a[1]=m,a[2]=v,a[3]=x,a[4]=S,a[5]=P,a[6]=M,a[7]=N,a[8]=D,a[9]=F,a[10]=W,a[11]=X,a[12]=d*Q+S*ie+D*ue+o[12],a[13]=m*Q+P*ie+F*ue+o[13],a[14]=v*Q+M*ie+W*ue+o[14],a[15]=x*Q+N*ie+X*ue+o[15]),a},h.I=Zb,h.J=function(a,o,c){var d=c[0],m=c[1],v=c[2];return a[0]=o[0]*d,a[1]=o[1]*d,a[2]=o[2]*d,a[3]=o[3]*d,a[4]=o[4]*m,a[5]=o[5]*m,a[6]=o[6]*m,a[7]=o[7]*m,a[8]=o[8]*v,a[9]=o[9]*v,a[10]=o[10]*v,a[11]=o[11]*v,a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},h.K=NI,h.L=function(a,o){const c={};for(let d=0;d<o.length;d++){const m=o[d];m in a&&(c[m]=a[m])}return c},h.M=Pc,h.N=PT,h.O=LT,h.P=C,h.Q=Ms,h.R=Ls,h.S=$,h.T=s_,h.U=U,h.V=dt,h.W=Dr,h.X=z,h.Y=C_,h.Z=class extends ne{},h._=u,h.a=Yn,h.a$=function(a,o,c){return a[0]=o[0]*c[0],a[1]=o[1]*c[1],a[2]=o[2]*c[2],a[3]=o[3]*c[3],a},h.a0=iw,h.a1=Ze,h.a2=a=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(c=>{o.onloadstart=()=>{c(o)};for(const d of a){const m=window.document.createElement("source");Cl(d)||(o.crossOrigin="Anonymous"),m.src=d,o.appendChild(m)}})},h.a3=function(){return ye++},h.a4=ur,h.a5=Nd,h.a6=Rm,h.a7=ap,h.a8=jn,h.a9=DT,h.aA=Ue,h.aB=function(a,o){if(!a)return[{command:"setStyle",args:[o]}];let c=[];try{if(!Zt(a.version,o.version))return[{command:"setStyle",args:[o]}];Zt(a.center,o.center)||c.push({command:"setCenter",args:[o.center]}),Zt(a.zoom,o.zoom)||c.push({command:"setZoom",args:[o.zoom]}),Zt(a.bearing,o.bearing)||c.push({command:"setBearing",args:[o.bearing]}),Zt(a.pitch,o.pitch)||c.push({command:"setPitch",args:[o.pitch]}),Zt(a.sprite,o.sprite)||c.push({command:"setSprite",args:[o.sprite]}),Zt(a.glyphs,o.glyphs)||c.push({command:"setGlyphs",args:[o.glyphs]}),Zt(a.transition,o.transition)||c.push({command:"setTransition",args:[o.transition]}),Zt(a.light,o.light)||c.push({command:"setLight",args:[o.light]}),Zt(a.terrain,o.terrain)||c.push({command:"setTerrain",args:[o.terrain]}),Zt(a.sky,o.sky)||c.push({command:"setSky",args:[o.sky]});const d={},m=[];(function(x,S,P,M){let N;for(N in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,N)&&(Object.prototype.hasOwnProperty.call(S,N)||Do(N,P,M));for(N in S)Object.prototype.hasOwnProperty.call(S,N)&&(Object.prototype.hasOwnProperty.call(x,N)?Zt(x[N],S[N])||(x[N].type==="geojson"&&S[N].type==="geojson"&&ia(x,S,N)?vn(P,{command:"setGeoJSONSourceData",args:[N,S[N].data]}):ra(N,S,P,M)):Li(N,S,P))})(a.sources,o.sources,m,d);const v=[];a.layers&&a.layers.forEach(x=>{"source"in x&&d[x.source]?c.push({command:"removeLayer",args:[x.id]}):v.push(x)}),c=c.concat(m),function(x,S,P){S=S||[];const M=(x=x||[]).map(Yi),N=S.map(Yi),D=x.reduce(cu,{}),F=S.reduce(cu,{}),W=M.slice(),X=Object.create(null);let Q,ie,ue,we,pe;for(let xe=0,Fe=0;xe<M.length;xe++)Q=M[xe],Object.prototype.hasOwnProperty.call(F,Q)?Fe++:(vn(P,{command:"removeLayer",args:[Q]}),W.splice(W.indexOf(Q,Fe),1));for(let xe=0,Fe=0;xe<N.length;xe++)Q=N[N.length-1-xe],W[W.length-1-xe]!==Q&&(Object.prototype.hasOwnProperty.call(D,Q)?(vn(P,{command:"removeLayer",args:[Q]}),W.splice(W.lastIndexOf(Q,W.length-Fe),1)):Fe++,we=W[W.length-xe],vn(P,{command:"addLayer",args:[F[Q],we]}),W.splice(W.length-xe,0,Q),X[Q]=!0);for(let xe=0;xe<N.length;xe++)if(Q=N[xe],ie=D[Q],ue=F[Q],!X[Q]&&!Zt(ie,ue))if(Zt(ie.source,ue.source)&&Zt(ie["source-layer"],ue["source-layer"])&&Zt(ie.type,ue.type)){for(pe in Cs(ie.layout,ue.layout,P,Q,null,"setLayoutProperty"),Cs(ie.paint,ue.paint,P,Q,null,"setPaintProperty"),Zt(ie.filter,ue.filter)||vn(P,{command:"setFilter",args:[Q,ue.filter]}),Zt(ie.minzoom,ue.minzoom)&&Zt(ie.maxzoom,ue.maxzoom)||vn(P,{command:"setLayerZoomRange",args:[Q,ue.minzoom,ue.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Cs(ie[pe],ue[pe],P,Q,pe.slice(6),"setPaintProperty"):Zt(ie[pe],ue[pe])||vn(P,{command:"setLayerProperty",args:[Q,pe,ue[pe]]}));for(pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&!Object.prototype.hasOwnProperty.call(ie,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Cs(ie[pe],ue[pe],P,Q,pe.slice(6),"setPaintProperty"):Zt(ie[pe],ue[pe])||vn(P,{command:"setLayerProperty",args:[Q,pe,ue[pe]]}))}else vn(P,{command:"removeLayer",args:[Q]}),we=W[W.lastIndexOf(Q)+1],vn(P,{command:"addLayer",args:[ue,we]})}(v,o.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[o]}]}return c},h.aC=function(a){const o=[],c=a.id;return c===void 0&&o.push({message:`layers.${c}: missing required property "id"`}),a.render===void 0&&o.push({message:`layers.${c}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},h.aD=function a(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let d=0;d<o.length;d++)if(!a(o[d],c[d]))return!1;return!0}if(typeof o=="object"&&o!==null&&c!==null){if(typeof c!="object"||Object.keys(o).length!==Object.keys(c).length)return!1;for(const d in o)if(!a(o[d],c[d]))return!1;return!0}return o===c},h.aE=Pe,h.aF=De,h.aG=class extends ip{constructor(a,o){super(a,o),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},h.aH=c_,h.aI=class extends ip{constructor(a,o){super(a,o),this.current=ID}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let o=1;o<16;o++)if(a[o]!==this.current[o]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},h.aJ=wI,h.aK=class extends ip{constructor(a,o){super(a,o),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},h.aL=class extends ip{constructor(a,o){super(a,o),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},h.aM=SI,h.aN=function(a,o,c,d,m,v,x){var S=1/(o-c),P=1/(d-m),M=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(o+c)*S,a[13]=(m+d)*P,a[14]=(x+v)*M,a[15]=1,a},h.aO=xn,h.aP=ND,h.aQ=class extends Ve{},h.aR=EO,h.aS=class extends qe{},h.aT=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},h.aU=FI,h.aV=Su,h.aW=class extends Tt{},h.aX=bc,h.aY=function(a,o){return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]&&a[3]===o[3]&&a[4]===o[4]&&a[5]===o[5]&&a[6]===o[6]&&a[7]===o[7]&&a[8]===o[8]&&a[9]===o[9]&&a[10]===o[10]&&a[11]===o[11]&&a[12]===o[12]&&a[13]===o[13]&&a[14]===o[14]&&a[15]===o[15]},h.aZ=function(a,o){var c=a[0],d=a[1],m=a[2],v=a[3],x=a[4],S=a[5],P=a[6],M=a[7],N=a[8],D=a[9],F=a[10],W=a[11],X=a[12],Q=a[13],ie=a[14],ue=a[15],we=o[0],pe=o[1],xe=o[2],Fe=o[3],Be=o[4],st=o[5],pt=o[6],nt=o[7],tt=o[8],ut=o[9],mt=o[10],rt=o[11],je=o[12],ht=o[13],ct=o[14],$t=o[15];return Math.abs(c-we)<=_o*Math.max(1,Math.abs(c),Math.abs(we))&&Math.abs(d-pe)<=_o*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(m-xe)<=_o*Math.max(1,Math.abs(m),Math.abs(xe))&&Math.abs(v-Fe)<=_o*Math.max(1,Math.abs(v),Math.abs(Fe))&&Math.abs(x-Be)<=_o*Math.max(1,Math.abs(x),Math.abs(Be))&&Math.abs(S-st)<=_o*Math.max(1,Math.abs(S),Math.abs(st))&&Math.abs(P-pt)<=_o*Math.max(1,Math.abs(P),Math.abs(pt))&&Math.abs(M-nt)<=_o*Math.max(1,Math.abs(M),Math.abs(nt))&&Math.abs(N-tt)<=_o*Math.max(1,Math.abs(N),Math.abs(tt))&&Math.abs(D-ut)<=_o*Math.max(1,Math.abs(D),Math.abs(ut))&&Math.abs(F-mt)<=_o*Math.max(1,Math.abs(F),Math.abs(mt))&&Math.abs(W-rt)<=_o*Math.max(1,Math.abs(W),Math.abs(rt))&&Math.abs(X-je)<=_o*Math.max(1,Math.abs(X),Math.abs(je))&&Math.abs(Q-ht)<=_o*Math.max(1,Math.abs(Q),Math.abs(ht))&&Math.abs(ie-ct)<=_o*Math.max(1,Math.abs(ie),Math.abs(ct))&&Math.abs(ue-$t)<=_o*Math.max(1,Math.abs(ue),Math.abs($t))},h.a_=function(a,o){return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},h.aa=function(a){const o={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,m,v)=>{const x=m||v;return o[d]=!x||x.toLowerCase(),""}),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},h.ab=function(a,o){const c=[];for(const d in a)d in o||c.push(d);return c},h.ac=he,h.ad=function(a,o,c){var d=Math.sin(c),m=Math.cos(c),v=o[0],x=o[1],S=o[2],P=o[3],M=o[4],N=o[5],D=o[6],F=o[7];return o!==a&&(a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15]),a[0]=v*m+M*d,a[1]=x*m+N*d,a[2]=S*m+D*d,a[3]=P*m+F*d,a[4]=M*m-v*d,a[5]=N*m-x*d,a[6]=D*m-S*d,a[7]=F*m-P*d,a},h.ae=function(a){var o=new Td(16);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},h.af=f_,h.ag=function(a,o){let c=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=a,S=m?he(Fo.interpolationFactor(m,o,v,x),0,1):0;a.kind==="camera"?d=Ji.number(a.minSize,a.maxSize,S):c=S}return{uSizeT:c,uSize:d}},h.ai=function(a,{uSize:o,uSizeT:c},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/Dl:a.kind==="composite"?Ji.number(d/Dl,m/Dl,c):o},h.aj=Jb,h.ak=function(a,o,c,d){const m=o.y-a.y,v=o.x-a.x,x=d.y-c.y,S=d.x-c.x,P=x*v-S*m;if(P===0)return null;const M=(S*(a.y-c.y)-x*(a.x-c.x))/P;return new C(a.x+M*v,a.y+M*m)},h.al=BT,h.am=TI,h.an=kb,h.ao=Wr,h.aq=Yb,h.ar=function(a,o){var c=o[0],d=o[1],m=o[2],v=o[3],x=o[4],S=o[5],P=o[6],M=o[7],N=o[8],D=o[9],F=o[10],W=o[11],X=o[12],Q=o[13],ie=o[14],ue=o[15],we=c*S-d*x,pe=c*P-m*x,xe=c*M-v*x,Fe=d*P-m*S,Be=d*M-v*S,st=m*M-v*P,pt=N*Q-D*X,nt=N*ie-F*X,tt=N*ue-W*X,ut=D*ie-F*Q,mt=D*ue-W*Q,rt=F*ue-W*ie,je=we*rt-pe*mt+xe*ut+Fe*tt-Be*nt+st*pt;return je?(a[0]=(S*rt-P*mt+M*ut)*(je=1/je),a[1]=(m*mt-d*rt-v*ut)*je,a[2]=(Q*st-ie*Be+ue*Fe)*je,a[3]=(F*Be-D*st-W*Fe)*je,a[4]=(P*tt-x*rt-M*nt)*je,a[5]=(c*rt-m*tt+v*nt)*je,a[6]=(ie*xe-X*st-ue*pe)*je,a[7]=(N*st-F*xe+W*pe)*je,a[8]=(x*mt-S*tt+M*pt)*je,a[9]=(d*tt-c*mt-v*pt)*je,a[10]=(X*Be-Q*xe+ue*we)*je,a[11]=(D*xe-N*Be-W*we)*je,a[12]=(S*nt-x*ut-P*pt)*je,a[13]=(c*ut-d*nt+m*pt)*je,a[14]=(Q*pe-X*Fe-ie*we)*je,a[15]=(N*Fe-D*pe+F*we)*je,a):null},h.as=sw,h.at=Kb,h.au=aw,h.av=function(){const a={},o=ze.$version;for(const c in ze.$root){const d=ze.$root[c];if(d.required){let m=null;m=c==="version"?o:d.type==="array"?[]:{},m!=null&&(a[c]=m)}}return a},h.aw=r_,h.ax=Es,h.ay=function(a){a=a.slice();const o=Object.create(null);for(let c=0;c<a.length;c++)o[a[c].id]=a[c];for(let c=0;c<a.length;c++)"ref"in a[c]&&(a[c]=_n(a[c],o[a[c].ref]));return a},h.az=function(a){if(a.type==="custom")return new XO(a);switch(a.type){case"background":return new WO(a);case"circle":return new RD(a);case"fill":return new YD(a);case"fill-extrusion":return new pO(a);case"heatmap":return new OD(a);case"hillshade":return new FD(a);case"line":return new xO(a);case"raster":return new ZO(a);case"symbol":return new E_(a)}},h.b=Gt,h.b0=function(a,o){return a[0]*o[0]+a[1]*o[1]+a[2]*o[2]+a[3]*o[3]},h.b1=_e,h.b2=kT,h.b3=MT,h.b4=function(a,o,c,d,m){var v,x=1/Math.tan(o/2);return a[0]=x/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(v=1/(d-m)),a[14]=2*m*d*v):(a[10]=-1,a[14]=-2*d),a},h.b5=function(a,o,c){var d=Math.sin(c),m=Math.cos(c),v=o[4],x=o[5],S=o[6],P=o[7],M=o[8],N=o[9],D=o[10],F=o[11];return o!==a&&(a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15]),a[4]=v*m+M*d,a[5]=x*m+N*d,a[6]=S*m+D*d,a[7]=P*m+F*d,a[8]=M*m-v*d,a[9]=N*m-x*d,a[10]=D*m-S*d,a[11]=F*m-P*d,a},h.b6=G,h.b7=re,h.b8=function(a){return a*Math.PI/180},h.b9=function(a,o){return a[0]=o[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=o[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},h.bA=Ya,h.ba=class extends te{},h.bb=nw,h.bc=sz,h.be=ri,h.bf=function(a,o){Yn.REGISTERED_PROTOCOLS[a]=o},h.bg=function(a){delete Yn.REGISTERED_PROTOCOLS[a]},h.bh=function(a,o){const c={};for(let m=0;m<a.length;m++){const v=o&&o[a[m].id]||Fm(a[m]);o&&(o[a[m].id]=v);let x=c[v];x||(x=c[v]=[]),x.push(a[m])}const d=[];for(const m in c)d.push(c[m]);return d},h.bi=lt,h.bj=RT,h.bk=OT,h.bl=dT,h.bm=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Dr/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const o=a.bucket.layers[0],c=o.layout,d=o._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new jn(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new jn(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new jn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:N}=a.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new jn(M),a.canonical),d["text-size"].possiblyEvaluate(new jn(N),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:N}=a.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new jn(M),a.canonical),d["icon-size"].possiblyEvaluate(new jn(N),a.canonical)]}const v=c.get("text-line-height")*Wr,x=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",S=c.get("text-keep-upright"),P=c.get("text-size");for(const M of a.bucket.features){const N=c.get("text-font").evaluate(M,{},a.canonical).join(","),D=P.evaluate(M,{},a.canonical),F=m.layoutTextSize.evaluate(M,{},a.canonical),W=m.layoutIconSize.evaluate(M,{},a.canonical),X={horizontal:{},vertical:void 0},Q=M.text;let ie,ue=[0,0];if(Q){const xe=Q.toString(),Fe=c.get("text-letter-spacing").evaluate(M,{},a.canonical)*Wr,Be=i_(xe)?Fe:0,st=c.get("text-anchor").evaluate(M,{},a.canonical),pt=ZT(o,M,a.canonical);if(!pt){const rt=c.get("text-radial-offset").evaluate(M,{},a.canonical);ue=rt?HT(st,[rt*Wr,ow]):c.get("text-offset").evaluate(M,{},a.canonical).map(je=>je*Wr)}let nt=x?"center":c.get("text-justify").evaluate(M,{},a.canonical);const tt=c.get("symbol-placement"),ut=tt==="point"?c.get("text-max-width").evaluate(M,{},a.canonical)*Wr:0,mt=()=>{a.bucket.allowVerticalPlacement&&Km(xe)&&(X.vertical=b_(Q,a.glyphMap,a.glyphPositions,a.imagePositions,N,ut,v,st,"left",Be,ue,h.ah.vertical,!0,tt,F,D))};if(!x&&pt){const rt=new Set;if(nt==="auto")for(let ht=0;ht<pt.values.length;ht+=2)rt.add(sw(pt.values[ht]));else rt.add(nt);let je=!1;for(const ht of rt)if(!X.horizontal[ht])if(je)X.horizontal[ht]=X.horizontal[0];else{const ct=b_(Q,a.glyphMap,a.glyphPositions,a.imagePositions,N,ut,v,"center",ht,Be,ue,h.ah.horizontal,!1,tt,F,D);ct&&(X.horizontal[ht]=ct,je=ct.positionedLines.length===1)}mt()}else{nt==="auto"&&(nt=sw(st));const rt=b_(Q,a.glyphMap,a.glyphPositions,a.imagePositions,N,ut,v,st,nt,Be,ue,h.ah.horizontal,!1,tt,F,D);rt&&(X.horizontal[nt]=rt),mt(),Km(xe)&&x&&S&&(X.vertical=b_(Q,a.glyphMap,a.glyphPositions,a.imagePositions,N,ut,v,st,nt,Be,ue,h.ah.vertical,!1,tt,F,D))}}let we=!1;if(M.icon&&M.icon.name){const xe=a.imageMap[M.icon.name];xe&&(ie=$O(a.imagePositions[M.icon.name],c.get("icon-offset").evaluate(M,{},a.canonical),c.get("icon-anchor").evaluate(M,{},a.canonical)),we=!!xe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=we:a.bucket.sdfIcons!==we&&wt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xe.pixelRatio!==a.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const pe=KT(X.horizontal)||X.vertical;a.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||ie)&&iz(a.bucket,M,X,ie,a.imageMap,m,F,W,ue,we,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},h.bn=Gb,h.bo=$b,h.bp=Ub,h.bq=Cc,h.br=Wb,h.bs=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},h.bt=function(a,o,c,d,m){return u(this,void 0,void 0,function*(){if(U())try{return yield dt(a,o,c,d,m)}catch{}return function(v,x,S,P,M){const N=v.width,D=v.height;St&&Pt||(St=new OffscreenCanvas(N,D),Pt=St.getContext("2d",{willReadFrequently:!0})),St.width=N,St.height=D,Pt.drawImage(v,0,0,N,D);const F=Pt.getImageData(x,S,P,M);return Pt.clearRect(0,0,N,D),F.data}(a,o,c,d,m)})},h.bu=NT,h.bv=y,h.bw=w,h.bx=iT,h.by=vd,h.bz=function(a){return a.message===Bt},h.c=yn,h.d=a=>u(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(o)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.e=fe,h.f=a=>new Promise((o,c)=>{const d=new Image;d.onload=()=>{o(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Xe})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(a)],{type:"image/png"});d.src=a.byteLength?URL.createObjectURL(m):Xe}),h.g=Jn,h.h=(a,o)=>Wa(fe(a,{type:"json"}),o),h.i=Je,h.j=Jt,h.k=en,h.l=(a,o)=>Wa(fe(a,{type:"arrayBuffer"}),o),h.m=Wa,h.n=function(a){return new Wb(a).readFields(DO,[])},h.o=lg,h.p=pT,h.q=g,h.r=J0,h.s=Cl,h.t=t_,h.u=ot,h.v=ze,h.w=wt,h.x=Jh,h.y=function([a,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:a*Math.cos(o)*Math.sin(c),y:a*Math.sin(o)*Math.sin(c),z:a*Math.cos(c)}},h.z=Ji}),i("worker",["./shared"],function(h){class u{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,H){for(const ae of q){this._layerConfigs[ae.id]=ae;const ge=this._layers[ae.id]=h.az(ae);ge._featureFilter=h.a6(ge.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of H)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const K=h.bh(Object.values(this._layerConfigs),this.keyCache);for(const ae of K){const ge=ae.map(Ne=>this._layers[Ne.id]),J=ge[0];if(J.visibility==="none")continue;const me=J.source||"";let ce=this.familiesBySource[me];ce||(ce=this.familiesBySource[me]={});const Se=J.sourceLayer||"_geojsonTileLayer";let Le=ce[Se];Le||(Le=ce[Se]=[]),Le.push(ge)}}}class y{constructor(q){const H={},K=[];for(const me in q){const ce=q[me],Se=H[me]={};for(const Le in ce){const Ne=ce[+Le];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const Oe={x:0,y:0,w:Ne.bitmap.width+2,h:Ne.bitmap.height+2};K.push(Oe),Se[Le]={rect:Oe,metrics:Ne.metrics}}}const{w:ae,h:ge}=h.p(K),J=new h.o({width:ae||1,height:ge||1});for(const me in q){const ce=q[me];for(const Se in ce){const Le=ce[+Se];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Ne=H[me][Se].rect;h.o.copy(Le.bitmap,J,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Le.bitmap)}}this.image=J,this.positions=H}}h.bi("GlyphAtlas",y);class w{constructor(q){this.tileID=new h.Q(q.tileID.overscaledZ,q.tileID.wrap,q.tileID.canonical.z,q.tileID.canonical.x,q.tileID.canonical.y),this.uid=q.uid,this.zoom=q.zoom,this.pixelRatio=q.pixelRatio,this.tileSize=q.tileSize,this.source=q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=q.showCollisionBoxes,this.collectResourceTiming=!!q.collectResourceTiming,this.returnDependencies=!!q.returnDependencies,this.promoteId=q.promoteId,this.inFlightDependencies=[]}parse(q,H,K,ae){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=q,this.collisionBoxArray=new h.a4;const ge=new h.bj(Object.keys(q.layers).sort()),J=new h.bk(this.tileID,this.promoteId);J.bucketLayerIDs=[];const me={},ce={featureIndex:J,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Se=H.familiesBySource[this.source];for(const Ut in Se){const Un=q.layers[Ut];if(!Un)continue;Un.version===1&&h.w(`Vector tile source "${this.source}" layer "${Ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ur=ge.encode(Ut),Ai=[];for(let ss=0;ss<Un.length;ss++){const sr=Un.feature(ss),lc=J.getId(sr,Ut);Ai.push({feature:sr,id:lc,index:ss,sourceLayerIndex:Ur})}for(const ss of Se[Ut]){const sr=ss[0];sr.source!==this.source&&h.w(`layer.source = ${sr.source} does not equal this.source = ${this.source}`),sr.minzoom&&this.zoom<Math.floor(sr.minzoom)||sr.maxzoom&&this.zoom>=sr.maxzoom||sr.visibility!=="none"&&(E(ss,this.zoom,K),(me[sr.id]=sr.createBucket({index:J.bucketLayerIDs.length,layers:ss,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ur,sourceID:this.source})).populate(Ai,ce,this.tileID.canonical),J.bucketLayerIDs.push(ss.map(lc=>lc.id)))}}const Le=h.aE(ce.glyphDependencies,Ut=>Object.keys(Ut).map(Number));this.inFlightDependencies.forEach(Ut=>Ut==null?void 0:Ut.abort()),this.inFlightDependencies=[];let Ne=Promise.resolve({});if(Object.keys(Le).length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Ne=ae.sendAsync({type:"GG",data:{stacks:Le,source:this.source,tileID:this.tileID,type:"glyphs"}},Ut)}const Oe=Object.keys(ce.iconDependencies);let gt=Promise.resolve({});if(Oe.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),gt=ae.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"}},Ut)}const xt=Object.keys(ce.patternDependencies);let Lt=Promise.resolve({});if(xt.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Lt=ae.sendAsync({type:"GI",data:{icons:xt,source:this.source,tileID:this.tileID,type:"patterns"}},Ut)}const[At,tn,wn]=yield Promise.all([Ne,gt,Lt]),On=new y(At),Nr=new h.bl(tn,wn);for(const Ut in me){const Un=me[Ut];Un instanceof h.a5?(E(Un.layers,this.zoom,K),h.bm({bucket:Un,glyphMap:At,glyphPositions:On.positions,imageMap:tn,imagePositions:Nr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Un.hasPattern&&(Un instanceof h.bn||Un instanceof h.bo||Un instanceof h.bp)&&(E(Un.layers,this.zoom,K),Un.addFeatures(ce,this.tileID.canonical,Nr.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(Ut=>!Ut.isEmpty()),featureIndex:J,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:On.image,imageAtlas:Nr,glyphMap:this.returnDependencies?At:null,iconMap:this.returnDependencies?tn:null,glyphPositions:this.returnDependencies?On.positions:null}})}}function E(oe,q,H){const K=new h.a8(q);for(const ae of oe)ae.recalculate(K,H)}class C{constructor(q,H,K){this.actor=q,this.layerIndex=H,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(q,H){return h._(this,void 0,void 0,function*(){const K=yield h.l(q.request,H);try{return{vectorTile:new h.bq.VectorTile(new h.br(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(ae){const ge=new Uint8Array(K.data);let J=`Unable to parse the tile at ${q.request.url}, `;throw J+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.messge}`,new Error(J)}})}loadTile(q){return h._(this,void 0,void 0,function*(){const H=q.uid,K=!!(q&&q.request&&q.request.collectResourceTiming)&&new h.bs(q.request),ae=new w(q);this.loading[H]=ae;const ge=new AbortController;ae.abort=ge;try{const J=yield this.loadVectorTile(q,ge);if(delete this.loading[H],!J)return null;const me=J.rawData,ce={};J.expires&&(ce.expires=J.expires),J.cacheControl&&(ce.cacheControl=J.cacheControl);const Se={};if(K){const Ne=K.finish();Ne&&(Se.resourceTiming=JSON.parse(JSON.stringify(Ne)))}ae.vectorTile=J.vectorTile;const Le=ae.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=ae,this.fetching[H]={rawTileData:me,cacheControl:ce,resourceTiming:Se};try{const Ne=yield Le;return h.e({rawTileData:me.slice(0)},Ne,ce,Se)}finally{delete this.fetching[H]}}catch(J){throw delete this.loading[H],ae.status="done",this.loaded[H]=ae,J}})}reloadTile(q){return h._(this,void 0,void 0,function*(){const H=q.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const K=this.loaded[H];if(K.showCollisionBoxes=q.showCollisionBoxes,K.status==="parsing"){const ae=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor);let ge;if(this.fetching[H]){const{rawTileData:J,cacheControl:me,resourceTiming:ce}=this.fetching[H];delete this.fetching[H],ge=h.e({rawTileData:J.slice(0)},ae,me,ce)}else ge=ae;return ge}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(q){return h._(this,void 0,void 0,function*(){const H=this.loading,K=q.uid;H&&H[K]&&H[K].abort&&(H[K].abort.abort(),delete H[K])})}removeTile(q){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[q.uid]&&delete this.loaded[q.uid]})}}class T{constructor(){this.loaded={}}loadTile(q){return h._(this,void 0,void 0,function*(){const{uid:H,encoding:K,rawImageData:ae,redFactor:ge,greenFactor:J,blueFactor:me,baseShift:ce}=q,Se=ae.width+2,Le=ae.height+2,Ne=h.b(ae)?new h.R({width:Se,height:Le},yield h.bt(ae,-1,-1,Se,Le)):ae,Oe=new h.bu(H,Ne,K,ge,J,me,ce);return this.loaded=this.loaded||{},this.loaded[H]=Oe,Oe})}removeTile(q){const H=this.loaded,K=q.uid;H&&H[K]&&delete H[K]}}function R(oe,q){if(oe.length!==0){O(oe[0],q);for(var H=1;H<oe.length;H++)O(oe[H],!q)}}function O(oe,q){for(var H=0,K=0,ae=0,ge=oe.length,J=ge-1;ae<ge;J=ae++){var me=(oe[ae][0]-oe[J][0])*(oe[J][1]+oe[ae][1]),ce=H+me;K+=Math.abs(H)>=Math.abs(me)?H-ce+me:me-ce+H,H=ce}H+K>=0!=!!q&&oe.reverse()}var B=h.bv(function oe(q,H){var K,ae=q&&q.type;if(ae==="FeatureCollection")for(K=0;K<q.features.length;K++)oe(q.features[K],H);else if(ae==="GeometryCollection")for(K=0;K<q.geometries.length;K++)oe(q.geometries[K],H);else if(ae==="Feature")oe(q.geometry,H);else if(ae==="Polygon")R(q.coordinates,H);else if(ae==="MultiPolygon")for(K=0;K<q.coordinates.length;K++)R(q.coordinates[K],H);return q});const Y=h.bq.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},U=h.bw,G=h.bq.VectorTileFeature,re=he;function he(oe,q){this.options=q||{},this.features=oe,this.length=oe.length}function _e(oe,q){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=q||4096}he.prototype.feature=function(oe){return new _e(this.features[oe],this.options.extent)},_e.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var q=0;q<oe.length;q++){for(var H=oe[q],K=[],ae=0;ae<H.length;ae++)K.push(new U(H[ae][0],H[ae][1]));this.geometry.push(K)}return this.geometry},_e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,q=1/0,H=-1/0,K=1/0,ae=-1/0,ge=0;ge<oe.length;ge++)for(var J=oe[ge],me=0;me<J.length;me++){var ce=J[me];q=Math.min(q,ce.x),H=Math.max(H,ce.x),K=Math.min(K,ce.y),ae=Math.max(ae,ce.y)}return[q,K,H,ae]},_e.prototype.toGeoJSON=G.prototype.toGeoJSON;var fe=h.bx,ye=re;function Pe(oe){var q=new fe;return function(H,K){for(var ae in H.layers)K.writeMessage(3,De,H.layers[ae])}(oe,q),q.finish()}function De(oe,q){var H;q.writeVarintField(15,oe.version||1),q.writeStringField(1,oe.name||""),q.writeVarintField(5,oe.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<oe.length;H++)K.feature=oe.feature(H),q.writeMessage(2,Ue,K);var ae=K.keys;for(H=0;H<ae.length;H++)q.writeStringField(3,ae[H]);var ge=K.values;for(H=0;H<ge.length;H++)q.writeMessage(4,vt,ge[H])}function Ue(oe,q){var H=oe.feature;H.id!==void 0&&q.writeVarintField(1,H.id),q.writeMessage(2,Ye,oe),q.writeVarintField(3,H.type),q.writeMessage(4,Je,H)}function Ye(oe,q){var H=oe.feature,K=oe.keys,ae=oe.values,ge=oe.keycache,J=oe.valuecache;for(var me in H.properties){var ce=H.properties[me],Se=ge[me];if(ce!==null){Se===void 0&&(K.push(me),ge[me]=Se=K.length-1),q.writeVarint(Se);var Le=typeof ce;Le!=="string"&&Le!=="boolean"&&Le!=="number"&&(ce=JSON.stringify(ce));var Ne=Le+":"+ce,Oe=J[Ne];Oe===void 0&&(ae.push(ce),J[Ne]=Oe=ae.length-1),q.writeVarint(Oe)}}}function wt(oe,q){return(q<<3)+(7&oe)}function Ae(oe){return oe<<1^oe>>31}function Je(oe,q){for(var H=oe.loadGeometry(),K=oe.type,ae=0,ge=0,J=H.length,me=0;me<J;me++){var ce=H[me],Se=1;K===1&&(Se=ce.length),q.writeVarint(wt(1,Se));for(var Le=K===3?ce.length-1:ce.length,Ne=0;Ne<Le;Ne++){Ne===1&&K!==1&&q.writeVarint(wt(2,Le-1));var Oe=ce[Ne].x-ae,gt=ce[Ne].y-ge;q.writeVarint(Ae(Oe)),q.writeVarint(Ae(gt)),ae+=Oe,ge+=gt}K===3&&q.writeVarint(wt(7,1))}}function vt(oe,q){var H=typeof oe;H==="string"?q.writeStringField(1,oe):H==="boolean"?q.writeBooleanField(7,oe):H==="number"&&(oe%1!=0?q.writeDoubleField(3,oe):oe<0?q.writeSVarintField(6,oe):q.writeVarintField(5,oe))}$.exports=Pe,$.exports.fromVectorTileJs=Pe,$.exports.fromGeojsonVt=function(oe,q){q=q||{};var H={};for(var K in oe)H[K]=new ye(oe[K].features,q),H[K].name=K,H[K].version=q.version,H[K].extent=q.extent;return Pe({layers:H})},$.exports.GeoJSONWrapper=ye;var Gt=h.bv($.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},dt=Math.fround||(St=new Float32Array(1),oe=>(St[0]=+oe,St[0]));var St;const Pt=3,Bt=5,yn=6;class Yn{constructor(q){this.options=Object.assign(Object.create(Xe),q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(q){const{log:H,minZoom:K,maxZoom:ae}=this.options;H&&console.time("total time");const ge=`prepare ${q.length} points`;H&&console.time(ge),this.points=q;const J=[];for(let ce=0;ce<q.length;ce++){const Se=q[ce];if(!Se.geometry)continue;const[Le,Ne]=Se.geometry.coordinates,Oe=dt(ri(Le)),gt=dt(Es(Ne));J.push(Oe,gt,1/0,ce,-1,1),this.options.reduce&&J.push(0)}let me=this.trees[ae+1]=this._createTree(J);H&&console.timeEnd(ge);for(let ce=ae;ce>=K;ce--){const Se=+Date.now();me=this.trees[ce]=this._createTree(this._cluster(me,ce)),H&&console.log("z%d: %d clusters in %dms",ce,me.numItems,+Date.now()-Se)}return H&&console.timeEnd("total time"),this}getClusters(q,H){let K=((q[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,q[1]));let ge=q[2]===180?180:((q[2]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)K=-180,ge=180;else if(K>ge){const Ne=this.getClusters([K,ae,180,J],H),Oe=this.getClusters([-180,ae,ge,J],H);return Ne.concat(Oe)}const me=this.trees[this._limitZoom(H)],ce=me.range(ri(K),Es(J),ri(ge),Es(ae)),Se=me.data,Le=[];for(const Ne of ce){const Oe=this.stride*Ne;Le.push(Se[Oe+Bt]>1?Jn(Se,Oe,this.clusterProps):this.points[Se[Oe+Pt]])}return Le}getChildren(q){const H=this._getOriginId(q),K=this._getOriginZoom(q),ae="No cluster with the specified id.",ge=this.trees[K];if(!ge)throw new Error(ae);const J=ge.data;if(H*this.stride>=J.length)throw new Error(ae);const me=this.options.radius/(this.options.extent*Math.pow(2,K-1)),ce=ge.within(J[H*this.stride],J[H*this.stride+1],me),Se=[];for(const Le of ce){const Ne=Le*this.stride;J[Ne+4]===q&&Se.push(J[Ne+Bt]>1?Jn(J,Ne,this.clusterProps):this.points[J[Ne+Pt]])}if(Se.length===0)throw new Error(ae);return Se}getLeaves(q,H,K){const ae=[];return this._appendLeaves(ae,q,H=H||10,K=K||0,0),ae}getTile(q,H,K){const ae=this.trees[this._limitZoom(q)],ge=Math.pow(2,q),{extent:J,radius:me}=this.options,ce=me/J,Se=(K-ce)/ge,Le=(K+1+ce)/ge,Ne={features:[]};return this._addTileFeatures(ae.range((H-ce)/ge,Se,(H+1+ce)/ge,Le),ae.data,H,K,ge,Ne),H===0&&this._addTileFeatures(ae.range(1-ce/ge,Se,1,Le),ae.data,ge,K,ge,Ne),H===ge-1&&this._addTileFeatures(ae.range(0,Se,ce/ge,Le),ae.data,-1,K,ge,Ne),Ne.features.length?Ne:null}getClusterExpansionZoom(q){let H=this._getOriginZoom(q)-1;for(;H<=this.options.maxZoom;){const K=this.getChildren(q);if(H++,K.length!==1)break;q=K[0].properties.cluster_id}return H}_appendLeaves(q,H,K,ae,ge){const J=this.getChildren(H);for(const me of J){const ce=me.properties;if(ce&&ce.cluster?ge+ce.point_count<=ae?ge+=ce.point_count:ge=this._appendLeaves(q,ce.cluster_id,K,ae,ge):ge<ae?ge++:q.push(me),q.length===K)break}return ge}_createTree(q){const H=new h.au(q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<q.length;K+=this.stride)H.add(q[K],q[K+1]);return H.finish(),H.data=q,H}_addTileFeatures(q,H,K,ae,ge,J){for(const me of q){const ce=me*this.stride,Se=H[ce+Bt]>1;let Le,Ne,Oe;if(Se)Le=vr(H,ce,this.clusterProps),Ne=H[ce],Oe=H[ce+1];else{const Lt=this.points[H[ce+Pt]];Le=Lt.properties;const[At,tn]=Lt.geometry.coordinates;Ne=ri(At),Oe=Es(tn)}const gt={type:1,geometry:[[Math.round(this.options.extent*(Ne*ge-K)),Math.round(this.options.extent*(Oe*ge-ae))]],tags:Le};let xt;xt=Se||this.options.generateId?H[ce+Pt]:this.points[H[ce+Pt]].id,xt!==void 0&&(gt.id=xt),J.features.push(gt)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,H){const{radius:K,extent:ae,reduce:ge,minPoints:J}=this.options,me=K/(ae*Math.pow(2,H)),ce=q.data,Se=[],Le=this.stride;for(let Ne=0;Ne<ce.length;Ne+=Le){if(ce[Ne+2]<=H)continue;ce[Ne+2]=H;const Oe=ce[Ne],gt=ce[Ne+1],xt=q.within(ce[Ne],ce[Ne+1],me),Lt=ce[Ne+Bt];let At=Lt;for(const tn of xt){const wn=tn*Le;ce[wn+2]>H&&(At+=ce[wn+Bt])}if(At>Lt&&At>=J){let tn,wn=Oe*Lt,On=gt*Lt,Nr=-1;const Ut=((Ne/Le|0)<<5)+(H+1)+this.points.length;for(const Un of xt){const Ur=Un*Le;if(ce[Ur+2]<=H)continue;ce[Ur+2]=H;const Ai=ce[Ur+Bt];wn+=ce[Ur]*Ai,On+=ce[Ur+1]*Ai,ce[Ur+4]=Ut,ge&&(tn||(tn=this._map(ce,Ne,!0),Nr=this.clusterProps.length,this.clusterProps.push(tn)),ge(tn,this._map(ce,Ur)))}ce[Ne+4]=Ut,Se.push(wn/At,On/At,1/0,Ut,-1,At),ge&&Se.push(Nr)}else{for(let tn=0;tn<Le;tn++)Se.push(ce[Ne+tn]);if(At>1)for(const tn of xt){const wn=tn*Le;if(!(ce[wn+2]<=H)){ce[wn+2]=H;for(let On=0;On<Le;On++)Se.push(ce[wn+On])}}}}return Se}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,H,K){if(q[H+Bt]>1){const J=this.clusterProps[q[H+yn]];return K?Object.assign({},J):J}const ae=this.points[q[H+Pt]].properties,ge=this.options.map(ae);return K&&ge===ae?Object.assign({},ge):ge}}function Jn(oe,q,H){return{type:"Feature",id:oe[q+Pt],properties:vr(oe,q,H),geometry:{type:"Point",coordinates:[(K=oe[q],360*(K-.5)),Wa(oe[q+1])]}};var K}function vr(oe,q,H){const K=oe[q+Bt],ae=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,ge=oe[q+yn],J=ge===-1?{}:Object.assign({},H[ge]);return Object.assign(J,{cluster:!0,cluster_id:oe[q+Pt],point_count:K,point_count_abbreviated:ae})}function ri(oe){return oe/360+.5}function Es(oe){const q=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return H<0?0:H>1?1:H}function Wa(oe){const q=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function Cl(oe,q,H,K){for(var ae,ge=K,J=H-q>>1,me=H-q,ce=oe[q],Se=oe[q+1],Le=oe[H],Ne=oe[H+1],Oe=q+3;Oe<H;Oe+=3){var gt=ac(oe[Oe],oe[Oe+1],ce,Se,Le,Ne);if(gt>ge)ae=Oe,ge=gt;else if(gt===ge){var xt=Math.abs(Oe-J);xt<me&&(ae=Oe,me=xt)}}ge>K&&(ae-q>3&&Cl(oe,q,ae,K),oe[ae+2]=ge,H-ae>3&&Cl(oe,ae,H,K))}function ac(oe,q,H,K,ae,ge){var J=ae-H,me=ge-K;if(J!==0||me!==0){var ce=((oe-H)*J+(q-K)*me)/(J*J+me*me);ce>1?(H=ae,K=ge):ce>0&&(H+=J*ce,K+=me*ce)}return(J=oe-H)*J+(me=q-K)*me}function vi(oe,q,H,K){var ae={id:oe===void 0?null:oe,type:q,geometry:H,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var J=ge.geometry,me=ge.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")en(ge,J);else if(me==="Polygon"||me==="MultiLineString")for(var ce=0;ce<J.length;ce++)en(ge,J[ce]);else if(me==="MultiPolygon")for(ce=0;ce<J.length;ce++)for(var Se=0;Se<J[ce].length;Se++)en(ge,J[ce][Se])}(ae),ae}function en(oe,q){for(var H=0;H<q.length;H+=3)oe.minX=Math.min(oe.minX,q[H]),oe.minY=Math.min(oe.minY,q[H+1]),oe.maxX=Math.max(oe.maxX,q[H]),oe.maxY=Math.max(oe.maxY,q[H+1])}function Jt(oe,q,H,K){if(q.geometry){var ae=q.geometry.coordinates,ge=q.geometry.type,J=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),me=[],ce=q.id;if(H.promoteId?ce=q.properties[H.promoteId]:H.generateId&&(ce=K||0),ge==="Point")Wt(ae,me);else if(ge==="MultiPoint")for(var Se=0;Se<ae.length;Se++)Wt(ae[Se],me);else if(ge==="LineString")ze(ae,me,J,!1);else if(ge==="MultiLineString"){if(H.lineMetrics){for(Se=0;Se<ae.length;Se++)ze(ae[Se],me=[],J,!1),oe.push(vi(ce,"LineString",me,q.properties));return}Vr(ae,me,J,!1)}else if(ge==="Polygon")Vr(ae,me,J,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(Se=0;Se<q.geometry.geometries.length;Se++)Jt(oe,{id:ce,geometry:q.geometry.geometries[Se],properties:q.properties},H,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<ae.length;Se++){var Le=[];Vr(ae[Se],Le,J,!0),me.push(Le)}}oe.push(vi(ce,ge,me,q.properties))}}function Wt(oe,q){q.push(_n(oe[0])),q.push(Zt(oe[1])),q.push(0)}function ze(oe,q,H,K){for(var ae,ge,J=0,me=0;me<oe.length;me++){var ce=_n(oe[me][0]),Se=Zt(oe[me][1]);q.push(ce),q.push(Se),q.push(0),me>0&&(J+=K?(ae*Se-ce*ge)/2:Math.sqrt(Math.pow(ce-ae,2)+Math.pow(Se-ge,2))),ae=ce,ge=Se}var Le=q.length-3;q[2]=1,Cl(q,0,Le,H),q[Le+2]=1,q.size=Math.abs(J),q.start=0,q.end=q.size}function Vr(oe,q,H,K){for(var ae=0;ae<oe.length;ae++){var ge=[];ze(oe[ae],ge,H,K),q.push(ge)}}function _n(oe){return oe/360+.5}function Zt(oe){var q=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return H<0?0:H>1?1:H}function vn(oe,q,H,K,ae,ge,J,me){if(K/=q,ge>=(H/=q)&&J<K)return oe;if(J<H||ge>=K)return null;for(var ce=[],Se=0;Se<oe.length;Se++){var Le=oe[Se],Ne=Le.geometry,Oe=Le.type,gt=ae===0?Le.minX:Le.minY,xt=ae===0?Le.maxX:Le.maxY;if(gt>=H&&xt<K)ce.push(Le);else if(!(xt<H||gt>=K)){var Lt=[];if(Oe==="Point"||Oe==="MultiPoint")Li(Ne,Lt,H,K,ae);else if(Oe==="LineString")Do(Ne,Lt,H,K,ae,!1,me.lineMetrics);else if(Oe==="MultiLineString")ia(Ne,Lt,H,K,ae,!1);else if(Oe==="Polygon")ia(Ne,Lt,H,K,ae,!0);else if(Oe==="MultiPolygon")for(var At=0;At<Ne.length;At++){var tn=[];ia(Ne[At],tn,H,K,ae,!0),tn.length&&Lt.push(tn)}if(Lt.length){if(me.lineMetrics&&Oe==="LineString"){for(At=0;At<Lt.length;At++)ce.push(vi(Le.id,Oe,Lt[At],Le.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(Lt.length===1?(Oe="LineString",Lt=Lt[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=Lt.length===3?"Point":"MultiPoint"),ce.push(vi(Le.id,Oe,Lt,Le.tags))}}}return ce.length?ce:null}function Li(oe,q,H,K,ae){for(var ge=0;ge<oe.length;ge+=3){var J=oe[ge+ae];J>=H&&J<=K&&(q.push(oe[ge]),q.push(oe[ge+1]),q.push(oe[ge+2]))}}function Do(oe,q,H,K,ae,ge,J){for(var me,ce,Se=ra(oe),Le=ae===0?Yi:cu,Ne=oe.start,Oe=0;Oe<oe.length-3;Oe+=3){var gt=oe[Oe],xt=oe[Oe+1],Lt=oe[Oe+2],At=oe[Oe+3],tn=oe[Oe+4],wn=ae===0?gt:xt,On=ae===0?At:tn,Nr=!1;J&&(me=Math.sqrt(Math.pow(gt-At,2)+Math.pow(xt-tn,2))),wn<H?On>H&&(ce=Le(Se,gt,xt,At,tn,H),J&&(Se.start=Ne+me*ce)):wn>K?On<K&&(ce=Le(Se,gt,xt,At,tn,K),J&&(Se.start=Ne+me*ce)):Cs(Se,gt,xt,Lt),On<H&&wn>=H&&(ce=Le(Se,gt,xt,At,tn,H),Nr=!0),On>K&&wn<=K&&(ce=Le(Se,gt,xt,At,tn,K),Nr=!0),!ge&&Nr&&(J&&(Se.end=Ne+me*ce),q.push(Se),Se=ra(oe)),J&&(Ne+=me)}var Ut=oe.length-3;gt=oe[Ut],xt=oe[Ut+1],Lt=oe[Ut+2],(wn=ae===0?gt:xt)>=H&&wn<=K&&Cs(Se,gt,xt,Lt),Ut=Se.length-3,ge&&Ut>=3&&(Se[Ut]!==Se[0]||Se[Ut+1]!==Se[1])&&Cs(Se,Se[0],Se[1],Se[2]),Se.length&&q.push(Se)}function ra(oe){var q=[];return q.size=oe.size,q.start=oe.start,q.end=oe.end,q}function ia(oe,q,H,K,ae,ge){for(var J=0;J<oe.length;J++)Do(oe[J],q,H,K,ae,ge,!1)}function Cs(oe,q,H,K){oe.push(q),oe.push(H),oe.push(K)}function Yi(oe,q,H,K,ae,ge){var J=(ge-q)/(K-q);return oe.push(ge),oe.push(H+(ae-H)*J),oe.push(1),J}function cu(oe,q,H,K,ae,ge){var J=(ge-H)/(ae-H);return oe.push(q+(K-q)*J),oe.push(ge),oe.push(1),J}function Ze(oe,q){for(var H=[],K=0;K<oe.length;K++){var ae,ge=oe[K],J=ge.type;if(J==="Point"||J==="MultiPoint"||J==="LineString")ae=ii(ge.geometry,q);else if(J==="MultiLineString"||J==="Polygon"){ae=[];for(var me=0;me<ge.geometry.length;me++)ae.push(ii(ge.geometry[me],q))}else if(J==="MultiPolygon")for(ae=[],me=0;me<ge.geometry.length;me++){for(var ce=[],Se=0;Se<ge.geometry[me].length;Se++)ce.push(ii(ge.geometry[me][Se],q));ae.push(ce)}H.push(vi(ge.id,J,ae,ge.tags))}return H}function ii(oe,q){var H=[];H.size=oe.size,oe.start!==void 0&&(H.start=oe.start,H.end=oe.end);for(var K=0;K<oe.length;K+=3)H.push(oe[K]+q,oe[K+1],oe[K+2]);return H}function Mi(oe,q){if(oe.transformed)return oe;var H,K,ae,ge=1<<oe.z,J=oe.x,me=oe.y;for(H=0;H<oe.features.length;H++){var ce=oe.features[H],Se=ce.geometry,Le=ce.type;if(ce.geometry=[],Le===1)for(K=0;K<Se.length;K+=2)ce.geometry.push(Il(Se[K],Se[K+1],q,ge,J,me));else for(K=0;K<Se.length;K++){var Ne=[];for(ae=0;ae<Se[K].length;ae+=2)Ne.push(Il(Se[K][ae],Se[K][ae+1],q,ge,J,me));ce.geometry.push(Ne)}}return oe.transformed=!0,oe}function Il(oe,q,H,K,ae,ge){return[Math.round(H*(oe*K-ae)),Math.round(H*(q*K-ge))]}function Ha(oe,q,H,K,ae){for(var ge=q===ae.maxZoom?0:ae.tolerance/((1<<q)*ae.extent),J={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:H,y:K,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<oe.length;me++){J.numFeatures++,Ge(J,oe[me],ge,ae);var ce=oe[me].minX,Se=oe[me].minY,Le=oe[me].maxX,Ne=oe[me].maxY;ce<J.minX&&(J.minX=ce),Se<J.minY&&(J.minY=Se),Le>J.maxX&&(J.maxX=Le),Ne>J.maxY&&(J.maxY=Ne)}return J}function Ge(oe,q,H,K){var ae=q.geometry,ge=q.type,J=[];if(ge==="Point"||ge==="MultiPoint")for(var me=0;me<ae.length;me+=3)J.push(ae[me]),J.push(ae[me+1]),oe.numPoints++,oe.numSimplified++;else if(ge==="LineString")Nt(J,ae,oe,H,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(me=0;me<ae.length;me++)Nt(J,ae[me],oe,H,ge==="Polygon",me===0);else if(ge==="MultiPolygon")for(var ce=0;ce<ae.length;ce++){var Se=ae[ce];for(me=0;me<Se.length;me++)Nt(J,Se[me],oe,H,!0,me===0)}if(J.length){var Le=q.tags||null;if(ge==="LineString"&&K.lineMetrics){for(var Ne in Le={},q.tags)Le[Ne]=q.tags[Ne];Le.mapbox_clip_start=ae.start/ae.size,Le.mapbox_clip_end=ae.end/ae.size}var Oe={geometry:J,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Le};q.id!==null&&(Oe.id=q.id),oe.features.push(Oe)}}function Nt(oe,q,H,K,ae,ge){var J=K*K;if(K>0&&q.size<(ae?J:K))H.numPoints+=q.length/3;else{for(var me=[],ce=0;ce<q.length;ce+=3)(K===0||q[ce+2]>J)&&(H.numSimplified++,me.push(q[ce]),me.push(q[ce+1])),H.numPoints++;ae&&function(Se,Le){for(var Ne=0,Oe=0,gt=Se.length,xt=gt-2;Oe<gt;xt=Oe,Oe+=2)Ne+=(Se[Oe]-Se[xt])*(Se[Oe+1]+Se[xt+1]);if(Ne>0===Le)for(Oe=0,gt=Se.length;Oe<gt/2;Oe+=2){var Lt=Se[Oe],At=Se[Oe+1];Se[Oe]=Se[gt-2-Oe],Se[Oe+1]=Se[gt-1-Oe],Se[gt-2-Oe]=Lt,Se[gt-1-Oe]=At}}(me,ge),oe.push(me)}}function Mt(oe,q){var H=(q=this.options=function(ae,ge){for(var J in ge)ae[J]=ge[J];return ae}(Object.create(this.options),q)).debug;if(H&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");var K=function(ae,ge){var J=[];if(ae.type==="FeatureCollection")for(var me=0;me<ae.features.length;me++)Jt(J,ae.features[me],ge,me);else Jt(J,ae.type==="Feature"?ae:{geometry:ae},ge);return J}(oe,q);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),K=function(ae,ge){var J=ge.buffer/ge.extent,me=ae,ce=vn(ae,1,-1-J,J,0,-1,2,ge),Se=vn(ae,1,1-J,2+J,0,-1,2,ge);return(ce||Se)&&(me=vn(ae,1,-J,1+J,0,-1,2,ge)||[],ce&&(me=Ze(ce,1).concat(me)),Se&&(me=me.concat(Ze(Se,-1)))),me}(K,q),K.length&&this.splitTile(K,0,0,0),H&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xi(oe,q,H){return 32*((1<<oe)*H+q)+oe}function bi(oe,q){return q?oe.properties[q]:oe.id}function Rt(oe,q){if(oe==null)return!0;if(oe.type==="Feature")return bi(oe,q)!=null;if(oe.type==="FeatureCollection"){const H=new Set;for(const K of oe.features){const ae=bi(K,q);if(ae==null||H.has(ae))return!1;H.add(ae)}return!0}return!1}function Is(oe,q){const H=new Map;if(oe!=null)if(oe.type==="Feature")H.set(bi(oe,q),oe);else for(const K of oe.features)H.set(bi(K,q),K);return H}Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(oe,q,H,K,ae,ge,J){for(var me=[oe,q,H,K],ce=this.options,Se=ce.debug;me.length;){K=me.pop(),H=me.pop(),q=me.pop(),oe=me.pop();var Le=1<<q,Ne=xi(q,H,K),Oe=this.tiles[Ne];if(!Oe&&(Se>1&&console.time("creation"),Oe=this.tiles[Ne]=Ha(oe,q,H,K,ce),this.tileCoords.push({z:q,x:H,y:K}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,H,K,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var gt="z"+q;this.stats[gt]=(this.stats[gt]||0)+1,this.total++}if(Oe.source=oe,ae){if(q===ce.maxZoom||q===ae)continue;var xt=1<<ae-q;if(H!==Math.floor(ge/xt)||K!==Math.floor(J/xt))continue}else if(q===ce.indexMaxZoom||Oe.numPoints<=ce.indexMaxPoints)continue;if(Oe.source=null,oe.length!==0){Se>1&&console.time("clipping");var Lt,At,tn,wn,On,Nr,Ut=.5*ce.buffer/ce.extent,Un=.5-Ut,Ur=.5+Ut,Ai=1+Ut;Lt=At=tn=wn=null,On=vn(oe,Le,H-Ut,H+Ur,0,Oe.minX,Oe.maxX,ce),Nr=vn(oe,Le,H+Un,H+Ai,0,Oe.minX,Oe.maxX,ce),oe=null,On&&(Lt=vn(On,Le,K-Ut,K+Ur,1,Oe.minY,Oe.maxY,ce),At=vn(On,Le,K+Un,K+Ai,1,Oe.minY,Oe.maxY,ce),On=null),Nr&&(tn=vn(Nr,Le,K-Ut,K+Ur,1,Oe.minY,Oe.maxY,ce),wn=vn(Nr,Le,K+Un,K+Ai,1,Oe.minY,Oe.maxY,ce),Nr=null),Se>1&&console.timeEnd("clipping"),me.push(Lt||[],q+1,2*H,2*K),me.push(At||[],q+1,2*H,2*K+1),me.push(tn||[],q+1,2*H+1,2*K),me.push(wn||[],q+1,2*H+1,2*K+1)}}},Mt.prototype.getTile=function(oe,q,H){var K=this.options,ae=K.extent,ge=K.debug;if(oe<0||oe>24)return null;var J=1<<oe,me=xi(oe,q=(q%J+J)%J,H);if(this.tiles[me])return Mi(this.tiles[me],ae);ge>1&&console.log("drilling down to z%d-%d-%d",oe,q,H);for(var ce,Se=oe,Le=q,Ne=H;!ce&&Se>0;)Se--,Le=Math.floor(Le/2),Ne=Math.floor(Ne/2),ce=this.tiles[xi(Se,Le,Ne)];return ce&&ce.source?(ge>1&&console.log("found parent tile z%d-%d-%d",Se,Le,Ne),ge>1&&console.time("drilling down"),this.splitTile(ce.source,Se,Le,Ne,oe,q,H),ge>1&&console.timeEnd("drilling down"),this.tiles[me]?Mi(this.tiles[me],ae):null):null};class oa extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(q,H){return h._(this,void 0,void 0,function*(){const K=q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ae=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ae)return null;const ge=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.W,this.length=me.length,this._features=me}feature(me){return new class{constructor(ce){this._feature=ce,this.extent=h.W,this.type=ce.type,this.properties=ce.tags,"id"in ce&&!isNaN(ce.id)&&(this.id=parseInt(ce.id,10))}loadGeometry(){if(this._feature.type===1){const ce=[];for(const Se of this._feature.geometry)ce.push([new h.P(Se[0],Se[1])]);return ce}{const ce=[];for(const Se of this._feature.geometry){const Le=[];for(const Ne of Se)Le.push(new h.P(Ne[0],Ne[1]));ce.push(Le)}return ce}}toGeoJSON(ce,Se,Le){return Y.call(this,ce,Se,Le)}}(this._features[me])}}(ae.features);let J=Gt(ge);return J.byteOffset===0&&J.byteLength===J.buffer.byteLength||(J=new Uint8Array(J)),{vectorTile:ge,rawData:J.buffer}})}loadData(q){return h._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();const K=!!(q&&q.request&&q.request.collectResourceTiming)&&new h.bs(q.request);this._pendingRequest=new AbortController;try{let ae=yield this.loadGeoJSON(q,this._pendingRequest);if(delete this._pendingRequest,typeof ae!="object")throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(B(ae,!0),q.filter){const J=h.by(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));ae={type:"FeatureCollection",features:ae.features.filter(ce=>J.value.evaluate({zoom:0},ce))}}this._geoJSONIndex=q.cluster?new Yn(function({superclusterOptions:J,clusterProperties:me}){if(!me||!J)return J;const ce={},Se={},Le={accumulated:null,zoom:0},Ne={properties:null},Oe=Object.keys(me);for(const gt of Oe){const[xt,Lt]=me[gt],At=h.by(Lt),tn=h.by(typeof xt=="string"?[xt,["accumulated"],["get",gt]]:xt);ce[gt]=At.value,Se[gt]=tn.value}return J.map=gt=>{Ne.properties=gt;const xt={};for(const Lt of Oe)xt[Lt]=ce[Lt].evaluate(Le,Ne);return xt},J.reduce=(gt,xt)=>{Ne.properties=xt;for(const Lt of Oe)Le.accumulated=gt[Lt],gt[Lt]=Se[Lt].evaluate(Le,Ne)},J}(q)).load(ae.features):function(J,me){return new Mt(J,me)}(ae,q.geojsonVtOptions),this.loaded={};const ge={};if(K){const J=K.finish();J&&(ge.resourceTiming={},ge.resourceTiming[q.source]=JSON.parse(JSON.stringify(J)))}return ge}catch(ae){if(delete this._pendingRequest,h.bz(ae))return{abandoned:!0};throw ae}})}reloadTile(q){const H=this.loaded;return H&&H[q.uid]?super.reloadTile(q):this.loadTile(q)}loadGeoJSON(q,H){return h._(this,void 0,void 0,function*(){const{promoteId:K}=q;if(q.request){const ae=yield h.h(q.request,H);return this._dataUpdateable=Rt(ae.data,K)?Is(ae.data,K):void 0,ae.data}if(typeof q.data=="string")try{const ae=JSON.parse(q.data);return this._dataUpdateable=Rt(ae,K)?Is(ae,K):void 0,ae}catch{throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`)}if(!q.dataDiff)throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${q.source}`);return function(ae,ge,J){var me,ce,Se,Le;if(ge.removeAll&&ae.clear(),ge.remove)for(const Ne of ge.remove)ae.delete(Ne);if(ge.add)for(const Ne of ge.add){const Oe=bi(Ne,J);Oe!=null&&ae.set(Oe,Ne)}if(ge.update)for(const Ne of ge.update){let Oe=ae.get(Ne.id);if(Oe==null)continue;const gt=!Ne.removeAllProperties&&(((me=Ne.removeProperties)===null||me===void 0?void 0:me.length)>0||((ce=Ne.addOrUpdateProperties)===null||ce===void 0?void 0:ce.length)>0);if((Ne.newGeometry||Ne.removeAllProperties||gt)&&(Oe=Object.assign({},Oe),ae.set(Ne.id,Oe),gt&&(Oe.properties=Object.assign({},Oe.properties))),Ne.newGeometry&&(Oe.geometry=Ne.newGeometry),Ne.removeAllProperties)Oe.properties={};else if(((Se=Ne.removeProperties)===null||Se===void 0?void 0:Se.length)>0)for(const xt of Ne.removeProperties)Object.prototype.hasOwnProperty.call(Oe.properties,xt)&&delete Oe.properties[xt];if(((Le=Ne.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0)for(const{key:xt,value:Lt}of Ne.addOrUpdateProperties)Oe.properties[xt]=Lt}}(this._dataUpdateable,q.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(q){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(q){return this._geoJSONIndex.getClusterExpansionZoom(q.clusterId)}getClusterChildren(q){return this._geoJSONIndex.getChildren(q.clusterId)}getClusterLeaves(q){return this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset)}}class kr{constructor(q){this.self=q,this.actor=new h.C(q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,K)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=K},this.self.addProtocol=h.bf,this.self.removeProtocol=h.bg,this.self.registerRTLTextPlugin=H=>{if(h.bA.isParsed())throw new Error("RTL text plugin already registered.");h.bA.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,K)=>this._getDEMWorkerSource(H,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(H,K)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(H,K)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(H,K)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(H,K)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("LT",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(H,K)=>this._getWorkerSource(H,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(H,K)=>this._getWorkerSource(H,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(H,K)=>this._getWorkerSource(H,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(H,K)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][K.type]||!this.workerSources[H][K.type][K.source])return;const ae=this.workerSources[H][K.type][K.source];delete this.workerSources[H][K.type][K.source],ae.removeSource!==void 0&&ae.removeSource(K)})),this.actor.registerMessageHandler("RM",H=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,K)=>h._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(H,K)=>this._syncRTLPluginState(H,K)),this.actor.registerMessageHandler("IS",(H,K)=>h._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(H,K)=>this._setImages(H,K)),this.actor.registerMessageHandler("UL",(H,K)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(H,K)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(K)}))}_setImages(q,H){return h._(this,void 0,void 0,function*(){this.availableImages[q]=H;for(const K in this.workerSources[q]){const ae=this.workerSources[q][K];for(const ge in ae)ae[ge].availableImages=H}})}_syncRTLPluginState(q,H){return h._(this,void 0,void 0,function*(){if(h.bA.isParsed())return h.bA.getState();if(H.pluginStatus!=="loading")return h.bA.setState(H),H;const K=H.pluginURL;if(this.self.importScripts(K),h.bA.isParsed()){const ae={pluginStatus:"loaded",pluginURL:K};return h.bA.setState(ae),ae}throw h.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(q){let H=this.availableImages[q];return H||(H=[]),H}_getLayerIndex(q){let H=this.layerIndexes[q];return H||(H=this.layerIndexes[q]=new u),H}_getWorkerSource(q,H,K){if(this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][H]||(this.workerSources[q][H]={}),!this.workerSources[q][H][K]){const ae={sendAsync:(ge,J)=>(ge.targetMapId=q,this.actor.sendAsync(ge,J))};switch(H){case"vector":this.workerSources[q][H][K]=new C(ae,this._getLayerIndex(q),this._getAvailableImages(q));break;case"geojson":this.workerSources[q][H][K]=new oa(ae,this._getLayerIndex(q),this._getAvailableImages(q));break;default:this.workerSources[q][H][K]=new this.externalWorkerSourceTypes[H](ae,this._getLayerIndex(q),this._getAvailableImages(q))}}return this.workerSources[q][H][K]}_getDEMWorkerSource(q,H){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][H]||(this.demWorkerSources[q][H]=new T),this.demWorkerSources[q][H]}}return h.i(self)&&(self.worker=new kr(self)),kr}),i("index",["exports","./shared"],function(h,u){var y="4.2.0";let w,E;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((s,p)=>{const f=requestAnimationFrame(s);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),p(u.c())})}),getImageData(_,s=0){return this.getImageCanvasContext(_).getImageData(-s,-s,_.width+2*s,_.height+2*s)},getImageCanvasContext(_){const s=window.document.createElement("canvas"),p=s.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return s.width=_.width,s.height=_.height,p.drawImage(_,0,0,_.width,_.height),p},resolveURL:_=>(w||(w=document.createElement("a")),w.href=_,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class T{static testProp(s){if(!T.docStyle)return s[0];for(let p=0;p<s.length;p++)if(s[p]in T.docStyle)return s[p];return s[0]}static create(s,p,f){const g=window.document.createElement(s);return p!==void 0&&(g.className=p),f&&f.appendChild(g),g}static createNS(s,p){return window.document.createElementNS(s,p)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(s,p){s.style[T.transformProp]=p}static addEventListener(s,p,f,g={}){s.addEventListener(p,f,"passive"in g?g:g.capture)}static removeEventListener(s,p,f,g={}){s.removeEventListener(p,f,"passive"in g?g:g.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(s){const p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}static getPoint(s,p,f){const g=p.boundingClientRect;return new u.P((f.clientX-g.left)/p.x-s.clientLeft,(f.clientY-g.top)/p.y-s.clientTop)}static mousePos(s,p){const f=T.getScale(s);return T.getPoint(s,f,p)}static touchPos(s,p){const f=[],g=T.getScale(s);for(let b=0;b<p.length;b++)f.push(T.getPoint(s,g,p[b]));return f}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(_){!Y&&B&&($?U(_):O=_)}};let O,B,Y=!1,$=!1;function U(_){const s=_.createTexture();_.bindTexture(_.TEXTURE_2D,s);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,B),_.isContextLost())return;R.supported=!0}catch{}_.deleteTexture(s),Y=!0}var G;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{O&&U(O),O=null,$=!0},B.onerror=()=>{Y=!0,O=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let s,p,f,g;_.resetRequestQueue=()=>{s=[],p=0,f=0,g={}},_.addThrottleControl=A=>{const k=f++;return g[k]=A,k},_.removeThrottleControl=A=>{delete g[A],I()},_.getImage=(A,k,z=!0)=>new Promise((V,Z)=>{R.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),u.e(A,{type:"image"}),s.push({abortController:k,requestParameters:A,supportImageRefresh:z,state:"queued",onError:te=>{Z(te)},onSuccess:te=>{V(te)}}),I()});const b=A=>u._(this,void 0,void 0,function*(){A.state="running";const{requestParameters:k,supportImageRefresh:z,onError:V,onSuccess:Z,abortController:te}=A,ne=z===!1&&!u.i(self)&&!u.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((de,Ce)=>de&&Ce==="accept",!0));p++;const se=ne?L(k,te):u.m(k,te);try{const de=yield se;delete A.abortController,A.state="completed",de.data instanceof HTMLImageElement||u.b(de.data)?Z(de):de.data&&Z({data:yield(ee=de.data,typeof createImageBitmap=="function"?u.d(ee):u.f(ee)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete A.abortController,V(de)}finally{p--,I()}var ee}),I=()=>{const A=(()=>{for(const k of Object.keys(g))if(g[k]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=p;k<A&&s.length>0;k++){const z=s.shift();z.abortController.signal.aborted?k--:b(z)}},L=(A,k)=>new Promise((z,V)=>{const Z=new Image,te=A.url,ne=A.credentials;ne&&ne==="include"?Z.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!u.s(te))&&(Z.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{Z.src="",V(u.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,z({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,k.signal.aborted||V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=te})}(G||(G={})),G.resetRequestQueue();class re{constructor(s){this._transformRequestFn=s}transformRequest(s,p){return this._transformRequestFn&&this._transformRequestFn(s,p)||{url:s}}normalizeSpriteURL(s,p,f){const g=function(b){const I=b.match(he);if(!I)throw new Error(`Unable to parse URL "${b}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(s);return g.path+=`${p}${f}`,function(b){const I=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${I}`}(g)}setTransformRequest(s){this._transformRequestFn=s}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(_){var s=new u.A(3);return s[0]=_[0],s[1]=_[1],s[2]=_[2],s}var fe,ye=function(_,s,p){return _[0]=s[0]-p[0],_[1]=s[1]-p[1],_[2]=s[2]-p[2],_};fe=new u.A(3),u.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var Pe=function(_){var s=_[0],p=_[1];return s*s+p*p};function De(_){const s=[];if(typeof _=="string")s.push({id:"default",url:_});else if(_&&_.length>0){const p=[];for(const{id:f,url:g}of _){const b=`${f}${g}`;p.indexOf(b)===-1&&(p.push(b),s.push({id:f,url:g}))}}return s}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Ue{constructor(s,p,f,g){this.context=s,this.format=f,this.texture=s.gl.createTexture(),this.update(p,g)}update(s,p,f){const{width:g,height:b}=s,I=!(this.size&&this.size[0]===g&&this.size[1]===b||f),{context:L}=this,{gl:A}=L;if(this.useMipmap=!!(p&&p.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!p||p.premultiply!==!1)),I)this.size=[g,b],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||u.b(s)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,s):A.texImage2D(A.TEXTURE_2D,0,this.format,g,b,0,this.format,A.UNSIGNED_BYTE,s.data);else{const{x:k,y:z}=f||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||u.b(s)?A.texSubImage2D(A.TEXTURE_2D,0,k,z,A.RGBA,A.UNSIGNED_BYTE,s):A.texSubImage2D(A.TEXTURE_2D,0,k,z,g,b,A.RGBA,A.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(s,p,f){const{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),f!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=b.LINEAR),s!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,s),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,f||s),this.filter=s),p!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,p),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Ye(_){const{userImage:s}=_;return!!(s&&s.render&&s.render())&&(_.data.replace(new Uint8Array(s.data.buffer)),!0)}class wt extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:p,promiseResolve:f}of this.requestors)f(this._getImagesForIds(p));this.requestors=[]}}getImage(s){const p=this.images[s];if(p&&!p.data&&p.spriteData){const f=p.spriteData;p.data=new u.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),p.spriteData=null}return p}addImage(s,p){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,p)&&(this.images[s]=p)}_validate(s,p){let f=!0;const g=p.data||p.spriteData;return this._validateStretch(p.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${s}" has invalid "stretchX" value`))),f=!1),this._validateStretch(p.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${s}" has invalid "stretchY" value`))),f=!1),this._validateContent(p.content,p)||(this.fire(new u.j(new Error(`Image "${s}" has invalid "content" value`))),f=!1),f}_validateStretch(s,p){if(!s)return!0;let f=0;for(const g of s){if(g[0]<f||g[1]<g[0]||p<g[1])return!1;f=g[1]}return!0}_validateContent(s,p){if(!s)return!0;if(s.length!==4)return!1;const f=p.spriteData,g=f&&f.width||p.data.width,b=f&&f.height||p.data.height;return!(s[0]<0||g<s[0]||s[1]<0||b<s[1]||s[2]<0||g<s[2]||s[3]<0||b<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,p,f=!0){const g=this.getImage(s);if(f&&(g.data.width!==p.data.width||g.data.height!==p.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=g.version+1,this.images[s]=p,this.updatedImages[s]=!0}removeImage(s){const p=this.images[s];delete this.images[s],delete this.patterns[s],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((p,f)=>{let g=!0;if(!this.isLoaded())for(const b of s)this.images[b]||(g=!1);this.isLoaded()||g?p(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:p})})}_getImagesForIds(s){const p={};for(const f of s){let g=this.getImage(f);g||(this.fire(new u.k("styleimagemissing",{id:f})),g=this.getImage(f)),g?p[f]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:s,height:p}=this.atlasImage;return{width:s,height:p}}getPattern(s){const p=this.patterns[s],f=this.getImage(s);if(!f)return null;if(p&&p.position.version===f.version)return p.position;if(p)p.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},b=new u.I(g,f);this.patterns[s]={bin:g,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const p=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ue(s,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:p,h:f}=u.p(s),g=this.atlasImage;g.resize({width:p||1,height:f||1});for(const b in this.patterns){const{bin:I}=this.patterns[b],L=I.x+1,A=I.y+1,k=this.getImage(b).data,z=k.width,V=k.height;u.R.copy(k,g,{x:0,y:0},{x:L,y:A},{width:z,height:V}),u.R.copy(k,g,{x:0,y:V-1},{x:L,y:A-1},{width:z,height:1}),u.R.copy(k,g,{x:0,y:0},{x:L,y:A+V},{width:z,height:1}),u.R.copy(k,g,{x:z-1,y:0},{x:L-1,y:A},{width:1,height:V}),u.R.copy(k,g,{x:0,y:0},{x:L+z,y:A},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const p of s){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const f=this.getImage(p);f||u.w(`Image with ID: "${p}" was not found`),Ye(f)&&this.updateImage(p,f)}}}const Ae=1e20;function Je(_,s,p,f,g,b,I,L,A){for(let k=s;k<s+f;k++)vt(_,p*b+k,b,g,I,L,A);for(let k=p;k<p+g;k++)vt(_,k*b+s,1,f,I,L,A)}function vt(_,s,p,f,g,b,I){b[0]=0,I[0]=-Ae,I[1]=Ae,g[0]=_[s];for(let L=1,A=0,k=0;L<f;L++){g[L]=_[s+L*p];const z=L*L;do{const V=b[A];k=(g[L]-g[V]+z-V*V)/(L-V)/2}while(k<=I[A]&&--A>-1);A++,b[A]=L,I[A]=k,I[A+1]=Ae}for(let L=0,A=0;L<f;L++){for(;I[A+1]<L;)A++;const k=b[A],z=L-k;_[s+L*p]=g[k]+z*z}}class Gt{constructor(s,p){this.requestManager=s,this.localIdeographFontFamily=p,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return u._(this,void 0,void 0,function*(){const p=[];for(const b in s)for(const I of s[b])p.push(this._getAndCacheGlyphsPromise(b,I));const f=yield Promise.all(p),g={};for(const{stack:b,id:I,glyph:L}of f)g[b]||(g[b]={}),g[b][I]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return g})}_getAndCacheGlyphsPromise(s,p){return u._(this,void 0,void 0,function*(){let f=this.entries[s];f||(f=this.entries[s]={glyphs:{},requests:{},ranges:{}});let g=f.glyphs[p];if(g!==void 0)return{stack:s,id:p,glyph:g};if(g=this._tinySDF(f,s,p),g)return f.glyphs[p]=g,{stack:s,id:p,glyph:g};const b=Math.floor(p/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[b])return{stack:s,id:p,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[b]){const L=Gt.loadGlyphRange(s,b,this.url,this.requestManager);f.requests[b]=L}const I=yield f.requests[b];for(const L in I)this._doesCharSupportLocalGlyph(+L)||(f.glyphs[+L]=I[+L]);return f.ranges[b]=!0,{stack:s,id:p,glyph:I[p]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](s)||u.u["Hangul Syllables"](s)||u.u.Hiragana(s)||u.u.Katakana(s))}_tinySDF(s,p,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=s.tinySDF;if(!b){let L="400";/bold/i.test(p)?L="900":/medium/i.test(p)?L="500":/light/i.test(p)&&(L="200"),b=s.tinySDF=new Gt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:L})}const I=b.draw(String.fromCharCode(f));return{id:f,bitmap:new u.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}Gt.loadGlyphRange=function(_,s,p,f){return u._(this,void 0,void 0,function*(){const g=256*s,b=g+255,I=f.transformRequest(p.replace("{fontstack}",_).replace("{range}",`${g}-${b}`),"Glyphs"),L=yield u.l(I,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${s}, ${g}-${b}`);const A={};for(const k of u.n(L.data))A[k.id]=k;return A})},Gt.TinySDF=class{constructor({fontSize:_=24,buffer:s=3,radius:p=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:I="normal"}={}){this.buffer=s,this.cutoff=f,this.radius=p;const L=this.size=_+4*s,A=this._createCanvas(L),k=this.ctx=A.getContext("2d",{willReadFrequently:!0});k.font=`${I} ${b} ${_}px ${g}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(_){const s=document.createElement("canvas");return s.width=s.height=_,s}draw(_){const{width:s,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(_),I=Math.ceil(p),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),A=Math.min(this.size-this.buffer,I+Math.ceil(f)),k=L+2*this.buffer,z=A+2*this.buffer,V=Math.max(k*z,0),Z=new Uint8ClampedArray(V),te={data:Z,width:k,height:z,glyphWidth:L,glyphHeight:A,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(L===0||A===0)return te;const{ctx:ne,buffer:se,gridInner:ee,gridOuter:de}=this;ne.clearRect(se,se,L,A),ne.fillText(_,se,se+I);const Ce=ne.getImageData(se,se,L,A);de.fill(Ae,0,V),ee.fill(0,0,V);for(let le=0;le<A;le++)for(let ve=0;ve<L;ve++){const Te=Ce.data[4*(le*L+ve)+3]/255;if(Te===0)continue;const Me=(le+se)*k+ve+se;if(Te===1)de[Me]=0,ee[Me]=Ae;else{const Re=.5-Te;de[Me]=Re>0?Re*Re:0,ee[Me]=Re<0?Re*Re:0}}Je(de,0,0,k,z,k,this.f,this.v,this.z),Je(ee,se,se,L,A,k,this.f,this.v,this.z);for(let le=0;le<V;le++){const ve=Math.sqrt(de[le])-Math.sqrt(ee[le]);Z[le]=Math.round(255-255*(ve/this.radius+this.cutoff))}return te}};class Xe{constructor(){this.specification=u.v.light.position}possiblyEvaluate(s,p){return u.y(s.expression.evaluate(p))}interpolate(s,p,f){return{x:u.z.number(s.x,p.x,f),y:u.z.number(s.y,p.y,f),z:u.z.number(s.z,p.z,f)}}}let dt;class St extends u.E{constructor(s){super(),dt=dt||new u.q({anchor:new u.D(u.v.light.anchor),position:new Xe,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(dt),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,p={}){if(!this._validate(u.r,s,p))for(const f in s){const g=s[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,f){return(!f||f.validate!==!1)&&u.t(this,s.call(u.x,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Pt{constructor(s,p){this.width=s,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,p){const f=s.join(",")+String(p);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(s,p)),this.dashEntry[f]}getDashRanges(s,p,f){const g=[];let b=s.length%2==1?-s[s.length-1]*f:0,I=s[0]*f,L=!0;g.push({left:b,right:I,isDash:L,zeroLength:s[0]===0});let A=s[0];for(let k=1;k<s.length;k++){L=!L;const z=s[k];b=A*f,A+=z,I=A*f,g.push({left:b,right:I,isDash:L,zeroLength:z===0})}return g}addRoundDash(s,p,f){const g=p/2;for(let b=-f;b<=f;b++){const I=this.width*(this.nextRow+f+b);let L=0,A=s[L];for(let k=0;k<this.width;k++){k/A.right>1&&(A=s[++L]);const z=Math.abs(k-A.left),V=Math.abs(k-A.right),Z=Math.min(z,V);let te;const ne=b/f*(g+1);if(A.isDash){const se=g-Math.abs(ne);te=Math.sqrt(Z*Z+se*se)}else te=g-Math.sqrt(Z*Z+ne*ne);this.data[I+k]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(s){for(let L=s.length-1;L>=0;--L){const A=s[L],k=s[L+1];A.zeroLength?s.splice(L,1):k&&k.isDash===A.isDash&&(k.left=A.left,s.splice(L,1))}const p=s[0],f=s[s.length-1];p.isDash===f.isDash&&(p.left=f.left-this.width,f.right=p.right+this.width);const g=this.width*this.nextRow;let b=0,I=s[b];for(let L=0;L<this.width;L++){L/I.right>1&&(I=s[++b]);const A=Math.abs(L-I.left),k=Math.abs(L-I.right),z=Math.min(A,k);this.data[g+L]=Math.max(0,Math.min(255,(I.isDash?z:-z)+128))}}addDash(s,p){const f=p?7:0,g=2*f+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let b=0;for(let L=0;L<s.length;L++)b+=s[L];if(b!==0){const L=this.width/b,A=this.getDashRanges(s,this.width,L);p?this.addRoundDash(A,L,f):this.addRegularDash(A)}const I={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:b};return this.nextRow+=g,this.dirty=!0,I}bind(s){const p=s.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const Bt="maplibre_preloaded_worker_pool";class yn{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<yn.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Bt]}numActive(){return Object.keys(this.active).length}}const Yn=Math.floor(C.hardwareConcurrency/2);let Jn,vr;function ri(){return Jn||(Jn=new yn),Jn}yn.workerCount=u.B(globalThis)?Math.max(Math.min(Yn,3),1):1;class Es{constructor(s,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;const f=this.workerPool.acquire(p);for(let g=0;g<f.length;g++){const b=new u.C(f[g],p);b.name=`Worker ${g}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,p){const f=[];for(const g of this.actors)f.push(g.sendAsync({type:s,data:p}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,p){for(const f of this.actors)f.registerMessageHandler(s,p)}}function Wa(){return vr||(vr=new Es(ri(),u.G),vr.registerMessageHandler("GR",(_,s,p)=>u.m(s,p))),vr}function Cl(_,s){const p=u.F();return u.H(p,p,[1,1,0]),u.J(p,p,[.5*_.width,.5*_.height,1]),u.K(p,p,_.calculatePosMatrix(s.toUnwrapped()))}function ac(_,s,p,f,g,b){const I=function(V,Z,te){if(V)for(const ne of V){const se=Z[ne];if(se&&se.source===te&&se.type==="fill-extrusion")return!0}else for(const ne in Z){const se=Z[ne];if(se.source===te&&se.type==="fill-extrusion")return!0}return!1}(g&&g.layers,s,_.id),L=b.maxPitchScaleFactor(),A=_.tilesIn(f,L,I);A.sort(vi);const k=[];for(const V of A)k.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(s,p,_._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,g,b,L,Cl(_.transform,V.tileID))});const z=function(V){const Z={},te={};for(const ne of V){const se=ne.queryResults,ee=ne.wrappedTileID,de=te[ee]=te[ee]||{};for(const Ce in se){const le=se[Ce],ve=de[Ce]=de[Ce]||{},Te=Z[Ce]=Z[Ce]||[];for(const Me of le)ve[Me.featureIndex]||(ve[Me.featureIndex]=!0,Te.push(Me))}}return Z}(k);for(const V in z)z[V].forEach(Z=>{const te=Z.feature,ne=_.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ne});return z}function vi(_,s){const p=_.tileID,f=s.tileID;return p.overscaledZ-f.overscaledZ||p.canonical.y-f.canonical.y||p.wrap-f.wrap||p.canonical.x-f.canonical.x}function en(_,s,p){return u._(this,void 0,void 0,function*(){let f=_;if(_.url?f=(yield u.h(s.transformRequest(_.url,"Source"),p)).data:yield C.frameAsync(p),!f)return null;const g=u.L(u.e(f,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(g.vectorLayerIds=f.vector_layers.map(b=>b.id)),g})}class Jt{constructor(s,p){s&&(p?this.setSouthWest(s).setNorthEast(p):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof u.M?new u.M(s.lng,s.lat):u.M.convert(s),this}setSouthWest(s){return this._sw=s instanceof u.M?new u.M(s.lng,s.lat):u.M.convert(s),this}extend(s){const p=this._sw,f=this._ne;let g,b;if(s instanceof u.M)g=s,b=s;else{if(!(s instanceof Jt))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Jt.convert(s)):this.extend(u.M.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(u.M.convert(s)):this;if(g=s._sw,b=s._ne,!g||!b)return this}return p||f?(p.lng=Math.min(g.lng,p.lng),p.lat=Math.min(g.lat,p.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(b.lng,b.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:p,lat:f}=u.M.convert(s);let g=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(s){return s instanceof Jt?s:s&&new Jt(s)}static fromLngLat(s,p=0){const f=360*p/40075017,g=f/Math.cos(Math.PI/180*s.lat);return new Jt(new u.M(s.lng-g,s.lat-f),new u.M(s.lng+g,s.lat+f))}}class Wt{constructor(s,p,f){this.bounds=Jt.convert(this.validateBounds(s)),this.minzoom=p||0,this.maxzoom=f||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const p=Math.pow(2,s.z),f=Math.floor(u.N(this.bounds.getWest())*p),g=Math.floor(u.O(this.bounds.getNorth())*p),b=Math.ceil(u.N(this.bounds.getEast())*p),I=Math.ceil(u.O(this.bounds.getSouth())*p);return s.x>=f&&s.x<b&&s.y>=g&&s.y<I}}class ze extends u.E{constructor(s,p,f,g){if(super(),this.id=s,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(p,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield en(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(u.e(this,s),s.bounds&&(this.tileBounds=new Wt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new u.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(s){return u._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(p,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((b,I)=>{s.reloadPromise={resolve:b,reject:I}})}else s.actor=this.dispatcher.getActor(),g="LT";s.abortController=new AbortController;try{const b=yield s.actor.sendAsync({type:g,data:f},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,b)}catch(b){if(delete s.abortController,s.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,p){if(p&&p.resourceTiming&&(s.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&s.setExpiryData(p),s.loadVectorData(p,this.map.painter),s.reloadPromise){const f=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(f.resolve).catch(f.reject)}}abortTile(s){return u._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return u._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vr extends u.E{constructor(s,p,f,g){super(),this.id=s,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},p),u.e(this,u.L(p,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield en(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(u.e(this,s),s.bounds&&(this.tileBounds=new Wt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new u.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return u.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return u._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const f=yield G.getImage(this.map._requestManager.transformRequest(p,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&s.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const g=this.map.painter.context,b=g.gl,I=f.data;s.texture=this.map.painter.getTileTexture(I.width),s.texture?s.texture.update(I,{useMipmap:!0}):(s.texture=new Ue(g,I,b.RGBA,{useMipmap:!0}),s.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&b.texParameterf(b.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),s.state="loaded"}}catch(f){if(delete s.abortController,s.aborted)s.state="unloaded";else if(f)throw s.state="errored",f}})}abortTile(s){return u._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return u._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class _n extends Vr{constructor(s,p,f,g){super(s,p,f,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(s){return u._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(p,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const g=yield G.getImage(f,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(g&&g.data){const b=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&s.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const I=u.b(b)&&u.S()?b:yield this.readImageNow(b),L={type:this.type,uid:s.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const A=yield s.actor.sendAsync({type:"LDT",data:L});s.dem=A,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(g){if(delete s.abortController,s.aborted)s.state="unloaded";else if(g)throw s.state="errored",g}})}readImageNow(s){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const p=s.width+2,f=s.height+2;try{return new u.R({width:p,height:f},yield u.V(s,-1,-1,p,f))}catch{}}return C.getImageData(s,1)})}_getNeighboringTiles(s){const p=s.canonical,f=Math.pow(2,p.z),g=(p.x-1+f)%f,b=p.x===0?s.wrap-1:s.wrap,I=(p.x+1+f)%f,L=p.x+1===f?s.wrap+1:s.wrap,A={};return A[new u.Q(s.overscaledZ,b,p.z,g,p.y).key]={backfilled:!1},A[new u.Q(s.overscaledZ,L,p.z,I,p.y).key]={backfilled:!1},p.y>0&&(A[new u.Q(s.overscaledZ,b,p.z,g,p.y-1).key]={backfilled:!1},A[new u.Q(s.overscaledZ,s.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},A[new u.Q(s.overscaledZ,L,p.z,I,p.y-1).key]={backfilled:!1}),p.y+1<f&&(A[new u.Q(s.overscaledZ,b,p.z,g,p.y+1).key]={backfilled:!1},A[new u.Q(s.overscaledZ,s.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},A[new u.Q(s.overscaledZ,L,p.z,I,p.y+1).key]={backfilled:!1}),A}unloadTile(s){return u._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Zt extends u.E{constructor(s,p,f,g){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=p.data,this._options=u.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const b=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*b,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*b,extent:u.W,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:u.W,radius:(p.clusterRadius||50)*b,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,p,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:p,offset:f}})}_updateWorkerData(s){return u._(this,void 0,void 0,function*(){const p=u.e({type:this.type},this.workerOptions);s?p.dataDiff=s:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;f.resourceTiming&&f.resourceTiming[this.id]&&(g=f.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(b,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(s){return u._(this,void 0,void 0,function*(){const p=s.actor?"RT":"LT";s.actor=this.actor;const f={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;const g=yield this.actor.sendAsync({type:p,data:f},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(g,this.map.painter,p==="RT")})}abortTile(s){return u._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return u._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var vn=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Li extends u.E{constructor(s,p,f,g){super(),this.id=s,this.dispatcher=f,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=p}load(s){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,s&&(this.coordinates=s),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new u.j(p))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const p=s.map(u.Y.fromLngLat);this.tileID=function(g){let b=1/0,I=1/0,L=-1/0,A=-1/0;for(const Z of g)b=Math.min(b,Z.x),I=Math.min(I,Z.y),L=Math.max(L,Z.x),A=Math.max(A,Z.y);const k=Math.max(L-b,A-I),z=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),V=Math.pow(2,z);return new u.a0(z,Math.floor((b+L)/2*V),Math.floor((I+A)/2*V))}(p),this.minzoom=this.maxzoom=this.tileID.z;const f=p.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.W,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.W),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,vn.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ue(s,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Do extends Li{constructor(s,p,f,g){super(s,p,f,g),this.roundZoom=!0,this.type="video",this.options=p}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const p of s.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield u.a2(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new u.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const p=this.video.seekable;s<p.start(0)||s>p.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,vn.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new Ue(s,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ra extends Li{constructor(s,p,f,g){super(s,p,f,g),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(I=>typeof I!="number"))||this.fire(new u.j(new u.a1(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${s}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${s}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,f=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,vn.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ue(p,this.canvas,f.RGBA,{premultiply:!0});let g=!1;for(const b in this.tiles){const I=this.tiles[b];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ia={},Cs=_=>{switch(_){case"geojson":return Zt;case"image":return Li;case"raster":return Vr;case"raster-dem":return _n;case"vector":return ze;case"video":return Do;case"canvas":return ra}return ia[_]},Yi="RTLPluginLoaded";class cu extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wa()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return u._(this,arguments,void 0,function*(p,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Yi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ze=null;function ii(){return Ze||(Ze=new cu),Ze}class Mi{constructor(s,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=u.a3(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const p=s+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,p,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(g,b){const I={};if(!b)return I;for(const L of g){const A=L.layerIds.map(k=>b.getLayer(k)).filter(Boolean);if(A.length!==0){L.layers=A,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(k=>A.filter(z=>z.id===k)[0]));for(const k of A)I[k.id]=L}}return I}(s.buckets,p.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof u.a5){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof u.a5&&b.hasRTLText){this.hasRTLText=!0,ii().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(g).queryRadius(b))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(s)}const p=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ue(s,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ue(s,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,p,f,g,b,I,L,A,k,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:b,scale:I,tileSize:this.tileSize,pixelPosMatrix:z,transform:A,params:L,queryPadding:this.queryPadding*k},s,p,f):{}}querySourceFeatures(s,p){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),b=p&&p.sourceLayer?p.sourceLayer:"",I=g._geojsonTileLayer||g[b];if(!I)return;const L=u.a6(p&&p.filter),{z:A,x:k,y:z}=this.tileID.canonical,V={z:A,x:k,y:z};for(let Z=0;Z<I.length;Z++){const te=I.feature(Z);if(L.needGeometry){const ee=u.a7(te,!0);if(!L.filter(new u.a8(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!L.filter(new u.a8(this.tileID.overscaledZ),te))continue;const ne=f.getId(te,b),se=new u.a9(te,A,k,z,ne);se.tile=V,s.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const p=this.expirationTime;if(s.cacheControl){const f=u.aa(s.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(p)if(this.expirationTime<p)g=!0;else{const b=this.expirationTime-p;b?this.expirationTime=f+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!p.style.hasLayer(g))continue;const b=this.buckets[g],I=b.layers[0].sourceLayer||"_geojsonTileLayer",L=f[I],A=s[I];if(!L||!A||Object.keys(A).length===0)continue;b.update(A,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=p&&p.style&&p.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=C.now()+s}setDependencies(s,p){const f={};for(const g of p)f[g]=!0;this.dependencies[s]=f}hasDependency(s,p){for(const f of s){const g=this.dependencies[f];if(g){for(const b of p)if(g[b])return!0}}return!1}}class Il{constructor(s,p){this.max=s,this.onRemove=p,this.reset()}reset(){for(const s in this.data)for(const p of this.data[s])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(s,p,f){const g=s.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:p,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout(()=>{this.remove(s,b)},f)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const p=this.data[s].shift();return p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),p.value}getByKey(s){const p=this.data[s];return p?p[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,p){if(!this.has(s))return this;const f=s.wrapped().key,g=p===void 0?0:this.data[f].indexOf(p),b=this.data[f][g];return this.data[f].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(s){const p=[];for(const f in this.data)for(const g of this.data[f])s(g.value)||p.push(g);for(const f of p)this.remove(f.value.tileID,f)}}class Ha{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,p,f){const g=String(p);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][g]=this.stateChanges[s][g]||{},u.e(this.stateChanges[s][g],f),this.deletedStates[s]===null){this.deletedStates[s]={};for(const b in this.state[s])b!==g&&(this.deletedStates[s][b]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][g]===null){this.deletedStates[s][g]={};for(const b in this.state[s][g])f[b]||(this.deletedStates[s][g][b]=null)}else for(const b in f)this.deletedStates[s]&&this.deletedStates[s][g]&&this.deletedStates[s][g][b]===null&&delete this.deletedStates[s][g][b]}removeFeatureState(s,p,f){if(this.deletedStates[s]===null)return;const g=String(p);if(this.deletedStates[s]=this.deletedStates[s]||{},f&&p!==void 0)this.deletedStates[s][g]!==null&&(this.deletedStates[s][g]=this.deletedStates[s][g]||{},this.deletedStates[s][g][f]=null);else if(p!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][g])for(f in this.deletedStates[s][g]={},this.stateChanges[s][g])this.deletedStates[s][g][f]=null;else this.deletedStates[s][g]=null;else this.deletedStates[s]=null}getState(s,p){const f=String(p),g=u.e({},(this.state[s]||{})[f],(this.stateChanges[s]||{})[f]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const b=this.deletedStates[s][p];if(b===null)return{};for(const I in b)delete g[I]}return g}initializeTileState(s,p){s.setFeatureState(this.state,p)}coalesceChanges(s,p){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const I in this.stateChanges[g])this.state[g][I]||(this.state[g][I]={}),u.e(this.state[g][I],this.stateChanges[g][I]),b[I]=this.state[g][I];f[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const I in this.state[g])b[I]={},this.state[g][I]={};else for(const I in this.deletedStates[g]){if(this.deletedStates[g][I]===null)this.state[g][I]={};else for(const L of Object.keys(this.deletedStates[g][I]))delete this.state[g][I][L];b[I]=this.state[g][I]}f[g]=f[g]||{},u.e(f[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in s)s[g].setFeatureState(f,p)}}class Ge extends u.E{constructor(s,p,f){super(),this.id=s,this.dispatcher=f,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,b,I,L)=>{const A=new(Cs(b.type))(g,b,I,L);if(A.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${A.id}`);return A})(s,p,f,this),this._tiles={},this._cache=new Il(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ha,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const p=this._tiles[s];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,p,f){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,p,f)}catch(g){s.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new u.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const f=this._tiles[p];f.upload(s),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Nt).map(s=>s.key)}getRenderableIds(s){const p=[];for(const f in this._tiles)this._isIdRenderable(f,s)&&p.push(this._tiles[f]);return s?p.sort((f,g)=>{const b=f.tileID,I=g.tileID,L=new u.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),A=new u.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-I.overscaledZ||A.y-L.y||A.x-L.x}).map(f=>f.tileID.key):p.map(f=>f.tileID).sort(Nt).map(f=>f.key)}hasRenderableParent(s){const p=this.findLoadedParent(s,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(s,p){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(p||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,p){return u._(this,void 0,void 0,function*(){const f=this._tiles[s];f&&(f.state!=="loading"&&(f.state=p),yield this._loadTile(f,s,p))})}_tileLoaded(s,p,f){s.timeAdded=C.now(),f==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(p,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const p=this.getRenderableIds();for(let g=0;g<p.length;g++){const b=p[g];if(s.neighboringTiles&&s.neighboringTiles[b]){const I=this.getTileByID(b);f(s,I),f(I,s)}}function f(g,b){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let I=b.tileID.canonical.x-g.tileID.canonical.x;const L=b.tileID.canonical.y-g.tileID.canonical.y,A=Math.pow(2,g.tileID.canonical.z),k=b.tileID.key;I===0&&L===0||Math.abs(L)>1||(Math.abs(I)>1&&(Math.abs(I+A)===1?I+=A:Math.abs(I-A)===1&&(I-=A)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,I,L),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,p,f,g){for(const b in this._tiles){let I=this._tiles[b];if(g[b]||!I.hasData()||I.tileID.overscaledZ<=p||I.tileID.overscaledZ>f)continue;let L=I.tileID;for(;I&&I.tileID.overscaledZ>p+1;){const k=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[k.key],I&&I.hasData()&&(L=k)}let A=L;for(;A.overscaledZ>p;)if(A=A.scaledTo(A.overscaledZ-1),s[A.key]){g[L.key]=L;break}}}findLoadedParent(s,p){if(s.key in this._loadedParentTiles){const f=this._loadedParentTiles[s.key];return f&&f.tileID.overscaledZ>=p?f:null}for(let f=s.overscaledZ-1;f>=p;f--){const g=s.scaledTo(f),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(s){const p=this._tiles[s.key];return p&&p.hasData()?p:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const p=Math.ceil(s.width/this._source.tileSize)+1,f=Math.ceil(s.height/this._source.tileSize)+1,g=Math.floor(p*f*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)}handleWrapJump(s){const p=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,p){const f={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+p),f[b.tileID.key]=b}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(s,p){if(!this._sourceLoaded||this._paused)return;let f;this.transform=s,this.terrain=p,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new u.Q(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(f=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(f=f.filter(z=>this._source.hasTile(z)))):f=[];const g=s.coveringZoomLevel(this._source),b=Math.max(g-Ge.maxOverzooming,this._source.minzoom),I=Math.max(g+Ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const V of f)if(V.canonical.z>this._source.minzoom){const Z=V.scaledTo(V.canonical.z-1);z[Z.key]=Z;const te=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));z[te.key]=te}f=f.concat(Object.values(z))}const L=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(f,g);if(Mt(this._source.type)){const z={},V={},Z=Object.keys(A),te=C.now();for(const ne of Z){const se=A[ne],ee=this._tiles[ne];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=te)continue;const de=this.findLoadedParent(se,b);de&&(this._addTile(de.tileID),z[de.tileID.key]=de.tileID),V[ne]=se}this._retainLoadedChildren(V,g,I,A);for(const ne in z)A[ne]||(this._coveredTiles[ne]=!0,A[ne]=z[ne]);if(p){const ne={},se={};for(const ee of f)this._tiles[ee.key].hasData()?ne[ee.key]=ee:se[ee.key]=ee;for(const ee in se){const de=se[ee].children(this._source.maxzoom);this._tiles[de[0].key]&&this._tiles[de[1].key]&&this._tiles[de[2].key]&&this._tiles[de[3].key]&&(ne[de[0].key]=A[de[0].key]=de[0],ne[de[1].key]=A[de[1].key]=de[1],ne[de[2].key]=A[de[2].key]=de[2],ne[de[3].key]=A[de[3].key]=de[3],delete se[ee])}for(const ee in se){const de=this.findLoadedParent(se[ee],this._source.minzoom);if(de){ne[de.tileID.key]=A[de.tileID.key]=de.tileID;for(const Ce in ne)ne[Ce].isChildOf(de.tileID)&&delete ne[Ce]}}for(const ee in this._tiles)ne[ee]||(this._coveredTiles[ee]=!0)}}for(const z in A)this._tiles[z].clearFadeHold();const k=u.ab(this._tiles,A);for(const z of k){const V=this._tiles[z];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,p){var f;const g={},b={},I=Math.max(p-Ge.maxOverzooming,this._source.minzoom),L=Math.max(p+Ge.maxUnderzooming,this._source.minzoom),A={};for(const k of s){const z=this._addTile(k);g[k.key]=k,z.hasData()||p<this._source.maxzoom&&(A[k.key]=k)}this._retainLoadedChildren(A,p,L,g);for(const k of s){let z=this._tiles[k.key];if(z.hasData())continue;if(p+1>this._source.maxzoom){const Z=k.children(this._source.maxzoom)[0],te=this.getTile(Z);if(te&&te.hasData()){g[Z.key]=Z;continue}}else{const Z=k.children(this._source.maxzoom);if(g[Z[0].key]&&g[Z[1].key]&&g[Z[2].key]&&g[Z[3].key])continue}let V=z.wasRequested();for(let Z=k.overscaledZ-1;Z>=I;--Z){const te=k.scaledTo(Z);if(b[te.key])break;if(b[te.key]=!0,z=this.getTile(te),!z&&V&&(z=this._addTile(te)),z){const ne=z.hasData();if((ne||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||V)&&(g[te.key]=te),V=z.wasRequested(),ne)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const p=[];let f,g=this._tiles[s].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}p.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;g=b}for(const b of p)this._loadedParentTiles[b]=f}}_addTile(s){let p=this._tiles[s.key];if(p)return p;p=this._cache.getAndRemove(s),p&&(this._setTileReloadTimer(s.key,p),p.tileID=s,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,p)));const f=p;return p||(p=new Mi(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(p,s.key,p.state)),p.uses++,this._tiles[s.key]=p,f||this._source.fire(new u.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(s,p){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const f=p.getExpiryTimeout();f&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},f))}_removeTile(s){const p=this._tiles[s];p&&(p.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(s){const p=s.sourceDataType;s.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,p,f){const g=[],b=this.transform;if(!b)return g;const I=f?b.getCameraQueryGeometry(s):s,L=s.map(ne=>b.pointCoordinate(ne,this.terrain)),A=I.map(ne=>b.pointCoordinate(ne,this.terrain)),k=this.getIds();let z=1/0,V=1/0,Z=-1/0,te=-1/0;for(const ne of A)z=Math.min(z,ne.x),V=Math.min(V,ne.y),Z=Math.max(Z,ne.x),te=Math.max(te,ne.y);for(let ne=0;ne<k.length;ne++){const se=this._tiles[k[ne]];if(se.holdingForFade())continue;const ee=se.tileID,de=Math.pow(2,b.zoom-se.tileID.overscaledZ),Ce=p*se.queryPadding*u.W/se.tileSize/de,le=[ee.getTilePoint(new u.Y(z,V)),ee.getTilePoint(new u.Y(Z,te))];if(le[0].x-Ce<u.W&&le[0].y-Ce<u.W&&le[1].x+Ce>=0&&le[1].y+Ce>=0){const ve=L.map(Me=>ee.getTilePoint(Me)),Te=A.map(Me=>ee.getTilePoint(Me));g.push({tile:se,tileID:ee,queryGeometry:ve,cameraQueryGeometry:Te,scale:de})}}return g}getVisibleCoordinates(s){const p=this.getRenderableIds(s).map(f=>this._tiles[f].tileID);for(const f of p)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(Mt(this._source.type)){const s=C.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=s)return!0}return!1}setFeatureState(s,p,f){this._state.updateState(s=s||"_geojsonTileLayer",p,f)}removeFeatureState(s,p,f){this._state.removeFeatureState(s=s||"_geojsonTileLayer",p,f)}getFeatureState(s,p){return this._state.getState(s=s||"_geojsonTileLayer",p)}setDependencies(s,p,f){const g=this._tiles[s];g&&g.setDependencies(p,f)}reloadTilesForDependencies(s,p){for(const f in this._tiles)this._tiles[f].hasDependency(s,p)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(s,p))}}function Nt(_,s){const p=Math.abs(2*_.wrap)-+(_.wrap<0),f=Math.abs(2*s.wrap)-+(s.wrap<0);return _.overscaledZ-s.overscaledZ||f-p||s.canonical.y-_.canonical.y||s.canonical.x-_.canonical.x}function Mt(_){return _==="raster"||_==="image"||_==="video"}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;class xi{constructor(s,p){this.reset(s,p)}reset(s,p){this.points=s||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=u.ac(s,0,1);let p=1,f=this._distances[p];const g=s*this.paddedLength+this.padding;for(;f<g&&p<this._distances.length;)f=this._distances[++p];const b=p-1,I=this._distances[b],L=f-I,A=L>0?(g-I)/L:0;return this.points[b].mult(1-A).add(this.points[p].mult(A))}}function bi(_,s){let p=!0;return _==="always"||_!=="never"&&s!=="never"||(p=!1),p}class Rt{constructor(s,p,f){const g=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/f),this.yCellCount=Math.ceil(p/f);for(let I=0;I<this.xCellCount*this.yCellCount;I++)g.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=p,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,p,f,g,b){this._forEachCell(p,f,g,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(b)}insertCircle(s,p,f,g){this._forEachCell(p-g,f-g,p+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(p),this.circles.push(f),this.circles.push(g)}_insertBoxCell(s,p,f,g,b,I){this.boxCells[b].push(I)}_insertCircleCell(s,p,f,g,b,I){this.circleCells[b].push(I)}_query(s,p,f,g,b,I,L){if(f<0||s>this.width||g<0||p>this.height)return[];const A=[];if(s<=0&&p<=0&&this.width<=f&&this.height<=g){if(b)return[{key:null,x1:s,y1:p,x2:f,y2:g}];for(let k=0;k<this.boxKeys.length;k++)A.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const z=this.circles[3*k],V=this.circles[3*k+1],Z=this.circles[3*k+2];A.push({key:this.circleKeys[k],x1:z-Z,y1:V-Z,x2:z+Z,y2:V+Z})}}else this._forEachCell(s,p,f,g,this._queryCell,A,{hitTest:b,overlapMode:I,seenUids:{box:{},circle:{}}},L);return A}query(s,p,f,g){return this._query(s,p,f,g,!1,null)}hitTest(s,p,f,g,b,I){return this._query(s,p,f,g,!0,b,I).length>0}hitTestCircle(s,p,f,g,b){const I=s-f,L=s+f,A=p-f,k=p+f;if(L<0||I>this.width||k<0||A>this.height)return!1;const z=[];return this._forEachCell(I,A,L,k,this._queryCellCircle,z,{hitTest:!0,overlapMode:g,circle:{x:s,y:p,radius:f},seenUids:{box:{},circle:{}}},b),z.length>0}_queryCell(s,p,f,g,b,I,L,A){const{seenUids:k,hitTest:z,overlapMode:V}=L,Z=this.boxCells[b];if(Z!==null){const ne=this.bboxes;for(const se of Z)if(!k.box[se]){k.box[se]=!0;const ee=4*se,de=this.boxKeys[se];if(s<=ne[ee+2]&&p<=ne[ee+3]&&f>=ne[ee+0]&&g>=ne[ee+1]&&(!A||A(de))&&(!z||!bi(V,de.overlapMode))&&(I.push({key:de,x1:ne[ee],y1:ne[ee+1],x2:ne[ee+2],y2:ne[ee+3]}),z))return!0}}const te=this.circleCells[b];if(te!==null){const ne=this.circles;for(const se of te)if(!k.circle[se]){k.circle[se]=!0;const ee=3*se,de=this.circleKeys[se];if(this._circleAndRectCollide(ne[ee],ne[ee+1],ne[ee+2],s,p,f,g)&&(!A||A(de))&&(!z||!bi(V,de.overlapMode))){const Ce=ne[ee],le=ne[ee+1],ve=ne[ee+2];if(I.push({key:de,x1:Ce-ve,y1:le-ve,x2:Ce+ve,y2:le+ve}),z)return!0}}}return!1}_queryCellCircle(s,p,f,g,b,I,L,A){const{circle:k,seenUids:z,overlapMode:V}=L,Z=this.boxCells[b];if(Z!==null){const ne=this.bboxes;for(const se of Z)if(!z.box[se]){z.box[se]=!0;const ee=4*se,de=this.boxKeys[se];if(this._circleAndRectCollide(k.x,k.y,k.radius,ne[ee+0],ne[ee+1],ne[ee+2],ne[ee+3])&&(!A||A(de))&&!bi(V,de.overlapMode))return I.push(!0),!0}}const te=this.circleCells[b];if(te!==null){const ne=this.circles;for(const se of te)if(!z.circle[se]){z.circle[se]=!0;const ee=3*se,de=this.circleKeys[se];if(this._circlesCollide(ne[ee],ne[ee+1],ne[ee+2],k.x,k.y,k.radius)&&(!A||A(de))&&!bi(V,de.overlapMode))return I.push(!0),!0}}}_forEachCell(s,p,f,g,b,I,L,A){const k=this._convertToXCellCoord(s),z=this._convertToYCellCoord(p),V=this._convertToXCellCoord(f),Z=this._convertToYCellCoord(g);for(let te=k;te<=V;te++)for(let ne=z;ne<=Z;ne++)if(b.call(this,s,p,f,g,this.xCellCount*ne+te,I,L,A))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,p,f,g,b,I){const L=g-s,A=b-p,k=f+I;return k*k>L*L+A*A}_circleAndRectCollide(s,p,f,g,b,I,L){const A=(I-g)/2,k=Math.abs(s-(g+A));if(k>A+f)return!1;const z=(L-b)/2,V=Math.abs(p-(b+z));if(V>z+f)return!1;if(k<=A||V<=z)return!0;const Z=k-A,te=V-z;return Z*Z+te*te<=f*f}}function Is(_,s,p,f,g){const b=u.F();return s?(u.J(b,b,[1/g,1/g,1]),p||u.ad(b,b,f.angle)):u.K(b,f.labelPlaneMatrix,_),b}function oa(_,s,p,f,g){if(s){const b=u.ae(_);return u.J(b,b,[g,g,1]),p||u.ad(b,b,-f.angle),b}return f.glCoordMatrix}function kr(_,s,p){let f;p?(f=[_.x,_.y,p(_.x,_.y),1],u.af(f,f,s)):(f=[_.x,_.y,0,1],gt(f,f,s));const g=f[3];return{point:new u.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function oe(_,s){return .5+_/s*.5}function q(_,s){const p=_[0]/_[3],f=_[1]/_[3];return p>=-s[0]&&p<=s[0]&&f>=-s[1]&&f<=s[1]}function H(_,s,p,f,g,b,I,L,A,k){const z=f?_.textSizeData:_.iconSizeData,V=u.ag(z,p.transform.zoom),Z=[256/p.width*2+1,256/p.height*2+1],te=f?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;te.clear();const ne=_.lineVertexArray,se=f?_.text.placedSymbolArray:_.icon.placedSymbolArray,ee=p.transform.width/p.transform.height;let de=!1;for(let Ce=0;Ce<se.length;Ce++){const le=se.get(Ce);if(le.hidden||le.writingMode===u.ah.vertical&&!de){Oe(le.numGlyphs,te);continue}let ve;if(de=!1,k?(ve=[le.anchorX,le.anchorY,k(le.anchorX,le.anchorY),1],u.af(ve,ve,s)):(ve=[le.anchorX,le.anchorY,0,1],gt(ve,ve,s)),!q(ve,Z)){Oe(le.numGlyphs,te);continue}const Te=oe(p.transform.cameraToCenterDistance,ve[3]),Me=u.ai(z,V,le),Re=I?Me/Te:Me*Te,Ve=new u.P(le.anchorX,le.anchorY),$e=kr(Ve,g,k).point,qe={projections:{},offsets:{}},at=ge(le,Re,!1,L,s,g,b,_.glyphOffsetArray,ne,te,$e,Ve,qe,ee,A,k);de=at.useVertical,(at.notEnoughRoom||de||at.needsFlipping&&ge(le,Re,!0,L,s,g,b,_.glyphOffsetArray,ne,te,$e,Ve,qe,ee,A,k).notEnoughRoom)&&Oe(le.numGlyphs,te)}f?_.text.dynamicLayoutVertexBuffer.updateData(te):_.icon.dynamicLayoutVertexBuffer.updateData(te)}function K(_,s,p,f,g,b,I,L,A,k,z,V,Z){const te=L.glyphStartIndex+L.numGlyphs,ne=L.lineStartIndex,se=L.lineStartIndex+L.lineLength,ee=s.getoffsetX(L.glyphStartIndex),de=s.getoffsetX(te-1),Ce=Le(_*ee,p,f,g,b,I,L.segment,ne,se,A,k,z,V,Z);if(!Ce)return null;const le=Le(_*de,p,f,g,b,I,L.segment,ne,se,A,k,z,V,Z);return le?{first:Ce,last:le}:null}function ae(_,s,p,f){return _===u.ah.horizontal&&Math.abs(p.y-s.y)>Math.abs(p.x-s.x)*f?{useVertical:!0}:(_===u.ah.vertical?s.y<p.y:s.x>p.x)?{needsFlipping:!0}:null}function ge(_,s,p,f,g,b,I,L,A,k,z,V,Z,te,ne,se){const ee=s/24,de=_.lineOffsetX*ee,Ce=_.lineOffsetY*ee;let le;if(_.numGlyphs>1){const ve=_.glyphStartIndex+_.numGlyphs,Te=_.lineStartIndex,Me=_.lineStartIndex+_.lineLength,Re=K(ee,L,de,Ce,p,z,V,_,A,b,Z,ne,se);if(!Re)return{notEnoughRoom:!0};const Ve=kr(Re.first.point,I,se).point,$e=kr(Re.last.point,I,se).point;if(f&&!p){const qe=ae(_.writingMode,Ve,$e,te);if(qe)return qe}le=[Re.first];for(let qe=_.glyphStartIndex+1;qe<ve-1;qe++)le.push(Le(ee*L.getoffsetX(qe),de,Ce,p,z,V,_.segment,Te,Me,A,b,Z,ne,se));le.push(Re.last)}else{if(f&&!p){const Te=kr(V,g,se).point,Me=_.lineStartIndex+_.segment+1,Re=new u.P(A.getx(Me),A.gety(Me)),Ve=kr(Re,g,se),$e=Ve.signedDistanceFromCamera>0?Ve.point:J(V,Re,Te,1,g,se),qe=ae(_.writingMode,Te,$e,te);if(qe)return qe}const ve=Le(ee*L.getoffsetX(_.glyphStartIndex),de,Ce,p,z,V,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,A,b,Z,ne,se);if(!ve)return{notEnoughRoom:!0};le=[ve]}for(const ve of le)u.aj(k,ve.point,ve.angle);return{}}function J(_,s,p,f,g,b){const I=kr(_.add(_.sub(s)._unit()),g,b).point,L=p.sub(I);return p.add(L._mult(f/L.mag()))}function me(_,s){const{projectionCache:p,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:b,distanceFromAnchor:I,getElevation:L,previousVertex:A,direction:k,absOffsetX:z}=s;if(p.projections[_])return p.projections[_];const V=new u.P(f.getx(_),f.gety(_)),Z=kr(V,g,L);if(Z.signedDistanceFromCamera>0)return p.projections[_]=Z.point,Z.point;const te=_-k;return J(I===0?b:new u.P(f.getx(te),f.gety(te)),V,A,z-I+1,g,L)}function ce(_,s,p){return _._unit()._perp()._mult(s*p)}function Se(_,s,p,f,g,b,I,L){const{projectionCache:A,direction:k}=L;if(A.offsets[_])return A.offsets[_];const z=p.add(s);if(_+k<f||_+k>=g)return A.offsets[_]=z,z;const V=me(_+k,L),Z=ce(V.sub(p),I,k),te=p.add(Z),ne=V.add(Z);return A.offsets[_]=u.ak(b,z,te,ne)||z,A.offsets[_]}function Le(_,s,p,f,g,b,I,L,A,k,z,V,Z,te){const ne=f?_-s:_+s;let se=ne>0?1:-1,ee=0;f&&(se*=-1,ee=Math.PI),se<0&&(ee+=Math.PI);let de,Ce,le=se>0?L+I:L+I+1,ve=g,Te=g,Me=0,Re=0;const Ve=Math.abs(ne),$e=[];let qe;for(;Me+Re<=Ve;){if(le+=se,le<L||le>=A)return null;Me+=Re,Te=ve,Ce=de;const Ke={projectionCache:V,lineVertexArray:k,labelPlaneMatrix:z,tileAnchorPoint:b,distanceFromAnchor:Me,getElevation:te,previousVertex:Te,direction:se,absOffsetX:Ve};if(ve=me(le,Ke),p===0)$e.push(Te),qe=ve.sub(Te);else{let Et;const Ot=ve.sub(Te);Et=Ot.mag()===0?ce(me(le+se,Ke).sub(ve),p,se):ce(Ot,p,se),Ce||(Ce=Te.add(Et)),de=Se(le,Et,ve,L,A,Ce,p,Ke),$e.push(Ce),qe=de.sub(Ce)}Re=qe.mag()}const at=qe._mult((Ve-Me)/Re)._add(Ce||Te),Dt=ee+Math.atan2(ve.y-Te.y,ve.x-Te.x);return $e.push(at),{point:at,angle:Z?Dt:0,path:$e}}const Ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Oe(_,s){for(let p=0;p<_;p++){const f=s.length;s.resize(f+4),s.float32.set(Ne,3*f)}}function gt(_,s,p){const f=s[0],g=s[1];return _[0]=p[0]*f+p[4]*g+p[12],_[1]=p[1]*f+p[5]*g+p[13],_[3]=p[3]*f+p[7]*g+p[15],_}const xt=100;class Lt{constructor(s,p=new Rt(s.width+200,s.height+200,25),f=new Rt(s.width+200,s.height+200,25)){this.transform=s,this.grid=p,this.ignoredGrid=f,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+xt,this.screenBottomBoundary=s.height+xt,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,p,f,g,b,I){const L=this.projectAndGetPerspectiveRatio(g,s.anchorPointX,s.anchorPointY,I),A=f*L.perspectiveRatio,k=s.x1*A+L.point.x,z=s.y1*A+L.point.y,V=s.x2*A+L.point.x,Z=s.y2*A+L.point.y;return!this.isInsideGrid(k,z,V,Z)||p!=="always"&&this.grid.hitTest(k,z,V,Z,p,b)||L.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[k,z,V,Z],offscreen:this.isOffscreen(k,z,V,Z)}}placeCollisionCircles(s,p,f,g,b,I,L,A,k,z,V,Z,te,ne){const se=[],ee=new u.P(p.anchorX,p.anchorY),de=kr(ee,I,ne),Ce=oe(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),le=(z?b/Ce:b*Ce)/u.ao,ve=kr(ee,L,ne).point,Te=K(le,g,p.lineOffsetX*le,p.lineOffsetY*le,!1,ve,ee,p,f,L,{projections:{},offsets:{}},!1,ne);let Me=!1,Re=!1,Ve=!0;if(Te){const $e=.5*Z*Ce+te,qe=new u.P(-100,-100),at=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Dt=new xi,Ke=Te.first,Et=Te.last;let Ot=[];for(let jt=Ke.path.length-1;jt>=1;jt--)Ot.push(Ke.path[jt]);for(let jt=1;jt<Et.path.length;jt++)Ot.push(Et.path[jt]);const Qt=2.5*$e;if(A){const jt=Ot.map(qt=>kr(qt,A,ne));Ot=jt.some(qt=>qt.signedDistanceFromCamera<=0)?[]:jt.map(qt=>qt.point)}let Tt=[];if(Ot.length>0){const jt=Ot[0].clone(),qt=Ot[0].clone();for(let ur=1;ur<Ot.length;ur++)jt.x=Math.min(jt.x,Ot[ur].x),jt.y=Math.min(jt.y,Ot[ur].y),qt.x=Math.max(qt.x,Ot[ur].x),qt.y=Math.max(qt.y,Ot[ur].y);Tt=jt.x>=qe.x&&qt.x<=at.x&&jt.y>=qe.y&&qt.y<=at.y?[Ot]:qt.x<qe.x||jt.x>at.x||qt.y<qe.y||jt.y>at.y?[]:u.al([Ot],qe.x,qe.y,at.x,at.y)}for(const jt of Tt){Dt.reset(jt,.25*$e);let qt=0;qt=Dt.length<=.5*$e?1:Math.ceil(Dt.paddedLength/Qt)+1;for(let ur=0;ur<qt;ur++){const Mn=ur/Math.max(qt-1,1),$o=Dt.lerp(Mn),oi=$o.x+xt,cr=$o.y+xt;se.push(oi,cr,$e,0);const yo=oi-$e,Ps=cr-$e,ha=oi+$e,Rl=cr+$e;if(Ve=Ve&&this.isOffscreen(yo,Ps,ha,Rl),Re=Re||this.isInsideGrid(yo,Ps,ha,Rl),s!=="always"&&this.grid.hitTestCircle(oi,cr,$e,s,V)&&(Me=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Me}}}}return{circles:!k&&Me||!Re||Ce<this.perspectiveRatioCutoff?[]:se,offscreen:Ve,collisionDetected:Me}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let f=1/0,g=1/0,b=-1/0,I=-1/0;for(const z of s){const V=new u.P(z.x+xt,z.y+xt);f=Math.min(f,V.x),g=Math.min(g,V.y),b=Math.max(b,V.x),I=Math.max(I,V.y),p.push(V)}const L=this.grid.query(f,g,b,I).concat(this.ignoredGrid.query(f,g,b,I)),A={},k={};for(const z of L){const V=z.key;if(A[V.bucketInstanceId]===void 0&&(A[V.bucketInstanceId]={}),A[V.bucketInstanceId][V.featureIndex])continue;const Z=[new u.P(z.x1,z.y1),new u.P(z.x2,z.y1),new u.P(z.x2,z.y2),new u.P(z.x1,z.y2)];u.am(p,Z)&&(A[V.bucketInstanceId][V.featureIndex]=!0,k[V.bucketInstanceId]===void 0&&(k[V.bucketInstanceId]=[]),k[V.bucketInstanceId].push(V.featureIndex))}return k}insertCollisionBox(s,p,f,g,b,I){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:I,overlapMode:p},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,p,f,g,b,I){const L=f?this.ignoredGrid:this.grid,A={bucketInstanceId:g,featureIndex:b,collisionGroupID:I,overlapMode:p};for(let k=0;k<s.length;k+=4)L.insertCircle(A,s[k],s[k+1],s[k+2])}projectAndGetPerspectiveRatio(s,p,f,g){let b;return g?(b=[p,f,g(p,f),1],u.af(b,b,s)):(b=[p,f,0,1],gt(b,b,s)),{point:new u.P((b[0]/b[3]+1)/2*this.transform.width+xt,(-b[1]/b[3]+1)/2*this.transform.height+xt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(s,p,f,g){return f<xt||s>=this.screenRightBoundary||g<xt||p>this.screenBottomBoundary}isInsideGrid(s,p,f,g){return f>=0&&s<this.gridRightBoundary&&g>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const s=u.an([]);return u.H(s,s,[-100,-100,0]),s}}function At(_,s,p){return s*(u.W/(_.tileSize*Math.pow(2,p-_.tileID.overscaledZ)))}class tn{constructor(s,p,f,g){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?p:-p))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class wn{constructor(s,p,f,g,b){this.text=new tn(s?s.text:null,p,f,b),this.icon=new tn(s?s.icon:null,p,g,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class On{constructor(s,p,f){this.text=s,this.icon=p,this.skipFade=f}}class Nr{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class Ut{constructor(s,p,f,g,b){this.bucketInstanceId=s,this.featureIndex=p,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=b}}class Un{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const p=++this.maxGroupID;this.collisionGroups[s]={ID:p,predicate:f=>f.collisionGroupID===p}}return this.collisionGroups[s]}}function Ur(_,s,p,f,g){const{horizontalAlign:b,verticalAlign:I}=u.at(_);return new u.P(-(b-.5)*s+f[0]*g,-(I-.5)*p+f[1]*g)}function Ai(_,s,p,f,g,b){const{x1:I,x2:L,y1:A,y2:k,anchorPointX:z,anchorPointY:V}=_,Z=new u.P(s,p);return f&&Z._rotate(g?b:-b),{x1:I+Z.x,y1:A+Z.y,x2:L+Z.x,y2:k+Z.y,anchorPointX:z,anchorPointY:V}}class ss{constructor(s,p,f,g,b){this.transform=s.clone(),this.terrain=p,this.collisionIndex=new Lt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Un(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,p,f,g){const b=f.getBucket(p),I=f.latestFeatureIndex;if(!b||!I||p.id!==b.layerIds[0])return;const L=f.collisionBoxArray,A=b.layers[0].layout,k=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),z=f.tileSize/u.W,V=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),Z=A.get("text-pitch-alignment")==="map",te=A.get("text-rotation-alignment")==="map",ne=At(f,1,this.transform.zoom),se=Is(V,Z,te,this.transform,ne);let ee=null;if(Z){const Ce=oa(V,Z,te,this.transform,ne);ee=u.K([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[b.bucketInstanceId]=new Ut(b.bucketInstanceId,I,b.sourceLayerIndex,b.index,f.tileID);const de={bucket:b,layout:A,posMatrix:V,textLabelPlaneMatrix:se,labelToScreenMatrix:ee,scale:k,textPixelRatio:z,holdingForFade:f.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:u.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(g)for(const Ce of b.sortKeyRanges){const{sortKey:le,symbolInstanceStart:ve,symbolInstanceEnd:Te}=Ce;s.push({sortKey:le,symbolInstanceStart:ve,symbolInstanceEnd:Te,parameters:de})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:de})}attemptAnchorPlacement(s,p,f,g,b,I,L,A,k,z,V,Z,te,ne,se,ee){const de=u.ap[s.textAnchor],Ce=[s.textOffset0,s.textOffset1],le=Ur(de,f,g,Ce,b),ve=this.collisionIndex.placeCollisionBox(Ai(p,le.x,le.y,I,L,this.transform.angle),V,A,k,z.predicate,ee);if((!se||this.collisionIndex.placeCollisionBox(Ai(se,le.x,le.y,I,L,this.transform.angle),V,A,k,z.predicate,ee).box.length!==0)&&ve.box.length>0){let Te;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Te=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Ce,width:f,height:g,anchor:de,textBoxScale:b,prevAnchor:Te},this.markUsedJustification(te,de,Z,ne),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ne,Z),this.placedOrientations[Z.crossTileID]=ne),{shift:le,placedGlyphBoxes:ve}}}placeLayerBucketPart(s,p,f){const{bucket:g,layout:b,posMatrix:I,textLabelPlaneMatrix:L,labelToScreenMatrix:A,textPixelRatio:k,holdingForFade:z,collisionBoxArray:V,partiallyEvaluatedTextSize:Z,collisionGroup:te}=s.parameters,ne=b.get("text-optional"),se=b.get("icon-optional"),ee=u.aq(b,"text-overlap","text-allow-overlap"),de=ee==="always",Ce=u.aq(b,"icon-overlap","icon-allow-overlap"),le=Ce==="always",ve=b.get("text-rotation-alignment")==="map",Te=b.get("text-pitch-alignment")==="map",Me=b.get("icon-text-fit")!=="none",Re=b.get("symbol-z-order")==="viewport-y",Ve=de&&(le||!g.hasIconData()||se),$e=le&&(de||!g.hasTextData()||ne);!g.collisionArrays&&V&&g.deserializeCollisionBoxes(V);const qe=this.retainedQueryData[g.bucketInstanceId].tileID,at=this.terrain?(Ke,Et)=>this.terrain.getElevation(qe,Ke,Et):null,Dt=(Ke,Et)=>{var Ot,Qt;if(p[Ke.crossTileID])return;if(z)return void(this.placements[Ke.crossTileID]=new On(!1,!1,!1));let Tt=!1,jt=!1,qt=!0,ur=null,Mn={box:null,offscreen:null},$o={box:null,offscreen:null},oi=null,cr=null,yo=null,Ps=0,ha=0,Rl=0;Et.textFeatureIndex?Ps=Et.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(Ps=Ke.featureIndex),Et.verticalTextFeatureIndex&&(ha=Et.verticalTextFeatureIndex);const xc=Et.textBox;if(xc){const Qi=Gr=>{let Qn=u.ah.horizontal;if(g.allowVerticalPlacement&&!Gr&&this.prevPlacement){const us=this.prevPlacement.placedOrientations[Ke.crossTileID];us&&(this.placedOrientations[Ke.crossTileID]=us,Qn=us,this.markUsedOrientation(g,Qn,Ke))}return Qn},Ri=(Gr,Qn)=>{if(g.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Et.verticalTextBox){for(const us of g.writingModes)if(us===u.ah.vertical?(Mn=Qn(),$o=Mn):Mn=Gr(),Mn&&Mn.box&&Mn.box.length)break}else Mn=Gr()},eo=Ke.textAnchorOffsetStartIndex,np=Ke.textAnchorOffsetEndIndex;if(np===eo){const Gr=(Qn,us)=>{const qr=this.collisionIndex.placeCollisionBox(Qn,ee,k,I,te.predicate,at);return qr&&qr.box&&qr.box.length&&(this.markUsedOrientation(g,us,Ke),this.placedOrientations[Ke.crossTileID]=us),qr};Ri(()=>Gr(xc,u.ah.horizontal),()=>{const Qn=Et.verticalTextBox;return g.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Qn?Gr(Qn,u.ah.vertical):{box:null,offscreen:null}}),Qi(Mn&&Mn.box&&Mn.box.length)}else{let Gr=u.ap[(Qt=(Ot=this.prevPlacement)===null||Ot===void 0?void 0:Ot.variableOffsets[Ke.crossTileID])===null||Qt===void 0?void 0:Qt.anchor];const Qn=(qr,wb,a_)=>{const Sb=qr.x2-qr.x1,bc=qr.y2-qr.y1,tg=Ke.textBoxScale,Eb=Me&&Ce==="never"?wb:null;let wc={box:[],offscreen:!1},si=ee==="never"?1:2,ng="never";Gr&&si++;for(let rp=0;rp<si;rp++){for(let Sc=eo;Sc<np;Sc++){const rg=g.textAnchorOffsets.get(Sc);if(Gr&&rg.textAnchor!==Gr)continue;const ig=this.attemptAnchorPlacement(rg,qr,Sb,bc,tg,ve,Te,k,I,te,ng,Ke,g,a_,Eb,at);if(ig&&(wc=ig.placedGlyphBoxes,wc&&wc.box&&wc.box.length))return Tt=!0,ur=ig.shift,wc}Gr?Gr=null:ng=ee}return wc};Ri(()=>Qn(xc,Et.iconBox,u.ah.horizontal),()=>{const qr=Et.verticalTextBox;return g.allowVerticalPlacement&&!(Mn&&Mn.box&&Mn.box.length)&&Ke.numVerticalGlyphVertices>0&&qr?Qn(qr,Et.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),Mn&&(Tt=Mn.box,qt=Mn.offscreen);const us=Qi(Mn&&Mn.box);if(!Tt&&this.prevPlacement){const qr=this.prevPlacement.variableOffsets[Ke.crossTileID];qr&&(this.variableOffsets[Ke.crossTileID]=qr,this.markUsedJustification(g,qr.anchor,Ke,us))}}}if(oi=Mn,Tt=oi&&oi.box&&oi.box.length>0,qt=oi&&oi.offscreen,Ke.useRuntimeCollisionCircles){const Qi=g.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),Ri=u.ai(g.textSizeData,Z,Qi),eo=b.get("text-padding");cr=this.collisionIndex.placeCollisionCircles(ee,Qi,g.lineVertexArray,g.glyphOffsetArray,Ri,I,L,A,f,Te,te.predicate,Ke.collisionCircleDiameter,eo,at),cr.circles.length&&cr.collisionDetected&&!f&&u.w("Collisions detected, but collision boxes are not shown"),Tt=de||cr.circles.length>0&&!cr.collisionDetected,qt=qt&&cr.offscreen}if(Et.iconFeatureIndex&&(Rl=Et.iconFeatureIndex),Et.iconBox){const Qi=Ri=>{const eo=Me&&ur?Ai(Ri,ur.x,ur.y,ve,Te,this.transform.angle):Ri;return this.collisionIndex.placeCollisionBox(eo,Ce,k,I,te.predicate,at)};$o&&$o.box&&$o.box.length&&Et.verticalIconBox?(yo=Qi(Et.verticalIconBox),jt=yo.box.length>0):(yo=Qi(Et.iconBox),jt=yo.box.length>0),qt=qt&&yo.offscreen}const wu=ne||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,Su=se||Ke.numIconVertices===0;if(wu||Su?Su?wu||(jt=jt&&Tt):Tt=jt&&Tt:jt=Tt=jt&&Tt,Tt&&oi&&oi.box&&this.collisionIndex.insertCollisionBox(oi.box,ee,b.get("text-ignore-placement"),g.bucketInstanceId,$o&&$o.box&&ha?ha:Ps,te.ID),jt&&yo&&this.collisionIndex.insertCollisionBox(yo.box,Ce,b.get("icon-ignore-placement"),g.bucketInstanceId,Rl,te.ID),cr&&(Tt&&this.collisionIndex.insertCollisionCircles(cr.circles,ee,b.get("text-ignore-placement"),g.bucketInstanceId,Ps,te.ID),f)){const Qi=g.bucketInstanceId;let Ri=this.collisionCircleArrays[Qi];Ri===void 0&&(Ri=this.collisionCircleArrays[Qi]=new Nr);for(let eo=0;eo<cr.circles.length;eo+=4)Ri.circles.push(cr.circles[eo+0]),Ri.circles.push(cr.circles[eo+1]),Ri.circles.push(cr.circles[eo+2]),Ri.circles.push(cr.collisionDetected?1:0)}if(Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new On(Tt||Ve,jt||$e,qt||g.justReloaded),p[Ke.crossTileID]=!0};if(Re){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ke=g.getSortedSymbolIndexes(this.transform.angle);for(let Et=Ke.length-1;Et>=0;--Et){const Ot=Ke[Et];Dt(g.symbolInstances.get(Ot),g.collisionArrays[Ot])}}else for(let Ke=s.symbolInstanceStart;Ke<s.symbolInstanceEnd;Ke++)Dt(g.symbolInstances.get(Ke),g.collisionArrays[Ke]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[g.bucketInstanceId];u.ar(Ke.invProjMatrix,I),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(s,p,f,g){let b;b=g===u.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.as(p)];const I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const L of I)L>=0&&(s.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:f.crossTileID)}markUsedOrientation(s,p,f){const g=p===u.ah.horizontal||p===u.ah.horizontalOnly?p:0,b=p===u.ah.vertical?p:0,I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const L of I)s.text.placedSymbolArray.get(L).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let f=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const g=p?p.symbolFadeChange(s):1,b=p?p.opacities:{},I=p?p.variableOffsets:{},L=p?p.placedOrientations:{};for(const A in this.placements){const k=this.placements[A],z=b[A];z?(this.opacities[A]=new wn(z,g,k.text,k.icon),f=f||k.text!==z.text.placed||k.icon!==z.icon.placed):(this.opacities[A]=new wn(null,g,k.text,k.icon,k.skipFade),f=f||k.text||k.icon)}for(const A in b){const k=b[A];if(!this.opacities[A]){const z=new wn(k,g,!1,!1);z.isHidden()||(this.opacities[A]=z,f=f||k.text.placed||k.icon.placed)}}for(const A in I)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=I[A]);for(const A in L)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=L[A]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:s)}updateLayerOpacities(s,p){const f={};for(const g of p){const b=g.getBucket(s);b&&g.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,f,g.collisionBoxArray)}}updateBucketOpacities(s,p,f){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const g=s.layers[0],b=g.layout,I=new wn(null,0,!1,!1,!0),L=b.get("text-allow-overlap"),A=b.get("icon-allow-overlap"),k=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=b.get("text-rotation-alignment")==="map",V=b.get("text-pitch-alignment")==="map",Z=b.get("icon-text-fit")!=="none",te=new wn(null,0,L&&(A||!s.hasIconData()||b.get("icon-optional")),A&&(L||!s.hasTextData()||b.get("text-optional")),!0);!s.collisionArrays&&f&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(f);const ne=(se,ee,de)=>{for(let Ce=0;Ce<ee/4;Ce++)se.opacityVertexArray.emplaceBack(de);se.hasVisibleVertices=se.hasVisibleVertices||de!==ki};for(let se=0;se<s.symbolInstances.length;se++){const ee=s.symbolInstances.get(se),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:Ce,crossTileID:le}=ee;let ve=this.opacities[le];p[le]?ve=I:ve||(ve=te,this.opacities[le]=ve),p[le]=!0;const Te=ee.numIconVertices>0,Me=this.placedOrientations[ee.crossTileID],Re=Me===u.ah.vertical,Ve=Me===u.ah.horizontal||Me===u.ah.horizontalOnly;if(de>0||Ce>0){const $e=E0(ve.text);ne(s.text,de,Re?ki:$e),ne(s.text,Ce,Ve?ki:$e);const qe=ve.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(Ke=>{Ke>=0&&(s.text.placedSymbolArray.get(Ke).hidden=qe||Re?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=qe||Ve?1:0);const at=this.variableOffsets[ee.crossTileID];at&&this.markUsedJustification(s,at.anchor,ee,Me);const Dt=this.placedOrientations[ee.crossTileID];Dt&&(this.markUsedJustification(s,"left",ee,Dt),this.markUsedOrientation(s,Dt,ee))}if(Te){const $e=E0(ve.icon),qe=!(Z&&ee.verticalPlacedIconSymbolIndex&&Re);ee.placedIconSymbolIndex>=0&&(ne(s.icon,ee.numIconVertices,qe?$e:ki),s.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=ve.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(ne(s.icon,ee.numVerticalIconVertices,qe?ki:$e),s.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const $e=s.collisionArrays[se];if($e){let qe=new u.P(0,0);if($e.textBox||$e.verticalTextBox){let Dt=!0;if(k){const Ke=this.variableOffsets[le];Ke?(qe=Ur(Ke.anchor,Ke.width,Ke.height,Ke.textOffset,Ke.textBoxScale),z&&qe._rotate(V?this.transform.angle:-this.transform.angle)):Dt=!1}$e.textBox&&sr(s.textCollisionBox.collisionVertexArray,ve.text.placed,!Dt||Re,qe.x,qe.y),$e.verticalTextBox&&sr(s.textCollisionBox.collisionVertexArray,ve.text.placed,!Dt||Ve,qe.x,qe.y)}const at=!!(!Ve&&$e.verticalIconBox);$e.iconBox&&sr(s.iconCollisionBox.collisionVertexArray,ve.icon.placed,at,Z?qe.x:0,Z?qe.y:0),$e.verticalIconBox&&sr(s.iconCollisionBox.collisionVertexArray,ve.icon.placed,!at,Z?qe.x:0,Z?qe.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=se.invProjMatrix,s.placementViewportMatrix=se.viewportMatrix,s.collisionCircleArray=se.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,p){const f=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*f>s}setStale(){this.stale=!0}}function sr(_,s,p,f,g){_.emplaceBack(s?1:0,p?1:0,f||0,g||0),_.emplaceBack(s?1:0,p?1:0,f||0,g||0),_.emplaceBack(s?1:0,p?1:0,f||0,g||0),_.emplaceBack(s?1:0,p?1:0,f||0,g||0)}const lc=Math.pow(2,25),tb=Math.pow(2,24),xn=Math.pow(2,17),um=Math.pow(2,16),cm=Math.pow(2,9),Oo=Math.pow(2,8),zo=Math.pow(2,1);function E0(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const s=_.placed?1:0,p=Math.floor(127*_.opacity);return p*lc+s*tb+p*xn+s*um+p*cm+s*Oo+p*zo+s}const ki=0;class as{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,p,f,g,b){const I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(p.getBucketParts(I,g,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((L,A)=>L.sortKey-A.sortKey));this._currentPartIndex<I.length;)if(p.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1}}class C0{constructor(s,p,f,g,b,I,L,A){this.placement=new ss(s,p,I,L,A),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(s,p,f){const g=C.now(),b=()=>!this._forceFullPlacement&&C.now()-g>2;for(;this._currentPlacementIndex>=0;){const I=p[s[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=L)&&(!I.maxzoom||I.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new as(I)),this._inProgressLayer.continuePlacement(f[I.source],this.placement,this._showCollisionBoxes,I,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Za=512/u.W/2;class Rr{constructor(s,p,f){this.tileID=s,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let b=0;b<p.length;b++){const I=p.get(b),L=I.key,A=g.get(L);A?A.push(I):g.set(L,[I])}for(const[b,I]of g){const L={positions:I.map(A=>({x:Math.floor(A.anchorX*Za),y:Math.floor(A.anchorY*Za)})),crossTileIDs:I.map(A=>A.crossTileID)};if(L.positions.length>128){const A=new u.au(L.positions.length,16,Uint16Array);for(const{x:k,y:z}of L.positions)A.add(k,z);A.finish(),delete L.positions,L.index=A}this._symbolsByKey[b]=L}}getScaledCoordinates(s,p){const{x:f,y:g,z:b}=this.tileID.canonical,{x:I,y:L,z:A}=p.canonical,k=Za/Math.pow(2,A-b),z=(L*u.W+s.anchorY)*k,V=g*u.W*Za;return{x:Math.floor((I*u.W+s.anchorX)*k-f*u.W*Za),y:Math.floor(z-V)}}findMatches(s,p,f){const g=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let b=0;b<s.length;b++){const I=s.get(b);if(I.crossTileID)continue;const L=this._symbolsByKey[I.key];if(!L)continue;const A=this.getScaledCoordinates(I,p);if(L.index){const k=L.index.range(A.x-g,A.y-g,A.x+g,A.y+g).sort();for(const z of k){const V=L.crossTileIDs[z];if(!f[V]){f[V]=!0,I.crossTileID=V;break}}}else if(L.positions)for(let k=0;k<L.positions.length;k++){const z=L.positions[k],V=L.crossTileIDs[k];if(Math.abs(z.x-A.x)<=g&&Math.abs(z.y-A.y)<=g&&!f[V]){f[V]=!0,I.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Rh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const p=Math.round((s-this.lng)/360);if(p!==0)for(const f in this.indexes){const g=this.indexes[f],b={};for(const I in g){const L=g[I];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+p),b[L.tileID.key]=L}this.indexes[f]=b}this.lng=s}addBucket(s,p,f){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<p.symbolInstances.length;b++)p.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const g=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const I=this.indexes[b];if(Number(b)>s.overscaledZ)for(const L in I){const A=I[L];A.tileID.isChildOf(s)&&A.findMatches(p.symbolInstances,s,g)}else{const L=I[s.scaledTo(Number(b)).key];L&&L.findMatches(p.symbolInstances,s,g)}}for(let b=0;b<p.symbolInstances.length;b++){const I=p.symbolInstances.get(b);I.crossTileID||(I.crossTileID=f.generate(),g[I.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Rr(s,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(s,p){for(const f of p.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[s][g]}removeStaleBuckets(s){let p=!1;for(const f in this.indexes){const g=this.indexes[f];for(const b in g)s[g[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[b]),delete g[b],p=!0)}return p}}class ar{constructor(){this.layerIndexes={},this.crossTileIDs=new Rh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,p,f){let g=this.layerIndexes[s.id];g===void 0&&(g=this.layerIndexes[s.id]=new hu);let b=!1;const I={};g.handleWrapJump(f);for(const L of p){const A=L.getBucket(s);A&&s.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(L.tileID,A,this.crossTileIDs)&&(b=!0),I[A.bucketInstanceId]=!0)}return g.removeStaleBuckets(I)&&(b=!0),b}pruneUnusedLayers(s){const p={};s.forEach(f=>{p[f]=!0});for(const f in this.layerIndexes)p[f]||delete this.layerIndexes[f]}}const pu=(_,s)=>u.t(_,s&&s.filter(p=>p.identifier!=="source.canvas")),Ts=u.av();class td extends u.E{constructor(s,p={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const g=this.sourceCaches[f].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[f].reload()}},this.map=s,this.dispatcher=new Es(ri(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,g)=>this.getGlyphs(f,g)),this.dispatcher.registerMessageHandler("GI",(f,g)=>this.getImages(f,g)),this.imageManager=new wt,this.imageManager.setEventedParent(this),this.glyphManager=new Gt(s._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Pt(256,512),this.crossTileSymbolIndex=new ar,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ax()),ii().on(Yi,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const g=this.sourceCaches[f.sourceId];if(!g)return;const b=g.getSource();if(b&&b.vectorLayerIds)for(const I in this._layers){const L=this._layers[I];L.source===b.id&&this._validateLayer(L)}})}loadURL(s,p={},f){this.fire(new u.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const g=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,p,f)}).catch(b=>{this._loadStyleRequest=null,b&&this.fire(new u.j(b))})}loadJSON(s,p={},f){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(s,p,f)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Ts,{validate:!1})}_load(s,p,f){var g;const b=p.transformStyle?p.transformStyle(f,s):s;if(!p.validate||!pu(this,u.x(b))){this._loaded=!0,this.stylesheet=b;for(const I in b.sources)this.addSource(I,b.sources[I],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new St(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const s=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of s){const f=u.az(p);f.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=f}}_loadSprite(s,p=!1,f=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,I,L,A){return u._(this,void 0,void 0,function*(){const k=De(b),z=L>1?"@2x":"",V={},Z={};for(const{id:te,url:ne}of k){const se=I.transformRequest(I.normalizeSpriteURL(ne,z,".json"),"SpriteJSON");V[te]=u.h(se,A);const ee=I.transformRequest(I.normalizeSpriteURL(ne,z,".png"),"SpriteImage");Z[te]=G.getImage(ee,A)}return yield Promise.all([...Object.values(V),...Object.values(Z)]),function(te,ne){return u._(this,void 0,void 0,function*(){const se={};for(const ee in te){se[ee]={};const de=C.getImageCanvasContext((yield ne[ee]).data),Ce=(yield te[ee]).data;for(const le in Ce){const{width:ve,height:Te,x:Me,y:Re,sdf:Ve,pixelRatio:$e,stretchX:qe,stretchY:at,content:Dt,textFitWidth:Ke,textFitHeight:Et}=Ce[le];se[ee][le]={data:null,pixelRatio:$e,sdf:Ve,stretchX:qe,stretchY:at,content:Dt,textFitWidth:Ke,textFitHeight:Et,spriteData:{width:ve,height:Te,x:Me,y:Re,context:de}}}}return se})}(V,Z)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const I in b){this._spritesImagesIds[I]=[];const L=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(A=>!(A in b)):[];for(const A of L)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in b[I]){const k=I==="default"?A:`${I}:${A}`;this._spritesImagesIds[I].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,b[I][A],!1):this.imageManager.addImage(k,b[I][A]),p&&(this._changedImages[k]=!0)}}}).catch(b=>{this._spriteRequest=null,g=b,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(s){const p=this.sourceCaches[s.source];if(!p)return;const f=s.sourceLayer;if(!f)return;const g=p.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const p=this._serializedAllLayers();if(!s||s.length===0)return Object.values(p);const f=[];for(const g of s)p[g]&&f.push(p[g]);return f}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const p=Object.keys(this._layers);for(const f of p){const g=this._layers[f];g.type!=="custom"&&(s[f]=g.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const p=this._changed;if(p){const g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(g.length||b.length)&&this._updateWorkerLayers(g,b);for(const I in this._updatedSources){const L=this._updatedSources[I];if(L==="reload")this._reloadSource(I);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const b=this.sourceCaches[g];f[g]=b.used,b.used=!1}for(const g of this._order){const b=this._layers[g];b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const g in f){const b=this.sourceCaches[g];!!f[g]!=!!b.used&&b.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(s),this.z=s.zoom,p&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,p={}){var f;this._checkLoaded();const g=this.serialize();if(s=p.transformStyle?p.transformStyle(g,s):s,((f=p.validate)===null||f===void 0||f)&&pu(this,u.x(s)))return!1;(s=u.aA(s)).layers=u.ay(s.layers);const b=u.aB(g,s),I=this._getOperationsToPerform(b);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const L of I.operations)L();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const p=[],f=[];for(const g of s)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":p.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":p.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":p.push(()=>{});break;default:f.push(g.command)}return{operations:p,unimplemented:f}}addImage(s,p){if(this.getImage(s))return this.fire(new u.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,p),this._afterImageUpdated(s)}updateImage(s,p){this.imageManager.updateImage(s,p)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new u.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,p,f={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(u.x.source,`sources.${s}`,p,null,f))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const g=this.sourceCaches[s]=new Ge(s,p,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:s})),g.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===s)return this.fire(new u.j(new Error(`Source "${s}" cannot be removed while layer "${f}" is using it.`)));const p=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],p.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,p){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const f=this.sourceCaches[s].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(p),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,p,f={}){this._checkLoaded();const g=s.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let b;if(s.type==="custom"){if(pu(this,u.aC(s)))return;b=u.az(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(g,s.source),s=u.aA(s),s=u.e(s,{source:g})),this._validate(u.x.layer,`layers.${g}`,s,{arrayIndex:-1},f))return;b=u.az(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:g}})}const I=p?this._order.indexOf(p):this._order.length;if(p&&I===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${p}".`)));else{if(this._order.splice(I,0,g),this._layerOrderChanged=!0,this._layers[g]=b,this._removedLayers[g]&&b.source&&b.type!=="custom"){const L=this._removedLayers[g];delete this._removedLayers[g],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(s,p){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new u.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===p)return;const f=this._order.indexOf(s);this._order.splice(f,1);const g=p?this._order.indexOf(p):this._order.length;p&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${s}" before non-existing layer "${p}".`))):(this._order.splice(g,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const p=this._layers[s];if(!p)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${s}".`)));p.setEventedParent(null);const f=this._order.indexOf(s);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=p,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],p.onRemove&&p.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,p,f){this._checkLoaded();const g=this.getLayer(s);g?g.minzoom===p&&g.maxzoom===f||(p!=null&&(g.minzoom=p),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,p,f={}){this._checkLoaded();const g=this.getLayer(s);if(g){if(!u.aD(g.filter,p))return p==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,p,null,f)||(g.filter=u.aA(p),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return u.aA(this.getLayer(s).filter)}setLayoutProperty(s,p,f,g={}){this._checkLoaded();const b=this.getLayer(s);b?u.aD(b.getLayoutProperty(p),f)||(b.setLayoutProperty(p,f,g),this._updateLayer(b)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,p){const f=this.getLayer(s);if(f)return f.getLayoutProperty(p);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,p,f,g={}){this._checkLoaded();const b=this.getLayer(s);b?u.aD(b.getPaintProperty(p),f)||(b.setPaintProperty(p,f,g)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,p){return this.getLayer(s).getPaintProperty(p)}setFeatureState(s,p){this._checkLoaded();const f=s.source,g=s.sourceLayer,b=this.sourceCaches[f];if(b===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const I=b.getSource().type;I==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||g?(s.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(g,s.id,p)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,p){this._checkLoaded();const f=s.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const b=g.getSource().type,I=b==="vector"?s.sourceLayer:void 0;b!=="vector"||I?p&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(I,s.id,p):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const p=s.source,f=s.sourceLayer,g=this.sourceCaches[p];if(g!==void 0)return g.getSource().type!=="vector"||f?(s.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,s.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=u.aE(this.sourceCaches,b=>b.serialize()),p=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:s,layers:p,terrain:f},b=>b!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const p=I=>this._layers[I].type==="fill-extrusion",f={},g=[];for(let I=this._order.length-1;I>=0;I--){const L=this._order[I];if(p(L)){f[L]=I;for(const A of s){const k=A[L];if(k)for(const z of k)g.push(z)}}}g.sort((I,L)=>L.intersectionZ-I.intersectionZ);const b=[];for(let I=this._order.length-1;I>=0;I--){const L=this._order[I];if(p(L))for(let A=g.length-1;A>=0;A--){const k=g[A].feature;if(f[k.layer.id]<I)break;b.push(k),g.pop()}else for(const A of s){const k=A[L];if(k)for(const z of k)b.push(z.feature)}}return b}queryRenderedFeatures(s,p,f){p&&p.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",p.filter,null,p);const g={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const L of p.layers){const A=this._layers[L];if(!A)return this.fire(new u.j(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];g[A.source]=!0}}const b=[];p.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const L in this.sourceCaches)p.layers&&!g[L]||b.push(ac(this.sourceCaches[L],this._layers,I,s,p,f));return this.placement&&b.push(function(L,A,k,z,V,Z,te){const ne={},se=Z.queryRenderedSymbols(z),ee=[];for(const de of Object.keys(se).map(Number))ee.push(te[de]);ee.sort(vi);for(const de of ee){const Ce=de.featureIndex.lookupSymbolFeatures(se[de.bucketInstanceId],A,de.bucketIndex,de.sourceLayerIndex,V.filter,V.layers,V.availableImages,L);for(const le in Ce){const ve=ne[le]=ne[le]||[],Te=Ce[le];Te.sort((Me,Re)=>{const Ve=de.featureSortOrder;if(Ve){const $e=Ve.indexOf(Me.featureIndex);return Ve.indexOf(Re.featureIndex)-$e}return Re.featureIndex-Me.featureIndex});for(const Me of Te)ve.push(Me)}}for(const de in ne)ne[de].forEach(Ce=>{const le=Ce.feature,ve=k[L[de].source].getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=ve});return ne}(this._layers,I,this.sourceCaches,s,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,p){p&&p.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",p.filter,null,p);const f=this.sourceCaches[s];return f?function(g,b){const I=g.getRenderableIds().map(k=>g.getTileByID(k)),L=[],A={};for(let k=0;k<I.length;k++){const z=I[k],V=z.tileID.canonical.key;A[V]||(A[V]=!0,z.querySourceFeatures(L,b))}return L}(f,p):[]}getLight(){return this.light.getLight()}setLight(s,p={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const I in s)if(!u.aD(s[I],f[I])){g=!0;break}if(!g)return;const b={now:C.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,p),this.light.updateTransitions(b)}_validate(s,p,f,g,b={}){return(!b||b.validate!==!1)&&pu(this,s.call(u.x,u.e({key:p,style:this.serialize(),value:f,styleSpec:u.v},g)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ii().off(Yi,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const f=this.sourceCaches[p];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const p in this.sourceCaches)this.sourceCaches[p].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,p,f,g,b=!1){let I=!1,L=!1;const A={};for(const k of this._order){const z=this._layers[k];if(z.type!=="symbol")continue;if(!A[z.source]){const Z=this.sourceCaches[z.source];A[z.source]=Z.getRenderableIds(!0).map(te=>Z.getTileByID(te)).sort((te,ne)=>ne.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(ne.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(z,A[z.source],s.center.lng);I=I||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),s.zoom))&&(this.pauseablePlacement=new C0(s,this.map.terrain,this._order,b,p,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),L=!0),I&&this.pauseablePlacement.placement.setStale()),L||I)for(const k of this._order){const z=this._layers[k];z.type==="symbol"&&this.placement.updateLayerOpacities(z,A[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,p){return u._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[p.source];return g&&g.setDependencies(p.tileID.key,p.type,p.icons),f})}getGlyphs(s,p){return u._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(p.stacks),g=this.sourceCaches[p.source];return g&&g.setDependencies(p.tileID.key,p.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,p={}){this._checkLoaded(),s&&this._validate(u.x.glyphs,"glyphs",s,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,p,f={},g){this._checkLoaded();const b=[{id:s,url:p}],I=[...De(this.stylesheet.sprite),...b];this._validate(u.x.sprite,"sprite",I,null,f)||(this.stylesheet.sprite=I,this._loadSprite(b,!0,g))}removeSprite(s){this._checkLoaded();const p=De(this.stylesheet.sprite);if(p.find(f=>f.id===s)){if(this._spritesImagesIds[s])for(const f of this._spritesImagesIds[s])this.imageManager.removeImage(f),this._changedImages[f]=!0;p.splice(p.findIndex(f=>f.id===s),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return De(this.stylesheet.sprite)}setSprite(s,p={},f){this._checkLoaded(),s&&this._validate(u.x.sprite,"sprite",s,null,p)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,f):(this._unloadSprite(),f&&f(null)))}}var sa=u.X([{name:"a_pos",type:"Int16",components:2}]),hm="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const uc={prelude:pn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",hm),terrainDepth:pn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",hm),terrainCoords:pn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",hm)};function pn(_,s){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=s.match(/attribute ([\w]+) ([\w]+)/g),g=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=b?b.concat(g):g,L={};return{fragmentSource:_=_.replace(p,(A,k,z,V,Z)=>(L[Z]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
varying ${z} ${V} ${Z};
#else
uniform ${z} ${V} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${z} ${V} ${Z} = u_${Z};
#endif
`)),vertexSource:s=s.replace(p,(A,k,z,V,Z)=>{const te=V==="float"?"vec2":"vec4",ne=Z.match(/color/)?"color":te;return L[Z]?k==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${z} ${te} a_${Z};
varying ${z} ${V} ${Z};
#else
uniform ${z} ${V} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${z} ${V} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${z} ${V} ${Z} = u_${Z};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${z} ${te} a_${Z};
#else
uniform ${z} ${V} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${z} ${V} ${Z} = a_${Z};
#else
    ${z} ${V} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${z} ${V} ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${z} ${V} ${Z} = u_${Z};
#endif
`}),staticAttributes:f,staticUniforms:I}}class nd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,p,f,g,b,I,L,A,k){this.context=s;let z=this.boundPaintVertexBuffers.length!==g.length;for(let V=0;!z&&V<g.length;V++)this.boundPaintVertexBuffers[V]!==g[V]&&(z=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==f||z||this.boundIndexBuffer!==b||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==k?this.freshBind(p,f,g,b,I,L,A,k):(s.bindVertexArray.set(this.vao),L&&L.bind(),b&&b.dynamicDraw&&b.bind(),A&&A.bind(),k&&k.bind())}freshBind(s,p,f,g,b,I,L,A){const k=s.numAttributes,z=this.context,V=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=A,p.enableAttributes(V,s);for(const Z of f)Z.enableAttributes(V,s);I&&I.enableAttributes(V,s),L&&L.enableAttributes(V,s),A&&A.enableAttributes(V,s),p.bind(),p.setVertexAttribPointers(V,s,b);for(const Z of f)Z.bind(),Z.setVertexAttribPointers(V,s,b);I&&(I.bind(),I.setVertexAttribPointers(V,s,b)),g&&g.bind(),L&&(L.bind(),L.setVertexAttribPointers(V,s,b)),A&&(A.bind(),A.setVertexAttribPointers(V,s,b)),z.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function cc(_){const s=[];for(let p=0;p<_.length;p++){if(_[p]===null)continue;const f=_[p].split(" ");s.push(f.pop())}return s}class pm{constructor(s,p,f,g,b,I){const L=s.gl;this.program=L.createProgram();const A=cc(p.staticAttributes),k=f?f.getBinderAttributes():[],z=A.concat(k),V=uc.prelude.staticUniforms?cc(uc.prelude.staticUniforms):[],Z=p.staticUniforms?cc(p.staticUniforms):[],te=f?f.getBinderUniforms():[],ne=V.concat(Z).concat(te),se=[];for(const Me of ne)se.indexOf(Me)<0&&se.push(Me);const ee=f?f.defines():[];b&&ee.push("#define OVERDRAW_INSPECTOR;"),I&&ee.push("#define TERRAIN3D;");const de=ee.concat(uc.prelude.fragmentSource,p.fragmentSource).join(`
`),Ce=ee.concat(uc.prelude.vertexSource,p.vertexSource).join(`
`),le=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(le,de),L.compileShader(le),!L.getShaderParameter(le,L.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${L.getShaderInfoLog(le)}`);L.attachShader(this.program,le);const ve=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(ve,Ce),L.compileShader(ve),!L.getShaderParameter(ve,L.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${L.getShaderInfoLog(ve)}`);L.attachShader(this.program,ve),this.attributes={};const Te={};this.numAttributes=z.length;for(let Me=0;Me<this.numAttributes;Me++)z[Me]&&(L.bindAttribLocation(this.program,Me,z[Me]),this.attributes[z[Me]]=Me);if(L.linkProgram(this.program),!L.getProgramParameter(this.program,L.LINK_STATUS))throw new Error(`Program failed to link: ${L.getProgramInfoLog(this.program)}`);L.deleteShader(ve),L.deleteShader(le);for(let Me=0;Me<se.length;Me++){const Re=se[Me];if(Re&&!Te[Re]){const Ve=L.getUniformLocation(this.program,Re);Ve&&(Te[Re]=Ve)}}this.fixedUniforms=g(s,Te),this.terrainUniforms=((Me,Re)=>({u_depth:new u.aG(Me,Re.u_depth),u_terrain:new u.aG(Me,Re.u_terrain),u_terrain_dim:new u.aH(Me,Re.u_terrain_dim),u_terrain_matrix:new u.aI(Me,Re.u_terrain_matrix),u_terrain_unpack:new u.aJ(Me,Re.u_terrain_unpack),u_terrain_exaggeration:new u.aH(Me,Re.u_terrain_exaggeration)}))(s,Te),this.binderUniforms=f?f.getUniforms(s,Te):[]}draw(s,p,f,g,b,I,L,A,k,z,V,Z,te,ne,se,ee,de,Ce){const le=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(f),s.setStencilMode(g),s.setColorMode(b),s.setCullFace(I),A){s.activeTexture.set(le.TEXTURE2),le.bindTexture(le.TEXTURE_2D,A.depthTexture),s.activeTexture.set(le.TEXTURE3),le.bindTexture(le.TEXTURE_2D,A.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(A[Te])}for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(L[Te]);se&&se.setUniforms(s,this.binderUniforms,te,{zoom:ne});let ve=0;switch(p){case le.LINES:ve=2;break;case le.TRIANGLES:ve=3;break;case le.LINE_STRIP:ve=1}for(const Te of Z.get()){const Me=Te.vaos||(Te.vaos={});(Me[k]||(Me[k]=new nd)).bind(s,this,z,se?se.getPaintVertexBuffers():[],V,Te.vertexOffset,ee,de,Ce),le.drawElements(p,Te.primitiveLength*ve,le.UNSIGNED_SHORT,Te.primitiveOffset*ve*2)}}}function rd(_,s,p){const f=1/At(p,1,s.transform.tileZoom),g=Math.pow(2,p.tileID.overscaledZ),b=p.tileSize*Math.pow(2,s.transform.tileZoom)/g,I=b*(p.tileID.canonical.x+p.tileID.wrap*g),L=b*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[I>>16,L>>16],u_pixel_coord_lower:[65535&I,65535&L]}}const Dh=(_,s,p,f)=>{const g=s.style.light,b=g.properties.get("position"),I=[b.x,b.y,b.z],L=function(){var k=new u.A(9);return u.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();g.properties.get("anchor")==="viewport"&&function(k,z){var V=Math.sin(z),Z=Math.cos(z);k[0]=Z,k[1]=V,k[2]=0,k[3]=-V,k[4]=Z,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(L,-s.transform.angle),function(k,z,V){var Z=z[0],te=z[1],ne=z[2];k[0]=Z*V[0]+te*V[3]+ne*V[6],k[1]=Z*V[1]+te*V[4]+ne*V[7],k[2]=Z*V[2]+te*V[5]+ne*V[8]}(I,I,L);const A=g.properties.get("color");return{u_matrix:_,u_lightpos:I,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+p,u_opacity:f}},dm=(_,s,p,f,g,b,I)=>u.e(Dh(_,s,p,f),rd(b,s,I),{u_height_factor:-Math.pow(2,g.overscaledZ)/I.tileSize/8}),id=_=>({u_matrix:_}),Oh=(_,s,p,f)=>u.e(id(_),rd(p,s,f)),od=(_,s)=>({u_matrix:_,u_world:s}),zh=(_,s,p,f,g)=>u.e(Oh(_,s,p,f),{u_world:g}),nb=(_,s,p,f)=>{const g=_.transform;let b,I;if(f.paint.get("circle-pitch-alignment")==="map"){const L=At(p,1,g.zoom);b=!0,I=[L,L]}else b=!1,I=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(s.posMatrix,p,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:I}},rb=(_,s,p)=>{const f=At(p,1,s.zoom),g=Math.pow(2,s.zoom-p.tileID.overscaledZ),b=p.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[s.pixelsToGLUnits[0]/(f*g),s.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:b}},fm=(_,s,p=1)=>({u_matrix:_,u_color:s,u_overlay:0,u_overlay_scale:p}),I0=_=>({u_matrix:_}),du=(_,s,p,f)=>({u_matrix:_,u_extrude_scale:At(s,1,p),u_intensity:f});function sd(_,s){const p=Math.pow(2,s.canonical.z),f=s.canonical.y;return[new u.Y(0,f/p).toLngLat().lat,new u.Y(0,(f+1)/p).toLngLat().lat]}const Ji=(_,s,p,f)=>{const g=_.transform;return{u_matrix:ym(_,s,p,f),u_ratio:1/At(s,1,g.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Fo=(_,s,p,f,g)=>u.e(Ji(_,s,p,g),{u_image:0,u_image_height:f}),mm=(_,s,p,f,g)=>{const b=_.transform,I=gm(s,b);return{u_matrix:ym(_,s,p,g),u_texsize:s.imageAtlasTexture.size,u_ratio:1/At(s,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[I,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},ad=(_,s,p,f,g,b)=>{const I=_.lineAtlas,L=gm(s,_.transform),A=p.layout.get("line-cap")==="round",k=I.getDash(f.from,A),z=I.getDash(f.to,A),V=k.width*g.fromScale,Z=z.width*g.toScale;return u.e(Ji(_,s,p,b),{u_patternscale_a:[L/V,-k.height/2],u_patternscale_b:[L/Z,-z.height/2],u_sdfgamma:I.width/(256*Math.min(V,Z)*_.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:z.y,u_mix:g.t})};function gm(_,s){return 1/At(_,1,s.tileZoom)}function ym(_,s,p,f){return _.translatePosMatrix(f?f.posMatrix:s.tileID.posMatrix,s,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const hc=(_,s,p,f,g)=>{return{u_matrix:_,u_tl_parent:s,u_scale_parent:p,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(I=g.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:ib(g.paint.get("raster-hue-rotate"))};var b,I};function ib(_){_*=Math.PI/180;const s=Math.sin(_),p=Math.cos(_);return[(2*p+1)/3,(-Math.sqrt(3)*s-p+1)/3,(Math.sqrt(3)*s-p+1)/3]}const T0=(_,s,p,f,g,b,I,L,A,k)=>{const z=g.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:z.width/z.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:I,u_coord_matrix:L,u_is_text:+A,u_pitch_with_map:+f,u_texsize:k,u_texture:0}},P0=(_,s,p,f,g,b,I,L,A,k,z)=>{const V=g.transform;return u.e(T0(_,s,p,f,g,b,I,L,A,k),{u_gamma_scale:f?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+z})},ob=(_,s,p,f,g,b,I,L,A,k)=>u.e(P0(_,s,p,f,g,b,I,L,!0,A,!0),{u_texsize_icon:k,u_texture_icon:1}),sb=(_,s,p)=>({u_matrix:_,u_opacity:s,u_color:p}),ab=(_,s,p,f,g,b)=>u.e(function(I,L,A,k){const z=A.imageManager.getPattern(I.from.toString()),V=A.imageManager.getPattern(I.to.toString()),{width:Z,height:te}=A.imageManager.getPixelSize(),ne=Math.pow(2,k.tileID.overscaledZ),se=k.tileSize*Math.pow(2,A.transform.tileZoom)/ne,ee=se*(k.tileID.canonical.x+k.tileID.wrap*ne),de=se*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[Z,te],u_mix:L.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/At(k,1,A.transform.tileZoom),u_pixel_coord_upper:[ee>>16,de>>16],u_pixel_coord_lower:[65535&ee,65535&de]}}(f,b,p,g),{u_matrix:_,u_opacity:s}),ld={fillExtrusion:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_lightpos:new u.aK(_,s.u_lightpos),u_lightintensity:new u.aH(_,s.u_lightintensity),u_lightcolor:new u.aK(_,s.u_lightcolor),u_vertical_gradient:new u.aH(_,s.u_vertical_gradient),u_opacity:new u.aH(_,s.u_opacity)}),fillExtrusionPattern:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_lightpos:new u.aK(_,s.u_lightpos),u_lightintensity:new u.aH(_,s.u_lightintensity),u_lightcolor:new u.aK(_,s.u_lightcolor),u_vertical_gradient:new u.aH(_,s.u_vertical_gradient),u_height_factor:new u.aH(_,s.u_height_factor),u_image:new u.aG(_,s.u_image),u_texsize:new u.aL(_,s.u_texsize),u_pixel_coord_upper:new u.aL(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(_,s.u_pixel_coord_lower),u_scale:new u.aK(_,s.u_scale),u_fade:new u.aH(_,s.u_fade),u_opacity:new u.aH(_,s.u_opacity)}),fill:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix)}),fillPattern:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_image:new u.aG(_,s.u_image),u_texsize:new u.aL(_,s.u_texsize),u_pixel_coord_upper:new u.aL(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(_,s.u_pixel_coord_lower),u_scale:new u.aK(_,s.u_scale),u_fade:new u.aH(_,s.u_fade)}),fillOutline:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_world:new u.aL(_,s.u_world)}),fillOutlinePattern:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_world:new u.aL(_,s.u_world),u_image:new u.aG(_,s.u_image),u_texsize:new u.aL(_,s.u_texsize),u_pixel_coord_upper:new u.aL(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(_,s.u_pixel_coord_lower),u_scale:new u.aK(_,s.u_scale),u_fade:new u.aH(_,s.u_fade)}),circle:(_,s)=>({u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_scale_with_map:new u.aG(_,s.u_scale_with_map),u_pitch_with_map:new u.aG(_,s.u_pitch_with_map),u_extrude_scale:new u.aL(_,s.u_extrude_scale),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_matrix:new u.aI(_,s.u_matrix)}),collisionBox:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(_,s.u_pixels_to_tile_units),u_extrude_scale:new u.aL(_,s.u_extrude_scale),u_overscale_factor:new u.aH(_,s.u_overscale_factor)}),collisionCircle:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_inv_matrix:new u.aI(_,s.u_inv_matrix),u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_viewport_size:new u.aL(_,s.u_viewport_size)}),debug:(_,s)=>({u_color:new u.aM(_,s.u_color),u_matrix:new u.aI(_,s.u_matrix),u_overlay:new u.aG(_,s.u_overlay),u_overlay_scale:new u.aH(_,s.u_overlay_scale)}),clippingMask:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix)}),heatmap:(_,s)=>({u_extrude_scale:new u.aH(_,s.u_extrude_scale),u_intensity:new u.aH(_,s.u_intensity),u_matrix:new u.aI(_,s.u_matrix)}),heatmapTexture:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_world:new u.aL(_,s.u_world),u_image:new u.aG(_,s.u_image),u_color_ramp:new u.aG(_,s.u_color_ramp),u_opacity:new u.aH(_,s.u_opacity)}),hillshade:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_image:new u.aG(_,s.u_image),u_latrange:new u.aL(_,s.u_latrange),u_light:new u.aL(_,s.u_light),u_shadow:new u.aM(_,s.u_shadow),u_highlight:new u.aM(_,s.u_highlight),u_accent:new u.aM(_,s.u_accent)}),hillshadePrepare:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_image:new u.aG(_,s.u_image),u_dimension:new u.aL(_,s.u_dimension),u_zoom:new u.aH(_,s.u_zoom),u_unpack:new u.aJ(_,s.u_unpack)}),line:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_ratio:new u.aH(_,s.u_ratio),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_units_to_pixels:new u.aL(_,s.u_units_to_pixels)}),lineGradient:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_ratio:new u.aH(_,s.u_ratio),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_units_to_pixels:new u.aL(_,s.u_units_to_pixels),u_image:new u.aG(_,s.u_image),u_image_height:new u.aH(_,s.u_image_height)}),linePattern:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_texsize:new u.aL(_,s.u_texsize),u_ratio:new u.aH(_,s.u_ratio),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_image:new u.aG(_,s.u_image),u_units_to_pixels:new u.aL(_,s.u_units_to_pixels),u_scale:new u.aK(_,s.u_scale),u_fade:new u.aH(_,s.u_fade)}),lineSDF:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_ratio:new u.aH(_,s.u_ratio),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_units_to_pixels:new u.aL(_,s.u_units_to_pixels),u_patternscale_a:new u.aL(_,s.u_patternscale_a),u_patternscale_b:new u.aL(_,s.u_patternscale_b),u_sdfgamma:new u.aH(_,s.u_sdfgamma),u_image:new u.aG(_,s.u_image),u_tex_y_a:new u.aH(_,s.u_tex_y_a),u_tex_y_b:new u.aH(_,s.u_tex_y_b),u_mix:new u.aH(_,s.u_mix)}),raster:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_tl_parent:new u.aL(_,s.u_tl_parent),u_scale_parent:new u.aH(_,s.u_scale_parent),u_buffer_scale:new u.aH(_,s.u_buffer_scale),u_fade_t:new u.aH(_,s.u_fade_t),u_opacity:new u.aH(_,s.u_opacity),u_image0:new u.aG(_,s.u_image0),u_image1:new u.aG(_,s.u_image1),u_brightness_low:new u.aH(_,s.u_brightness_low),u_brightness_high:new u.aH(_,s.u_brightness_high),u_saturation_factor:new u.aH(_,s.u_saturation_factor),u_contrast_factor:new u.aH(_,s.u_contrast_factor),u_spin_weights:new u.aK(_,s.u_spin_weights)}),symbolIcon:(_,s)=>({u_is_size_zoom_constant:new u.aG(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(_,s.u_is_size_feature_constant),u_size_t:new u.aH(_,s.u_size_t),u_size:new u.aH(_,s.u_size),u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_pitch:new u.aH(_,s.u_pitch),u_rotate_symbol:new u.aG(_,s.u_rotate_symbol),u_aspect_ratio:new u.aH(_,s.u_aspect_ratio),u_fade_change:new u.aH(_,s.u_fade_change),u_matrix:new u.aI(_,s.u_matrix),u_label_plane_matrix:new u.aI(_,s.u_label_plane_matrix),u_coord_matrix:new u.aI(_,s.u_coord_matrix),u_is_text:new u.aG(_,s.u_is_text),u_pitch_with_map:new u.aG(_,s.u_pitch_with_map),u_texsize:new u.aL(_,s.u_texsize),u_texture:new u.aG(_,s.u_texture)}),symbolSDF:(_,s)=>({u_is_size_zoom_constant:new u.aG(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(_,s.u_is_size_feature_constant),u_size_t:new u.aH(_,s.u_size_t),u_size:new u.aH(_,s.u_size),u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_pitch:new u.aH(_,s.u_pitch),u_rotate_symbol:new u.aG(_,s.u_rotate_symbol),u_aspect_ratio:new u.aH(_,s.u_aspect_ratio),u_fade_change:new u.aH(_,s.u_fade_change),u_matrix:new u.aI(_,s.u_matrix),u_label_plane_matrix:new u.aI(_,s.u_label_plane_matrix),u_coord_matrix:new u.aI(_,s.u_coord_matrix),u_is_text:new u.aG(_,s.u_is_text),u_pitch_with_map:new u.aG(_,s.u_pitch_with_map),u_texsize:new u.aL(_,s.u_texsize),u_texture:new u.aG(_,s.u_texture),u_gamma_scale:new u.aH(_,s.u_gamma_scale),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_is_halo:new u.aG(_,s.u_is_halo)}),symbolTextAndIcon:(_,s)=>({u_is_size_zoom_constant:new u.aG(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(_,s.u_is_size_feature_constant),u_size_t:new u.aH(_,s.u_size_t),u_size:new u.aH(_,s.u_size),u_camera_to_center_distance:new u.aH(_,s.u_camera_to_center_distance),u_pitch:new u.aH(_,s.u_pitch),u_rotate_symbol:new u.aG(_,s.u_rotate_symbol),u_aspect_ratio:new u.aH(_,s.u_aspect_ratio),u_fade_change:new u.aH(_,s.u_fade_change),u_matrix:new u.aI(_,s.u_matrix),u_label_plane_matrix:new u.aI(_,s.u_label_plane_matrix),u_coord_matrix:new u.aI(_,s.u_coord_matrix),u_is_text:new u.aG(_,s.u_is_text),u_pitch_with_map:new u.aG(_,s.u_pitch_with_map),u_texsize:new u.aL(_,s.u_texsize),u_texsize_icon:new u.aL(_,s.u_texsize_icon),u_texture:new u.aG(_,s.u_texture),u_texture_icon:new u.aG(_,s.u_texture_icon),u_gamma_scale:new u.aH(_,s.u_gamma_scale),u_device_pixel_ratio:new u.aH(_,s.u_device_pixel_ratio),u_is_halo:new u.aG(_,s.u_is_halo)}),background:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_opacity:new u.aH(_,s.u_opacity),u_color:new u.aM(_,s.u_color)}),backgroundPattern:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_opacity:new u.aH(_,s.u_opacity),u_image:new u.aG(_,s.u_image),u_pattern_tl_a:new u.aL(_,s.u_pattern_tl_a),u_pattern_br_a:new u.aL(_,s.u_pattern_br_a),u_pattern_tl_b:new u.aL(_,s.u_pattern_tl_b),u_pattern_br_b:new u.aL(_,s.u_pattern_br_b),u_texsize:new u.aL(_,s.u_texsize),u_mix:new u.aH(_,s.u_mix),u_pattern_size_a:new u.aL(_,s.u_pattern_size_a),u_pattern_size_b:new u.aL(_,s.u_pattern_size_b),u_scale_a:new u.aH(_,s.u_scale_a),u_scale_b:new u.aH(_,s.u_scale_b),u_pixel_coord_upper:new u.aL(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(_,s.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(_,s.u_tile_units_to_pixels)}),terrain:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_texture:new u.aG(_,s.u_texture),u_ele_delta:new u.aH(_,s.u_ele_delta)}),terrainDepth:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_ele_delta:new u.aH(_,s.u_ele_delta)}),terrainCoords:(_,s)=>({u_matrix:new u.aI(_,s.u_matrix),u_texture:new u.aG(_,s.u_texture),u_terrain_coords_id:new u.aH(_,s.u_terrain_coords_id),u_ele_delta:new u.aH(_,s.u_ele_delta)})};class _m{constructor(s,p,f){this.context=s;const g=s.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ud={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vm{constructor(s,p,f,g){this.length=p.length,this.attributes=f,this.itemSize=p.bytesPerElement,this.dynamicDraw=g,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,p){for(let f=0;f<this.attributes.length;f++){const g=p.attributes[this.attributes[f].name];g!==void 0&&s.enableVertexAttribArray(g)}}setVertexAttribPointers(s,p,f){for(let g=0;g<this.attributes.length;g++){const b=this.attributes[g],I=p.attributes[b.name];I!==void 0&&s.vertexAttribPointer(I,b.components,s[ud[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fh=new WeakMap;function Bo(_){var s;if(Fh.has(_))return Fh.get(_);{const p=(s=_.getParameter(_.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Fh.set(_,p),p}}class dn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xm extends dn{getDefault(){return u.aO.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Bh extends dn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class jh extends dn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class lb extends dn{getDefault(){return[!0,!0,!0,!0]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class cd extends dn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class ub extends dn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class pc extends dn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const p=this.current;(s.func!==p.func||s.ref!==p.ref||s.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class cb extends dn{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class L0 extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=s,this.dirty=!1}}class hb extends dn{getDefault(){return[0,1]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class M0 extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=s,this.dirty=!1}}class bm extends dn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class A0 extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.BLEND):p.disable(p.BLEND),this.current=s,this.dirty=!1}}class k0 extends dn{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class N0 extends dn{getDefault(){return u.aO.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class R0 extends dn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class fu extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=s,this.dirty=!1}}class D0 extends dn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class pb extends dn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class db extends dn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class O0 extends dn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class $h extends dn{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class fb extends dn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class hd extends dn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class mb extends dn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class gb extends dn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class z0 extends dn{getDefault(){return null}set(s){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class F0 extends dn{getDefault(){return null}set(s){var p;if(s===this.current&&!this.dirty)return;const f=this.gl;Bo(f)?f.bindVertexArray(s):(p=f.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class B0 extends dn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class wm extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class j0 extends dn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class dc extends dn{constructor(s,p){super(s),this.context=s,this.parent=p}getDefault(){return null}}class Xa extends dc{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Sm extends dc{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Em extends dc{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Cm{constructor(s,p,f,g,b){this.context=s,this.width=p,this.height=f;const I=s.gl,L=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Xa(s,L),g)this.depthAttachment=b?new Em(s,L):new Sm(s,L);else if(b)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,p=this.colorAttachment.get();if(p&&s.deleteTexture(p),this.depthAttachment){const f=this.depthAttachment.get();f&&s.deleteRenderbuffer(f)}s.deleteFramebuffer(this.framebuffer)}}class lr{constructor(s,p,f){this.blendFunction=s,this.blendColor=p,this.mask=f}}lr.Replace=[1,0],lr.disabled=new lr(lr.Replace,u.aO.transparent,[!1,!1,!1,!1]),lr.unblended=new lr(lr.Replace,u.aO.transparent,[!0,!0,!0,!0]),lr.alphaBlended=new lr([1,771],u.aO.transparent,[!0,!0,!0,!0]);class Im{constructor(s){var p,f;if(this.gl=s,this.clearColor=new xm(this),this.clearDepth=new Bh(this),this.clearStencil=new jh(this),this.colorMask=new lb(this),this.depthMask=new cd(this),this.stencilMask=new ub(this),this.stencilFunc=new pc(this),this.stencilOp=new cb(this),this.stencilTest=new L0(this),this.depthRange=new hb(this),this.depthTest=new M0(this),this.depthFunc=new bm(this),this.blend=new A0(this),this.blendFunc=new k0(this),this.blendColor=new N0(this),this.blendEquation=new R0(this),this.cullFace=new fu(this),this.cullFaceSide=new D0(this),this.frontFace=new pb(this),this.program=new db(this),this.activeTexture=new O0(this),this.viewport=new $h(this),this.bindFramebuffer=new fb(this),this.bindRenderbuffer=new hd(this),this.bindTexture=new mb(this),this.bindVertexBuffer=new gb(this),this.bindElementBuffer=new z0(this),this.bindVertexArray=new F0(this),this.pixelStoreUnpack=new B0(this),this.pixelStoreUnpackPremultiplyAlpha=new wm(this),this.pixelStoreUnpackFlipY=new j0(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Bo(s)){this.HALF_FLOAT=s.HALF_FLOAT;const g=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=s.RGBA16F)!==null&&p!==void 0?p:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=s.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const g=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,p){return new _m(this,s,p)}createVertexBuffer(s,p,f){return new vm(this,s,p,f)}createRenderbuffer(s,p,f){const g=this.gl,b=g.createRenderbuffer();return this.bindRenderbuffer.set(b),g.renderbufferStorage(g.RENDERBUFFER,s,p,f),this.bindRenderbuffer.set(null),b}createFramebuffer(s,p,f,g){return new Cm(this,s,p,f,g)}clear({color:s,depth:p,stencil:f}){const g=this.gl;let b=0;s&&(b|=g.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(b|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),f!==void 0&&(b|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){u.aD(s.blendFunction,lr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Bo(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var p;return Bo(this.gl)?this.gl.deleteVertexArray(s):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class Ht{constructor(s,p,f){this.func=s,this.mask=p,this.range=f}}Ht.ReadOnly=!1,Ht.ReadWrite=!0,Ht.disabled=new Ht(519,Ht.ReadOnly,[0,1]);const Vh=7680;class Gn{constructor(s,p,f,g,b,I){this.test=s,this.ref=p,this.mask=f,this.fail=g,this.depthFail=b,this.pass=I}}Gn.disabled=new Gn({func:519,mask:0},0,0,Vh,Vh,Vh);class Bn{constructor(s,p,f){this.enable=s,this.mode=p,this.frontFace=f}}let pd;function $0(_,s,p,f,g,b,I){const L=_.context,A=L.gl,k=_.useProgram("collisionBox"),z=[];let V=0,Z=0;for(let le=0;le<f.length;le++){const ve=f[le],Te=s.getTile(ve),Me=Te.getBucket(p);if(!Me)continue;let Re=ve.posMatrix;g[0]===0&&g[1]===0||(Re=_.translatePosMatrix(ve.posMatrix,Te,g,b));const Ve=I?Me.textCollisionBox:Me.iconCollisionBox,$e=Me.collisionCircleArray;if($e.length>0){const qe=u.F(),at=Re;u.aP(qe,Me.placementInvProjMatrix,_.transform.glCoordMatrix),u.aP(qe,qe,Me.placementViewportMatrix),z.push({circleArray:$e,circleOffset:Z,transform:at,invTransform:qe,coord:ve}),V+=$e.length/4,Z=V}Ve&&k.draw(L,A.LINES,Ht.disabled,Gn.disabled,_.colorModeForRenderPass(),Bn.disabled,rb(Re,_.transform,Te),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ve),p.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,null,_.transform.zoom,null,null,Ve.collisionVertexBuffer)}if(!I||!z.length)return;const te=_.useProgram("collisionCircle"),ne=new u.aQ;ne.resize(4*V),ne._trim();let se=0;for(const le of z)for(let ve=0;ve<le.circleArray.length/4;ve++){const Te=4*ve,Me=le.circleArray[Te+0],Re=le.circleArray[Te+1],Ve=le.circleArray[Te+2],$e=le.circleArray[Te+3];ne.emplace(se++,Me,Re,Ve,$e,0),ne.emplace(se++,Me,Re,Ve,$e,1),ne.emplace(se++,Me,Re,Ve,$e,2),ne.emplace(se++,Me,Re,Ve,$e,3)}(!pd||pd.length<2*V)&&(pd=function(le){const ve=2*le,Te=new u.aS;Te.resize(ve),Te._trim();for(let Me=0;Me<ve;Me++){const Re=6*Me;Te.uint16[Re+0]=4*Me+0,Te.uint16[Re+1]=4*Me+1,Te.uint16[Re+2]=4*Me+2,Te.uint16[Re+3]=4*Me+2,Te.uint16[Re+4]=4*Me+3,Te.uint16[Re+5]=4*Me+0}return Te}(V));const ee=L.createIndexBuffer(pd,!0),de=L.createVertexBuffer(ne,u.aR.members,!0);for(const le of z){const ve={u_matrix:le.transform,u_inv_matrix:le.invTransform,u_camera_to_center_distance:(Ce=_.transform).cameraToCenterDistance,u_viewport_size:[Ce.width,Ce.height]};te.draw(L,A.TRIANGLES,Ht.disabled,Gn.disabled,_.colorModeForRenderPass(),Bn.disabled,ve,_.style.map.terrain&&_.style.map.terrain.getTerrainData(le.coord),p.id,de,ee,u.$.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ce;de.destroy(),ee.destroy()}Bn.disabled=new Bn(!1,1029,2305),Bn.backCCW=new Bn(!0,1029,2305);const V0=u.an(new Float32Array(16));function yb(_,s,p,f,g,b){const{horizontalAlign:I,verticalAlign:L}=u.at(_);return new u.P((-(I-.5)*s/g+f[0])*b,(-(L-.5)*p/g+f[1])*b)}function U0(_,s,p,f,g,b,I,L,A,k,z){const V=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,te=_.icon.dynamicLayoutVertexArray,ne={};Z.clear();for(let se=0;se<V.length;se++){const ee=V.get(se),de=ee.hidden||!ee.crossTileID||_.allowVerticalPlacement&&!ee.placedOrientation?null:f[ee.crossTileID];if(de){const Ce=new u.P(ee.anchorX,ee.anchorY),le=kr(Ce,p?I:b,z),ve=oe(g.cameraToCenterDistance,le.signedDistanceFromCamera);let Te=u.ai(_.textSizeData,A,ee)*ve/u.ao;p&&(Te*=_.tilePixelRatio/L);const{width:Me,height:Re,anchor:Ve,textOffset:$e,textBoxScale:qe}=de,at=yb(Ve,Me,Re,$e,qe,Te),Dt=p?kr(Ce.add(at),b,z).point:le.point.add(s?at.rotate(-g.angle):at),Ke=_.allowVerticalPlacement&&ee.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Et=0;Et<ee.numGlyphs;Et++)u.aj(Z,Dt,Ke);k&&ee.associatedIconIndex>=0&&(ne[ee.associatedIconIndex]={shiftedAnchor:Dt,angle:Ke})}else Oe(ee.numGlyphs,Z)}if(k){te.clear();const se=_.icon.placedSymbolArray;for(let ee=0;ee<se.length;ee++){const de=se.get(ee);if(de.hidden)Oe(de.numGlyphs,te);else{const Ce=ne[ee];if(Ce)for(let le=0;le<de.numGlyphs;le++)u.aj(te,Ce.shiftedAnchor,Ce.angle);else Oe(de.numGlyphs,te)}}_.icon.dynamicLayoutVertexBuffer.updateData(te)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function dd(_,s,p){return p.iconsInText&&s?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Uh(_,s,p,f,g,b,I,L,A,k,z,V){const Z=_.context,te=Z.gl,ne=_.transform,se=L==="map",ee=A==="map",de=L!=="viewport"&&p.layout.get("symbol-placement")!=="point",Ce=se&&!ee&&!de,le=!p.layout.get("symbol-sort-key").isConstant();let ve=!1;const Te=_.depthModeForSublayer(0,Ht.ReadOnly),Me=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[];for(const Ve of f){const $e=s.getTile(Ve),qe=$e.getBucket(p);if(!qe)continue;const at=g?qe.text:qe.icon;if(!at||!at.segments.get().length||!at.hasVisibleVertices)continue;const Dt=at.programConfigurations.get(p.id),Ke=g||qe.sdfIcons,Et=g?qe.textSizeData:qe.iconSizeData,Ot=ee||ne.pitch!==0,Qt=_.useProgram(dd(Ke,g,qe),Dt),Tt=u.ag(Et,ne.zoom),jt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve);let qt,ur,Mn,$o,oi=[0,0],cr=null;if(g)ur=$e.glyphAtlasTexture,Mn=te.LINEAR,qt=$e.glyphAtlasTexture.size,qe.iconsInText&&(oi=$e.imageAtlasTexture.size,cr=$e.imageAtlasTexture,$o=Ot||_.options.rotating||_.options.zooming||Et.kind==="composite"||Et.kind==="camera"?te.LINEAR:te.NEAREST);else{const Gr=p.layout.get("icon-size").constantOr(0)!==1||qe.iconsNeedLinear;ur=$e.imageAtlasTexture,Mn=Ke||_.options.rotating||_.options.zooming||Gr||Ot?te.LINEAR:te.NEAREST,qt=$e.imageAtlasTexture.size}const yo=At($e,1,_.transform.zoom),Ps=Is(Ve.posMatrix,ee,se,_.transform,yo),ha=oa(Ve.posMatrix,ee,se,_.transform,yo),Rl=Me&&qe.hasTextData(),xc=p.layout.get("icon-text-fit")!=="none"&&Rl&&qe.hasIconData();if(de){const Gr=_.style.map.terrain?(us,qr)=>_.style.map.terrain.getElevation(Ve,us,qr):null,Qn=p.layout.get("text-rotation-alignment")==="map";H(qe,Ve.posMatrix,_,g,Ps,ha,ee,k,Qn,Gr)}const wu=_.translatePosMatrix(Ve.posMatrix,$e,b,I),Su=de||g&&Me||xc?V0:Ps,Qi=_.translatePosMatrix(ha,$e,b,I,!0),Ri=Ke&&p.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let eo;eo=Ke?qe.iconsInText?ob(Et.kind,Tt,Ce,ee,_,wu,Su,Qi,qt,oi):P0(Et.kind,Tt,Ce,ee,_,wu,Su,Qi,g,qt,!0):T0(Et.kind,Tt,Ce,ee,_,wu,Su,Qi,g,qt);const np={program:Qt,buffers:at,uniformValues:eo,atlasTexture:ur,atlasTextureIcon:cr,atlasInterpolation:Mn,atlasInterpolationIcon:$o,isSDF:Ke,hasHalo:Ri};if(le&&qe.canOverlap){ve=!0;const Gr=at.segments.get();for(const Qn of Gr)Re.push({segments:new u.$([Qn]),sortKey:Qn.sortKey,state:np,terrainData:jt})}else Re.push({segments:at.segments,sortKey:0,state:np,terrainData:jt})}ve&&Re.sort((Ve,$e)=>Ve.sortKey-$e.sortKey);for(const Ve of Re){const $e=Ve.state;if(Z.activeTexture.set(te.TEXTURE0),$e.atlasTexture.bind($e.atlasInterpolation,te.CLAMP_TO_EDGE),$e.atlasTextureIcon&&(Z.activeTexture.set(te.TEXTURE1),$e.atlasTextureIcon&&$e.atlasTextureIcon.bind($e.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),$e.isSDF){const qe=$e.uniformValues;$e.hasHalo&&(qe.u_is_halo=1,Gh($e.buffers,Ve.segments,p,_,$e.program,Te,z,V,qe,Ve.terrainData)),qe.u_is_halo=0}Gh($e.buffers,Ve.segments,p,_,$e.program,Te,z,V,$e.uniformValues,Ve.terrainData)}}function Gh(_,s,p,f,g,b,I,L,A,k){const z=f.context;g.draw(z,z.gl.TRIANGLES,b,I,L,Bn.disabled,A,k,p.id,_.layoutVertexBuffer,_.indexBuffer,s,p.paint,f.transform.zoom,_.programConfigurations.get(p.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function fd(_,s,p,f,g){if(!p||!f||!f.imageAtlas)return;const b=f.imageAtlas.patternPositions;let I=b[p.to.toString()],L=b[p.from.toString()];if(!I&&L&&(I=L),!L&&I&&(L=I),!I||!L){const A=g.getPaintProperty(s);I=b[A],L=b[A]}I&&L&&_.setConstantPatternPositions(I,L)}function Tl(_,s,p,f,g,b,I){const L=_.context.gl,A="fill-pattern",k=p.paint.get(A),z=k&&k.constantOr(1),V=p.getCrossfadeParameters();let Z,te,ne,se,ee;I?(te=z&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=L.LINES):(te=z?"fillPattern":"fill",Z=L.TRIANGLES);const de=k.constantOr(null);for(const Ce of f){const le=s.getTile(Ce);if(z&&!le.patternsLoaded())continue;const ve=le.getBucket(p);if(!ve)continue;const Te=ve.programConfigurations.get(p.id),Me=_.useProgram(te,Te),Re=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ce);z&&(_.context.activeTexture.set(L.TEXTURE0),le.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Te.updatePaintBuffers(V)),fd(Te,A,de,le,p);const Ve=Re?Ce:null,$e=_.translatePosMatrix(Ve?Ve.posMatrix:Ce.posMatrix,le,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(I){se=ve.indexBuffer2,ee=ve.segments2;const qe=[L.drawingBufferWidth,L.drawingBufferHeight];ne=te==="fillOutlinePattern"&&z?zh($e,_,V,le,qe):od($e,qe)}else se=ve.indexBuffer,ee=ve.segments,ne=z?Oh($e,_,V,le):id($e);Me.draw(_.context,Z,g,_.stencilModeForClipping(Ce),b,Bn.disabled,ne,Re,p.id,ve.layoutVertexBuffer,se,ee,p.paint,_.transform.zoom,Te)}}function Pl(_,s,p,f,g,b,I){const L=_.context,A=L.gl,k="fill-extrusion-pattern",z=p.paint.get(k),V=z.constantOr(1),Z=p.getCrossfadeParameters(),te=p.paint.get("fill-extrusion-opacity"),ne=z.constantOr(null);for(const se of f){const ee=s.getTile(se),de=ee.getBucket(p);if(!de)continue;const Ce=_.style.map.terrain&&_.style.map.terrain.getTerrainData(se),le=de.programConfigurations.get(p.id),ve=_.useProgram(V?"fillExtrusionPattern":"fillExtrusion",le);V&&(_.context.activeTexture.set(A.TEXTURE0),ee.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),le.updatePaintBuffers(Z)),fd(le,k,ne,ee,p);const Te=_.translatePosMatrix(se.posMatrix,ee,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Me=p.paint.get("fill-extrusion-vertical-gradient"),Re=V?dm(Te,_,Me,te,se,Z,ee):Dh(Te,_,Me,te);ve.draw(L,L.gl.TRIANGLES,g,b,I,Bn.backCCW,Re,Ce,p.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,p.paint,_.transform.zoom,le,_.style.map.terrain&&de.centroidVertexBuffer)}}function ls(_,s,p,f,g,b,I){const L=_.context,A=L.gl,k=p.fbo;if(!k)return;const z=_.useProgram("hillshade"),V=_.style.map.terrain&&_.style.map.terrain.getTerrainData(s);L.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,k.colorAttachment.get()),z.draw(L,A.TRIANGLES,g,b,I,Bn.disabled,((Z,te,ne,se)=>{const ee=ne.paint.get("hillshade-shadow-color"),de=ne.paint.get("hillshade-highlight-color"),Ce=ne.paint.get("hillshade-accent-color");let le=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=Z.transform.angle);const ve=!Z.options.moving;return{u_matrix:se?se.posMatrix:Z.transform.calculatePosMatrix(te.tileID.toUnwrapped(),ve),u_image:0,u_latrange:sd(0,te.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),le],u_shadow:ee,u_highlight:de,u_accent:Ce}})(_,p,f,V?s:null),V,f.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function G0(_,s,p,f,g,b){const I=_.context,L=I.gl,A=s.dem;if(A&&A.data){const k=A.dim,z=A.stride,V=A.getPixels();if(I.activeTexture.set(L.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||_.getTileTexture(z),s.demTexture){const te=s.demTexture;te.update(V,{premultiply:!1}),te.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else s.demTexture=new Ue(I,V,L.RGBA,{premultiply:!1}),s.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);I.activeTexture.set(L.TEXTURE0);let Z=s.fbo;if(!Z){const te=new Ue(I,{width:k,height:k,data:null},L.RGBA);te.bind(L.LINEAR,L.CLAMP_TO_EDGE),Z=s.fbo=I.createFramebuffer(k,k,!0,!1),Z.colorAttachment.set(te.texture)}I.bindFramebuffer.set(Z.framebuffer),I.viewport.set([0,0,k,k]),_.useProgram("hillshadePrepare").draw(I,L.TRIANGLES,f,g,b,Bn.disabled,((te,ne)=>{const se=ne.stride,ee=u.F();return u.aN(ee,0,u.W,-u.W,0,0,1),u.H(ee,ee,[0,-u.W,0]),{u_matrix:ee,u_image:1,u_dimension:[se,se],u_zoom:te.overscaledZ,u_unpack:ne.getUnpackVector()}})(s.tileID,A),null,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function q0(_,s,p,f,g,b){const I=f.paint.get("raster-fade-duration");if(!b&&I>0){const L=C.now(),A=(L-_.timeAdded)/I,k=s?(L-s.timeAdded)/I:-1,z=p.getSource(),V=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),Z=!s||Math.abs(s.tileID.overscaledZ-V)>Math.abs(_.tileID.overscaledZ-V),te=Z&&_.refreshedUponExpiration?1:u.ac(Z?A:1-k,0,1);return _.refreshedUponExpiration&&A>=1&&(_.refreshedUponExpiration=!1),s?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const Tm=new u.aO(1,0,0,1),mu=new u.aO(0,1,0,1),md=new u.aO(0,0,1,1),gd=new u.aO(1,0,1,1),qh=new u.aO(0,1,1,1);function Wh(_,s,p,f){Ka(_,0,s+p/2,_.transform.width,p,f)}function Pm(_,s,p,f){Ka(_,s-p/2,0,p,_.transform.height,f)}function Ka(_,s,p,f,g,b){const I=_.context,L=I.gl;L.enable(L.SCISSOR_TEST),L.scissor(s*_.pixelRatio,p*_.pixelRatio,f*_.pixelRatio,g*_.pixelRatio),I.clear({color:b}),L.disable(L.SCISSOR_TEST)}function fc(_,s,p){const f=_.context,g=f.gl,b=p.posMatrix,I=_.useProgram("debug"),L=Ht.disabled,A=Gn.disabled,k=_.colorModeForRenderPass(),z="$debug",V=_.style.map.terrain&&_.style.map.terrain.getTerrainData(p);f.activeTexture.set(g.TEXTURE0);const Z=s.getTileByID(p.key).latestRawTileData,te=Math.floor((Z&&Z.byteLength||0)/1024),ne=s.getTile(p).tileSize,se=512/Math.min(ne,512)*(p.overscaledZ/_.transform.zoom)*.5;let ee=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(ee+=` => ${p.overscaledZ}`),function(de,Ce){de.initDebugOverlayCanvas();const le=de.debugOverlayCanvas,ve=de.context.gl,Te=de.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,le.width,le.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(Ce,5,5),Te.strokeText(Ce,5,5),de.debugOverlayTexture.update(le),de.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(_,`${ee} ${te}kB`),I.draw(f,g.TRIANGLES,L,A,lr.alphaBlended,Bn.disabled,fm(b,u.aO.transparent,se),null,z,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),I.draw(f,g.LINE_STRIP,L,A,k,Bn.disabled,fm(b,u.aO.red),V,z,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Lm(_,s,p){const f=_.context,g=f.gl,b=_.colorModeForRenderPass(),I=new Ht(g.LEQUAL,Ht.ReadWrite,_.depthRangeFor3D),L=_.useProgram("terrain"),A=s.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,_.width,_.height]);for(const k of p){const z=_.renderToTexture.getTexture(k),V=s.getTerrainData(k.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,z.texture);const Z={u_matrix:_.transform.calculatePosMatrix(k.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(_.transform.zoom)};L.draw(f,g.TRIANGLES,I,Gn.disabled,b,Bn.backCCW,Z,V,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class Mm{constructor(s,p){this.context=new Im(s),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ar}resize(s,p,f){if(this.width=Math.floor(s*f),this.height=Math.floor(p*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const s=this.context,p=new u.aV;p.emplaceBack(0,0),p.emplaceBack(u.W,0),p.emplaceBack(0,u.W),p.emplaceBack(u.W,u.W),this.tileExtentBuffer=s.createVertexBuffer(p,sa.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const f=new u.aV;f.emplaceBack(0,0),f.emplaceBack(u.W,0),f.emplaceBack(0,u.W),f.emplaceBack(u.W,u.W),this.debugBuffer=s.createVertexBuffer(f,sa.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=s.createVertexBuffer(g,vn.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const b=new u.aV;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(b,sa.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const I=new u.aW;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(I);const L=new u.aX;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(L);const A=this.context.gl;this.stencilClearMode=new Gn({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const s=this.context,p=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.F();u.aN(f,0,this.width,this.height,0,0,1),u.J(f,f,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,p.TRIANGLES,Ht.disabled,this.stencilClearMode,lr.disabled,Bn.disabled,I0(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,p){if(this.currentStencilSource===s.source||!s.isTileClipped()||!p||!p.length)return;this.currentStencilSource=s.source;const f=this.context,g=f.gl;this.nextStencilID+p.length>256&&this.clearStencil(),f.setColorMode(lr.disabled),f.setDepthMode(Ht.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of p){const L=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);b.draw(f,g.TRIANGLES,Ht.disabled,new Gn({func:g.ALWAYS,mask:0},L,255,g.KEEP,g.KEEP,g.REPLACE),lr.disabled,Bn.disabled,I0(I.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,p=this.context.gl;return new Gn({func:p.NOTEQUAL,mask:255},s,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(s){const p=this.context.gl;return new Gn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(s){const p=this.context.gl,f=s.sort((I,L)=>L.overscaledZ-I.overscaledZ),g=f[f.length-1].overscaledZ,b=f[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const I={};for(let L=0;L<b;L++)I[L+g]=new Gn({func:p.GEQUAL,mask:255},L+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=b,[I,f]}return[{[g]:Gn.disabled},f]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new lr([s.CONSTANT_COLOR,s.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?lr.unblended:lr.alphaBlended}depthModeForSublayer(s,p,f){if(!this.opaquePassEnabledForLayer())return Ht.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Ht(f||this.context.gl.LEQUAL,p,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,p){this.style=s,this.options=p,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,b={},I={},L={};for(const A in g){const k=g[A];k.used&&k.prepare(this.context),b[A]=k.getVisibleCoordinates(),I[A]=b[A].slice().reverse(),L[A]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<f.length;A++)if(this.style._layers[f[A]].is3D()){this.opaquePassCutoff=A;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const A of f){const k=this.style._layers[A];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const z=I[k.source];(k.type==="custom"||z.length)&&this.renderLayer(this,g[k.source],k,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[f[this.currentLayer]],k=g[A.source],z=b[A.source];this._renderTileClippingMasks(A,z),this.renderLayer(this,k,A,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const A=this.style._layers[f[this.currentLayer]],k=g[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;const z=(A.type==="symbol"?L:I)[A.source];this._renderTileClippingMasks(A,b[A.source]),this.renderLayer(this,k,A,z)}if(this.options.showTileBoundaries){const A=function(k,z){let V=null;const Z=Object.values(k._layers).flatMap(ee=>ee.source&&!ee.isHidden(z)?[k.sourceCaches[ee.source]]:[]),te=Z.filter(ee=>ee.getSource().type==="vector"),ne=Z.filter(ee=>ee.getSource().type!=="vector"),se=ee=>{(!V||V.getSource().maxzoom<ee.getSource().maxzoom)&&(V=ee)};return te.forEach(ee=>se(ee)),V||ne.forEach(ee=>se(ee)),V}(this.style,this.transform.zoom);A&&function(k,z,V){for(let Z=0;Z<V.length;Z++)fc(k,z,V[Z])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const k=A.transform.padding;Wh(A,A.transform.height-(k.top||0),3,Tm),Wh(A,k.bottom||0,3,mu),Pm(A,k.left||0,3,md),Pm(A,A.transform.width-(k.right||0),3,gd);const z=A.transform.centerPoint;(function(V,Z,te,ne){Ka(V,Z-1,te-10,2,20,ne),Ka(V,Z-10,te-1,20,2,ne)})(A,z.x,A.transform.height-z.y,qh)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,f=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=s?!u.aY(p,f):!u.aZ(p,f)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a_(p,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,I){const L=b.context,A=L.gl,k=lr.unblended,z=new Ht(A.LEQUAL,Ht.ReadWrite,[0,1]),V=I.getTerrainMesh(),Z=I.sourceCache.getRenderableTiles(),te=b.useProgram("terrainDepth");L.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),L.clear({color:u.aO.transparent,depth:1});for(const ne of Z){const se=I.getTerrainData(ne.tileID),ee={u_matrix:b.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(b.transform.zoom)};te.draw(L,A.TRIANGLES,z,Gn.disabled,k,Bn.backCCW,ee,se,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,I){const L=b.context,A=L.gl,k=lr.unblended,z=new Ht(A.LEQUAL,Ht.ReadWrite,[0,1]),V=I.getTerrainMesh(),Z=I.getCoordsTexture(),te=I.sourceCache.getRenderableTiles(),ne=b.useProgram("terrainCoords");L.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),L.clear({color:u.aO.transparent,depth:1}),I.coordsIndex=[];for(const se of te){const ee=I.getTerrainData(se.tileID);L.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,Z.texture);const de={u_matrix:b.transform.calculatePosMatrix(se.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(b.transform.zoom)};ne.draw(L,A.TRIANGLES,z,Gn.disabled,k,Bn.backCCW,de,ee,"terrain",V.vertexBuffer,V.indexBuffer,V.segments),I.coordsIndex.push(se.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(s,p,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(b,I,L,A,k){if(b.renderPass!=="translucent")return;const z=Gn.disabled,V=b.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Z,te,ne,se,ee,de,Ce){const le=te.transform,ve=ee==="map",Te=de==="map";for(const Me of Z){const Re=se.getTile(Me),Ve=Re.getBucket(ne);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;const $e=u.ag(Ve.textSizeData,le.zoom),qe=At(Re,1,te.transform.zoom),at=Is(Me.posMatrix,Te,ve,te.transform,qe),Dt=ne.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if($e){const Ke=Math.pow(2,le.zoom-Re.tileID.overscaledZ);U0(Ve,ve,Te,Ce,le,at,Me.posMatrix,Ke,$e,Dt,te.style.map.terrain?(Et,Ot)=>te.style.map.terrain.getElevation(Me,Et,Ot):null)}}}(A,b,L,I,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),k),L.paint.get("icon-opacity").constantOr(1)!==0&&Uh(b,I,L,A,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),z,V),L.paint.get("text-opacity").constantOr(1)!==0&&Uh(b,I,L,A,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),z,V),I.map.showCollisionBoxes&&($0(b,I,L,A,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),!0),$0(b,I,L,A,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),!1))})(s,p,f,g,this.style.placement.variableOffsets);break;case"circle":(function(b,I,L,A){if(b.renderPass!=="translucent")return;const k=L.paint.get("circle-opacity"),z=L.paint.get("circle-stroke-width"),V=L.paint.get("circle-stroke-opacity"),Z=!L.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(z.constantOr(1)===0||V.constantOr(1)===0))return;const te=b.context,ne=te.gl,se=b.depthModeForSublayer(0,Ht.ReadOnly),ee=Gn.disabled,de=b.colorModeForRenderPass(),Ce=[];for(let le=0;le<A.length;le++){const ve=A[le],Te=I.getTile(ve),Me=Te.getBucket(L);if(!Me)continue;const Re=Me.programConfigurations.get(L.id),Ve=b.useProgram("circle",Re),$e=Me.layoutVertexBuffer,qe=Me.indexBuffer,at=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ve),Dt={programConfiguration:Re,program:Ve,layoutVertexBuffer:$e,indexBuffer:qe,uniformValues:nb(b,ve,Te,L),terrainData:at};if(Z){const Ke=Me.segments.get();for(const Et of Ke)Ce.push({segments:new u.$([Et]),sortKey:Et.sortKey,state:Dt})}else Ce.push({segments:Me.segments,sortKey:0,state:Dt})}Z&&Ce.sort((le,ve)=>le.sortKey-ve.sortKey);for(const le of Ce){const{programConfiguration:ve,program:Te,layoutVertexBuffer:Me,indexBuffer:Re,uniformValues:Ve,terrainData:$e}=le.state;Te.draw(te,ne.TRIANGLES,se,ee,de,Bn.disabled,Ve,$e,L.id,Me,Re,le.segments,L.paint,b.transform.zoom,ve)}})(s,p,f,g);break;case"heatmap":(function(b,I,L,A){if(L.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const k=b.context,z=k.gl,V=Gn.disabled,Z=new lr([z.ONE,z.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(te,ne,se){const ee=te.gl;te.activeTexture.set(ee.TEXTURE1),te.viewport.set([0,0,ne.width/4,ne.height/4]);let de=se.heatmapFbo;if(de)ee.bindTexture(ee.TEXTURE_2D,de.colorAttachment.get()),te.bindFramebuffer.set(de.framebuffer);else{const Ce=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Ce),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),de=se.heatmapFbo=te.createFramebuffer(ne.width/4,ne.height/4,!1,!1),function(le,ve,Te,Me){var Re,Ve;const $e=le.gl,qe=(Re=le.HALF_FLOAT)!==null&&Re!==void 0?Re:$e.UNSIGNED_BYTE,at=(Ve=le.RGBA16F)!==null&&Ve!==void 0?Ve:$e.RGBA;$e.texImage2D($e.TEXTURE_2D,0,at,ve.width/4,ve.height/4,0,$e.RGBA,qe,null),Me.colorAttachment.set(Te)}(te,ne,Ce,de)}})(k,b,L),k.clear({color:u.aO.transparent});for(let te=0;te<A.length;te++){const ne=A[te];if(I.hasRenderableParent(ne))continue;const se=I.getTile(ne),ee=se.getBucket(L);if(!ee)continue;const de=ee.programConfigurations.get(L.id),Ce=b.useProgram("heatmap",de),{zoom:le}=b.transform;Ce.draw(k,z.TRIANGLES,Ht.disabled,V,Z,Bn.disabled,du(ne.posMatrix,se,le,L.paint.get("heatmap-intensity")),null,L.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,L.paint,b.transform.zoom,de)}k.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(k,z){const V=k.context,Z=V.gl,te=z.heatmapFbo;if(!te)return;V.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,te.colorAttachment.get()),V.activeTexture.set(Z.TEXTURE1);let ne=z.colorRampTexture;ne||(ne=z.colorRampTexture=new Ue(V,z.colorRamp,Z.RGBA)),ne.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(V,Z.TRIANGLES,Ht.disabled,Gn.disabled,k.colorModeForRenderPass(),Bn.disabled,((se,ee,de,Ce)=>{const le=u.F();u.aN(le,0,se.width,se.height,0,0,1);const ve=se.context.gl;return{u_matrix:le,u_world:[ve.drawingBufferWidth,ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}})(k,z),null,z.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,z.paint,k.transform.zoom)}(b,L))})(s,p,f,g);break;case"line":(function(b,I,L,A){if(b.renderPass!=="translucent")return;const k=L.paint.get("line-opacity"),z=L.paint.get("line-width");if(k.constantOr(1)===0||z.constantOr(1)===0)return;const V=b.depthModeForSublayer(0,Ht.ReadOnly),Z=b.colorModeForRenderPass(),te=L.paint.get("line-dasharray"),ne=L.paint.get("line-pattern"),se=ne.constantOr(1),ee=L.paint.get("line-gradient"),de=L.getCrossfadeParameters(),Ce=se?"linePattern":te?"lineSDF":ee?"lineGradient":"line",le=b.context,ve=le.gl;let Te=!0;for(const Me of A){const Re=I.getTile(Me);if(se&&!Re.patternsLoaded())continue;const Ve=Re.getBucket(L);if(!Ve)continue;const $e=Ve.programConfigurations.get(L.id),qe=b.context.program.get(),at=b.useProgram(Ce,$e),Dt=Te||at.program!==qe,Ke=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Me),Et=ne.constantOr(null);if(Et&&Re.imageAtlas){const Tt=Re.imageAtlas,jt=Tt.patternPositions[Et.to.toString()],qt=Tt.patternPositions[Et.from.toString()];jt&&qt&&$e.setConstantPatternPositions(jt,qt)}const Ot=Ke?Me:null,Qt=se?mm(b,Re,L,de,Ot):te?ad(b,Re,L,te,de,Ot):ee?Fo(b,Re,L,Ve.lineClipsArray.length,Ot):Ji(b,Re,L,Ot);if(se)le.activeTexture.set(ve.TEXTURE0),Re.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),$e.updatePaintBuffers(de);else if(te&&(Dt||b.lineAtlas.dirty))le.activeTexture.set(ve.TEXTURE0),b.lineAtlas.bind(le);else if(ee){const Tt=Ve.gradients[L.id];let jt=Tt.texture;if(L.gradientVersion!==Tt.version){let qt=256;if(L.stepInterpolant){const ur=I.getSource().maxzoom,Mn=Me.canonical.z===ur?Math.ceil(1<<b.transform.maxZoom-Me.canonical.z):1;qt=u.ac(u.aT(Ve.maxLineLength/u.W*1024*Mn),256,le.maxTextureSize)}Tt.gradient=u.aU({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:qt,image:Tt.gradient||void 0,clips:Ve.lineClipsArray}),Tt.texture?Tt.texture.update(Tt.gradient):Tt.texture=new Ue(le,Tt.gradient,ve.RGBA),Tt.version=L.gradientVersion,jt=Tt.texture}le.activeTexture.set(ve.TEXTURE0),jt.bind(L.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}at.draw(le,ve.TRIANGLES,V,b.stencilModeForClipping(Me),Z,Bn.disabled,Qt,Ke,L.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,L.paint,b.transform.zoom,$e,Ve.layoutVertexBuffer2),Te=!1}})(s,p,f,g);break;case"fill":(function(b,I,L,A){const k=L.paint.get("fill-color"),z=L.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const V=b.colorModeForRenderPass(),Z=L.paint.get("fill-pattern"),te=b.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&k.constantOr(u.aO.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===te){const ne=b.depthModeForSublayer(1,b.renderPass==="opaque"?Ht.ReadWrite:Ht.ReadOnly);Tl(b,I,L,A,ne,V,!1)}if(b.renderPass==="translucent"&&L.paint.get("fill-antialias")){const ne=b.depthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,Ht.ReadOnly);Tl(b,I,L,A,ne,V,!0)}})(s,p,f,g);break;case"fill-extrusion":(function(b,I,L,A){const k=L.paint.get("fill-extrusion-opacity");if(k!==0&&b.renderPass==="translucent"){const z=new Ht(b.context.gl.LEQUAL,Ht.ReadWrite,b.depthRangeFor3D);if(k!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))Pl(b,I,L,A,z,Gn.disabled,lr.disabled),Pl(b,I,L,A,z,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const V=b.colorModeForRenderPass();Pl(b,I,L,A,z,Gn.disabled,V)}}})(s,p,f,g);break;case"hillshade":(function(b,I,L,A){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const k=b.context,z=b.depthModeForSublayer(0,Ht.ReadOnly),V=b.colorModeForRenderPass(),[Z,te]=b.renderPass==="translucent"?b.stencilConfigForOverlap(A):[{},A];for(const ne of te){const se=I.getTile(ne);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&b.renderPass==="offscreen"?G0(b,se,L,z,Gn.disabled,V):b.renderPass==="translucent"&&ls(b,ne,se,L,z,Z[ne.overscaledZ],V)}k.viewport.set([0,0,b.width,b.height])})(s,p,f,g);break;case"raster":(function(b,I,L,A){if(b.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!A.length)return;const k=b.context,z=k.gl,V=I.getSource(),Z=b.useProgram("raster"),te=b.colorModeForRenderPass(),[ne,se]=V instanceof Li?[{},A]:b.stencilConfigForOverlap(A),ee=se[se.length-1].overscaledZ,de=!b.options.moving;for(const Ce of se){const le=b.depthModeForSublayer(Ce.overscaledZ-ee,L.paint.get("raster-opacity")===1?Ht.ReadWrite:Ht.ReadOnly,z.LESS),ve=I.getTile(Ce);ve.registerFadeDuration(L.paint.get("raster-fade-duration"));const Te=I.findLoadedParent(Ce,0),Me=q0(ve,Te,I,L,b.transform,b.style.map.terrain);let Re,Ve;const $e=L.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;k.activeTexture.set(z.TEXTURE0),ve.texture.bind($e,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(z.TEXTURE1),Te?(Te.texture.bind($e,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),Re=Math.pow(2,Te.tileID.overscaledZ-ve.tileID.overscaledZ),Ve=[ve.tileID.canonical.x*Re%1,ve.tileID.canonical.y*Re%1]):ve.texture.bind($e,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ce),at=qe?Ce:null,Dt=at?at.posMatrix:b.transform.calculatePosMatrix(Ce.toUnwrapped(),de),Ke=hc(Dt,Ve||[0,0],Re||1,Me,L);V instanceof Li?Z.draw(k,z.TRIANGLES,le,Gn.disabled,te,Bn.disabled,Ke,qe,L.id,V.boundsBuffer,b.quadTriangleIndexBuffer,V.boundsSegments):Z.draw(k,z.TRIANGLES,le,ne[Ce.overscaledZ],te,Bn.disabled,Ke,qe,L.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(s,p,f,g);break;case"background":(function(b,I,L,A){const k=L.paint.get("background-color"),z=L.paint.get("background-opacity");if(z===0)return;const V=b.context,Z=V.gl,te=b.transform,ne=te.tileSize,se=L.paint.get("background-pattern");if(b.isPatternMissing(se))return;const ee=!se&&k.a===1&&z===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ee)return;const de=Gn.disabled,Ce=b.depthModeForSublayer(0,ee==="opaque"?Ht.ReadWrite:Ht.ReadOnly),le=b.colorModeForRenderPass(),ve=b.useProgram(se?"backgroundPattern":"background"),Te=A||te.coveringTiles({tileSize:ne,terrain:b.style.map.terrain});se&&(V.activeTexture.set(Z.TEXTURE0),b.imageManager.bind(b.context));const Me=L.getCrossfadeParameters();for(const Re of Te){const Ve=A?Re.posMatrix:b.transform.calculatePosMatrix(Re.toUnwrapped()),$e=se?ab(Ve,z,b,se,{tileID:Re,tileSize:ne},Me):sb(Ve,z,k),qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Re);ve.draw(V,Z.TRIANGLES,Ce,de,le,Bn.disabled,$e,qe,L.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(s,0,f,g);break;case"custom":(function(b,I,L){const A=b.context,k=L.implementation;if(b.renderPass==="offscreen"){const z=k.prerender;z&&(b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),z.call(k,A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),A.setStencilMode(Gn.disabled);const z=k.renderingMode==="3d"?new Ht(b.context.gl.LEQUAL,Ht.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Ht.ReadOnly);A.setDepthMode(z),k.render(A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState(),A.bindFramebuffer.set(null)}})(s,0,f)}}translatePosMatrix(s,p,f,g,b){if(!f[0]&&!f[1])return s;const I=b?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(I){const k=Math.sin(I),z=Math.cos(I);f=[f[0]*z-f[1]*k,f[0]*k+f[1]*z]}const L=[b?f[0]:At(p,f[0],this.transform.zoom),b?f[1]:At(p,f[1],this.transform.zoom),0],A=new Float32Array(16);return u.H(A,s,L),A}saveTileTexture(s){const p=this._tileTextures[s.size[0]];p?p.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const p=this._tileTextures[s];return p&&p.length>0?p.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const p=this.imageManager.getPattern(s.from.toString()),f=this.imageManager.getPattern(s.to.toString());return!p||!f}useProgram(s,p){this.cache=this.cache||{};const f=s+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new pm(this.context,uc[s],p,ld[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:p}=this.context.gl;return this.width!==s||this.height!==p}}class on{constructor(s,p){this.points=s,this.planes=p}static fromInvProjectionMatrix(s,p,f){const g=Math.pow(2,f),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const A=1/(L=u.af([],L,s))[3]/p*g;return u.a$(L,L,[A,A,1/L[3],A])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const A=function(Z,te){var ne=te[0],se=te[1],ee=te[2],de=ne*ne+se*se+ee*ee;return de>0&&(de=1/Math.sqrt(de)),Z[0]=te[0]*de,Z[1]=te[1]*de,Z[2]=te[2]*de,Z}([],function(Z,te,ne){var se=te[0],ee=te[1],de=te[2],Ce=ne[0],le=ne[1],ve=ne[2];return Z[0]=ee*ve-de*le,Z[1]=de*Ce-se*ve,Z[2]=se*le-ee*Ce,Z}([],ye([],b[L[0]],b[L[1]]),ye([],b[L[2]],b[L[1]]))),k=-((z=A)[0]*(V=b[L[1]])[0]+z[1]*V[1]+z[2]*V[2]);var z,V;return A.concat(k)});return new on(b,I)}}class gu{constructor(s,p){this.min=s,this.max=p,this.center=function(f,g,b){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,b){return f[0]=g[0]+b[0],f[1]=g[1]+b[1],f[2]=g[2]+b[2],f}([],this.min,this.max))}quadrant(s){const p=[s%2==0,s<2],f=_e(this.min),g=_e(this.max);for(let b=0;b<p.length;b++)f[b]=p[b]?this.min[b]:this.center[b],g[b]=p[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new gu(f,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<s.planes.length;g++){const b=s.planes[g];let I=0;for(let L=0;L<p.length;L++)u.b0(b,p[L])>=0&&I++;if(I===0)return 0;I!==p.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let L=0;L<s.points.length;L++){const A=s.points[L][g]-this.min[g];b=Math.min(b,A),I=Math.max(I,A)}if(I<0||b>this.max[g]-this.min[g])return 0}return 1}}class yd{constructor(s=0,p=0,f=0,g=0){if(isNaN(s)||s<0||isNaN(p)||p<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=p,this.left=f,this.right=g}interpolate(s,p,f){return p.top!=null&&s.top!=null&&(this.top=u.z.number(s.top,p.top,f)),p.bottom!=null&&s.bottom!=null&&(this.bottom=u.z.number(s.bottom,p.bottom,f)),p.left!=null&&s.left!=null&&(this.left=u.z.number(s.left,p.left,f)),p.right!=null&&s.right!=null&&(this.right=u.z.number(s.right,p.right,f)),this}getCenter(s,p){const f=u.ac((this.left+s-this.right)/2,0,s),g=u.ac((this.top+p-this.bottom)/2,0,p);return new u.P(f,g)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new yd(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Am=85.051129;class yu{constructor(s,p,f,g,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=s||0,this._maxZoom=p||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new yd,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const s=new yu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const p=-u.b1(s,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.A(4);return u.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,b){var I=g[0],L=g[1],A=g[2],k=g[3],z=Math.sin(b),V=Math.cos(b);f[0]=I*V+A*z,f[1]=L*V+k*z,f[2]=I*-z+A*V,f[3]=L*-z+k*V}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const p=u.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const p=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,p,f){this._unmodified=!1,this._edgeInsets.interpolate(s,p,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const p=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(s){const p=[new u.b2(0,s)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),b=this.pointCoordinate(new u.P(this.width,this.height)),I=this.pointCoordinate(new u.P(0,this.height)),L=Math.floor(Math.min(f.x,g.x,b.x,I.x)),A=Math.floor(Math.max(f.x,g.x,b.x,I.x)),k=1;for(let z=L-k;z<=A+k;z++)z!==0&&p.push(new u.b2(z,s))}return p}coveringTiles(s){var p,f;let g=this.coveringZoomLevel(s);const b=g;if(s.minzoom!==void 0&&g<s.minzoom)return[];s.maxzoom!==void 0&&g>s.maxzoom&&(g=s.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),L=u.Y.fromLngLat(this.center),A=Math.pow(2,g),k=[A*I.x,A*I.y,0],z=[A*L.x,A*L.y,0],V=on.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let Z=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Z=g);const te=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,ne=le=>({aabb:new gu([le*A,0,0],[(le+1)*A,A,0]),zoom:0,x:0,y:0,wrap:le,fullyVisible:!1}),se=[],ee=[],de=g,Ce=s.reparseOverscaled?b:g;if(this._renderWorldCopies)for(let le=1;le<=3;le++)se.push(ne(-le)),se.push(ne(le));for(se.push(ne(0));se.length>0;){const le=se.pop(),ve=le.x,Te=le.y;let Me=le.fullyVisible;if(!Me){const at=le.aabb.intersects(V);if(at===0)continue;Me=at===2}const Re=s.terrain?k:z,Ve=le.aabb.distanceX(Re),$e=le.aabb.distanceY(Re),qe=Math.max(Math.abs(Ve),Math.abs($e));if(le.zoom===de||qe>te+(1<<de-le.zoom)-2&&le.zoom>=Z){const at=de-le.zoom,Dt=k[0]-.5-(ve<<at),Ke=k[1]-.5-(Te<<at);ee.push({tileID:new u.Q(le.zoom===de?Ce:le.zoom,le.wrap,le.zoom,ve,Te),distanceSq:Pe([z[0]-.5-ve,z[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(Dt*Dt+Ke*Ke)})}else for(let at=0;at<4;at++){const Dt=(ve<<1)+at%2,Ke=(Te<<1)+(at>>1),Et=le.zoom+1;let Ot=le.aabb.quadrant(at);if(s.terrain){const Qt=new u.Q(Et,le.wrap,Et,Dt,Ke),Tt=s.terrain.getMinMaxElevation(Qt),jt=(p=Tt.minElevation)!==null&&p!==void 0?p:this.elevation,qt=(f=Tt.maxElevation)!==null&&f!==void 0?f:this.elevation;Ot=new gu([Ot.min[0],Ot.min[1],jt],[Ot.max[0],Ot.max[1],qt])}se.push({aabb:Ot,zoom:Et,x:Dt,y:Ke,wrap:le.wrap,fullyVisible:Me})}}return ee.sort((le,ve)=>le.distanceSq-ve.distanceSq).map(le=>le.tileID)}resize(s,p){this.width=s,this.height=p,this.pixelsToGLUnits=[2/s,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const p=u.ac(s.lat,-85.051129,Am);return new u.P(u.N(s.lng)*this.worldSize,u.O(p)*this.worldSize)}unproject(s){return new u.Y(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const p=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,s),b=s.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-b))return;const I=f+p-b,L=Math.cos(this._pitch)*this.cameraToCenterDistance/I/u.b3(1,g.lat),A=this.scaleZoom(L/this.tileSize);this._elevation=b,this._center=g,this.zoom=A}setLocationAtPoint(s,p){const f=this.pointCoordinate(p),g=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(s),I=new u.Y(b.x-(f.x-g.x),b.y-(f.y-g.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,p){return p?this.coordinatePoint(this.locationCoordinate(s),p.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,p){return this.coordinateLocation(this.pointCoordinate(s,p))}locationCoordinate(s){return u.Y.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,p){if(p){const Z=p.pointCoordinate(s);if(Z!=null)return Z}const f=[s.x,s.y,0,1],g=[s.x,s.y,1,1];u.af(f,f,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const b=f[3],I=g[3],L=f[1]/b,A=g[1]/I,k=f[2]/b,z=g[2]/I,V=k===z?0:(0-k)/(z-k);return new u.Y(u.z.number(f[0]/b,g[0]/I,V)/this.worldSize,u.z.number(L,A,V)/this.worldSize)}coordinatePoint(s,p=0,f=this.pixelMatrix){const g=[s.x*this.worldSize,s.y*this.worldSize,p,1];return u.af(g,g,f),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return new Jt().extend(this.pointLocation(new u.P(0,s))).extend(this.pointLocation(new u.P(this.width,s))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Jt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Am])}calculatePosMatrix(s,p=!1){const f=s.key,g=p?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const b=s.canonical,I=this.worldSize/this.zoomScale(b.z),L=b.x+Math.pow(2,b.z)*s.wrap,A=u.an(new Float64Array(16));return u.H(A,A,[L*I,b.y*I,0]),u.J(A,A,[I/u.W,I/u.W,1]),u.K(A,p?this.alignedProjMatrix:this.projMatrix,A),g[f]=new Float32Array(A),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,p){p=u.ac(+p,this.minZoom,this.maxZoom);const f={center:new u.M(s.lng,s.lat),zoom:p};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const le=179.9999999999;g=[-le,le]}const b=this.tileSize*this.zoomScale(f.zoom);let I=0,L=b,A=0,k=b,z=0,V=0;const{x:Z,y:te}=this.size;if(this.latRange){const le=this.latRange;I=u.O(le[1])*b,L=u.O(le[0])*b,L-I<te&&(z=te/(L-I))}g&&(A=u.b1(u.N(g[0])*b,0,b),k=u.b1(u.N(g[1])*b,0,b),k<A&&(k+=b),k-A<Z&&(V=Z/(k-A)));const{x:ne,y:se}=this.project.call({worldSize:b},s);let ee,de;const Ce=Math.max(V||0,z||0);if(Ce){const le=new u.P(V?(k+A)/2:ne,z?(L+I)/2:se);return f.center=this.unproject.call({worldSize:b},le).wrap(),f.zoom+=this.scaleZoom(Ce),f}if(this.latRange){const le=te/2;se-le<I&&(de=I+le),se+le>L&&(de=L-le)}if(g){const le=(A+k)/2;let ve=ne;this._renderWorldCopies&&(ve=u.b1(ne,le-b/2,le+b/2));const Te=Z/2;ve-Te<A&&(ee=A+Te),ve+Te>k&&(ee=k-Te)}if(ee!==void 0||de!==void 0){const le=new u.P(ee??ne,de??se);f.center=this.unproject.call({worldSize:b},le).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:p,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=f,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,p=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b3(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),L=b-I*this._pixelPerMeter/Math.cos(this._pitch),A=I<0?L:b,k=Math.PI/2+this._pitch,z=this._fov*(.5+s.y/this.height),V=Math.sin(z)*A/Math.sin(u.ac(Math.PI-k-z,.01,Math.PI-.01)),Z=this.getHorizon(),te=2*Math.atan(Z/this.cameraToCenterDistance)*(.5+s.y/(2*Z)),ne=Math.sin(te)*A/Math.sin(u.ac(Math.PI-k-te,.01,Math.PI-.01)),se=Math.min(V,ne),ee=1.01*(Math.cos(Math.PI/2-this._pitch)*se+A),de=this.height/50;g=new Float64Array(16),u.b4(g,this._fov,this.width/this.height,de,ee),g[8]=2*-s.x/this.width,g[9]=2*s.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b5(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-p,-f,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.ar([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const Ce=this.width%2/2,le=this.height%2/2,ve=Math.cos(this.angle),Te=Math.sin(this.angle),Me=p-Math.round(p)+ve*Ce+Te*le,Re=f-Math.round(f)+ve*le+Te*Ce,Ve=new Float64Array(g);if(u.H(Ve,Ve,[Me>.5?Me-1:Me,Re>.5?Re-1:Re,0]),this.alignedProjMatrix=Ve,g=u.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new u.P(0,0)),p=[s.x*this.worldSize,s.y*this.worldSize,0,1];return u.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,s))}getCameraQueryGeometry(s){const p=this.getCameraPoint();if(s.length===1)return[s[0],p];{let f=p.x,g=p.y,b=p.x,I=p.y;for(const L of s)f=Math.min(f,L.x),g=Math.min(g,L.y),b=Math.max(b,L.x),I=Math.max(I,L.y);return[new u.P(f,g),new u.P(b,g),new u.P(b,I),new u.P(f,I),new u.P(f,g)]}}lngLatToCameraDepth(s,p){const f=this.locationCoordinate(s),g=[f.x*this.worldSize,f.y*this.worldSize,p,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function W0(_,s){let p,f=!1,g=null,b=null;const I=()=>{g=null,f&&(_.apply(b,p),g=setTimeout(I,s),f=!1)};return(...L)=>(f=!0,b=this,p=L,g||I(),g)}class H0{constructor(s){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let f;return p.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:f,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,p)}catch{}},this._updateHash=W0(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const p=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,g),I=Math.round(p.lng*b)/b,L=Math.round(p.lat*b)/b,A=this._map.getBearing(),k=this._map.getPitch();let z="";if(z+=s?`/${I}/${L}/${f}`:`${f}/${L}/${I}`,(A||k)&&(z+="/"+Math.round(10*A)/10),k&&(z+=`/${Math.round(k)}`),this._hashName){const V=this._hashName;let Z=!1;const te=window.location.hash.slice(1).split("&").map(ne=>{const se=ne.split("=")[0];return se===V?(Z=!0,`${se}=${z}`):ne}).filter(ne=>ne);return Z||te.push(`${V}=${z}`),`#${te.join("&")}`}return`#${z}`}}const Hh={linearity:.3,easing:u.b6(0,0,.3,1)},_b=u.e({deceleration:2500,maxSpeed:1400},Hh),km=u.e({deceleration:20,maxSpeed:1400},Hh),_d=u.e({deceleration:1e3,maxSpeed:360},Hh),vd=u.e({deceleration:1e3,maxSpeed:90},Hh);class Nm{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,p=C.now();for(;s.length>0&&p-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)p.zoom+=b.zoomDelta||0,p.bearing+=b.bearingDelta||0,p.pitch+=b.pitchDelta||0,b.panDelta&&p.pan._add(b.panDelta),b.around&&(p.around=b.around),b.pinchAround&&(p.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(p.pan.mag()){const b=Zh(p.pan.mag(),f,u.e({},_b,s||{}));g.offset=p.pan.mult(b.amount/p.pan.mag()),g.center=this._map.transform.center,mc(g,b)}if(p.zoom){const b=Zh(p.zoom,f,km);g.zoom=this._map.transform.zoom+b.amount,mc(g,b)}if(p.bearing){const b=Zh(p.bearing,f,_d);g.bearing=this._map.transform.bearing+u.ac(b.amount,-179,179),mc(g,b)}if(p.pitch){const b=Zh(p.pitch,f,vd);g.pitch=this._map.transform.pitch+b.amount,mc(g,b)}if(g.zoom||g.bearing){const b=p.pinchAround===void 0?p.around:p.pinchAround;g.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function mc(_,s){(!_.duration||_.duration<s.duration)&&(_.duration=s.duration,_.easing=s.easing)}function Zh(_,s,p){const{maxSpeed:f,linearity:g,deceleration:b}=p,I=u.ac(_*g/(s/1e3),-f,f),L=Math.abs(I)/(b*g);return{easing:p.easing,duration:1e3*L,amount:I*(L/2)}}class Ni extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,f,g={}){const b=T.mousePos(p.getCanvas(),f),I=p.unproject(b);super(s,u.e({point:b,lngLat:I,originalEvent:f},g)),this._defaultPrevented=!1,this.target=p}}class Ll extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,f){const g=s==="touchend"?f.changedTouches:f.touches,b=T.touchPos(p.getCanvasContainer(),g),I=b.map(A=>p.unproject(A)),L=b.reduce((A,k,z,V)=>A.add(k.div(V.length)),new u.P(0,0));super(s,{points:b,point:L,lngLats:I,lngLat:p.unproject(L),originalEvent:f}),this._defaultPrevented=!1}}class xd extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,f){super(s,{originalEvent:f}),this._defaultPrevented=!1}}class vb{constructor(s,p){this._map=s,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new xd(s.type,this._map,s))}mousedown(s,p){return this._mousedownPos=p,this._firePreventable(new Ni(s.type,this._map,s))}mouseup(s){this._map.fire(new Ni(s.type,this._map,s))}click(s,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ni(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Ni(s.type,this._map,s))}mouseover(s){this._map.fire(new Ni(s.type,this._map,s))}mouseout(s){this._map.fire(new Ni(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Ll(s.type,this._map,s))}touchmove(s){this._map.fire(new Ll(s.type,this._map,s))}touchend(s){this._map.fire(new Ll(s.type,this._map,s))}touchcancel(s){this._map.fire(new Ll(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rm{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Ni(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Ni(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xh{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(u.P.convert(s),this._map.terrain)}}class Dm{constructor(s,p){this._map=s,this._tr=new Xh(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,p){this.isEnabled()&&s.shiftKey&&s.button===0&&(T.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(s,p){if(!this._active)return;const f=p;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const b=Math.min(g.x,f.x),I=Math.max(g.x,f.x),L=Math.min(g.y,f.y),A=Math.max(g.y,f.y);T.setTransform(this._box,`translate(${b}px,${L}px)`),this._box.style.width=I-b+"px",this._box.style.height=A-L+"px"}mouseupWindow(s,p){if(!this._active||s.button!==0)return;const f=this._startPos,g=p;if(this.reset(),T.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,p){return this._map.fire(new u.k(s,{originalEvent:p}))}}function gc(_,s){if(_.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${s.length}`);const p={};for(let f=0;f<_.length;f++)p[_[f].identifier]=s[f];return p}class Om{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,p,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const b=new u.P(0,0);for(const I of g)b._add(I);return b.div(g.length)}(p),this.touches=gc(f,p)))}touchmove(s,p,f){if(this.aborted||!this.centroid)return;const g=gc(f,p);for(const b in this.touches){const I=g[b];(!I||I.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,p,f){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class bd{constructor(s){this.singleTap=new Om(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,p,f){this.singleTap.touchstart(s,p,f)}touchmove(s,p,f){this.singleTap.touchmove(s,p,f)}touchend(s,p,f){const g=this.singleTap.touchend(s,p,f);if(g){const b=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(g)<30;if(b&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Z0{constructor(s){this._tr=new Xh(s),this._zoomIn=new bd({numTouches:1,numTaps:2}),this._zoomOut=new bd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,p,f){this._zoomIn.touchstart(s,p,f),this._zoomOut.touchstart(s,p,f)}touchmove(s,p,f){this._zoomIn.touchmove(s,p,f),this._zoomOut.touchmove(s,p,f)}touchend(s,p,f){const g=this._zoomIn.touchend(s,p,f),b=this._zoomOut.touchend(s,p,f),I=this._tr;return g?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(g)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ml{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const p=this._moveFunction(...s);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(s,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,p){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const g=p.length?p[0]:p;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&T.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const zm={0:1,2:2};class Fm{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const p=T.mouseButton(s);this._eventButton=p}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(p,f){const g=zm[f];return p.buttons===void 0||(p.buttons&g)!==g}(s,this._eventButton)}isValidEndEvent(s){return T.mouseButton(s)===this._eventButton}}class Bm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const qn=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=s=>{s.preventDefault()}},Al=({enable:_,clickTolerance:s,bearingDegreesPerPixelMoved:p=.8})=>{const f=new Fm({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Ml({clickTolerance:s,move:(g,b)=>({bearingDelta:(b.x-g.x)*p}),moveStateManager:f,enable:_,assignEvents:qn})},jo=({enable:_,clickTolerance:s,pitchDegreesPerPixelMoved:p=-.5})=>{const f=new Fm({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Ml({clickTolerance:s,move:(g,b)=>({pitchDelta:(b.y-g.y)*p}),moveStateManager:f,enable:_,assignEvents:qn})};class jm{constructor(s,p){this._clickTolerance=s.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(s,p,f){return this._calculateTransform(s,p,f)}touchmove(s,p,f){if(this._active&&!(f.length<this.minTouchs()))return s.preventDefault(),this._calculateTransform(s,p,f)}touchend(s,p,f){this._calculateTransform(s,p,f),this._active&&f.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,p,f){f.length>0&&(this._active=!0);const g=gc(f,p),b=new u.P(0,0),I=new u.P(0,0);let L=0;for(const k in g){const z=g[k],V=this._touches[k];V&&(b._add(z),I._add(z.sub(V)),L++,g[k]=z)}if(this._touches=g,L<this.minTouchs()||!I.mag())return;const A=I.div(L);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(L),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,p,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([p[0],p[1]]))}touchmove(s,p,f){if(!this._firstTwoTouches)return;s.preventDefault();const[g,b]=this._firstTwoTouches,I=Yh(f,p,g),L=Yh(f,p,b);if(!I||!L)return;const A=this._aroundCenter?null:I.add(L).div(2);return this._move([I,L],A,s)}touchend(s,p,f){if(!this._firstTwoTouches)return;const[g,b]=this._firstTwoTouches,I=Yh(f,p,g),L=Yh(f,p,b);I&&L||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Yh(_,s,p){for(let f=0;f<_.length;f++)if(_[f].identifier===p)return s[f]}function _u(_,s){return Math.log(_/s)/Math.LN2}class yc extends Kh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,p){const f=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(_u(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_u(this._distance,f),pinchAround:p}}}function wd(_,s){return 180*_.angleWith(s)/Math.PI}class $m extends Kh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,p,f){const g=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wd(this._vector,g),pinchAround:p}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const p=25/(Math.PI*this._minDiameter)*360,f=wd(s,this._startVector);return Math.abs(f)<p}}function Sd(_){return Math.abs(_.y)>Math.abs(_.x)}class Vm extends Kh{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,p,f){super.touchstart(s,p,f),this._currentTouchCount=f.length}_start(s){this._lastPoints=s,Sd(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,p,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=s[0].sub(this._lastPoints[0]),b=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,b,f.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(g.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(s,p,f){if(this._valid!==void 0)return this._valid;const g=s.mag()>=2,b=p.mag()>=2;if(!g&&!b)return;if(!g||!b)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const I=s.y>0==p.y>0;return Sd(s)&&Sd(p)&&I}}const X0={panStep:100,bearingStep:15,pitchStep:10};class Um{constructor(s){this._tr=new Xh(s);const p=X0;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let p=0,f=0,g=0,b=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:s.shiftKey?f=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?f=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?g=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?g=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:L=>{const A=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:vu,zoom:p?Math.round(A.zoom)+p*(s.shiftKey?2:1):A.zoom,bearing:A.bearing+f*this._bearingStep,pitch:A.pitch+g*this._pitchStep,offset:[-b*this._panStep,-I*this._panStep],center:A.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function vu(_){return _*(2-_)}const Gm=4.000244140625;class qm{constructor(s,p){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=s,this._tr=new Xh(s),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!s[this._map.cooperativeGestures._bypassKey])return;let p=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const f=C.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,p!==0&&p%Gm==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(g*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),s.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=s,this._delta-=p,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=T.mousePos(this._map.getCanvas(),s),f=this._tr;this._around=p.y>f.transform.height/2-f.transform.getHorizon()?u.M.convert(this._aroundCenter?f.center:f.unproject(p)):u.M.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Gm?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&A!==0&&(A=1/A);const k=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(k*A))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,f=this._startZoom,g=this._easing;let b,I=!1;if(this._type==="wheel"&&f&&g){const L=Math.min((C.now()-this._lastWheelEventTime)/200,1),A=g(L);b=u.z.number(f,p,A),L<1?this._frameId||(this._frameId=!0):I=!0}else b=p,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:b-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let p=u.b7;if(this._prevEase){const f=this._prevEase,g=(C.now()-f.start)/f.duration,b=f.easing(g+.01)-f.easing(g),I=.27/Math.sqrt(b*b+1e-4)*.01,L=Math.sqrt(.0729-I*I);p=u.b6(I,L,.25,1)}return this._prevEase={start:C.now(),duration:s,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wm{constructor(s,p){this._clickZoom=s,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class K0{constructor(s){this._tr=new Xh(s),this.reset()}reset(){this._active=!1}dblclick(s,p){return s.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Y0{constructor(){this._tap=new bd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,p,f){if(!this._swipePoint)if(this._tapTime){const g=p[0],b=s.timeStamp-this._tapTime<500,I=this._tapPoint.dist(g)<30;b&&I?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(s,p,f)}touchmove(s,p,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=p[0],b=g.y-this._swipePoint.y;return this._swipePoint=g,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,p,f)}touchend(s,p,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(s,p,f);g&&(this._tapTime=s.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hm{constructor(s,p,f){this._el=s,this._mousePan=p,this._touchPan=f}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zm{constructor(s,p,f){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=p,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _c{constructor(s,p,f,g){this._el=s,this._touchZoom=p,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xm{constructor(s,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",s);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=p,this._container.appendChild(g);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=f,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(s){this._onCooperativeGesture(s.touches.length===1)}wheel(s){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!s[this._bypassKey])}_onCooperativeGesture(s){this._enabled&&s&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const go=_=>_.zoom||_.drag||_.pitch||_.rotate;class aa extends u.k{}function Ed(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class la{constructor(s,p){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,b)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=g.type==="renderFrame"?void 0:g,L={needsRenderFrame:!1},A={},k={},z=g.touches,V=z?this._getMapTouches(z):void 0,Z=V?T.touchPos(this._map.getCanvas(),V):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:se,handler:ee,allowed:de}of this._handlers){if(!ee.isEnabled())continue;let Ce;this._blockedByActive(k,de,se)?ee.reset():ee[b||g.type]&&(Ce=ee[b||g.type](g,Z,V),this.mergeHandlerResult(L,A,Ce,se,I),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||ee.isActive())&&(k[se]=ee)}const te={};for(const se in this._previousActiveHandlers)k[se]||(te[se]=I);this._previousActiveHandlers=k,(Object.keys(te).length||Ed(L))&&(this._changes.push([L,A,te]),this._triggerRenderFrame()),(Object.keys(k).length||Ed(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=L;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nm(s),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,b,I]of this._listeners)T.addEventListener(g,b,g===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[s,p,f]of this._listeners)T.removeEventListener(s,p,s===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(s){const p=this._map,f=p.getCanvasContainer();this._add("mapEvent",new vb(p,s));const g=p.boxZoom=new Dm(p,s);this._add("boxZoom",g),s.interactive&&s.boxZoom&&g.enable();const b=p.cooperativeGestures=new Xm(p,s.cooperativeGestures);this._add("cooperativeGestures",b),s.cooperativeGestures&&b.enable();const I=new Z0(p),L=new K0(p);p.doubleClickZoom=new Wm(L,I),this._add("tapZoom",I),this._add("clickZoom",L),s.interactive&&s.doubleClickZoom&&p.doubleClickZoom.enable();const A=new Y0;this._add("tapDragZoom",A);const k=p.touchPitch=new Vm(p);this._add("touchPitch",k),s.interactive&&s.touchPitch&&p.touchPitch.enable(s.touchPitch);const z=Al(s),V=jo(s);p.dragRotate=new Zm(s,z,V),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",V,["mouseRotate"]),s.interactive&&s.dragRotate&&p.dragRotate.enable();const Z=(({enable:Ce,clickTolerance:le})=>{const ve=new Fm({checkCorrectEvent:Te=>T.mouseButton(Te)===0&&!Te.ctrlKey});return new Ml({clickTolerance:le,move:(Te,Me)=>({around:Me,panDelta:Me.sub(Te)}),activateOnStart:!0,moveStateManager:ve,enable:Ce,assignEvents:qn})})(s),te=new jm(s,p);p.dragPan=new Hm(f,Z,te),this._add("mousePan",Z),this._add("touchPan",te,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&p.dragPan.enable(s.dragPan);const ne=new $m,se=new yc;p.touchZoomRotate=new _c(f,se,ne,A),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&p.touchZoomRotate.enable(s.touchZoomRotate);const ee=p.scrollZoom=new qm(p,()=>this._triggerRenderFrame());this._add("scrollZoom",ee,["mousePan"]),s.interactive&&s.scrollZoom&&p.scrollZoom.enable(s.scrollZoom);const de=p.keyboard=new Um(p);this._add("keyboard",de),s.interactive&&s.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Rm(p))}_add(s,p,f){this._handlers.push({handlerName:s,handler:p,allowed:f}),this._handlersById[s]=p}stop(s){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!go(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,p,f){for(const g in s)if(g!==f&&(!p||p.indexOf(g)<0))return!0;return!1}_getMapTouches(s){const p=[];for(const f of s)this._el.contains(f.target)&&p.push(f);return p}mergeHandlerResult(s,p,f,g,b){if(!f)return;u.e(s,f);const I={handlerName:g,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(p.zoom=I),f.panDelta!==void 0&&(p.drag=I),f.pitchDelta!==void 0&&(p.pitch=I),f.bearingDelta!==void 0&&(p.rotate=I)}_applyChanges(){const s={},p={},f={};for(const[g,b,I]of this._changes)g.panDelta&&(s.panDelta=(s.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(s.around=g.around),g.pinchAround!==void 0&&(s.pinchAround=g.pinchAround),g.noInertia&&(s.noInertia=g.noInertia),u.e(p,b),u.e(f,I);this._updateMapTransform(s,p,f),this._changes=[]}_updateMapTransform(s,p,f){const g=this._map,b=g._getTransformForUpdate(),I=g.terrain;if(!(Ed(s)||I&&this._terrainMovement))return this._fireEvents(p,f,!0);let{panDelta:L,zoomDelta:A,bearingDelta:k,pitchDelta:z,around:V,pinchAround:Z}=s;Z!==void 0&&(V=Z),g._stop(!0),V=V||g.transform.centerPoint;const te=b.pointLocation(L?V.sub(L):V);k&&(b.bearing+=k),z&&(b.pitch+=z),A&&(b.zoom+=A),I?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(L)):b.setLocationAtPoint(te,V):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(te,V),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(g.terrain)})):b.setLocationAtPoint(te,V),g._applyUpdatedTransform(b),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(p,f,!0)}_fireEvents(s,p,f){const g=go(this._eventsInProgress),b=go(s),I={};for(const z in s){const{originalEvent:V}=s[z];this._eventsInProgress[z]||(I[`${z}start`]=V),this._eventsInProgress[z]=s[z]}!g&&b&&this._fireEvent("movestart",b.originalEvent);for(const z in I)this._fireEvent(z,I[z]);b&&this._fireEvent("move",b.originalEvent);for(const z in s){const{originalEvent:V}=s[z];this._fireEvent(z,V)}const L={};let A;for(const z in this._eventsInProgress){const{handlerName:V,originalEvent:Z}=this._eventsInProgress[z];this._handlersById[V].isActive()||(delete this._eventsInProgress[z],A=p[V]||Z,L[`${z}end`]=A)}for(const z in L)this._fireEvent(z,L[z]);const k=go(this._eventsInProgress);if(f&&(g||b)&&!k){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!z||!z.essential&&C.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:A})),V(this._map.getBearing())&&this._map.resetNorth()):(V(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(s,p){this._map.fire(new u.k(s,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new aa("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Jh extends u.E{constructor(s,p){super(),this._renderFrameCallback=()=>{const f=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(s,p){return this.jumpTo({center:s},p)}panBy(s,p,f){return s=u.P.convert(s).mult(-1),this.panTo(this.transform.center,u.e({offset:s},p),f)}panTo(s,p,f){return this.easeTo(u.e({center:s},p),f)}getZoom(){return this.transform.zoom}setZoom(s,p){return this.jumpTo({zoom:s},p),this}zoomTo(s,p,f){return this.easeTo(u.e({zoom:s},p),f)}zoomIn(s,p){return this.zoomTo(this.getZoom()+1,s,p),this}zoomOut(s,p){return this.zoomTo(this.getZoom()-1,s,p),this}getBearing(){return this.transform.bearing}setBearing(s,p){return this.jumpTo({bearing:s},p),this}getPadding(){return this.transform.padding}setPadding(s,p){return this.jumpTo({padding:s},p),this}rotateTo(s,p,f){return this.easeTo(u.e({bearing:s},p),f)}resetNorth(s,p){return this.rotateTo(0,u.e({duration:1e3},s),p),this}resetNorthPitch(s,p){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},s),p),this}snapToNorth(s,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,p):this}getPitch(){return this.transform.pitch}setPitch(s,p){return this.jumpTo({pitch:s},p),this}cameraForBounds(s,p){s=Jt.convert(s);const f=p&&p.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),f,p)}_cameraForBoxAndBearing(s,p,f,g){const b={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const at=g.padding;g.padding={top:at,bottom:at,right:at,left:at}}g.padding=u.e(b,g.padding);const I=this.transform,L=I.padding,A=new Jt(s,p),k=I.project(A.getNorthWest()),z=I.project(A.getNorthEast()),V=I.project(A.getSouthEast()),Z=I.project(A.getSouthWest()),te=u.b8(-f),ne=k.rotate(te),se=z.rotate(te),ee=V.rotate(te),de=Z.rotate(te),Ce=new u.P(Math.max(ne.x,se.x,de.x,ee.x),Math.max(ne.y,se.y,de.y,ee.y)),le=new u.P(Math.min(ne.x,se.x,de.x,ee.x),Math.min(ne.y,se.y,de.y,ee.y)),ve=Ce.sub(le),Te=(I.width-(L.left+L.right+g.padding.left+g.padding.right))/ve.x,Me=(I.height-(L.top+L.bottom+g.padding.top+g.padding.bottom))/ve.y;if(Me<0||Te<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Re=Math.min(I.scaleZoom(I.scale*Math.min(Te,Me)),g.maxZoom),Ve=u.P.convert(g.offset),$e=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b8(f)),qe=Ve.add($e).mult(I.scale/I.zoomScale(Re));return{center:I.unproject(k.add(V).div(2).sub(qe)),zoom:Re,bearing:f}}fitBounds(s,p,f){return this._fitInternal(this.cameraForBounds(s,p),p,f)}fitScreenCoordinates(s,p,f,g,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(s)),this.transform.pointLocation(u.P.convert(p)),f,g),g,b)}_fitInternal(s,p,f){return s?(delete(p=u.e(s,p)).padding,p.linear?this.easeTo(p,f):this.flyTo(p,f)):this}jumpTo(s,p){this.stop();const f=this._getTransformForUpdate();let g=!1,b=!1,I=!1;return"zoom"in s&&f.zoom!==+s.zoom&&(g=!0,f.zoom=+s.zoom),s.center!==void 0&&(f.center=u.M.convert(s.center)),"bearing"in s&&f.bearing!==+s.bearing&&(b=!0,f.bearing=+s.bearing),"pitch"in s&&f.pitch!==+s.pitch&&(I=!0,f.pitch=+s.pitch),s.padding==null||f.isPaddingEqual(s.padding)||(f.padding=s.padding),this._applyUpdatedTransform(f),this.fire(new u.k("movestart",p)).fire(new u.k("move",p)),g&&this.fire(new u.k("zoomstart",p)).fire(new u.k("zoom",p)).fire(new u.k("zoomend",p)),b&&this.fire(new u.k("rotatestart",p)).fire(new u.k("rotate",p)).fire(new u.k("rotateend",p)),I&&this.fire(new u.k("pitchstart",p)).fire(new u.k("pitch",p)).fire(new u.k("pitchend",p)),this.fire(new u.k("moveend",p))}calculateCameraOptionsFromTo(s,p,f,g=0){const b=u.Y.fromLngLat(s,p),I=u.Y.fromLngLat(f,g),L=I.x-b.x,A=I.y-b.y,k=I.z-b.z,z=Math.hypot(L,A,k);if(z===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(L,A),Z=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),te=180*Math.atan2(L,-A)/Math.PI;let ne=180*Math.acos(V/z)/Math.PI;return ne=k<0?90-ne:90+ne,{center:I.toLngLat(),zoom:Z,pitch:ne,bearing:te}}easeTo(s,p){var f;this._stop(!1,s.easeId),((s=u.e({offset:[0,0],duration:500,easing:u.b7},s)).animate===!1||!s.essential&&C.prefersReducedMotion)&&(s.duration=0);const g=this._getTransformForUpdate(),b=this.getZoom(),I=this.getBearing(),L=this.getPitch(),A=this.getPadding(),k="bearing"in s?this._normalizeBearing(s.bearing,I):I,z="pitch"in s?+s.pitch:L,V="padding"in s?s.padding:g.padding,Z=u.P.convert(s.offset);let te=g.centerPoint.add(Z);const ne=g.pointLocation(te),{center:se,zoom:ee}=g.getConstrained(u.M.convert(s.center||ne),(f=s.zoom)!==null&&f!==void 0?f:b);this._normalizeCenter(se);const de=g.project(ne),Ce=g.project(se).sub(de),le=g.zoomScale(ee-b);let ve,Te;s.around&&(ve=u.M.convert(s.around),Te=g.locationPoint(ve));const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ee!==b,this._rotating=this._rotating||I!==k,this._pitching=this._pitching||z!==L,this._padding=!g.isPaddingEqual(V),this._easeId=s.easeId,this._prepareEase(p,s.noMoveStart,Me),this.terrain&&this._prepareElevation(se),this._ease(Re=>{if(this._zooming&&(g.zoom=u.z.number(b,ee,Re)),this._rotating&&(g.bearing=u.z.number(I,k,Re)),this._pitching&&(g.pitch=u.z.number(L,z,Re)),this._padding&&(g.interpolatePadding(A,V,Re),te=g.centerPoint.add(Z)),this.terrain&&!s.freezeElevation&&this._updateElevation(Re),ve)g.setLocationAtPoint(ve,Te);else{const Ve=g.zoomScale(g.zoom-b),$e=ee>b?Math.min(2,le):Math.max(.5,le),qe=Math.pow($e,1-Re),at=g.unproject(de.add(Ce.mult(Re*qe)).mult(Ve));g.setLocationAtPoint(g.renderWorldCopies?at.wrap():at,te)}this._applyUpdatedTransform(g),this._fireMoveEvents(p)},Re=>{this.terrain&&this._finalizeElevation(),this._afterEase(p,Re)},s),this}_prepareEase(s,p,f={}){this._moving=!0,p||f.moving||this.fire(new u.k("movestart",s)),this._zooming&&!f.zooming&&this.fire(new u.k("zoomstart",s)),this._rotating&&!f.rotating&&this.fire(new u.k("rotatestart",s)),this._pitching&&!f.pitching&&this.fire(new u.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&p!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(f-(p-(f*s+this._elevationStart))/(1-s)),this._elevationTarget=p}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const p=s.clone(),{center:f,zoom:g,pitch:b,bearing:I,elevation:L}=this.transformCameraUpdate(p);f&&(p.center=f),g!==void 0&&(p.zoom=g),b!==void 0&&(p.pitch=b),I!==void 0&&(p.bearing=I),L!==void 0&&(p.elevation=L),this.transform.apply(p)}_fireMoveEvents(s){this.fire(new u.k("move",s)),this._zooming&&this.fire(new u.k("zoom",s)),this._rotating&&this.fire(new u.k("rotate",s)),this._pitching&&this.fire(new u.k("pitch",s))}_afterEase(s,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const f=this._zooming,g=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.k("zoomend",s)),g&&this.fire(new u.k("rotateend",s)),b&&this.fire(new u.k("pitchend",s)),this.fire(new u.k("moveend",s))}flyTo(s,p){var f;if(!s.essential&&C.prefersReducedMotion){const Qt=u.L(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Qt,p)}this.stop(),s=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b7},s);const g=this._getTransformForUpdate(),b=this.getZoom(),I=this.getBearing(),L=this.getPitch(),A=this.getPadding(),k="bearing"in s?this._normalizeBearing(s.bearing,I):I,z="pitch"in s?+s.pitch:L,V="padding"in s?s.padding:g.padding,Z=u.P.convert(s.offset);let te=g.centerPoint.add(Z);const ne=g.pointLocation(te),{center:se,zoom:ee}=g.getConstrained(u.M.convert(s.center||ne),(f=s.zoom)!==null&&f!==void 0?f:b);this._normalizeCenter(se);const de=g.zoomScale(ee-b),Ce=g.project(ne),le=g.project(se).sub(Ce);let ve=s.curve;const Te=Math.max(g.width,g.height),Me=Te/de,Re=le.mag();if("minZoom"in s){const Qt=u.ac(Math.min(s.minZoom,b,ee),g.minZoom,g.maxZoom),Tt=Te/g.zoomScale(Qt-b);ve=Math.sqrt(Tt/Re*2)}const Ve=ve*ve;function $e(Qt){const Tt=(Me*Me-Te*Te+(Qt?-1:1)*Ve*Ve*Re*Re)/(2*(Qt?Me:Te)*Ve*Re);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function qe(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function at(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const Dt=$e(!1);let Ke=function(Qt){return at(Dt)/at(Dt+ve*Qt)},Et=function(Qt){return Te*((at(Dt)*(qe(Tt=Dt+ve*Qt)/at(Tt))-qe(Dt))/Ve)/Re;var Tt},Ot=($e(!0)-Dt)/ve;if(Math.abs(Re)<1e-6||!isFinite(Ot)){if(Math.abs(Te-Me)<1e-6)return this.easeTo(s,p);const Qt=Me<Te?-1:1;Ot=Math.abs(Math.log(Me/Te))/ve,Et=()=>0,Ke=Tt=>Math.exp(Qt*ve*Tt)}return s.duration="duration"in s?+s.duration:1e3*Ot/("screenSpeed"in s?+s.screenSpeed/ve:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=I!==k,this._pitching=z!==L,this._padding=!g.isPaddingEqual(V),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(se),this._ease(Qt=>{const Tt=Qt*Ot,jt=1/Ke(Tt);g.zoom=Qt===1?ee:b+g.scaleZoom(jt),this._rotating&&(g.bearing=u.z.number(I,k,Qt)),this._pitching&&(g.pitch=u.z.number(L,z,Qt)),this._padding&&(g.interpolatePadding(A,V,Qt),te=g.centerPoint.add(Z)),this.terrain&&!s.freezeElevation&&this._updateElevation(Qt);const qt=Qt===1?se:g.unproject(Ce.add(le.mult(Et(Tt))).mult(jt));g.setLocationAtPoint(g.renderWorldCopies?qt.wrap():qt,te),this._applyUpdatedTransform(g),this._fireMoveEvents(p)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(p)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,p)}if(!s){const f=this.handlers;f&&f.stop(!1)}return this}_ease(s,p,f){f.animate===!1||f.duration===0?(s(1),p()):(this._easeStart=C.now(),this._easeOptions=f,this._onEaseFrame=s,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,p){s=u.b1(s,-180,180);const f=Math.abs(s-p);return Math.abs(s-360-p)<f&&(s-=360),Math.abs(s+360-p)<f&&(s+=360),s}_normalizeCenter(s){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const f=s.lng-p.center.lng;s.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}const J0={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Q0{constructor(s=J0){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,p){const f=this._map._getUIString(`AttributionControl.${p}`);s.title=f,s.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const p=this._map.style.sourceCaches;for(const g in p){const b=p[g];if(b.used||b.usedForTerrain){const I=b.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s=s.filter(g=>String(g).trim()),s.sort((g,b)=>g.length-b.length),s=s.filter((g,b)=>{for(let I=b+1;I<s.length;I++)if(s[I].indexOf(g)>=0)return!1;return!0});const f=s.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,s.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class e_{constructor(s={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const f=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const p=T.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class t_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const p=++this._id;return this._queue.push({callback:s,id:p,cancelled:!1}),p}remove(s){const p=this._currentlyRunning,f=p?this._queue.concat(p):this._queue;for(const g of f)if(g.id===s)return void(g.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const f of p)if(!f.cancelled&&(f.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Qh=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class kl extends u.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,p){this.sourceCache.update(s,p),this._renderableTilesKeys=[];const f={};for(const g of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aN(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Mi(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(s){for(const p in this._tiles){const f=this._tiles[p];(!s||f.tileID.equals(s)||f.tileID.isChildOf(s)||s.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const p={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(s.canonical)){const b=s.clone();b.posMatrix=new Float64Array(16),u.aN(b.posMatrix,0,u.W,0,u.W,0,1),p[f]=b}else if(g.canonical.isChildOf(s.canonical)){const b=s.clone();b.posMatrix=new Float64Array(16);const I=g.canonical.z-s.canonical.z,L=g.canonical.x-(g.canonical.x>>I<<I),A=g.canonical.y-(g.canonical.y>>I<<I),k=u.W>>I;u.aN(b.posMatrix,0,k,0,k,0,1),u.H(b.posMatrix,b.posMatrix,[-L*k,-A*k,0]),p[f]=b}else if(s.canonical.isChildOf(g.canonical)){const b=s.clone();b.posMatrix=new Float64Array(16);const I=s.canonical.z-g.canonical.z,L=s.canonical.x-(s.canonical.x>>I<<I),A=s.canonical.y-(s.canonical.y>>I<<I),k=u.W>>I;u.aN(b.posMatrix,0,u.W,0,u.W,0,1),u.H(b.posMatrix,b.posMatrix,[L*k,A*k,0]),u.J(b.posMatrix,b.posMatrix,[1/2**I,1/2**I,0]),p[f]=b}}return p}getSourceTile(s,p){const f=this.sourceCache._source;let g=s.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(g).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!b||!b.dem)&&p)for(;g>=f.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(s.scaledTo(g--).key);return b}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=s)}}class lt{constructor(s,p,f){this.painter=s,this.sourceCache=new kl(p),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,p,f,g=u.W){var b;if(!(p>=0&&p<g&&f>=0&&f<g))return 0;const I=this.getTerrainData(s),L=(b=I.tile)===null||b===void 0?void 0:b.dem;if(!L)return 0;const A=function(ne,se,ee){var de=se[0],Ce=se[1];return ne[0]=ee[0]*de+ee[4]*Ce+ee[12],ne[1]=ee[1]*de+ee[5]*Ce+ee[13],ne}([],[p/g*u.W,f/g*u.W],I.u_terrain_matrix),k=[A[0]*L.dim,A[1]*L.dim],z=Math.floor(k[0]),V=Math.floor(k[1]),Z=k[0]-z,te=k[1]-V;return L.get(z,V)*(1-Z)*(1-te)+L.get(z+1,V)*Z*(1-te)+L.get(z,V+1)*(1-Z)*te+L.get(z+1,V+1)*Z*te}getElevationForLngLatZoom(s,p){const{tileID:f,mercatorX:g,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(s,p);return this.getElevation(f,g%u.W,b%u.W,u.W)}getElevation(s,p,f,g=u.W){return this.getDEMElevation(s,p,f,g)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const g=this.painter.context,b=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ue(g,b,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ue(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const p=this.sourceCache.getSourceTile(s,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const g=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new Ue(g,p.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),p.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const f=p&&p+p.tileID.key+s.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let b=s.canonical.z-p.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=g?b=s.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=s.canonical.x-(s.canonical.x>>b<<b),L=s.canonical.y-(s.canonical.y>>b<<b),A=u.b9(new Float64Array(16),[1/(u.W<<b),1/(u.W<<b),0]);u.H(A,A,[I*u.W,L*u.W,0]),this._demMatrixCache[s.key]={matrix:A,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(s){const p=this.painter,f=p.width/devicePixelRatio,g=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ue(p.context,{width:f,height:g,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ue(p.context,{width:f,height:g,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,I=0;b<this._coordsTextureSize;b++)for(let L=0;L<this._coordsTextureSize;L++,I+=4)p[I+0]=255&L,p[I+1]=255&b,p[I+2]=L>>8<<4|b>>8,p[I+3]=0;const f=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),g=new Ue(s,f,s.gl.RGBA,{premultiply:!1});return g.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),f=this.painter.context,g=f.gl,b=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(b,L-I-1,1,1,g.RGBA,g.UNSIGNED_BYTE,p),f.bindFramebuffer.set(null);const A=p[0]+(p[2]>>4<<8),k=p[1]+((15&p[2])<<8),z=this.coordsIndex[255-p[3]],V=z&&this.sourceCache.getTileByID(z);if(!V)return null;const Z=this._coordsTextureSize,te=(1<<V.tileID.canonical.z)*Z;return new u.Y((V.tileID.canonical.x*Z+A)/te+V.tileID.wrap,(V.tileID.canonical.y*Z+k)/te,this.getElevation(V.tileID,A,k,Z))}depthAtPoint(s){const p=new Uint8Array(4),f=this.painter.context,g=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,p),f.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,p=new u.ba,f=new u.aX,g=this.meshSize,b=u.W/g,I=g*g;for(let V=0;V<=g;V++)for(let Z=0;Z<=g;Z++)p.emplaceBack(Z*b,V*b,0);for(let V=0;V<I;V+=g+1)for(let Z=0;Z<g;Z++)f.emplaceBack(Z+V,g+Z+V+1,g+Z+V+2),f.emplaceBack(Z+V,g+Z+V+2,Z+V+1);const L=p.length,A=L+2*(g+1);for(const V of[0,1])for(let Z=0;Z<=g;Z++)for(const te of[0,1])p.emplaceBack(Z*b,V*u.W,te);for(let V=0;V<2*g;V+=2)f.emplaceBack(A+V,A+V+1,A+V+3),f.emplaceBack(A+V,A+V+3,A+V+2),f.emplaceBack(L+V,L+V+3,L+V+1),f.emplaceBack(L+V,L+V+2,L+V+3);const k=p.length,z=k+2*(g+1);for(const V of[0,1])for(let Z=0;Z<=g;Z++)for(const te of[0,1])p.emplaceBack(V*u.W,Z*b,te);for(let V=0;V<2*g;V+=2)f.emplaceBack(k+V,k+V+1,k+V+3),f.emplaceBack(k+V,k+V+3,k+V+2),f.emplaceBack(z+V,z+V+3,z+V+1),f.emplaceBack(z+V,z+V+2,z+V+3);return this._mesh={indexBuffer:s.createIndexBuffer(f),vertexBuffer:s.createVertexBuffer(p,Qh.members),segments:u.$.simpleSegment(0,0,p.length,f.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*u.bb/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,p){var f;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(s,p);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(s){const p=this.getTerrainData(s).tile,f={minElevation:null,maxElevation:null};return p&&p.dem&&(f.minElevation=p.dem.min*this.exaggeration,f.maxElevation=p.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(s,p){const f=u.Y.fromLngLat(s.wrap()),g=(1<<p)*u.W,b=f.x*g,I=f.y*g,L=Math.floor(b/u.W),A=Math.floor(I/u.W);return{tileID:new u.Q(p,0,p,L,A),mercatorX:b,mercatorY:I}}}class n_{constructor(s,p,f){this._context=s,this._size=p,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(f.texture),{id:s,fbo:p,texture:f,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>s.id!==p),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const ua={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ep{constructor(s,p){this.painter=s,this.terrain=p,this.pool=new n_(s.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(f=>!s._layers[f].isHidden(p)),this._coordsDescendingInv={};for(const f in s.sourceCaches){this._coordsDescendingInv[f]={};const g=s.sourceCaches[f].getVisibleCoordinates();for(const b of g){const I=this.terrain.sourceCache.getTerrainCoords(b);for(const L in I)this._coordsDescendingInv[f][L]||(this._coordsDescendingInv[f][L]=[]),this._coordsDescendingInv[f][L].push(I[L])}}this._coordsDescendingInvStr={};for(const f of s._order){const g=s._layers[f],b=g.source;if(ua[g.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const I in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][I]=this._coordsDescendingInv[b][I].map(L=>L.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[g][f.tileID.key];b&&b!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const p=s.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(ua[p]&&(this._prevType&&ua[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(s.id),!g))return!0;if(ua[this._prevType]||ua[p]&&g){this._prevType=p;const b=this._stacks.length-1,I=this._stacks[b]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Lm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[b]){const k=this.pool.getObjectForId(L.rtt[b].id);if(k.stamp===L.rtt[b].stamp){this.pool.useObject(k);continue}}const A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),L.rtt[b]={id:A.id,stamp:A.stamp},f.context.bindFramebuffer.set(A.fbo.framebuffer),f.context.clear({color:u.aO.transparent,stencil:0}),f.currentStencilSource=void 0;for(let k=0;k<I.length;k++){const z=f.style._layers[I[k]],V=z.source?this._coordsDescendingInv[z.source][L.tileID.key]:[L.tileID];f.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),f._renderTileClippingMasks(z,V),f.renderLayer(f,f.style.sourceCaches[z.source],z,V),z.source&&(L.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][L.tileID.key])}}return Lm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ua[p]}return!1}}const r_={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ot=y,Km={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:J0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},i_=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},xb={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ym{constructor(s,p,f=!1){this.mousedown=I=>{this.startMouse(u.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),T.mousePos(this.element,I)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,T.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=s.dragRotate._mouseRotate.getClickTolerance(),b=s.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=Al({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:L,bearingDegreesPerPixelMoved:A=.8})=>{const k=new Bm;return new Ml({clickTolerance:L,move:(z,V)=>({bearingDelta:(V.x-z.x)*A}),moveStateManager:k,enable:I,assignEvents:i_})})({clickTolerance:g,enable:!0}),this.map=s,f&&(this.mousePitch=jo({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:L,pitchDegreesPerPixelMoved:A=-.5})=>{const k=new Bm;return new Ml({clickTolerance:L,move:(z,V)=>({pitchDelta:(V.y-z.y)*A}),moveStateManager:k,enable:I,assignEvents:i_})})({clickTolerance:b,enable:!0})),T.addEventListener(p,"mousedown",this.mousedown),T.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(p,"touchcancel",this.reset)}startMouse(s,p){this.mouseRotate.dragStart(s,p),this.mousePitch&&this.mousePitch.dragStart(s,p),T.disableDrag()}startTouch(s,p){this.touchRotate.dragStart(s,p),this.touchPitch&&this.touchPitch.dragStart(s,p),T.disableDrag()}moveMouse(s,p){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(s,p)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(s,p)||{};b&&f.setPitch(f.getPitch()+b)}}moveTouch(s,p){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(s,p)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(s,p)||{};b&&f.setPitch(f.getPitch()+b)}}off(){const s=this.element;T.removeEventListener(s,"mousedown",this.mousedown),T.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let Nl;function Jm(_,s,p){const f=new u.M(_.lng,_.lat);if(_=new u.M(_.lng,_.lat),s){const g=new u.M(_.lng-360,_.lat),b=new u.M(_.lng+360,_.lat),I=p.locationPoint(_).distSqr(s);p.locationPoint(g).distSqr(s)<I?_=g:p.locationPoint(b).distSqr(s)<I&&(_=b)}for(;Math.abs(_.lng-p.center.lng)>180;){const g=p.locationPoint(_);if(g.x>=0&&g.y>=0&&g.x<=p.width&&g.y<=p.height)break;_.lng>p.center.lng?_.lng-=360:_.lng+=360}return _.lng!==f.lng&&p.locationPoint(_).y>p.height/2-p.getHorizon()?_:f}const Qm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function o_(_,s,p){const f=_.classList;for(const g in Qm)f.remove(`maplibregl-${p}-anchor-${g}`);f.add(`maplibregl-${p}-anchor-${s}`)}class Ya extends u.E{constructor(s){if(super(),this._onKeyPress=p=>{const f=p.code,g=p.charCode||p.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=p=>{const f=p.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=p=>{var f;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Jm(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),p&&p.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${Qm[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${b}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=u.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const p=T.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${f}px`),p.setAttributeNS(null,"width",`${g}px`),p.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const b=T.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const I=T.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const L=T.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of A){const Ce=T.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",de.rx),Ce.setAttributeNS(null,"ry",de.ry),L.appendChild(Ce)}const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);const z=T.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(z);const V=T.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const Z=T.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(Z);const te=T.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const ne=T.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=T.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const ee=T.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),ne.appendChild(se),ne.appendChild(ee),I.appendChild(L),I.appendChild(k),I.appendChild(V),I.appendChild(te),I.appendChild(ne),p.appendChild(I),p.setAttributeNS(null,"height",f*this._scale+"px"),p.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(p),this._offset=u.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),o_(this._element,this._anchor,"marker"),s&&s.className)for(const p of s.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=u.M.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const g=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var p,f;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,b=g.terrain.depthAtPoint(this._pos),I=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,I)-b<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/g.transform._pixelPerMeter,A=Math.sin(g.getPitch()*Math.PI/180)*L,k=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),z=g.transform.lngLatToCameraDepth(this._lngLat,I+A)-k>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=u.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,p){return s===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let xu=0,bu=!1;const s_={maxWidth:100,unit:"metric"};function eg(_,s,p){const f=p&&p.maxWidth||100,g=_._container.clientHeight/2,b=_.unproject([0,g]),I=_.unproject([f,g]),L=b.distanceTo(I);if(p&&p.unit==="imperial"){const A=3.2808*L;A>5280?vc(s,f,A/5280,_._getUIString("ScaleControl.Miles")):vc(s,f,A,_._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?vc(s,f,L/1852,_._getUIString("ScaleControl.NauticalMiles")):L>=1e3?vc(s,f,L/1e3,_._getUIString("ScaleControl.Kilometers")):vc(s,f,L,_._getUIString("ScaleControl.Meters"))}function vc(_,s,p,f){const g=function(b){const I=Math.pow(10,`${Math.floor(b)}`.length-1);let L=b/I;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(A){const k=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*k)/k}(L),I*L}(p);_.style.width=s*(g/p)+"px",_.innerHTML=`${g}&nbsp;${f}`}const bb={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},ca=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tp(_){if(_){if(typeof _=="number"){const s=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(s,s),"top-right":new u.P(-s,s),bottom:new u.P(0,-_),"bottom-left":new u.P(s,-s),"bottom-right":new u.P(-s,-s),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const s=u.P.convert(_);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return tp(new u.P(0,0))}const ft=y;h.AJAXError=u.be,h.Evented=u.E,h.LngLat=u.M,h.MercatorCoordinate=u.Y,h.Point=u.P,h.addProtocol=u.bf,h.config=u.a,h.removeProtocol=u.bg,h.AttributionControl=Q0,h.BoxZoomHandler=Dm,h.CanvasSource=ra,h.CooperativeGesturesHandler=Xm,h.DoubleClickZoomHandler=Wm,h.DragPanHandler=Hm,h.DragRotateHandler=Zm,h.EdgeInsets=yd,h.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var s;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=p==null?void 0:p.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=Zt,h.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const p=new u.M(s.coords.longitude,s.coords.latitude),f=s.coords.accuracy,g=this._map.getBearing(),b=u.e({bearing:g},this.options.fitBoundsOptions),I=Jt.fromLngLat(p,f);this._map.fitBounds(I,b,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const p=new u.M(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&bu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",p=>p.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",s===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ya({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ya({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},jn,_)}onAdd(_){return this._map=_,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(s=!1){if(Nl!==void 0&&!s)return Nl;if(window.navigator.permissions===void 0)return Nl=!!window.navigator.geolocation,Nl;try{Nl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Nl=!!window.navigator.geolocation}return Nl})}().then(s=>this._setupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,xu=0,bu=!1}_isOutOfMapMaxBounds(_){const s=this._map.getMaxBounds(),p=_.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),s=_.getSouthEast(),p=_.getNorthEast(),f=s.distanceTo(p),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":xu--,bu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),xu++,xu>1?(_={maximumAge:6e5,timeout:0},bu=!0):(_=this.options.positionOptions,bu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=H0,h.ImageSource=Li,h.KeyboardHandler=Um,h.LngLatBounds=Jt,h.LogoControl=e_,h.Map=class extends Jh{constructor(_){if(u.bc.mark(u.bd.create),(_=u.e({},Km,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new yu(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._contextLost=s=>{s.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new t_,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},r_,_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new re(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const p=W0(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{s?p(f):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new la(this,_),this._hash=_.hash&&new H0(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,u.e({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Q0(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new e_,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new u.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new u.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new u.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(_,s){if(s===void 0&&(s=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=_.onAdd(this);this._controls.push(_);const f=this._controlPositions[s];return s.indexOf("bottom")!==-1?f.insertBefore(p,f.firstChild):f.appendChild(p),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(_);return s>-1&&this._controls.splice(s,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,s,p,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,s,p,f)}resize(_){var s;const p=this._containerDimensions(),f=p[0],g=p[1],b=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,b),this.painter.resize(f,g,b),this.painter.overLimit()){const L=this.painter.context.gl;this._maxCanvasSize=[L.drawingBufferWidth,L.drawingBufferHeight];const A=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,A),this.painter.resize(f,g,A)}this.transform.resize(f,g),(s=this._requestedCameraState)===null||s===void 0||s.resize(f,g);const I=!this._moving;return I&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),I&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,s){const{0:p,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),b=_*g,I=s*g;return Math.min(b>p?p/b:1,I>f?f/I:1)*g}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Jt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.M.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,s,p){if(_==="mouseenter"||_==="mouseover"){let f=!1;return{layer:s,listener:p,delegates:{mousemove:b=>{const I=this.getLayer(s)?this.queryRenderedFeatures(b.point,{layers:[s]}):[];I.length?f||(f=!0,p.call(this,new Ni(_,this,b.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(_==="mouseleave"||_==="mouseout"){let f=!1;return{layer:s,listener:p,delegates:{mousemove:I=>{(this.getLayer(s)?this.queryRenderedFeatures(I.point,{layers:[s]}):[]).length?f=!0:f&&(f=!1,p.call(this,new Ni(_,this,I.originalEvent)))},mouseout:I=>{f&&(f=!1,p.call(this,new Ni(_,this,I.originalEvent)))}}}}{const f=g=>{const b=this.getLayer(s)?this.queryRenderedFeatures(g.point,{layers:[s]}):[];b.length&&(g.features=b,p.call(this,g),delete g.features)};return{layer:s,listener:p,delegates:{[_]:f}}}}on(_,s,p){if(p===void 0)return super.on(_,s);const f=this._createDelegatedListener(_,s,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(_,s,p){if(p===void 0)return super.once(_,s);const f=this._createDelegatedListener(_,s,p);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(_,s,p){return p===void 0?super.off(_,s):(this._delegatedListeners&&this._delegatedListeners[_]&&(f=>{const g=this._delegatedListeners[_];for(let b=0;b<g.length;b++){const I=g[b];if(I.layer===s&&I.listener===p){for(const L in I.delegates)this.off(L,I.delegates[L]);return g.splice(b,1),this}}})(),this)}queryRenderedFeatures(_,s){if(!this.style)return[];let p;const f=_ instanceof u.P||Array.isArray(_),g=f?_:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(f?{}:_)||{},g instanceof u.P||typeof g[0]=="number")p=[u.P.convert(g)];else{const b=u.P.convert(g[0]),I=u.P.convert(g[1]);p=[b,new u.P(I.x,b.y),I,new u.P(b.x,I.y),b]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(_,s){return this.style.querySourceFeatures(_,s)}setStyle(_,s){return(s=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(_,s))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const s=this._locale[_];if(s==null)throw new Error(`Missing UI string '${_}'`);return s}_updateStyle(_,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,s));const p=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new td(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,s,p):this.style.loadJSON(_,s,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new td(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,s){if(typeof _=="string"){const p=this._requestManager.transformRequest(_,"Style");u.h(p,new AbortController).then(f=>{this._updateDiff(f.data,s)}).catch(f=>{f&&this.fire(new u.j(f))})}else typeof _=="object"&&this._updateDiff(_,s)}_updateDiff(_,s){try{this.style.setState(_,s)&&this._update(!0)}catch(p){u.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(_,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,s){return this._lazyInitEmptyStyle(),this.style.addSource(_,s),this._update(!0)}isSourceLoaded(_){const s=this.style&&this.style.sourceCaches[_];if(s!==void 0)return s.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const s=this.style.sourceCaches[_.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&s.reload();for(const p in this.style._layers){const f=this.style._layers[p];f.type==="hillshade"&&f.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lt(this.painter,s,_),this.painter.renderToTexture=new ep(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,s;return(s=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const s in _){const p=_[s]._tiles;for(const f in p){const g=p[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,s,p={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:b,stretchY:I,content:L,textFitWidth:A,textFitHeight:k}=p;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||u.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:V,data:Z}=s,te=s;return this.style.addImage(_,{data:new u.R({width:z,height:V},new Uint8Array(Z)),pixelRatio:f,stretchX:b,stretchY:I,content:L,textFitWidth:A,textFitHeight:k,sdf:g,version:0,userImage:te}),te.onAdd&&te.onAdd(this,_),this}}{const{width:z,height:V,data:Z}=C.getImageData(s);this.style.addImage(_,{data:new u.R({width:z,height:V},Z),pixelRatio:f,stretchX:b,stretchY:I,content:L,textFitWidth:A,textFitHeight:k,sdf:g,version:0})}}updateImage(_,s){const p=this.style.getImage(_);if(!p)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=s instanceof HTMLImageElement||u.b(s)?C.getImageData(s):s,{width:g,height:b,data:I}=f;if(g===void 0||b===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==p.data.width||b!==p.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(s instanceof HTMLImageElement||u.b(s));return p.data.replace(I,L),this.style.updateImage(_,p),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return G.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,s){return this._lazyInitEmptyStyle(),this.style.addLayer(_,s),this._update(!0)}moveLayer(_,s){return this.style.moveLayer(_,s),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,s,p){return this.style.setLayerZoomRange(_,s,p),this._update(!0)}setFilter(_,s,p={}){return this.style.setFilter(_,s,p),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,s,p,f={}){return this.style.setPaintProperty(_,s,p,f),this._update(!0)}getPaintProperty(_,s){return this.style.getPaintProperty(_,s)}setLayoutProperty(_,s,p,f={}){return this.style.setLayoutProperty(_,s,p,f),this._update(!0)}getLayoutProperty(_,s){return this.style.getLayoutProperty(_,s)}setGlyphs(_,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,s,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,s,p,f=>{f||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,s,p=>{p||this._update(!0)}),this}setLight(_,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,s){return this.style.setFeatureState(_,s),this._update()}removeFeatureState(_,s){return this.style.removeFeatureState(_,s),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,s=0;return this._container&&(_=this._container.clientWidth||400,s=this._container.clientHeight||300),[_,s]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const s=this._canvasContainer=T.create("div","maplibregl-canvas-container",_);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),f=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],f);const g=this._controlContainer=T.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{b[I]=T.create("div",`maplibregl-ctrl-${I} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,s,p){this._canvas.width=Math.floor(p*_),this._canvas.height=Math.floor(p*s),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{s={requestedAttributes:_},f&&(s.statusMessage=f.statusMessage,s.type=f.type)},{once:!0});const p=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!p){const f="Failed to initialize WebGL";throw s?(s.message=f,new Error(JSON.stringify(s))):new Error(f)}this.painter=new Mm(p,this.transform),R.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,b=C.now();this.style.zoomHistory.update(g,b);const I=new u.a8(g,{now:b,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),L=I.crossFadingFactor();L===1&&L===this._crossFadingFactor||(p=!0,this._crossFadingFactor=L),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bc.mark(u.bd.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.bc.mark(u.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bc.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(_=>{u.bc.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ot}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=Ni,h.MapTouchEvent=Ll,h.MapWheelEvent=xd,h.Marker=Ya,h.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const s=this._map.getZoom(),p=s===this._map.getMaxZoom(),f=s===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,p)=>{const f=this._map._getUIString(`NavigationControl.${p}`);s.title=f,s.setAttribute("aria-label",f)},this.options=u.e({},xb,_),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ym(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,s){const p=T.create("button",_,this._container);return p.type="button",p.addEventListener("click",s),p}},h.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const L of this.options.className.split(" "))this._container.classList.add(L);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Jm(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!s)return;const f=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const b=tp(this.options.offset);if(!g){const L=this._container.offsetWidth,A=this._container.offsetHeight;let k;k=f.y+b.bottom.y<A?["top"]:f.y>this._map.transform.height-A?["bottom"]:[],f.x<L/2?k.push("left"):f.x>this._map.transform.width-L/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let I=f.add(b[g]);this.options.subpixelPositioning||(I=I.round()),T.setTransform(this._container,`${Qm[g]} translate(${I.x}px,${I.y}px)`),o_(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(bb),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.M.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const s=document.createDocumentFragment(),p=document.createElement("body");let f;for(p.innerHTML=_;f=p.firstChild,f;)s.appendChild(f);return this.setDOMContent(s)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(ca);_&&_.focus()}},h.RasterDEMTileSource=_n,h.RasterTileSource=Vr,h.ScaleControl=class{constructor(_){this._onMove=()=>{eg(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,eg(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},s_),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=qm,h.Style=td,h.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=Vm,h.TwoFingersTouchRotateHandler=$m,h.TwoFingersTouchZoomHandler=yc,h.TwoFingersTouchZoomRotateHandler=_c,h.VectorTileSource=ze,h.VideoSource=Do,h.addSourceType=(_,s)=>u._(void 0,void 0,void 0,function*(){if(Cs(_))throw new Error(`A source type called "${_}" already exists.`);((p,f)=>{ia[p]=f})(_,s)}),h.clearPrewarmedResources=function(){const _=Jn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Bt),Jn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return ii().getRTLTextPluginStatus()},h.getVersion=function(){return ft},h.getWorkerCount=function(){return yn.workerCount},h.getWorkerUrl=function(){return u.a.WORKER_URL},h.importScriptInWorkers=function(_){return Wa().broadcast("IS",_)},h.prewarm=function(){ri().acquire(Bt)},h.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},h.setRTLTextPlugin=function(_,s){return ii().setRTLTextPlugin(_,s)},h.setWorkerCount=function(_){yn.workerCount=_},h.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var l=n;return l})})(g4);var AW=g4.exports;const c2=rE(AW);var kW=Object.defineProperty,NW=(e,t,n)=>t in e?kW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oA=(e,t,n)=>(NW(e,typeof t!="symbol"?t+"":t,n),n);function Pr(){}function RW(e,t){for(const n in t)e[n]=t[n];return e}function _4(e){return e()}function sA(){return Object.create(null)}function sc(e){e.forEach(_4)}function v4(e){return typeof e=="function"}function Hp(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ov;function Mo(e,t){return e===t?!0:(ov||(ov=document.createElement("a")),ov.href=t,e===ov.href)}function DW(e){return Object.keys(e).length===0}function OW(e,t,n,r){if(e){const i=x4(e,t,n,r);return e[0](i)}}function x4(e,t,n,r){return e[1]&&r?RW(n.ctx.slice(),e[1](r(t))):n.ctx}function zW(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const l=[],h=Math.max(t.dirty.length,i.length);for(let u=0;u<h;u+=1)l[u]=t.dirty[u]|i[u];return l}return t.dirty|i}return t.dirty}function FW(e,t,n,r,i,l){if(i){const h=x4(t,n,r,l);e.p(h,i)}}function BW(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function aA(e){return e??""}function fn(e,t){e.appendChild(t)}function Mr(e,t,n){e.insertBefore(t,n||null)}function yr(e){e.parentNode&&e.parentNode.removeChild(e)}function zn(e){return document.createElement(e)}function ju(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function mh(e){return document.createTextNode(e)}function Os(){return mh(" ")}function jW(){return mh("")}function Zo(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $W(e){return function(t){return t.preventDefault(),e.call(this,t)}}function He(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function VW(e){return Array.from(e.childNodes)}function Oy(e,t){t=""+t,e.data!==t&&(e.data=t)}function lA(e,t){e.value=t??""}function sv(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function Zc(e,t,n){e.classList.toggle(t,!!n)}function UW(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let zy;function oy(e){zy=e}function b4(){if(!zy)throw new Error("Function called outside component initialization");return zy}function GW(e){b4().$$.on_destroy.push(e)}function qW(){const e=b4();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const l=UW(t,n,{cancelable:r});return i.slice().forEach(h=>{h.call(e,l)}),!l.defaultPrevented}return!0}}function uA(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const Gd=[],FS=[];let _f=[];const cA=[],WW=Promise.resolve();let BS=!1;function HW(){BS||(BS=!0,WW.then(w4))}function jS(e){_f.push(e)}const h2=new Set;let Vd=0;function w4(){if(Vd!==0)return;const e=zy;do{try{for(;Vd<Gd.length;){const t=Gd[Vd];Vd++,oy(t),ZW(t.$$)}}catch(t){throw Gd.length=0,Vd=0,t}for(oy(null),Gd.length=0,Vd=0;FS.length;)FS.pop()();for(let t=0;t<_f.length;t+=1){const n=_f[t];h2.has(n)||(h2.add(n),n())}_f.length=0}while(Gd.length);for(;cA.length;)cA.pop()();BS=!1,h2.clear(),oy(e)}function ZW(e){if(e.fragment!==null){e.update(),sc(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(jS)}}function XW(e){const t=[],n=[];_f.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),_f=t}const Nv=new Set;let xp;function Rv(){xp={r:0,c:[],p:xp}}function Dv(){xp.r||sc(xp.c),xp=xp.p}function Kr(e,t){e&&e.i&&(Nv.delete(e),e.i(t))}function Fi(e,t,n,r){if(e&&e.o){if(Nv.has(e))return;Nv.add(e),xp.c.push(()=>{Nv.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function hA(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function KW(e,t){Fi(e,1,1,()=>{t.delete(e.key)})}function YW(e,t,n,r,i,l,h,u,y,w,E,C){let T=e.length,R=l.length,O=T;const B={};for(;O--;)B[e[O].key]=O;const Y=[],$=new Map,U=new Map,G=[];for(O=R;O--;){const fe=C(i,l,O),ye=n(fe);let Pe=h.get(ye);Pe?G.push(()=>Pe.p(fe,t)):(Pe=w(ye,fe),Pe.c()),$.set(ye,Y[O]=Pe),ye in B&&U.set(ye,Math.abs(O-B[ye]))}const re=new Set,he=new Set;function _e(fe){Kr(fe,1),fe.m(u,E),h.set(fe.key,fe),E=fe.first,R--}for(;T&&R;){const fe=Y[R-1],ye=e[T-1],Pe=fe.key,De=ye.key;fe===ye?(E=fe.first,T--,R--):$.has(De)?!h.has(Pe)||re.has(Pe)?_e(fe):he.has(De)?T--:U.get(Pe)>U.get(De)?(he.add(Pe),_e(fe)):(re.add(De),T--):(y(ye,h),T--)}for(;T--;){const fe=e[T];$.has(fe.key)||y(fe,h)}for(;R;)_e(Y[R-1]);return sc(G),Y}function gh(e){e&&e.c()}function Zu(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),jS(()=>{const l=e.$$.on_mount.map(_4).filter(v4);e.$$.on_destroy?e.$$.on_destroy.push(...l):sc(l),e.$$.on_mount=[]}),i.forEach(jS)}function Xu(e,t){const n=e.$$;n.fragment!==null&&(XW(n.after_update),sc(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function JW(e,t){e.$$.dirty[0]===-1&&(Gd.push(e),HW(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Zp(e,t,n,r,i,l,h=null,u=[-1]){const y=zy;oy(e);const w=e.$$={fragment:null,ctx:[],props:l,update:Pr,not_equal:i,bound:sA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(y?y.$$.context:[])),callbacks:sA(),dirty:u,skip_bound:!1,root:t.target||y.$$.root};h&&h(w.root);let E=!1;if(w.ctx=n?n(e,t.props||{},(C,T,...R)=>{const O=R.length?R[0]:T;return w.ctx&&i(w.ctx[C],w.ctx[C]=O)&&(!w.skip_bound&&w.bound[C]&&w.bound[C](O),E&&JW(e,C)),T}):[],w.update(),E=!0,sc(w.before_update),w.fragment=r?r(w.ctx):!1,t.target){if(t.hydrate){const C=VW(t.target);w.fragment&&w.fragment.l(C),C.forEach(yr)}else w.fragment&&w.fragment.c();t.intro&&Kr(e.$$.fragment),Zu(e,t.target,t.anchor),w4()}oy(y)}let Xp=class{constructor(){oA(this,"$$"),oA(this,"$$set")}$destroy(){Xu(this,1),this.$destroy=Pr}$on(t,n){if(!v4(n))return Pr;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!DW(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};const QW="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(QW);function eH(e){let t,n;return{c(){t=ju("svg"),n=ju("path"),He(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),He(t,"viewBox","0 0 14 14"),He(t,"width","13"),He(t,"height","13"),He(t,"class","svelte-en2qvf")},m(r,i){Mr(r,t,i),fn(t,n)},p:Pr,i:Pr,o:Pr,d(r){r&&yr(t)}}}let S4=class extends Xp{constructor(t){super(),Zp(this,t,null,eH,Hp,{})}};function tH(e){let t,n;return{c(){t=ju("svg"),n=ju("path"),He(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),He(t,"viewBox","0 0 30 30"),He(t,"fill","none"),He(t,"xmlns","http://www.w3.org/2000/svg"),He(t,"class","svelte-d2loi5")},m(r,i){Mr(r,t,i),fn(t,n)},p:Pr,i:Pr,o:Pr,d(r){r&&yr(t)}}}let E4=class extends Xp{constructor(t){super(),Zp(this,t,null,tH,Hp,{})}};function nH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"area.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"area.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function rH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"reverse.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"reverse.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function iH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"poi.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"poi.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function oH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"postal_code.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"postal_code.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function sH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"street.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"street.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function aH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"road.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"road.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function lH(e){let t,n;return{c(){t=zn("img"),Mo(t.src,n=e[3]+"housenumber.svg")||He(t,"src",n),He(t,"alt",e[6]),He(t,"class","svelte-ltkwvy")},m(r,i){Mr(r,t,i)},p(r,i){i&8&&!Mo(t.src,n=r[3]+"housenumber.svg")&&He(t,"src",n),i&64&&He(t,"alt",r[6])},d(r){r&&yr(t)}}}function uH(e){let t,n,r,i;return{c(){t=zn("img"),Mo(t.src,n=e[5])||He(t,"src",n),He(t,"alt",e[4]),He(t,"class","svelte-ltkwvy")},m(l,h){Mr(l,t,h),r||(i=Zo(t,"error",e[14]),r=!0)},p(l,h){h&32&&!Mo(t.src,n=l[5])&&He(t,"src",n),h&16&&He(t,"alt",l[4])},d(l){l&&yr(t),r=!1,i()}}}function pA(e){let t,n;return{c(){t=zn("span"),n=mh(e[6]),He(t,"class","secondary svelte-ltkwvy")},m(r,i){Mr(r,t,i),fn(t,n)},p(r,i){i&64&&Oy(n,r[6])},d(r){r&&yr(t)}}}function cH(e){var t,n;let r,i,l,h,u,y,w,E,C=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",T,R,O=e[2]==="always"||e[2]&&!e[0].address&&((t=e[0].properties)==null?void 0:t.kind)!=="road"&&((n=e[0].properties)==null?void 0:n.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],B,Y,$=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",U,G,re;function he(Pe,De){var Ue,Ye;return De&1&&(i=null),De&1&&(l=null),De&1&&(h=null),Pe[5]?uH:Pe[0].address?lH:((Ue=Pe[0].properties)==null?void 0:Ue.kind)==="road"||((Ye=Pe[0].properties)==null?void 0:Ye.kind)==="road_relation"?aH:(i==null&&(i=!!Pe[0].id.startsWith("address.")),i?sH:(l==null&&(l=!!Pe[0].id.startsWith("postal_code.")),l?oH:(h==null&&(h=!!Pe[0].id.startsWith("poi.")),h?iH:Pe[7]?rH:nH)))}let _e=he(e,-1),fe=_e(e),ye=O&&pA(e);return{c(){r=zn("li"),fe.c(),u=Os(),y=zn("span"),w=zn("span"),E=zn("span"),T=mh(C),R=Os(),ye&&ye.c(),B=Os(),Y=zn("span"),U=mh($),He(E,"class","primary svelte-ltkwvy"),He(w,"class","svelte-ltkwvy"),He(Y,"class","line2 svelte-ltkwvy"),He(y,"class","texts svelte-ltkwvy"),He(r,"tabindex","0"),He(r,"data-selected",e[1]),He(r,"class","svelte-ltkwvy"),Zc(r,"selected",e[1])},m(Pe,De){Mr(Pe,r,De),fe.m(r,null),fn(r,u),fn(r,y),fn(y,w),fn(w,E),fn(E,T),fn(w,R),ye&&ye.m(w,null),fn(y,B),fn(y,Y),fn(Y,U),G||(re=[Zo(r,"mouseenter",e[12]),Zo(r,"focus",e[13])],G=!0)},p(Pe,[De]){var Ue,Ye;_e===(_e=he(Pe,De))&&fe?fe.p(Pe,De):(fe.d(1),fe=_e(Pe),fe&&(fe.c(),fe.m(r,u))),De&1&&C!==(C=(Pe[7]?Pe[0].place_name:Pe[0].place_name.replace(/,.*/,""))+"")&&Oy(T,C),De&37&&(O=Pe[2]==="always"||Pe[2]&&!Pe[0].address&&((Ue=Pe[0].properties)==null?void 0:Ue.kind)!=="road"&&((Ye=Pe[0].properties)==null?void 0:Ye.kind)!=="road_relation"&&!Pe[0].id.startsWith("address.")&&!Pe[0].id.startsWith("postal_code.")&&(!Pe[0].id.startsWith("poi.")||!Pe[5])&&!Pe[7]),O?ye?ye.p(Pe,De):(ye=pA(Pe),ye.c(),ye.m(w,null)):ye&&(ye.d(1),ye=null),De&1&&$!==($=(Pe[7]?"":Pe[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Oy(U,$),De&2&&He(r,"data-selected",Pe[1]),De&2&&Zc(r,"selected",Pe[1])},i:Pr,o:Pr,d(Pe){Pe&&yr(r),fe.d(),ye&&ye.d(),G=!1,sc(re)}}}function hH(e,t,n){var r;let i,l,{feature:h}=t,{selected:u=!1}=t,{showPlaceType:y}=t,{missingIconsCache:w}=t,{iconsBaseUrl:E}=t;const C=(r=h.properties)==null?void 0:r.categories;let T,R,O=0,B=h.place_type[0]==="reverse";function Y(re){R&&w.add(R),n(10,O++,O)}function $(re){uA.call(this,e,re)}function U(re){uA.call(this,e,re)}const G=re=>Y(re.currentTarget);return e.$$set=re=>{"feature"in re&&n(0,h=re.feature),"selected"in re&&n(1,u=re.selected),"showPlaceType"in re&&n(2,y=re.showPlaceType),"missingIconsCache"in re&&n(9,w=re.missingIconsCache),"iconsBaseUrl"in re&&n(3,E=re.iconsBaseUrl)},e.$$.update=()=>{var re,he,_e,fe;if(e.$$.dirty&3640)do n(11,i--,i),n(4,T=C==null?void 0:C[i]),n(5,R=T?E+T.replace(/ /g,"_")+".svg":void 0);while(i>-1&&(!R||w.has(R)));e.$$.dirty&1&&n(6,l=h.id.startsWith("poi.")?(he=(re=h.properties)==null?void 0:re.categories)==null?void 0:he.join(", "):((fe=(_e=h.properties)==null?void 0:_e.place_type_name)==null?void 0:fe[0])??h.place_type[0])},n(11,i=(C==null?void 0:C.length)??0),[h,u,y,E,T,R,l,B,Y,w,O,i,$,U,G]}let pH=class extends Xp{constructor(t){super(),Zp(this,t,hH,cH,Hp,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}};function dH(e){let t;return{c(){t=zn("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',He(t,"class","svelte-7cmwmc")},m(n,r){Mr(n,t,r)},p:Pr,i:Pr,o:Pr,d(n){n&&yr(t)}}}let fH=class extends Xp{constructor(t){super(),Zp(this,t,null,dH,Hp,{})}};function mH(e){let t,n;return{c(){t=ju("svg"),n=ju("path"),He(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),He(t,"viewBox","0 0 60.006 21.412"),He(t,"width","14"),He(t,"height","20"),He(t,"class","svelte-en2qvf")},m(r,i){Mr(r,t,i),fn(t,n)},p:Pr,i:Pr,o:Pr,d(r){r&&yr(t)}}}let gH=class extends Xp{constructor(t){super(),Zp(this,t,null,mH,Hp,{})}};function yH(e){let t,n,r;return{c(){t=ju("svg"),n=ju("circle"),r=ju("path"),He(n,"cx","4.789"),He(n,"cy","4.787"),He(n,"r","3.85"),sv(n,"stroke-width","1.875"),sv(n,"fill","none"),He(r,"d","M12.063 12.063 7.635 7.635"),sv(r,"stroke-width","1.875"),sv(r,"stroke-linecap","round"),He(t,"xmlns","http://www.w3.org/2000/svg"),He(t,"width","13"),He(t,"height","13"),He(t,"viewBox","0 0 13 13"),He(t,"class","svelte-1bpbt60")},m(i,l){Mr(i,t,l),fn(t,n),fn(t,r)},p:Pr,i:Pr,o:Pr,d(i){i&&yr(t)}}}let _H=class extends Xp{constructor(t){super(),Zp(this,t,null,yH,Hp,{})}};function vH(e,t,n){const r=t[1],i=t[0],l=r-i;return e===r&&n?e:((e-i)%l+l)%l+i}function dA(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let Rg;async function xH(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const i of t??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Rg&&i.cachedLocationExpiry&&Rg.time+i.cachedLocationExpiry>Date.now()){if(!Rg.coords)break e;return Rg.coords}let l;try{return l=await new Promise((h,u)=>{n.signal.addEventListener("abort",()=>{u(Error("aborted"))}),navigator.geolocation.getCurrentPosition(y=>{h([y.coords.longitude,y.coords.latitude].map(w=>w.toFixed(6)).join(","))},y=>{u(y)},i)}),l}catch{}finally{i.cachedLocationExpiry&&(Rg={time:Date.now(),coords:l})}if(n.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const fA=/([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})/,mA=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?/i,gA=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?/i,yA=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?/i,_A=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?/i;function bH(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){if(e=="DD")return this.decimalCoordinates;const t=this.decimalCoordinates.split(",").map(h=>Number(h.trim()));let n=vA(t[0],e),r=vA(t[1],e);n.endsWith('.0"')&&r.endsWith('.0"')&&(n=n.replace(/\.0"$/,'"'),r=r.replace(/\.0"$/,'"'));const i=t[0]>=0?" N":" S",l=t[1]>=0?" E":" W";return`${n+i}, ${r+l}`}else throw new Error("no decimal coordinates to convert")}function vA(e,t){const n=Math.abs(e),r=Math.floor(n),i=(n-r)*60;if(t=="DM"){let u=wH(i,3).toFixed(3).padStart(6,"0");return`${r}° ${u}'`}let l=Math.floor(i),h=((i-l)*60).toFixed(1).padStart(4,"0");return l=l.toString().padStart(2,"0"),`${r}° ${l}' ${h}"`}function wH(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function eI(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,i="",l="",h=[],u=!1;if(fA.test(e))if(h=fA.exec(e),u=Dg(h),u)n=Math.abs(h[1])+h[2]/60,Number(h[1])<0&&(n*=-1),r=Math.abs(h[3])+h[4]/60,Number(h[3])<0&&(r*=-1);else throw new Error("invalid coordinate format");else if(mA.test(e))if(h=mA.exec(e),u=Dg(h),u){if(n=h[2],r=h[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");h[1]?(i=h[1],l=h[5]):h[4]&&(i=h[4],l=h[8])}else throw new Error("invalid decimal coordinate format");else if(gA.test(e))if(h=gA.exec(e),u=Dg(h),u)n=Math.abs(parseInt(h[2])),h[4]&&(n+=h[4]/60),h[6]&&(n+=h[6].replace(",",".")/3600),parseInt(h[2])<0&&(n=-1*n),r=Math.abs(parseInt(h[9])),h[11]&&(r+=h[11]/60),h[13]&&(r+=h[13].replace(",",".")/3600),parseInt(h[9])<0&&(r=-1*r),h[1]?(i=h[1],l=h[8]):h[7]&&(i=h[7],l=h[14]);else throw new Error("invalid DMS coordinates format");else if(yA.test(e))if(h=yA.exec(e),u=Dg(h),u)n=Math.abs(parseInt(h[2])),h[4]&&(n+=h[4]/60),h[6]&&(n+=h[6]/3600),parseInt(h[2])<0&&(n=-1*n),r=Math.abs(parseInt(h[10])),h[12]&&(r+=h[12]/60),h[14]&&(r+=h[14]/3600),parseInt(h[10])<0&&(r=-1*r),h[1]?(i=h[1],l=h[9]):h[8]&&(i=h[8],l=h[16]);else throw new Error("invalid DMS coordinates format");else if(_A.test(e))if(h=_A.exec(e),u=Dg(h),u)n=Math.abs(parseInt(h[2])),h[4]&&(n+=h[4].replace(",",".")/60),h[6]&&(n+=h[6].replace(",",".")/3600),parseInt(h[2])<0&&(n=-1*n),r=Math.abs(parseInt(h[10])),h[12]&&(r+=h[12].replace(",",".")/60),h[14]&&(r+=h[14].replace(",",".")/3600),parseInt(h[10])<0&&(r=-1*r),h[1]?(i=h[1],l=h[9]):h[8]&&(i=h[8],l=h[16]);else throw new Error("invalid coordinates format");if(u){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if((i||l)&&(!i||!l))throw new Error("invalid coordinates format");if(i&&i==l)throw new Error("invalid coordinates format");let y=/S|SOUTH/i;y.test(i)&&n>0&&(n=-1*n),y=/W|WEST/i,y.test(l)&&r>0&&(r=-1*r);const w=h[0].trim();let E,C;const T=/[,/;\u0020]/g,R=w.match(T);if(R==null){const Y=Math.floor(e.length/2);E=w.substring(0,Y).trim(),C=w.substring(Y).trim()}else{let Y;R.length%2==1?Y=Math.floor(R.length/2):Y=R.length/2-1;let $=0;if(Y==0)$=w.indexOf(R[0]),E=w.substring(0,$).trim(),C=w.substring($+1).trim();else{let U=0,G=0;for(;U<=Y;)$=w.indexOf(R[U],G),G=$+1,U++;E=w.substring(0,$).trim(),C=w.substring($+1).trim()}}const O=E.split(".");if(O.length==2&&O[1]==0&&O[1].length!=2)throw new Error("invalid coordinates format");const B=C.split(".");if(B.length==2&&B[1]==0&&B[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(E)||/^\d+$/.test(C))throw new Error("degree only coordinate/s provided");return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(t)),isNaN(r)&&r.includes(",")&&(r=r.replace(",",".")),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:w,verbatimLatitude:E,verbatimLongitude:C,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,closeEnough:SH,toCoordinateFormat:bH})}else throw new Error("coordinates pattern match failed")}function Dg(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=t.length/2;for(let l=0;l<i;l++){const h=t[l],u=t[l+i],y=n.test(h)&&n.test(u),w=r.test(h)&&r.test(u),E=h==u;if(!(h==null&&u==null)){if(h==null||u==null)return!1;if(y||w||E)continue;return!1}}return!0}function xA(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function SH(e){if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return xA(this.decimalLatitude,Number(t[0]))&&xA(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const EH=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});eI.to=EH;const CH=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],IH={decimalLatitude:40.123,decimalLongitude:-74.123},TH=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],PH=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764}];function LH(){const e=[];return CH.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...IH})}),[...e,...TH,...PH]}const MH=LH();eI.formats=MH.map(e=>e.verbatimCoordinates);const AH=eI;function bA(e,t,n){const r=e.slice();return r[81]=t[n],r[83]=n,r}function wA(e){let t,n;return t=new fH({}),{c(){gh(t.$$.fragment)},m(r,i){Zu(t,r,i),n=!0},i(r){n||(Kr(t.$$.fragment,r),n=!0)},o(r){Fi(t.$$.fragment,r),n=!1},d(r){Xu(t,r)}}}function SA(e){let t,n,r,i,l;return n=new gH({}),{c(){t=zn("button"),gh(n.$$.fragment),He(t,"type","button"),He(t,"title",e[9]),He(t,"class","svelte-zh3kmv"),Zc(t,"active",e[0])},m(h,u){Mr(h,t,u),Zu(n,t,null),r=!0,i||(l=Zo(t,"click",e[67]),i=!0)},p(h,u){(!r||u[0]&512)&&He(t,"title",h[9]),(!r||u[0]&1)&&Zc(t,"active",h[0])},i(h){r||(Kr(n.$$.fragment,h),r=!0)},o(h){Fi(n.$$.fragment,h),r=!1},d(h){h&&yr(t),Xu(n),i=!1,l()}}}function kH(e){let t,n=[],r=new Map,i,l,h,u=hA(e[14]);const y=w=>w[81].id+(w[81].address?","+w[81].address:"");for(let w=0;w<u.length;w+=1){let E=bA(e,u,w),C=y(E);r.set(C,n[w]=EA(C,E))}return{c(){t=zn("ul");for(let w=0;w<n.length;w+=1)n[w].c();He(t,"class","svelte-zh3kmv")},m(w,E){Mr(w,t,E);for(let C=0;C<n.length;C+=1)n[C]&&n[C].m(t,null);i=!0,l||(h=[Zo(t,"mouseleave",e[71]),Zo(t,"blur",e[72])],l=!0)},p(w,E){E[0]&17880064&&(u=hA(w[14]),Rv(),n=YW(n,E,y,1,w,u,r,t,KW,EA,null,bA),Dv())},i(w){if(!i){for(let E=0;E<u.length;E+=1)Kr(n[E]);i=!0}},o(w){for(let E=0;E<n.length;E+=1)Fi(n[E]);i=!1},d(w){w&&yr(t);for(let E=0;E<n.length;E+=1)n[E].d();l=!1,sc(h)}}}function NH(e){let t,n,r,i,l,h;return n=new E4({}),{c(){t=zn("div"),gh(n.$$.fragment),r=Os(),i=zn("div"),l=mh(e[7]),He(i,"class","svelte-zh3kmv"),He(t,"class","no-results svelte-zh3kmv")},m(u,y){Mr(u,t,y),Zu(n,t,null),fn(t,r),fn(t,i),fn(i,l),h=!0},p(u,y){(!h||y[0]&128)&&Oy(l,u[7])},i(u){h||(Kr(n.$$.fragment,u),h=!0)},o(u){Fi(n.$$.fragment,u),h=!1},d(u){u&&yr(t),Xu(n)}}}function RH(e){let t="",n;return{c(){n=mh(t)},m(r,i){Mr(r,n,i)},p:Pr,i:Pr,o:Pr,d(r){r&&yr(n)}}}function DH(e){let t,n,r,i,l,h,u,y,w,E,C;return n=new E4({}),y=new S4({}),{c(){t=zn("div"),gh(n.$$.fragment),r=Os(),i=zn("div"),l=mh(e[6]),h=Os(),u=zn("button"),gh(y.$$.fragment),He(i,"class","svelte-zh3kmv"),He(u,"class","svelte-zh3kmv"),He(t,"class","error svelte-zh3kmv")},m(T,R){Mr(T,t,R),Zu(n,t,null),fn(t,r),fn(t,i),fn(i,l),fn(t,h),fn(t,u),Zu(y,u,null),w=!0,E||(C=Zo(u,"click",e[68]),E=!0)},p(T,R){(!w||R[0]&64)&&Oy(l,T[6])},i(T){w||(Kr(n.$$.fragment,T),Kr(y.$$.fragment,T),w=!0)},o(T){Fi(n.$$.fragment,T),Fi(y.$$.fragment,T),w=!1},d(T){T&&yr(t),Xu(n),Xu(y),E=!1,C()}}}function EA(e,t){let n,r,i;function l(){return t[69](t[83])}function h(){return t[70](t[81])}return r=new pH({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",l),r.$on("focus",h),{key:e,first:null,c(){n=jW(),gh(r.$$.fragment),this.first=n},m(u,y){Mr(u,n,y),Zu(r,u,y),i=!0},p(u,y){t=u;const w={};y[0]&16384&&(w.feature=t[81]),y[0]&1024&&(w.showPlaceType=t[10]),y[0]&49152&&(w.selected=t[15]===t[83]),y[0]&4096&&(w.iconsBaseUrl=t[12]),r.$set(w)},i(u){i||(Kr(r.$$.fragment,u),i=!0)},o(u){Fi(r.$$.fragment,u),i=!1},d(u){u&&yr(n),Xu(r,u)}}}function OH(e){let t,n,r,i,l,h,u,y,w,E,C,T,R,O,B,Y,$,U,G,re,he,_e=!1;l=new _H({}),C=new S4({});let fe=e[19]&&wA(),ye=e[5]===!0&&SA(e);const Pe=e[59].default,De=OW(Pe,e,e[58],null),Ue=[DH,RH,NH,kH],Ye=[];function wt(Ae,Je){var vt,Gt;return Ae[18]?0:Ae[16]?((vt=Ae[14])==null?void 0:vt.length)===0?2:Ae[16]&&(Gt=Ae[14])!=null&&Gt.length?3:-1:1}return~(Y=wt(e))&&($=Ye[Y]=Ue[Y](e)),{c(){t=Os(),n=zn("form"),r=zn("div"),i=zn("button"),gh(l.$$.fragment),h=Os(),u=zn("input"),y=Os(),w=zn("div"),E=zn("button"),gh(C.$$.fragment),T=Os(),fe&&fe.c(),R=Os(),ye&&ye.c(),O=Os(),De&&De.c(),B=Os(),$&&$.c(),He(i,"class","search-button svelte-zh3kmv"),He(i,"type","button"),He(u,"placeholder",e[8]),He(u,"aria-label",e[8]),He(u,"class","svelte-zh3kmv"),He(E,"type","button"),He(E,"title",e[3]),He(E,"class","svelte-zh3kmv"),He(w,"class","clear-button-container svelte-zh3kmv"),Zc(w,"displayable",e[1]!==""),He(r,"class","input-group svelte-zh3kmv"),He(n,"tabindex","0"),He(n,"class",U=aA(e[2])+" svelte-zh3kmv"),Zc(n,"can-collapse",e[4]&&e[1]==="")},m(Ae,Je){Mr(Ae,t,Je),Mr(Ae,n,Je),fn(n,r),fn(r,i),Zu(l,i,null),fn(r,h),fn(r,u),e[61](u),lA(u,e[1]),fn(r,y),fn(r,w),fn(w,E),Zu(C,E,null),fn(w,T),fe&&fe.m(w,null),fn(r,R),ye&&ye.m(r,null),fn(r,O),De&&De.m(r,null),fn(n,B),~Y&&Ye[Y].m(n,null),G=!0,re||(he=[Zo(i,"click",e[60]),Zo(u,"input",e[62]),Zo(u,"focus",e[63]),Zo(u,"blur",e[64]),Zo(u,"keydown",e[22]),Zo(u,"input",e[65]),Zo(E,"click",e[66]),Zo(n,"submit",$W(e[21]))],re=!0)},p(Ae,Je){(!G||Je[0]&256)&&He(u,"placeholder",Ae[8]),(!G||Je[0]&256)&&He(u,"aria-label",Ae[8]),Je[0]&2&&u.value!==Ae[1]&&lA(u,Ae[1]),(!G||Je[0]&8)&&He(E,"title",Ae[3]),Ae[19]?fe?Je[0]&524288&&Kr(fe,1):(fe=wA(),fe.c(),Kr(fe,1),fe.m(w,null)):fe&&(Rv(),Fi(fe,1,1,()=>{fe=null}),Dv()),(!G||Je[0]&2)&&Zc(w,"displayable",Ae[1]!==""),Ae[5]===!0?ye?(ye.p(Ae,Je),Je[0]&32&&Kr(ye,1)):(ye=SA(Ae),ye.c(),Kr(ye,1),ye.m(r,O)):ye&&(Rv(),Fi(ye,1,1,()=>{ye=null}),Dv()),De&&De.p&&(!G||Je[1]&134217728)&&FW(De,Pe,Ae,Ae[58],G?zW(Pe,Ae[58],Je,null):BW(Ae[58]),null);let vt=Y;Y=wt(Ae),Y===vt?~Y&&Ye[Y].p(Ae,Je):($&&(Rv(),Fi(Ye[vt],1,1,()=>{Ye[vt]=null}),Dv()),~Y?($=Ye[Y],$?$.p(Ae,Je):($=Ye[Y]=Ue[Y](Ae),$.c()),Kr($,1),$.m(n,null)):$=null),(!G||Je[0]&4&&U!==(U=aA(Ae[2])+" svelte-zh3kmv"))&&He(n,"class",U),(!G||Je[0]&22)&&Zc(n,"can-collapse",Ae[4]&&Ae[1]==="")},i(Ae){G||(Kr(_e),Kr(l.$$.fragment,Ae),Kr(C.$$.fragment,Ae),Kr(fe),Kr(ye),Kr(De,Ae),Kr($),G=!0)},o(Ae){Fi(_e),Fi(l.$$.fragment,Ae),Fi(C.$$.fragment,Ae),Fi(fe),Fi(ye),Fi(De,Ae),Fi($),G=!1},d(Ae){Ae&&(yr(t),yr(n)),Xu(l),e[61](null),Xu(C),fe&&fe.d(),ye&&ye.d(),De&&De.d(Ae),~Y&&Ye[Y].d(),re=!1,sc(he)}}}function zH(e,t,n){let r,{$$slots:i={},$$scope:l}=t,{class:h=void 0}=t,{apiKey:u}=t,{bbox:y=void 0}=t,{clearButtonTitle:w="clear"}=t,{clearOnBlur:E=!1}=t,{collapsed:C=!1}=t,{country:T=void 0}=t,{debounceSearch:R=200}=t,{enableReverse:O=!1}=t,{errorMessage:B="Something went wrong…"}=t,{filter:Y=()=>!0}=t,{flyTo:$=!0}=t,{fuzzyMatch:U=!0}=t,{language:G=void 0}=t,{limit:re=void 0}=t,{mapController:he=void 0}=t,{minLength:_e=2}=t,{noResultsMessage:fe="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:ye="Search"}=t,{proximity:Pe=[{type:"server-geolocation"}]}=t,{reverseActive:De=O==="always"}=t,{reverseButtonTitle:Ue="toggle reverse geocoding"}=t,{searchValue:Ye=""}=t,{showFullGeometry:wt=!0}=t,{showPlaceType:Ae="ifNeeded"}=t,{showResultsWhileTyping:Je=!0}=t,{selectFirst:vt=!0}=t,{flyToSelected:Gt=!1}=t,{markerOnSelected:Xe=!0}=t,{types:dt=void 0}=t,{excludeTypes:St=!1}=t,{zoom:Pt=16}=t,{maxZoom:Bt=18}=t,{apiUrl:yn="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Yn={}}=t,{iconsBaseUrl:Jn="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=t,{adjustUrlQuery:vr=J=>{}}=t;function ri(){Vr.focus()}function Es(){Vr.blur()}function Wa(J,me=!0,ce=!1){n(1,Ye=J),me?(n(15,_n=-1),cu()):(Ge(!ce,ce),setTimeout(()=>{Vr.focus(),Vr.select()}))}function Cl(){n(14,en=void 0),n(55,Wt=void 0),n(15,_n=-1)}function ac(){n(54,Jt=[]),n(55,Wt=void 0)}let vi=!1,en,Jt,Wt,ze="",Vr,_n=-1,Zt,vn=[],Li,Do,ra,ia;const Cs=new Set,Yi=qW();GW(()=>{he&&(he.setEventHandler(void 0),he.indicateReverse(!1),he.setSelectedMarker(-1),he.setMarkers(void 0,void 0))});function cu(J){if(Do&&(clearTimeout(Do),Do=void 0),_n>-1&&en)n(55,Wt=en[_n]),n(1,Ye=Wt.place_type[0]==="reverse"?Wt.place_name:Wt.place_name.replace(/,.*/,"")),n(18,Zt=void 0),n(54,Jt=void 0),n(15,_n=-1);else if(Ye){const me=J||!Ze(Ye);ii(Ye,{exact:!0}).then(()=>{n(54,Jt=en),n(55,Wt=void 0),me&&Mi()}).catch(ce=>n(18,Zt=ce))}}function Ze(J){try{return AH(J,6)}catch{return!1}}async function ii(J,{byId:me=!1,exact:ce=!1}={}){n(18,Zt=void 0),Li==null||Li.abort();const Se=new AbortController;n(19,Li=Se);try{const Le=Ze(J),Ne=new URLSearchParams;if(G!==void 0&&Ne.set("language",Array.isArray(G)?G.join(","):G??""),dt&&Ne.set("types",dt.join(",")),St&&Ne.set("excludeTypes",String(St)),y&&Ne.set("bbox",y.map(Lt=>Lt.toFixed(6)).join(",")),T&&Ne.set("country",Array.isArray(T)?T.join(","):T),!me&&!Le){const Lt=await xH(he,Pe,Se);Lt&&Ne.set("proximity",Lt),(ce||!Je)&&Ne.set("autocomplete","false"),Ne.set("fuzzyMatch",String(U))}re!==void 0&&(!Le||(dt==null?void 0:dt.length)===1)&&Ne.set("limit",String(re)),Ne.set("key",u),vr(Ne);const Oe=yn+"/"+encodeURIComponent(Le?Le.decimalLongitude+","+Le.decimalLatitude:J)+".json?"+Ne.toString();if(Oe===ze){me?(n(14,en=void 0),n(55,Wt=vn[0])):n(14,en=vn);return}ze=Oe;const gt=await fetch(Oe,{signal:Se.signal,...Yn});if(!gt.ok)throw new Error(await gt.text());const xt=await gt.json();Yi("response",{url:Oe,featureCollection:xt}),me?(n(14,en=void 0),n(55,Wt=xt.features[0]),vn=[Wt]):(n(14,en=xt.features.filter(Y)),Le&&en.unshift({type:"Feature",properties:{},id:"reverse_"+Le.decimalLongitude+"_"+Le.decimalLatitude,text:Le.decimalLatitude+", "+Le.decimalLongitude,place_name:Le.decimalLatitude+", "+Le.decimalLongitude,place_type:["reverse"],center:[Le.decimalLongitude,Le.decimalLatitude],bbox:[Le.decimalLongitude,Le.decimalLatitude,Le.decimalLongitude,Le.decimalLatitude],geometry:{type:"Point",coordinates:[Le.decimalLongitude,Le.decimalLatitude]}}),vn=en,Le&&Vr.focus())}catch(Le){if(Le&&typeof Le=="object"&&"name"in Le&&Le.name==="AbortError")return;throw Le}finally{Se===Li&&n(19,Li=void 0)}}function Mi(){var J;if(!(Jt!=null&&Jt.length)||!$)return;const me=[180,90,-180,-90],ce=!Jt.some(Se=>!Se.matching_text);for(const Se of Jt)if(ce||!Se.matching_text)for(const Le of[0,1,2,3])me[Le]=Math[Le<2?"min":"max"](me[Le],((J=Se.bbox)==null?void 0:J[Le])??Se.center[Le%2]);he&&Jt.length>0&&(Wt&&me[0]===me[2]&&me[1]===me[3]?he.flyTo(Wt.center,Pt):he.fitBounds(dA(me),50,Bt))}function Il(J){n(0,De=O==="always"),n(14,en=void 0),n(55,Wt=void 0),n(15,_n=-1),Wa(J[1].toFixed(6)+", "+vH(J[0],[-180,180],!0).toFixed(6),!1,!0)}function Ha(J){if(!en)return;let me=J.key==="ArrowDown"?1:J.key==="ArrowUp"?-1:0;me&&(_n===(vt?0:-1)&&me===-1&&n(15,_n=en.length),n(15,_n+=me),_n>=en.length&&n(15,_n=-1),_n<0&&vt&&n(15,_n=0),J.preventDefault())}function Ge(J=!0,me=!1){if(n(18,Zt=void 0),Je||me){if(Do&&clearTimeout(Do),Ye.length<_e)return;const ce=Ye;Do=window.setTimeout(()=>{ii(ce).catch(Se=>n(18,Zt=Se))},J?R:0)}else n(14,en=void 0),n(18,Zt=void 0)}function Nt(J){n(55,Wt=J),n(1,Ye=J.place_name),n(15,_n=-1)}const Mt=()=>Vr.focus();function xi(J){FS[J?"unshift":"push"](()=>{Vr=J,n(17,Vr)})}function bi(){Ye=this.value,n(1,Ye),n(13,vi),n(27,E)}const Rt=()=>n(13,vi=!0),Is=()=>n(13,vi=!1),oa=()=>Ge(),kr=()=>{n(1,Ye=""),Vr.focus()},oe=()=>n(0,De=!De),q=()=>n(18,Zt=void 0),H=J=>n(15,_n=J),K=J=>Nt(J),ae=()=>{vt||n(15,_n=-1)},ge=()=>{};return e.$$set=J=>{"class"in J&&n(2,h=J.class),"apiKey"in J&&n(25,u=J.apiKey),"bbox"in J&&n(26,y=J.bbox),"clearButtonTitle"in J&&n(3,w=J.clearButtonTitle),"clearOnBlur"in J&&n(27,E=J.clearOnBlur),"collapsed"in J&&n(4,C=J.collapsed),"country"in J&&n(28,T=J.country),"debounceSearch"in J&&n(29,R=J.debounceSearch),"enableReverse"in J&&n(5,O=J.enableReverse),"errorMessage"in J&&n(6,B=J.errorMessage),"filter"in J&&n(30,Y=J.filter),"flyTo"in J&&n(31,$=J.flyTo),"fuzzyMatch"in J&&n(32,U=J.fuzzyMatch),"language"in J&&n(33,G=J.language),"limit"in J&&n(34,re=J.limit),"mapController"in J&&n(35,he=J.mapController),"minLength"in J&&n(36,_e=J.minLength),"noResultsMessage"in J&&n(7,fe=J.noResultsMessage),"placeholder"in J&&n(8,ye=J.placeholder),"proximity"in J&&n(37,Pe=J.proximity),"reverseActive"in J&&n(0,De=J.reverseActive),"reverseButtonTitle"in J&&n(9,Ue=J.reverseButtonTitle),"searchValue"in J&&n(1,Ye=J.searchValue),"showFullGeometry"in J&&n(38,wt=J.showFullGeometry),"showPlaceType"in J&&n(10,Ae=J.showPlaceType),"showResultsWhileTyping"in J&&n(39,Je=J.showResultsWhileTyping),"selectFirst"in J&&n(11,vt=J.selectFirst),"flyToSelected"in J&&n(40,Gt=J.flyToSelected),"markerOnSelected"in J&&n(41,Xe=J.markerOnSelected),"types"in J&&n(42,dt=J.types),"excludeTypes"in J&&n(43,St=J.excludeTypes),"zoom"in J&&n(44,Pt=J.zoom),"maxZoom"in J&&n(45,Bt=J.maxZoom),"apiUrl"in J&&n(46,yn=J.apiUrl),"fetchParameters"in J&&n(47,Yn=J.fetchParameters),"iconsBaseUrl"in J&&n(12,Jn=J.iconsBaseUrl),"adjustUrlQuery"in J&&n(48,vr=J.adjustUrlQuery),"$$scope"in J&&n(58,l=J.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,ra=vi),E&&!vi&&n(1,Ye="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&Ye.length<_e&&(n(55,Wt=void 0),n(14,en=void 0),n(18,Zt=void 0),n(54,Jt=en)),e.$$.dirty[1]&16777344&&wt&&Wt&&!Wt.address&&Wt.geometry.type==="Point"&&Wt.place_type[0]!=="reverse"&&ii(Wt.id,{byId:!0}).catch(J=>n(18,Zt=J)),e.$$.dirty[1]&50356241&&(he&&Wt&&Wt.id!==ia&&$&&(!Wt.bbox||Wt.bbox[0]===Wt.bbox[2]&&Wt.bbox[1]===Wt.bbox[3]?he.flyTo(Wt.center,Wt.id.startsWith("poi.")||Wt.id.startsWith("address.")?Bt:Pt):he.fitBounds(dA(Wt.bbox),50,Bt),n(14,en=void 0),n(54,Jt=void 0),n(15,_n=-1)),n(56,ia=Wt==null?void 0:Wt.id)),e.$$.dirty[0]&18432&&vt&&en!=null&&en.length&&n(15,_n=0),e.$$.dirty[0]&2050&&(vt||n(15,_n=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&Jt!==en&&n(54,Jt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&he&&he.setEventHandler(J=>{switch(J.type){case"mapClick":De&&Il(J.coordinates);break;case"markerClick":{const me=en==null?void 0:en.find(ce=>ce.id===J.id);me&&Nt(me)}break;case"markerMouseEnter":Jt&&n(15,_n=ra?(en==null?void 0:en.findIndex(me=>me.id===J.id))??-1:-1);break;case"markerMouseLeave":Jt&&n(15,_n=-1);break}}),e.$$.dirty[0]&49152&&n(57,r=en==null?void 0:en[_n]),e.$$.dirty[1]&67133969&&he&&r&&$&&Gt&&he.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?Bt:Pt),e.$$.dirty[1]&1040&&(Xe||he==null||he.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&he&&Xe&&!Jt&&(he.setMarkers(r?[r]:void 0,void 0),he.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&25165840&&he&&he.setMarkers(Jt,Wt),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&Jt&&he&&he.setSelectedMarker(_n),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&he){const J=Ze(Ye);he.setReverseMarker(J?[J.decimalLongitude,J.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&Yi("select",r),e.$$.dirty[1]&16777216&&Yi("pick",Wt),e.$$.dirty[0]&81920&&Yi("optionsVisibilityChange",ra&&!!en),e.$$.dirty[0]&16384&&Yi("featuresListed",en),e.$$.dirty[1]&8388608&&Yi("featuresMarked",Jt),e.$$.dirty[0]&1&&Yi("reverseToggle",De),e.$$.dirty[0]&2&&Yi("queryChange",Ye),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&he&&he.indicateReverse(De)},[De,Ye,h,w,C,O,B,fe,ye,Ue,Ae,vt,Jn,vi,en,_n,ra,Vr,Zt,Li,Cs,cu,Ha,Ge,Nt,u,y,E,T,R,Y,$,U,G,re,he,_e,Pe,wt,Je,Gt,Xe,dt,St,Pt,Bt,yn,Yn,vr,ri,Es,Wa,Cl,ac,Jt,Wt,ia,r,l,i,Mt,xi,bi,Rt,Is,oa,kr,oe,q,H,K,ae,ge]}let FH=class extends Xp{constructor(t){super(),Zp(this,t,zH,OH,Hp,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}};const CA=["featuresListed","featuresMarked","optionsVisibilityChange","pick","queryChange","response","reverseToggle","select"],BH=["apiKey","bbox","clearButtonTitle","clearOnBlur","collapsed","country","debounceSearch","enableReverse","reverseActive","errorMessage","filter","fuzzyMatch","language","limit","minLength","noResultsMessage","placeholder","proximity","reverseButtonTitle","showFullGeometry","showPlaceType","showResultsWhileTyping","adjustUrlQuery","types","excludeTypes","zoom","mapController"];function IA(e){return"on"+e[0].toUpperCase()+e.slice(1)}const jH=be.forwardRef(function(e,t){const n=be.useRef(),r=be.useRef(),i={...e};for(const l of CA)delete i[IA(l)];be.useEffect(()=>{if(!n.current)throw new Error;const l=new FH({target:n.current,props:i});return r.current=l,()=>l.$destroy()},[]);for(const l of BH)be.useEffect(()=>{r.current&&e[l]!==void 0&&r.current.$set({[l]:e[l]})},[e[l]]);for(const l of CA){const h=e[IA(l)];be.useEffect(()=>{var u;return h&&((u=r.current)==null?void 0:u.$on(l,y=>{h(y.detail)}))},[h])}return be.useImperativeHandle(t,()=>({setQuery:(l,h=!0)=>{var u;return(u=r.current)==null?void 0:u.setQuery(l,h)},clearMap:()=>{var l;return(l=r.current)==null?void 0:l.clearMap()},clearList:()=>{var l;return(l=r.current)==null?void 0:l.clearList()},focus:()=>{var l;return(l=r.current)==null?void 0:l.focus()},blur:()=>{var l;return(l=r.current)==null?void 0:l.blur()}})),be.createElement("div",{ref:n})});var C4={},$H=Object.defineProperty,VH=(e,t,n)=>t in e?$H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TA=(e,t,n)=>(VH(e,typeof t!="symbol"?t+"":t,n),n);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function UH(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,i,l,h;return h={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function u(w){return function(E){return y([w,E])}}function y(w){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(l=w[0]&2?i.return:w[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,w[1])).done)return l;switch(i=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,i=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(E){w=[6,E],i=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var yh=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function GH(e,t){return e>t?1:e<t?-1:0}function Gc(e,t,n){for(var r=new yh(null,null),i=r,l=r;;){var h=n(e,t.key);if(h<0){if(t.left===null)break;if(n(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}l.left=t,l=t,t=t.left}else if(h>0){if(t.right===null)break;if(n(e,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,l.left=t.right,t.left=r.right,t.right=r.left,t}function p2(e,t,n,r){var i=new yh(e,t);if(n===null)return i.left=i.right=null,i;n=Gc(e,n,r);var l=r(e,n.key);return l<0?(i.left=n.left,i.right=n,n.left=null):l>=0&&(i.right=n.right,i.left=n,n.right=null),i}function PA(e,t,n){var r=null,i=null;if(t){t=Gc(e,t,n);var l=n(t.key,e);l===0?(r=t.left,i=t.right):l<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function qH(e,t,n){return t===null?e:(e===null||(t=Gc(e.key,t,n),t.left=e),t)}function $S(e,t,n,r,i){if(e){r(""+t+(n?"└── ":"├── ")+i(e)+`
`);var l=t+(n?"    ":"│   ");e.left&&$S(e.left,l,!1,r,i),e.right&&$S(e.right,l,!0,r,i)}}var tI=function(){function e(t){t===void 0&&(t=GH),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=p2(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new yh(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,l=Gc(t,this._root,i),h=i(t,l.key);return h===0?this._root=l:(h<0?(r.left=l.left,r.right=l,l.left=null):h>0&&(r.right=l.right,r.left=l,l.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=Gc(t,n,r);var l=r(t,n.key);return l===0?(n.left===null?i=n.right:(i=Gc(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Gc(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Gc(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],l=!1;!l;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):l=!0;return this},e.prototype.range=function(t,n,r,i){for(var l=[],h=this._comparator,u=this._root,y;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),y=h(u.key,n),y>0)break;if(h(u.key,t)>=0&&r.call(i,u))return this;u=u.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,l=[];!r;)if(n)l.push(n),n=n.left;else if(l.length>0){if(n=l.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var l=i(t.key,n.key);if(l===0)break;l<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var l=i(t.key,n.key);if(l===0)break;l<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return HH(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,l=this._comparator;if(r&&GS(t,n,0,i-1,l),this._root===null)this._root=VS(t,n,0,i),this._size=i;else{var h=ZH(this.toList(),WH(t,n),l);i=this._size+i,this._root=US({head:h},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return $S(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,l=PA(t,this._root,i),h=l.left,u=l.right;i(t,n)<0?u=p2(n,r,u,i):h=p2(n,r,h,i),this._root=qH(h,u,i)},e.prototype.split=function(t){return PA(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return UH(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function VS(e,t,n,r){var i=r-n;if(i>0){var l=n+Math.floor(i/2),h=e[l],u=t[l],y=new yh(h,u);return y.left=VS(e,t,n,l),y.right=VS(e,t,l+1,r),y}return null}function WH(e,t){for(var n=new yh(null,null),r=n,i=0;i<e.length;i++)r=r.next=new yh(e[i],t[i]);return r.next=null,n.next}function HH(e){for(var t=e,n=[],r=!1,i=new yh(null,null),l=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=l=l.next=n.pop(),t=t.right):r=!0;return l.next=null,i.next}function US(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),l=US(e,t,i),h=e.head;return h.left=l,e.head=e.head.next,h.right=US(e,i+1,n),h}return null}function ZH(e,t,n){for(var r=new yh(null,null),i=r,l=e,h=t;l!==null&&h!==null;)n(l.key,h.key)<0?(i.next=l,l=l.next):(i.next=h,h=h.next),i=i.next;return l!==null?i.next=l:h!==null&&(i.next=h),r.next}function GS(e,t,n,r,i){if(!(n>=r)){for(var l=e[n+r>>1],h=n-1,u=r+1;;){do h++;while(i(e[h],l)<0);do u--;while(i(e[u],l)>0);if(h>=u)break;var y=e[h];e[h]=e[u],e[u]=y,y=t[h],t[h]=t[u],t[u]=y}GS(e,t,n,u,i),GS(e,t,u+1,r,i)}}function Ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jo(e,t,n){return t&&LA(e.prototype,t),n&&LA(e,n),e}var Og=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},qS=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,l=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:l}}},Xc=Number.EPSILON;Xc===void 0&&(Xc=Math.pow(2,-52));var XH=Xc*Xc,WS=function(e,t){if(-Xc<e&&e<Xc&&-Xc<t&&t<Xc)return 0;var n=e-t;return n*n<XH*e*t?0:e<t?-1:1},KH=function(){function e(){Ua(this,e),this.reset()}return Jo(e,[{key:"reset",value:function(){this.xRounder=new MA,this.yRounder=new MA}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),MA=function(){function e(){Ua(this,e),this.tree=new tI,this.round(0)}return Jo(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&WS(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&WS(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),Fy=new KH,sy=function(e,t){return e.x*t.y-e.y*t.x},I4=function(e,t){return e.x*t.x+e.y*t.y},AA=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},l=sy(r,i);return WS(l,0)},Ex=function(e){return Math.sqrt(I4(e,e))},YH=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return sy(i,r)/Ex(i)/Ex(r)},JH=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return I4(i,r)/Ex(i)/Ex(r)},kA=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},NA=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},QH=function(e,t,n,r){if(t.x===0)return NA(n,r,e.x);if(r.x===0)return NA(e,t,n.x);if(t.y===0)return kA(n,r,e.y);if(r.y===0)return kA(e,t,n.y);var i=sy(t,r);if(i==0)return null;var l={x:n.x-e.x,y:n.y-e.y},h=sy(l,t)/i,u=sy(l,r)/i,y=e.x+u*t.x,w=n.x+h*r.x,E=e.y+u*t.y,C=n.y+h*r.y,T=(y+w)/2,R=(E+C)/2;return{x:T,y:R}},Ul=function(){Jo(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:Cx.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){Ua(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return Jo(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var l=n[r];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var l=this.point.events[i];l.consumedBy===void 0&&r.otherSE.point.events===l.otherSE.point.events&&r.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(l){var h=l.otherSE;r.set(l,{sine:YH(n.point,t.point,h.point),cosine:JH(n.point,t.point,h.point)})};return function(l,h){r.has(l)||i(l),r.has(h)||i(h);var u=r.get(l),y=u.sine,w=u.cosine,E=r.get(h),C=E.sine,T=E.cosine;return y>=0&&C>=0?w<T?1:w>T?-1:0:y<0&&C<0?w<T?-1:w>T?1:0:C<y?-1:C>y?1:0}}}]),e}(),eZ=0,Cx=function(){Jo(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,l=t.rightSE.point.x,h=n.rightSE.point.x;if(h<r)return 1;if(l<i)return-1;var u=t.leftSE.point.y,y=n.leftSE.point.y,w=t.rightSE.point.y,E=n.rightSE.point.y;if(r<i){if(y<u&&y<w)return 1;if(y>u&&y>w)return-1;var C=t.comparePoint(n.leftSE.point);if(C<0)return 1;if(C>0)return-1;var T=n.comparePoint(t.rightSE.point);return T!==0?T:-1}if(r>i){if(u<y&&u<E)return-1;if(u>y&&u>E)return 1;var R=n.comparePoint(t.leftSE.point);if(R!==0)return R;var O=t.comparePoint(n.rightSE.point);return O<0?1:O>0?-1:1}if(u<y)return-1;if(u>y)return 1;if(l<h){var B=n.comparePoint(t.rightSE.point);if(B!==0)return B}if(l>h){var Y=t.comparePoint(n.rightSE.point);if(Y<0)return 1;if(Y>0)return-1}if(l!==h){var $=w-u,U=l-r,G=E-y,re=h-i;if($>U&&G<re)return 1;if($<U&&G>re)return-1}return l>h?1:l<h||w<E?-1:w>E?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){Ua(this,e),this.id=++eZ,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return Jo(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var l=(t.y-n.y)/i.y,h=n.x+l*i.x;if(t.x===h)return 0;var u=(t.x-n.x)/i.x,y=n.y+u*i.y;return t.y===y?0:t.y<y?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=qS(n,r);if(i===null)return null;var l=this.leftSE.point,h=this.rightSE.point,u=t.leftSE.point,y=t.rightSE.point,w=Og(n,u)&&this.comparePoint(u)===0,E=Og(r,l)&&t.comparePoint(l)===0,C=Og(n,y)&&this.comparePoint(y)===0,T=Og(r,h)&&t.comparePoint(h)===0;if(E&&w)return T&&!C?h:!T&&C?y:null;if(E)return C&&l.x===y.x&&l.y===y.y?null:l;if(w)return T&&h.x===u.x&&h.y===u.y?null:u;if(T&&C)return null;if(T)return h;if(C)return y;var R=QH(l,this.vector(),u,t.vector());return R===null||!Og(i,R)?null:Fy.round(R.x,R.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new Ul(t,!0),l=new Ul(t,!1),h=this.rightSE;this.replaceRightSE(l),n.push(l),n.push(i);var u=new e(i,h,this.rings.slice(),this.windings.slice());return Ul.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),Ul.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),l.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var l=n;n=r,r=l}if(n.prev===r){var h=n;n=r,r=h}for(var u=0,y=r.rings.length;u<y;u++){var w=r.rings[u],E=r.windings[u],C=n.rings.indexOf(w);C===-1?(n.rings.push(w),n.windings.push(E)):n.windings[C]+=E}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,l=0,h=this.rings.length;l<h;l++){var u=this.rings[l],y=this.windings[l],w=n.indexOf(u);w===-1?(n.push(u),r.push(y)):r[w]+=y}for(var E=[],C=[],T=0,R=n.length;T<R;T++)if(r[T]!==0){var O=n[T],B=O.poly;if(C.indexOf(B)===-1)if(O.isExterior)E.push(B);else{C.indexOf(B)===-1&&C.push(B);var Y=E.indexOf(O.poly);Y!==-1&&E.splice(Y,1)}}for(var $=0,U=E.length;$<U;$++){var G=E[$].multiPoly;i.indexOf(G)===-1&&i.push(G)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ll.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var l,h;t.length<n.length?(l=t.length,h=n.length):(l=n.length,h=t.length),this._isInResult=h===ll.numMultiPolys&&l<h;break}case"xor":{var u=Math.abs(t.length-n.length);this._isInResult=u%2===1;break}case"difference":{var y=function(w){return w.length===1&&w[0].isSubject};this._isInResult=y(t)!==y(n);break}default:throw new Error("Unrecognized operation type found ".concat(ll.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,l,h,u=Ul.comparePoints(t,n);if(u<0)i=t,l=n,h=1;else if(u>0)i=n,l=t,h=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var y=new Ul(i,!0),w=new Ul(l,!1);return new e(y,w,[r],[h])}}]),e}(),RA=function(){function e(t,n,r){if(Ua(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Fy.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var l=i,h=1,u=t.length;h<u;h++){if(typeof t[h][0]!="number"||typeof t[h][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var y=Fy.round(t[h][0],t[h][1]);y.x===l.x&&y.y===l.y||(this.segments.push(Cx.fromRing(l,y,this)),y.x<this.bbox.ll.x&&(this.bbox.ll.x=y.x),y.y<this.bbox.ll.y&&(this.bbox.ll.y=y.y),y.x>this.bbox.ur.x&&(this.bbox.ur.x=y.x),y.y>this.bbox.ur.y&&(this.bbox.ur.y=y.y),l=y)}(i.x!==l.x||i.y!==l.y)&&this.segments.push(Cx.fromRing(l,i,this))}return Jo(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),tZ=function(){function e(t,n){if(Ua(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new RA(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var l=new RA(t[r],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=n}return Jo(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),l=0,h=i.length;l<h;l++)t.push(i[l]);return t}}]),e}(),DA=function(){function e(t,n){if(Ua(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var l=new tZ(t[r],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=n}return Jo(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),l=0,h=i.length;l<h;l++)t.push(i[l]);return t}}]),e}(),nZ=function(){Jo(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var l=t[r];if(!(!l.isInResult()||l.ringOut)){for(var h=null,u=l.leftSE,y=l.rightSE,w=[u],E=u.point,C=[];h=u,u=y,w.push(u),u.point!==E;)for(;;){var T=u.getAvailableLinkedEvents();if(T.length===0){var R=w[0].point,O=w[w.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(R.x,",")+" ".concat(R.y,"]. Last matching segment found ends at")+" [".concat(O.x,", ").concat(O.y,"]."))}if(T.length===1){y=T[0].otherSE;break}for(var B=null,Y=0,$=C.length;Y<$;Y++)if(C[Y].point===u.point){B=Y;break}if(B!==null){var U=C.splice(B)[0],G=w.splice(U.index);G.unshift(G[0].otherSE),n.push(new e(G.reverse()));continue}C.push({index:w.length,point:u.point});var re=u.getLeftmostComparator(h);y=T.sort(re)[0].otherSE;break}n.push(new e(w))}}return n}}]);function e(t){Ua(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return Jo(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var l=this.events[r].point,h=this.events[r+1].point;AA(l,t,h)!==0&&(n.push(l),t=l)}if(n.length===1)return null;var u=n[0],y=n[1];AA(u,t,y)===0&&n.shift(),n.push(n[0]);for(var w=this.isExteriorRing()?1:-1,E=this.isExteriorRing()?0:n.length-1,C=this.isExteriorRing()?n.length:-1,T=[],R=E;R!=C;R+=w)T.push([n[R].x,n[R].y]);return T}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];Ul.compare(t,i)>0&&(t=i)}for(var l=t.segment.prevInResult(),h=l?l.prevInResult():null;;){if(!l)return null;if(!h)return l.ringOut;if(h.ringOut!==l.ringOut)return h.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=h.prevInResult(),h=l?l.prevInResult():null}}}]),e}(),OA=function(){function e(t){Ua(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Jo(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),rZ=function(){function e(t){Ua(this,e),this.rings=t,this.polys=this._composePolys(t)}return Jo(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var l=t[r];if(!l.poly)if(l.isExteriorRing())n.push(new OA(l));else{var h=l.enclosingRing();h.poly||n.push(new OA(h)),h.poly.addInterior(l)}}return n}}]),e}(),iZ=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cx.compare;Ua(this,e),this.queue=t,this.tree=new tI(n),this.segments=[]}return Jo(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=i,h=i,u=void 0,y=void 0;u===void 0;)l=this.tree.prev(l),l===null?u=null:l.key.consumedBy===void 0&&(u=l.key);for(;y===void 0;)h=this.tree.next(h),h===null?y=null:h.key.consumedBy===void 0&&(y=h.key);if(t.isLeft){var w=null;if(u){var E=u.getIntersection(n);if(E!==null&&(n.isAnEndpoint(E)||(w=E),!u.isAnEndpoint(E)))for(var C=this._splitSafely(u,E),T=0,R=C.length;T<R;T++)r.push(C[T])}var O=null;if(y){var B=y.getIntersection(n);if(B!==null&&(n.isAnEndpoint(B)||(O=B),!y.isAnEndpoint(B)))for(var Y=this._splitSafely(y,B),$=0,U=Y.length;$<U;$++)r.push(Y[$])}if(w!==null||O!==null){var G=null;if(w===null)G=O;else if(O===null)G=w;else{var re=Ul.comparePoints(w,O);G=re<=0?w:O}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var he=n.split(G),_e=0,fe=he.length;_e<fe;_e++)r.push(he[_e])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&y){var ye=u.getIntersection(y);if(ye!==null){if(!u.isAnEndpoint(ye))for(var Pe=this._splitSafely(u,ye),De=0,Ue=Pe.length;De<Ue;De++)r.push(Pe[De]);if(!y.isAnEndpoint(ye))for(var Ye=this._splitSafely(y,ye),wt=0,Ae=Ye.length;wt<Ae;wt++)r.push(Ye[wt])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),zA=typeof process<"u"&&C4.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,oZ=typeof process<"u"&&C4.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,sZ=function(){function e(){Ua(this,e)}return Jo(e,[{key:"run",value:function(t,n,r){ll.type=t,Fy.reset();for(var i=[new DA(n,!0)],l=0,h=r.length;l<h;l++)i.push(new DA(r[l],!1));if(ll.numMultiPolys=i.length,ll.type==="difference")for(var u=i[0],y=1;y<i.length;)qS(i[y].bbox,u.bbox)!==null?y++:i.splice(y,1);if(ll.type==="intersection"){for(var w=0,E=i.length;w<E;w++)for(var C=i[w],T=w+1,R=i.length;T<R;T++)if(qS(C.bbox,i[T].bbox)===null)return[]}for(var O=new tI(Ul.compare),B=0,Y=i.length;B<Y;B++)for(var $=i[B].getSweepEvents(),U=0,G=$.length;U<G;U++)if(O.insert($[U]),O.size>zA)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var re=new iZ(O),he=O.size,_e=O.pop();_e;){var fe=_e.key;if(O.size===he){var ye=fe.segment;throw new Error("Unable to pop() ".concat(fe.isLeft?"left":"right"," SweepEvent ")+"[".concat(fe.point.x,", ").concat(fe.point.y,"] from segment #").concat(ye.id," ")+"[".concat(ye.leftSE.point.x,", ").concat(ye.leftSE.point.y,"] -> ")+"[".concat(ye.rightSE.point.x,", ").concat(ye.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(O.size>zA)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(re.segments.length>oZ)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Pe=re.process(fe),De=0,Ue=Pe.length;De<Ue;De++){var Ye=Pe[De];Ye.consumedBy===void 0&&O.insert(Ye)}he=O.size,_e=O.pop()}Fy.reset();var wt=nZ.factory(re.segments),Ae=new rZ(wt);return Ae.getGeom()}}]),e}(),ll=new sZ,aZ=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ll.run("union",e,n)},lZ=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ll.run("intersection",e,n)},uZ=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ll.run("xor",e,n)},cZ=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ll.run("difference",e,n)},T4={union:aZ,intersection:lZ,xor:uZ,difference:cZ},Wo=63710088e-1,P4={centimeters:Wo*100,centimetres:Wo*100,degrees:Wo/111325,feet:Wo*3.28084,inches:Wo*39.37,kilometers:Wo/1e3,kilometres:Wo/1e3,meters:Wo,metres:Wo,miles:Wo/1609.344,millimeters:Wo*1e3,millimetres:Wo*1e3,nauticalmiles:Wo/1852,radians:1,yards:Wo*1.0936};function $1(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function hZ(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!FA(e[0])||!FA(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return $1(r,t,n)}function L4(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var l=i[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var h=0;h<l[l.length-1].length;h++)if(l[l.length-1][h]!==l[0][h])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return $1(u,t,n)}function HS(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function M4(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return $1(r,t,n)}function pZ(e,t){var n=P4[t];return e*n}function dZ(e,t){t===void 0&&(t="kilometers");var n=P4[t];if(!n)throw new Error(t+" units is invalid");return e/n}function FA(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Ix(e){return e.type==="Feature"?e.geometry:e}function fZ(e,t,n){n===void 0&&(n={});var r=Ix(e),i=Ix(t),l=T4.union(r.coordinates,i.coordinates);return l.length===0?null:l.length===1?L4(l[0],n.properties):M4(l,n.properties)}function By(){}function A4(e){return e()}function BA(){return Object.create(null)}function V1(e){e.forEach(A4)}function k4(e){return typeof e=="function"}function mZ(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function gZ(e){return Object.keys(e).length===0}function yZ(e,t){e.appendChild(t)}function _Z(e,t,n){e.insertBefore(t,n||null)}function N4(e){e.parentNode&&e.parentNode.removeChild(e)}function jA(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Rc(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function vZ(e){return Array.from(e.childNodes)}function av(e,t,n){e.classList.toggle(t,!!n)}let nI;function ay(e){nI=e}const qd=[],$A=[];let vf=[];const VA=[],xZ=Promise.resolve();let ZS=!1;function bZ(){ZS||(ZS=!0,xZ.then(R4))}function XS(e){vf.push(e)}const d2=new Set;let Ud=0;function R4(){if(Ud!==0)return;const e=nI;do{try{for(;Ud<qd.length;){const t=qd[Ud];Ud++,ay(t),wZ(t.$$)}}catch(t){throw qd.length=0,Ud=0,t}for(ay(null),qd.length=0,Ud=0;$A.length;)$A.pop()();for(let t=0;t<vf.length;t+=1){const n=vf[t];d2.has(n)||(d2.add(n),n())}vf.length=0}while(qd.length);for(;VA.length;)VA.pop()();ZS=!1,d2.clear(),ay(e)}function wZ(e){if(e.fragment!==null){e.update(),V1(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(XS)}}function SZ(e){const t=[],n=[];vf.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),vf=t}const EZ=new Set;function CZ(e,t){e&&e.i&&(EZ.delete(e),e.i(t))}function IZ(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),XS(()=>{const l=e.$$.on_mount.map(A4).filter(k4);e.$$.on_destroy?e.$$.on_destroy.push(...l):V1(l),e.$$.on_mount=[]}),i.forEach(XS)}function TZ(e,t){const n=e.$$;n.fragment!==null&&(SZ(n.after_update),V1(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function PZ(e,t){e.$$.dirty[0]===-1&&(qd.push(e),bZ(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function LZ(e,t,n,r,i,l,h=null,u=[-1]){const y=nI;ay(e);const w=e.$$={fragment:null,ctx:[],props:l,update:By,not_equal:i,bound:BA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(y?y.$$.context:[])),callbacks:BA(),dirty:u,skip_bound:!1,root:t.target||y.$$.root};h&&h(w.root);let E=!1;if(w.ctx=n?n(e,t.props||{},(C,T,...R)=>{const O=R.length?R[0]:T;return w.ctx&&i(w.ctx[C],w.ctx[C]=O)&&(!w.skip_bound&&w.bound[C]&&w.bound[C](O),E&&PZ(e,C)),T}):[],w.update(),E=!0,V1(w.before_update),w.fragment=r?r(w.ctx):!1,t.target){if(t.hydrate){const C=vZ(t.target);w.fragment&&w.fragment.l(C),C.forEach(N4)}else w.fragment&&w.fragment.c();t.intro&&CZ(e.$$.fragment),IZ(e,t.target,t.anchor),R4()}ay(y)}class MZ{constructor(){TA(this,"$$"),TA(this,"$$set")}$destroy(){TZ(this,1),this.$destroy=By}$on(t,n){if(!k4(n))return By;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!gZ(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const AZ="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(AZ);function kZ(e){let t,n,r;return{c(){t=jA("svg"),n=jA("path"),Rc(n,"stroke-width","4"),Rc(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),Rc(n,"class","svelte-gzo3ar"),Rc(t,"width",r=e[0]==="list"?20:void 0),Rc(t,"viewBox","0 0 70 85"),Rc(t,"fill","none"),Rc(t,"class","svelte-gzo3ar"),av(t,"in-map",e[0]!=="list"),av(t,"list-icon",e[0]==="list")},m(i,l){_Z(i,t,l),yZ(t,n)},p(i,[l]){l&1&&r!==(r=i[0]==="list"?20:void 0)&&Rc(t,"width",r),l&1&&av(t,"in-map",i[0]!=="list"),l&1&&av(t,"list-icon",i[0]==="list")},i:By,o:By,d(i){i&&N4(t)}}}function NZ(e,t,n){let{displayIn:r}=t;return e.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class RZ extends MZ{constructor(t){super(),LZ(this,t,NZ,kZ,mZ,{displayIn:0})}}function D4(e,t,n){if(e!==null)for(var r,i,l,h,u,y,w,E=0,C=0,T,R=e.type,O=R==="FeatureCollection",B=R==="Feature",Y=O?e.features.length:1,$=0;$<Y;$++){w=O?e.features[$].geometry:B?e.geometry:e,T=w?w.type==="GeometryCollection":!1,u=T?w.geometries.length:1;for(var U=0;U<u;U++){var G=0,re=0;if(h=T?w.geometries[U]:w,h!==null){y=h.coordinates;var he=h.type;switch(E=0,he){case null:break;case"Point":if(t(y,C,$,G,re)===!1)return!1;C++,G++;break;case"LineString":case"MultiPoint":for(r=0;r<y.length;r++){if(t(y[r],C,$,G,re)===!1)return!1;C++,he==="MultiPoint"&&G++}he==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(r=0;r<y.length;r++){for(i=0;i<y[r].length-E;i++){if(t(y[r][i],C,$,G,re)===!1)return!1;C++}he==="MultiLineString"&&G++,he==="Polygon"&&re++}he==="Polygon"&&G++;break;case"MultiPolygon":for(r=0;r<y.length;r++){for(re=0,i=0;i<y[r].length;i++){for(l=0;l<y[r][i].length-E;l++){if(t(y[r][i][l],C,$,G,re)===!1)return!1;C++}re++}G++}break;case"GeometryCollection":for(r=0;r<h.geometries.length;r++)if(D4(h.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function UA(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function O4(e,t){var n,r,i,l,h,u,y,w,E,C,T=0,R=e.type==="FeatureCollection",O=e.type==="Feature",B=R?e.features.length:1;for(n=0;n<B;n++){for(u=R?e.features[n].geometry:O?e.geometry:e,w=R?e.features[n].properties:O?e.properties:{},E=R?e.features[n].bbox:O?e.bbox:void 0,C=R?e.features[n].id:O?e.id:void 0,y=u?u.type==="GeometryCollection":!1,h=y?u.geometries.length:1,i=0;i<h;i++){if(l=y?u.geometries[i]:u,l===null){if(t(null,T,w,E,C)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(l,T,w,E,C)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(t(l.geometries[r],T,w,E,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function KS(e){var t=[1/0,1/0,-1/0,-1/0];return D4(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}KS.default=KS;function DZ(e,t){t===void 0&&(t={});var n=KS(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return hZ([r,i],t.properties,t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Lp=function(){};Lp.prototype.interfaces_=function(){return[]};Lp.prototype.getClass=function(){return Lp};Lp.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var Fn=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),kt=function(){},z4={MAX_VALUE:{configurable:!0}};kt.isNaN=function(e){return Number.isNaN(e)};kt.doubleToLongBits=function(e){return e};kt.longBitsToDouble=function(e){return e};kt.isInfinite=function(e){return!Number.isFinite(e)};z4.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(kt,z4);var ws=function(){},U1=function(){},Lf=function(){};function Ss(){}var Ee=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Kp={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Ee.prototype.setOrdinate=function(e,t){switch(e){case Ee.X:this.x=t;break;case Ee.Y:this.y=t;break;case Ee.Z:this.z=t;break;default:throw new Fn("Invalid ordinate index: "+e)}};Ee.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!Lp.equalsWithTolerance(this.x,t.x,n)||!Lp.equalsWithTolerance(this.y,t.y,n))}};Ee.prototype.getOrdinate=function(e){switch(e){case Ee.X:return this.x;case Ee.Y:return this.y;case Ee.Z:return this.z}throw new Fn("Invalid ordinate index: "+e)};Ee.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||kt.isNaN(this.z))&&kt.isNaN(e.z)};Ee.prototype.equals=function(e){return e instanceof Ee?this.equals2D(e):!1};Ee.prototype.equalInZ=function(e,t){return Lp.equalsWithTolerance(this.z,e.z,t)};Ee.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};Ee.prototype.clone=function(){};Ee.prototype.copy=function(){return new Ee(this)};Ee.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};Ee.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};Ee.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};Ee.prototype.hashCode=function(){var e=17;return e=37*e+Ee.hashCode(this.x),e=37*e+Ee.hashCode(this.y),e};Ee.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};Ee.prototype.interfaces_=function(){return[ws,U1,Ss]};Ee.prototype.getClass=function(){return Ee};Ee.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=kt.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Kp.DimensionalComparator.get=function(){return Ru};Kp.serialVersionUID.get=function(){return 6683108902428367e3};Kp.NULL_ORDINATE.get=function(){return kt.NaN};Kp.X.get=function(){return 0};Kp.Y.get=function(){return 1};Kp.Z.get=function(){return 2};Object.defineProperties(Ee,Kp);var Ru=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new Fn("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Ru.prototype.compare=function(e,t){var n=e,r=t,i=Ru.compare(n.x,r.x);if(i!==0)return i;var l=Ru.compare(n.y,r.y);if(l!==0)return l;if(this._dimensionsToTest<=2)return 0;var h=Ru.compare(n.z,r.z);return h};Ru.prototype.interfaces_=function(){return[Lf]};Ru.prototype.getClass=function(){return Ru};Ru.compare=function(e,t){return e<t?-1:e>t?1:kt.isNaN(e)?kt.isNaN(t)?0:-1:kt.isNaN(t)?1:0};var Mf=function(){};Mf.prototype.create=function(){};Mf.prototype.interfaces_=function(){return[]};Mf.prototype.getClass=function(){return Mf};var Ie=function(){},y0={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};Ie.toLocationSymbol=function(e){switch(e){case Ie.EXTERIOR:return"e";case Ie.BOUNDARY:return"b";case Ie.INTERIOR:return"i";case Ie.NONE:return"-"}throw new Fn("Unknown location value: "+e)};y0.INTERIOR.get=function(){return 0};y0.BOUNDARY.get=function(){return 1};y0.EXTERIOR.get=function(){return 2};y0.NONE.get=function(){return-1};Object.defineProperties(Ie,y0);var It=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Qo=function(){},F4={LOG_10:{configurable:!0}};Qo.prototype.interfaces_=function(){return[]};Qo.prototype.getClass=function(){return Qo};Qo.log10=function(e){var t=Math.log(e);return kt.isInfinite(t)||kt.isNaN(t)?t:t/Qo.LOG_10};Qo.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Qo.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],l=arguments[2];return r<i?i:r>l?l:r}};Qo.wrap=function(e,t){return e<0?t- -e%t:e%t};Qo.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],l=arguments[1],h=arguments[2],u=arguments[3],y=i;return l>y&&(y=l),h>y&&(y=h),u>y&&(y=u),y}};Qo.average=function(e,t){return(e+t)/2};F4.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Qo,F4);var Ga=function(e){this.str=e};Ga.prototype.append=function(e){this.str+=e};Ga.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Ga.prototype.toString=function(e){return this.str};var Aa=function(e){this.value=e};Aa.prototype.intValue=function(){return this.value};Aa.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};Aa.isNaN=function(e){return Number.isNaN(e)};var jy=function(){};jy.isWhitespace=function(e){return e<=32&&e>=0||e===127};jy.toUpperCase=function(e){return e.toUpperCase()};var ke=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.init(i,l)}},ta={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};ke.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};ke.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=ke.magnitude(n._hi),i=ke.TEN.pow(r);n=n.divide(i),n.gt(ke.TEN)?(n=n.divide(ke.TEN),r+=1):n.lt(ke.ONE)&&(n=n.multiply(ke.TEN),r-=1);for(var l=r+1,h=new Ga,u=ke.MAX_PRINT_DIGITS-1,y=0;y<=u;y++){e&&y===l&&h.append(".");var w=Math.trunc(n._hi);if(w<0)break;var E=!1,C=0;w>9?(E=!0,C="9"):C="0"+w,h.append(C),n=n.subtract(ke.valueOf(w)).multiply(ke.TEN),E&&n.selfAdd(ke.TEN);var T=!0,R=ke.magnitude(n._hi);if(R<0&&Math.abs(R)>=u-y&&(T=!1),!T)break}return t[0]=r,h.toString()};ke.prototype.sqr=function(){return this.multiply(this)};ke.prototype.doubleValue=function(){return this._hi+this._lo};ke.prototype.subtract=function(){if(arguments[0]instanceof ke){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};ke.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};ke.prototype.isZero=function(){return this._hi===0&&this._lo===0};ke.prototype.selfSubtract=function(){if(arguments[0]instanceof ke){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};ke.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};ke.prototype.min=function(e){return this.le(e)?this:e};ke.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof ke){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,l=null,h=null,u=null,y=null,w=null,E=null,C=null;return y=this._hi/n,w=ke.SPLIT*y,i=w-y,C=ke.SPLIT*n,i=w-i,l=y-i,h=C-n,E=y*n,h=C-h,u=n-h,C=i*h-E+i*u+l*h+l*u,w=(this._hi-E-C+this._lo-y*r)/n,C=y+w,this._hi=C,this._lo=y-C+w,this}};ke.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};ke.prototype.divide=function(){if(arguments[0]instanceof ke){var e=arguments[0],t=null,n=null,r=null,i=null,l=null,h=null,u=null,y=null;l=this._hi/e._hi,h=ke.SPLIT*l,t=h-l,y=ke.SPLIT*e._hi,t=h-t,n=l-t,r=y-e._hi,u=l*e._hi,r=y-r,i=e._hi-r,y=t*r-u+t*i+n*r+n*i,h=(this._hi-u-y+this._lo-l*e._lo)/e._hi,y=l+h;var w=y,E=l-y+h;return new ke(w,E)}else if(typeof arguments[0]=="number"){var C=arguments[0];return kt.isNaN(C)?ke.createNaN():ke.copy(this).selfDivide(C,0)}};ke.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};ke.prototype.pow=function(e){if(e===0)return ke.valueOf(1);var t=new ke(this),n=ke.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};ke.prototype.ceil=function(){if(this.isNaN())return ke.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new ke(e,t)};ke.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};ke.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};ke.prototype.setValue=function(){if(arguments[0]instanceof ke){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};ke.prototype.max=function(e){return this.ge(e)?this:e};ke.prototype.sqrt=function(){if(this.isZero())return ke.valueOf(0);if(this.isNegative())return ke.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=ke.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};ke.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof ke){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,l=null,h=null,u=null;return i=this._hi+t,h=i-this._hi,l=i-h,l=t-h+(this._hi-l),u=l+this._lo,n=i+u,r=u+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var y=arguments[0],w=arguments[1],E=null,C=null,T=null,R=null,O=null,B=null,Y=null,$=null;O=this._hi+y,T=this._lo+w,Y=O-this._hi,$=T-this._lo,B=O-Y,R=T-$,B=y-Y+(this._hi-B),R=w-$+(this._lo-R),Y=B+T,E=O+Y,C=Y+(O-E),Y=R+C;var U=E+Y,G=Y+(E-U);return this._hi=U,this._lo=G,this}};ke.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof ke){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,l=null,h=null,u=null,y=null,w=null;y=ke.SPLIT*this._hi,i=y-this._hi,w=ke.SPLIT*n,i=y-i,l=this._hi-i,h=w-n,y=this._hi*n,h=w-h,u=n-h,w=i*h-y+i*u+l*h+l*u+(this._hi*r+this._lo*n);var E=y+w;i=y-E;var C=w+i;return this._hi=E,this._lo=C,this}};ke.prototype.selfSqr=function(){return this.selfMultiply(this)};ke.prototype.floor=function(){if(this.isNaN())return ke.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new ke(e,t)};ke.prototype.negate=function(){return this.isNaN()?this:new ke(-this._hi,-this._lo)};ke.prototype.clone=function(){};ke.prototype.multiply=function(){if(arguments[0]instanceof ke){var e=arguments[0];return e.isNaN()?ke.createNaN():ke.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return kt.isNaN(t)?ke.createNaN():ke.copy(this).selfMultiply(t,0)}};ke.prototype.isNaN=function(){return kt.isNaN(this._hi)};ke.prototype.intValue=function(){return Math.trunc(this._hi)};ke.prototype.toString=function(){var e=ke.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};ke.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+ke.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var l=r-n.length,h=ke.stringOfChar("0",l);i=n+h+".0"}return this.isNegative()?"-"+i:i};ke.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,l=null,h=null,u=null;i=1/this._hi,l=ke.SPLIT*i,e=l-i,u=ke.SPLIT*this._hi,e=l-e,t=i-e,n=u-this._hi,h=i*this._hi,n=u-n,r=this._hi-n,u=e*n-h+e*r+t*n+t*r,l=(1-h-u-i*this._lo)/this._hi;var y=i+l,w=i-y+l;return new ke(y,w)};ke.prototype.toSciNotation=function(){if(this.isZero())return ke.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=ke.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var l=n.charAt(0)+"."+i;return this.isNegative()?"-"+l+r:l+r};ke.prototype.abs=function(){return this.isNaN()?ke.NaN:this.isNegative()?this.negate():new ke(this)};ke.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};ke.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};ke.prototype.add=function(){if(arguments[0]instanceof ke){var e=arguments[0];return ke.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return ke.copy(this).selfAdd(t)}};ke.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof ke){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};ke.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};ke.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};ke.prototype.trunc=function(){return this.isNaN()?ke.NaN:this.isPositive()?this.floor():this.ceil()};ke.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};ke.prototype.interfaces_=function(){return[Ss,ws,U1]};ke.prototype.getClass=function(){return ke};ke.sqr=function(e){return ke.valueOf(e).selfMultiply(e)};ke.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return ke.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new ke(t)}};ke.sqrt=function(e){return ke.valueOf(e).sqrt()};ke.parse=function(e){for(var t=0,n=e.length;jy.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var l=new ke,h=0,u=0,y=0;!(t>=n);){var w=e.charAt(t);if(t++,jy.isDigit(w)){var E=w-"0";l.selfMultiply(ke.TEN),l.selfAdd(E),h++;continue}if(w==="."){u=h;continue}if(w==="e"||w==="E"){var C=e.substring(t);try{y=Aa.parseInt(C)}catch(Y){throw Y instanceof Error?new Error("Invalid exponent "+C+" in string "+e):Y}finally{}break}throw new Error("Unexpected character '"+w+"' at position "+t+" in string "+e)}var T=l,R=h-u-y;if(R===0)T=l;else if(R>0){var O=ke.TEN.pow(R);T=l.divide(O)}else if(R<0){var B=ke.TEN.pow(-R);T=l.multiply(B)}return r?T.negate():T};ke.createNaN=function(){return new ke(kt.NaN,kt.NaN)};ke.copy=function(e){return new ke(e)};ke.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};ke.stringOfChar=function(e,t){for(var n=new Ga,r=0;r<t;r++)n.append(e);return n.toString()};ta.PI.get=function(){return new ke(3.141592653589793,12246467991473532e-32)};ta.TWO_PI.get=function(){return new ke(6.283185307179586,24492935982947064e-32)};ta.PI_2.get=function(){return new ke(1.5707963267948966,6123233995736766e-32)};ta.E.get=function(){return new ke(2.718281828459045,14456468917292502e-32)};ta.NaN.get=function(){return new ke(kt.NaN,kt.NaN)};ta.EPS.get=function(){return 123259516440783e-46};ta.SPLIT.get=function(){return 134217729};ta.MAX_PRINT_DIGITS.get=function(){return 32};ta.TEN.get=function(){return ke.valueOf(10)};ta.ONE.get=function(){return ke.valueOf(1)};ta.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};ta.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(ke,ta);var uo=function(){},B4={DP_SAFE_EPSILON:{configurable:!0}};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};uo.orientationIndex=function(e,t,n){var r=uo.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=ke.valueOf(t.x).selfAdd(-e.x),l=ke.valueOf(t.y).selfAdd(-e.y),h=ke.valueOf(n.x).selfAdd(-t.x),u=ke.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(u).selfSubtract(l.selfMultiply(h)).signum()};uo.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};uo.intersection=function(e,t,n,r){var i=ke.valueOf(r.y).selfSubtract(n.y).selfMultiply(ke.valueOf(t.x).selfSubtract(e.x)),l=ke.valueOf(r.x).selfSubtract(n.x).selfMultiply(ke.valueOf(t.y).selfSubtract(e.y)),h=i.subtract(l),u=ke.valueOf(r.x).selfSubtract(n.x).selfMultiply(ke.valueOf(e.y).selfSubtract(n.y)),y=ke.valueOf(r.y).selfSubtract(n.y).selfMultiply(ke.valueOf(e.x).selfSubtract(n.x)),w=u.subtract(y),E=w.selfDivide(h).doubleValue(),C=ke.valueOf(e.x).selfAdd(ke.valueOf(t.x).selfSubtract(e.x).selfMultiply(E)).doubleValue(),T=ke.valueOf(t.x).selfSubtract(e.x).selfMultiply(ke.valueOf(e.y).selfSubtract(n.y)),R=ke.valueOf(t.y).selfSubtract(e.y).selfMultiply(ke.valueOf(e.x).selfSubtract(n.x)),O=T.subtract(R),B=O.selfDivide(h).doubleValue(),Y=ke.valueOf(n.y).selfAdd(ke.valueOf(r.y).selfSubtract(n.y).selfMultiply(B)).doubleValue();return new Ee(C,Y)};uo.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),l=(e.y-n.y)*(t.x-n.x),h=i-l;if(i>0){if(l<=0)return uo.signum(h);r=i+l}else if(i<0){if(l>=0)return uo.signum(h);r=-i-l}else return uo.signum(h);var u=uo.DP_SAFE_EPSILON*r;return h>=u||-h>=u?uo.signum(h):2};uo.signum=function(e){return e>0?1:e<0?-1:0};B4.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(uo,B4);var rn=function(){},_0={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};_0.X.get=function(){return 0};_0.Y.get=function(){return 1};_0.Z.get=function(){return 2};_0.M.get=function(){return 3};rn.prototype.setOrdinate=function(e,t,n){};rn.prototype.size=function(){};rn.prototype.getOrdinate=function(e,t){};rn.prototype.getCoordinate=function(){};rn.prototype.getCoordinateCopy=function(e){};rn.prototype.getDimension=function(){};rn.prototype.getX=function(e){};rn.prototype.clone=function(){};rn.prototype.expandEnvelope=function(e){};rn.prototype.copy=function(){};rn.prototype.getY=function(e){};rn.prototype.toCoordinateArray=function(){};rn.prototype.interfaces_=function(){return[U1]};rn.prototype.getClass=function(){return rn};Object.defineProperties(rn,_0);var j4=function(){},im=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(j4),mi=function(){};mi.arraycopy=function(e,t,n,r,i){for(var l=0,h=t;h<t+i;h++)n[r+l]=e[h],l++};mi.getProperty=function(e){return{"line.separator":`
`}[e]};var $s=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],l=arguments[1];this.x=i.y*l.w-l.y*i.w,this.y=l.x*i.w-i.x*l.w,this.w=i.x*l.y-l.x*i.y}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Ee){var h=arguments[0],u=arguments[1];this.x=h.y-u.y,this.y=u.x-h.x,this.w=h.x*u.y-u.x*h.y}}else if(arguments.length===3){var y=arguments[0],w=arguments[1],E=arguments[2];this.x=y,this.y=w,this.w=E}else if(arguments.length===4){var C=arguments[0],T=arguments[1],R=arguments[2],O=arguments[3],B=C.y-T.y,Y=T.x-C.x,$=C.x*T.y-T.x*C.y,U=R.y-O.y,G=O.x-R.x,re=R.x*O.y-O.x*R.y;this.x=Y*re-G*$,this.y=U*$-B*re,this.w=B*G-U*Y}};$s.prototype.getY=function(){var e=this.y/this.w;if(kt.isNaN(e)||kt.isInfinite(e))throw new im;return e};$s.prototype.getX=function(){var e=this.x/this.w;if(kt.isNaN(e)||kt.isInfinite(e))throw new im;return e};$s.prototype.getCoordinate=function(){var e=new Ee;return e.x=this.getX(),e.y=this.getY(),e};$s.prototype.interfaces_=function(){return[]};$s.prototype.getClass=function(){return $s};$s.intersection=function(e,t,n,r){var i=e.y-t.y,l=t.x-e.x,h=e.x*t.y-t.x*e.y,u=n.y-r.y,y=r.x-n.x,w=n.x*r.y-r.x*n.y,E=l*w-y*h,C=u*h-i*w,T=i*y-u*l,R=E/T,O=C/T;if(kt.isNaN(R)||kt.isInfinite(R)||kt.isNaN(O)||kt.isInfinite(O))throw new im;return new Ee(R,O)};var _t=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Ee){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var l=arguments[0],h=arguments[1],u=arguments[2],y=arguments[3];this.init(l,h,u,y)}},$4={serialVersionUID:{configurable:!0}};_t.prototype.getArea=function(){return this.getWidth()*this.getHeight()};_t.prototype.equals=function(e){if(!(e instanceof _t))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};_t.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new _t;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new _t(t,r,n,i)};_t.prototype.isNull=function(){return this._maxx<this._minx};_t.prototype.getMaxX=function(){return this._maxx};_t.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Ee){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof _t){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};_t.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof _t){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof Ee){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};_t.prototype.getMinY=function(){return this._miny};_t.prototype.getMinX=function(){return this._minx};_t.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Ee){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof _t){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};_t.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};_t.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};_t.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};_t.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};_t.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};_t.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};_t.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};_t.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};_t.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};_t.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof _t){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof Ee){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};_t.prototype.centre=function(){return this.isNull()?null:new Ee((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};_t.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Ee){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof _t){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],l=arguments[1],h=arguments[2],u=arguments[3];i<l?(this._minx=i,this._maxx=l):(this._minx=l,this._maxx=i),h<u?(this._miny=h,this._maxy=u):(this._miny=u,this._maxy=h)}};_t.prototype.getMaxY=function(){return this._maxy};_t.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};_t.prototype.hashCode=function(){var e=17;return e=37*e+Ee.hashCode(this._minx),e=37*e+Ee.hashCode(this._maxx),e=37*e+Ee.hashCode(this._miny),e=37*e+Ee.hashCode(this._maxy),e};_t.prototype.interfaces_=function(){return[ws,Ss]};_t.prototype.getClass=function(){return _t};_t.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],l=arguments[2],h=arguments[3],u=Math.min(l.x,h.x),y=Math.max(l.x,h.x),w=Math.min(r.x,i.x),E=Math.max(r.x,i.x);return!(w>y||E<u||(u=Math.min(l.y,h.y),y=Math.max(l.y,h.y),w=Math.min(r.y,i.y),E=Math.max(r.y,i.y),w>y)||E<u)}};$4.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(_t,$4);var ga={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},G1=function(e){this.geometryFactory=e||new Kt};G1.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=ga.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=ga.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],uf[n]&&(t=uf[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};G1.prototype.write=function(e){return this.extractGeometry(e)};G1.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!$l[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+$l[t].apply(this,[e])+")",r};var $l={coordinate:function(e){return e.x+" "+e.y},point:function(e){return $l.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+$l.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push($l.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push($l.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+$l.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+$l.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+$l.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+$l.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},uf={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(ga.spaces);return this.geometryFactory.createPoint(new Ee(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],l=0,h=r.length;l<h;++l)n=r[l].replace(ga.trimParens,"$1"),i.push(uf.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,l=t.length;i<l;++i)r=t[i].trim().split(ga.spaces),n.push(new Ee(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,l=t.length;i<l;++i)r=t[i].trim().split(ga.spaces),n.push(new Ee(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(ga.parenComma),i=[],l=0,h=r.length;l<h;++l)n=r[l].replace(ga.trimParens,"$1"),i.push(uf.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,l=e.trim().split(ga.parenComma),h,u=[],y=0,w=l.length;y<w;++y)n=l[y].replace(ga.trimParens,"$1"),r=uf.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),y===0?h=i:u.push(i);return this.geometryFactory.createPolygon(h,u)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(ga.doubleParenComma),i=[],l=0,h=r.length;l<h;++l)n=r[l].replace(ga.trimParens,"$1"),i.push(uf.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,l=n.length;i<l;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},qs=function(e){this.parser=new G1(e)};qs.prototype.write=function(e){return this.parser.write(e)};qs.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var tu=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Tx=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(tu),Vt=function(){};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.shouldNeverReachHere=function(){if(arguments.length===0)Vt.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new Tx("Should never reach here"+(e!==null?": "+e:""))}};Vt.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],Vt.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new Tx:new Tx(t)};Vt.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],Vt.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new Tx("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var $n=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ee,this._intPt[1]=new Ee,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Yp={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};$n.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};$n.prototype.getTopologySummary=function(){var e=new Ga;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};$n.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};$n.prototype.getIntersectionNum=function(){return this._result};$n.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};$n.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};$n.prototype.setPrecisionModel=function(e){this._precisionModel=e};$n.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};$n.prototype.getIntersection=function(e){return this._intPt[e]};$n.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};$n.prototype.hasIntersection=function(){return this._result!==$n.NO_INTERSECTION};$n.prototype.getEdgeDistance=function(e,t){var n=$n.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};$n.prototype.isCollinear=function(){return this._result===$n.COLLINEAR_INTERSECTION};$n.prototype.toString=function(){return qs.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+qs.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};$n.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};$n.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};$n.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};$n.prototype.interfaces_=function(){return[]};$n.prototype.getClass=function(){return $n};$n.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),l=-1;if(e.equals(t))l=0;else if(e.equals(n))r>i?l=r:l=i;else{var h=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y);r>i?l=h:l=u,l===0&&!e.equals(t)&&(l=Math.max(h,u))}return Vt.isTrue(!(l===0&&!e.equals(t)),"Bad distance calculation"),l};$n.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,l=Math.sqrt(r*r+i*i);return Vt.isTrue(!(l===0&&!e.equals(t)),"Invalid distance calculation"),l};Yp.DONT_INTERSECT.get=function(){return 0};Yp.DO_INTERSECT.get=function(){return 1};Yp.COLLINEAR.get=function(){return 2};Yp.NO_INTERSECTION.get=function(){return 0};Yp.POINT_INTERSECTION.get=function(){return 1};Yp.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties($n,Yp);var kh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new _t(this._inputLines[0][0],this._inputLines[0][1]),i=new _t(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,_t.intersects(r,i,n)&&it.orientationIndex(r,i,n)===0&&it.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,l,h){h.x=this.smallestInAbsValue(n.x,r.x,i.x,l.x),h.y=this.smallestInAbsValue(n.y,r.y,i.y,l.y),n.x-=h.x,n.y-=h.y,r.x-=h.x,r.y-=h.y,i.x-=h.x,i.y-=h.y,l.x-=h.x,l.y-=h.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,l){var h=null;try{h=$s.intersection(n,r,i,l)}catch(u){if(u instanceof im)h=t.nearestEndpoint(n,r,i,l);else throw u}finally{}return h},t.prototype.intersection=function(n,r,i,l){var h=this.intersectionWithNormalization(n,r,i,l);return this.isInSegmentEnvelopes(h)||(h=new Ee(t.nearestEndpoint(n,r,i,l))),this._precisionModel!==null&&this._precisionModel.makePrecise(h),h},t.prototype.smallestInAbsValue=function(n,r,i,l){var h=n,u=Math.abs(h);return Math.abs(r)<u&&(h=r,u=Math.abs(r)),Math.abs(i)<u&&(h=i,u=Math.abs(i)),Math.abs(l)<u&&(h=l),h},t.prototype.checkDD=function(n,r,i,l,h){var u=uo.intersection(n,r,i,l),y=this.isInSegmentEnvelopes(u);mi.out.println("DD in env = "+y+"  --------------------- "+u),h.distance(u)>1e-4&&mi.out.println("Distance = "+h.distance(u))},t.prototype.intersectionWithNormalization=function(n,r,i,l){var h=new Ee(n),u=new Ee(r),y=new Ee(i),w=new Ee(l),E=new Ee;this.normalizeToEnvCentre(h,u,y,w,E);var C=this.safeHCoordinateIntersection(h,u,y,w);return C.x+=E.x,C.y+=E.y,C},t.prototype.computeCollinearIntersection=function(n,r,i,l){var h=_t.intersects(n,r,i),u=_t.intersects(n,r,l),y=_t.intersects(i,l,n),w=_t.intersects(i,l,r);return h&&u?(this._intPt[0]=i,this._intPt[1]=l,e.COLLINEAR_INTERSECTION):y&&w?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):h&&y?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!u&&!w?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):h&&w?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!u&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&y?(this._intPt[0]=l,this._intPt[1]=n,l.equals(n)&&!h&&!w?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&w?(this._intPt[0]=l,this._intPt[1]=r,l.equals(r)&&!h&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,l,h){var u=n.x<r.x?n.x:r.x,y=n.y<r.y?n.y:r.y,w=n.x>r.x?n.x:r.x,E=n.y>r.y?n.y:r.y,C=i.x<l.x?i.x:l.x,T=i.y<l.y?i.y:l.y,R=i.x>l.x?i.x:l.x,O=i.y>l.y?i.y:l.y,B=u>C?u:C,Y=w<R?w:R,$=y>T?y:T,U=E<O?E:O,G=(B+Y)/2,re=($+U)/2;h.x=G,h.y=re,n.x-=h.x,n.y-=h.y,r.x-=h.x,r.y-=h.y,i.x-=h.x,i.y-=h.y,l.x-=h.x,l.y-=h.y},t.prototype.computeIntersect=function(n,r,i,l){if(this._isProper=!1,!_t.intersects(n,r,i,l))return e.NO_INTERSECTION;var h=it.orientationIndex(n,r,i),u=it.orientationIndex(n,r,l);if(h>0&&u>0||h<0&&u<0)return e.NO_INTERSECTION;var y=it.orientationIndex(i,l,n),w=it.orientationIndex(i,l,r);if(y>0&&w>0||y<0&&w<0)return e.NO_INTERSECTION;var E=h===0&&u===0&&y===0&&w===0;return E?this.computeCollinearIntersection(n,r,i,l):(h===0||u===0||y===0||w===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(l)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(l)?this._intPt[0]=r:h===0?this._intPt[0]=new Ee(i):u===0?this._intPt[0]=new Ee(l):y===0?this._intPt[0]=new Ee(n):w===0&&(this._intPt[0]=new Ee(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,l)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,l){var h=n,u=it.distancePointLine(n,i,l),y=it.distancePointLine(r,i,l);return y<u&&(u=y,h=r),y=it.distancePointLine(i,n,r),y<u&&(u=y,h=i),y=it.distancePointLine(l,n,r),y<u&&(u=y,h=l),h},t}($n),Mp=function(){};Mp.prototype.interfaces_=function(){return[]};Mp.prototype.getClass=function(){return Mp};Mp.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,l=n.x-t.x,h=n.y-t.y;return Mp.signOfDet2x2(r,i,l,h)};Mp.signOfDet2x2=function(e,t,n,r){var i=null,l=null,h=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,l=e,e=n,n=l,l=t,t=r,r=l):t<=-r?(i=-i,n=-n,r=-r):(l=e,e=-n,n=l,l=t,t=-r,r=l):r>0?-t<=r?(i=-i,e=-e,t=-t):(l=-e,e=n,n=l,l=-t,t=r,r=l):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,l=-e,e=-n,n=l,l=-t,t=-r,r=l),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(h=Math.floor(n/e),n=n-h*e,r=r-h*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(h=Math.floor(e/n),e=e-h*n,t=t-h*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var Ia=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Ia.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,l=e.y-this._p.y,h=t.x-this._p.x,u=t.y-this._p.y,y=Mp.signOfDet2x2(i,l,h,u);if(y===0)return this._isPointOnSegment=!0,null;u<l&&(y=-y),y>0&&this._crossingCount++}};Ia.prototype.isPointInPolygon=function(){return this.getLocation()!==Ie.EXTERIOR};Ia.prototype.getLocation=function(){return this._isPointOnSegment?Ie.BOUNDARY:this._crossingCount%2===1?Ie.INTERIOR:Ie.EXTERIOR};Ia.prototype.isOnSegment=function(){return this._isPointOnSegment};Ia.prototype.interfaces_=function(){return[]};Ia.prototype.getClass=function(){return Ia};Ia.locatePointInRing=function(){if(arguments[0]instanceof Ee&&It(arguments[1],rn)){for(var e=arguments[0],t=arguments[1],n=new Ia(e),r=new Ee,i=new Ee,l=1;l<t.size();l++)if(t.getCoordinate(l,r),t.getCoordinate(l-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Array){for(var h=arguments[0],u=arguments[1],y=new Ia(h),w=1;w<u.length;w++){var E=u[w],C=u[w-1];if(y.countSegment(E,C),y.isOnSegment())return y.getLocation()}return y.getLocation()}};var it=function(){},Jp={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};it.prototype.interfaces_=function(){return[]};it.prototype.getClass=function(){return it};it.orientationIndex=function(e,t,n){return uo.orientationIndex(e,t,n)};it.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,l=e[r+1].y,h=e[r-1].y;t+=i*(h-l)}return t/2}else if(It(arguments[0],rn)){var u=arguments[0],y=u.size();if(y<3)return 0;var w=new Ee,E=new Ee,C=new Ee;u.getCoordinate(0,E),u.getCoordinate(1,C);var T=E.x;C.x-=T;for(var R=0,O=1;O<y-1;O++)w.y=E.y,E.x=C.x,E.y=C.y,u.getCoordinate(O+1,C),C.x-=T,R+=E.x*(w.y-C.y);return R/2}};it.distanceLineLine=function(e,t,n,r){if(e.equals(t))return it.distancePointLine(e,n,r);if(n.equals(r))return it.distancePointLine(r,e,t);var i=!1;if(!_t.intersects(e,t,n,r))i=!0;else{var l=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(l===0)i=!0;else{var h=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),u=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),y=u/l,w=h/l;(w<0||w>1||y<0||y>1)&&(i=!0)}}return i?Qo.min(it.distancePointLine(e,n,r),it.distancePointLine(t,n,r),it.distancePointLine(n,e,t),it.distancePointLine(r,e,t)):0};it.isPointInRing=function(e,t){return it.locatePointInRing(e,t)!==Ie.EXTERIOR};it.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new Ee;e.getCoordinate(0,r);for(var i=r.x,l=r.y,h=1;h<t;h++){e.getCoordinate(h,r);var u=r.x,y=r.y,w=u-i,E=y-l;n+=Math.sqrt(w*w+E*E),i=u,l=y}return n};it.isCCW=function(e){var t=e.length-1;if(t<3)throw new Fn("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var l=e[i];l.y>n.y&&(n=l,r=i)}var h=r;do h=h-1,h<0&&(h=t);while(e[h].equals2D(n)&&h!==r);var u=r;do u=(u+1)%t;while(e[u].equals2D(n)&&u!==r);var y=e[h],w=e[u];if(y.equals2D(n)||w.equals2D(n)||y.equals2D(w))return!1;var E=it.computeOrientation(y,n,w),C=!1;return E===0?C=y.x>w.x:C=E>0,C};it.locatePointInRing=function(e,t){return Ia.locatePointInRing(e,t)};it.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};it.computeOrientation=function(e,t,n){return it.orientationIndex(e,t,n)};it.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new Fn("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=it.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var l=arguments[0],h=arguments[1],u=arguments[2];if(h.x===u.x&&h.y===u.y)return l.distance(h);var y=(u.x-h.x)*(u.x-h.x)+(u.y-h.y)*(u.y-h.y),w=((l.x-h.x)*(u.x-h.x)+(l.y-h.y)*(u.y-h.y))/y;if(w<=0)return l.distance(h);if(w>=1)return l.distance(u);var E=((h.y-l.y)*(u.x-h.x)-(h.x-l.x)*(u.y-h.y))/y;return Math.abs(E)*Math.sqrt(y)}};it.isOnLine=function(e,t){for(var n=new kh,r=1;r<t.length;r++){var i=t[r-1],l=t[r];if(n.computeIntersection(e,i,l),n.hasIntersection())return!0}return!1};Jp.CLOCKWISE.get=function(){return-1};Jp.RIGHT.get=function(){return it.CLOCKWISE};Jp.COUNTERCLOCKWISE.get=function(){return 1};Jp.LEFT.get=function(){return it.COUNTERCLOCKWISE};Jp.COLLINEAR.get=function(){return 0};Jp.STRAIGHT.get=function(){return it.COLLINEAR};Object.defineProperties(it,Jp);var nu=function(){};nu.prototype.filter=function(e){};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};var Ct=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},El={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===Ct.SORTINDEX_GEOMETRYCOLLECTION};Ct.prototype.getFactory=function(){return this._factory};Ct.prototype.getGeometryN=function(e){return this};Ct.prototype.getArea=function(){return 0};Ct.prototype.isRectangle=function(){return!1};Ct.prototype.equals=function(){if(arguments[0]instanceof Ct){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Ct))return!1;var n=t;return this.equalsExact(n)}};Ct.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};Ct.prototype.geometryChanged=function(){this.apply(Ct.geometryChangedFilter)};Ct.prototype.geometryChangedAction=function(){this._envelope=null};Ct.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};Ct.prototype.getLength=function(){return 0};Ct.prototype.getNumGeometries=function(){return 1};Ct.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};Ct.prototype.getUserData=function(){return this._userData};Ct.prototype.getSRID=function(){return this._SRID};Ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Ct.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Ct.SORTINDEX_GEOMETRYCOLLECTION)throw new Fn("This method does not support GeometryCollection arguments")};Ct.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};Ct.prototype.norm=function(){var e=this.copy();return e.normalize(),e};Ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};Ct.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new _t(this._envelope)};Ct.prototype.setSRID=function(e){this._SRID=e};Ct.prototype.setUserData=function(e){this._userData=e};Ct.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),l=r.next(),h=i.compareTo(l);if(h!==0)return h}return n.hasNext()?1:r.hasNext()?-1:0};Ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};Ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===Ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Ct.SORTINDEX_MULTIPOLYGON};Ct.prototype.interfaces_=function(){return[U1,ws,Ss]};Ct.prototype.getClass=function(){return Ct};Ct.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};Ct.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};El.serialVersionUID.get=function(){return 8763622679187377e3};El.SORTINDEX_POINT.get=function(){return 0};El.SORTINDEX_MULTIPOINT.get=function(){return 1};El.SORTINDEX_LINESTRING.get=function(){return 2};El.SORTINDEX_LINEARRING.get=function(){return 3};El.SORTINDEX_MULTILINESTRING.get=function(){return 4};El.SORTINDEX_POLYGON.get=function(){return 5};El.SORTINDEX_MULTIPOLYGON.get=function(){return 6};El.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};El.geometryChangedFilter.get=function(){return rI};Object.defineProperties(Ct,El);var rI=function(){};rI.interfaces_=function(){return[nu]};rI.filter=function(e){e.geometryChangedAction()};var fl=function(){};fl.prototype.filter=function(e){};fl.prototype.interfaces_=function(){return[]};fl.prototype.getClass=function(){return fl};var vs=function(){},lu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};vs.prototype.isInBoundary=function(e){};vs.prototype.interfaces_=function(){return[]};vs.prototype.getClass=function(){return vs};lu.Mod2BoundaryNodeRule.get=function(){return Af};lu.EndPointBoundaryNodeRule.get=function(){return kf};lu.MultiValentEndPointBoundaryNodeRule.get=function(){return Nf};lu.MonoValentEndPointBoundaryNodeRule.get=function(){return Rf};lu.MOD2_BOUNDARY_RULE.get=function(){return new Af};lu.ENDPOINT_BOUNDARY_RULE.get=function(){return new kf};lu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Nf};lu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Rf};lu.OGC_SFS_BOUNDARY_RULE.get=function(){return vs.MOD2_BOUNDARY_RULE};Object.defineProperties(vs,lu);var Af=function(){};Af.prototype.isInBoundary=function(e){return e%2===1};Af.prototype.interfaces_=function(){return[vs]};Af.prototype.getClass=function(){return Af};var kf=function(){};kf.prototype.isInBoundary=function(e){return e>0};kf.prototype.interfaces_=function(){return[vs]};kf.prototype.getClass=function(){return kf};var Nf=function(){};Nf.prototype.isInBoundary=function(e){return e>1};Nf.prototype.interfaces_=function(){return[vs]};Nf.prototype.getClass=function(){return Nf};var Rf=function(){};Rf.prototype.isInBoundary=function(e){return e===1};Rf.prototype.interfaces_=function(){return[vs]};Rf.prototype.getClass=function(){return Rf};var wr=function(){};wr.prototype.add=function(){};wr.prototype.addAll=function(){};wr.prototype.isEmpty=function(){};wr.prototype.iterator=function(){};wr.prototype.size=function(){};wr.prototype.toArray=function(){};wr.prototype.remove=function(){};function iI(e){this.message=e||""}iI.prototype=new Error;iI.prototype.name="IndexOutOfBoundsException";var om=function(){};om.prototype.hasNext=function(){};om.prototype.next=function(){};om.prototype.remove=function(){};var Vs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(wr);function sm(e){this.message=e||""}sm.prototype=new Error;sm.prototype.name="NoSuchElementException";var et=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof wr&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,wr]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new OZ(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new iI;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,l=this.array_.length;i<l;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,l=0,h=this.array_.length;l<h;l++)if(r.array_[l]===n){r.array_.splice(l,1),i=!0;break}return i},t}(Vs),OZ=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new sm;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(om),v0=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.ensureCapacity(i.length),this.add(i,l)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],l=arguments[1],h=!1,u=i.iterator();u.hasNext();)r.add(u.next(),l),h=!0;return h}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),l=0;l<this.size();l++)i.add(l,r.get(l).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var l=arguments[0],h=arguments[1];return this.add(l,h,!0),!0}else if(arguments[0]instanceof Ee&&typeof arguments[1]=="boolean"){var u=arguments[0],y=arguments[1];if(!y&&this.size()>=1){var w=this.get(this.size()-1);if(w.equals2D(u))return null}e.prototype.add.call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var E=arguments[0],C=arguments[1];return this.add(E,C),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],R=arguments[1],O=arguments[2];if(O)for(var B=0;B<T.length;B++)r.add(T[B],R);else for(var Y=T.length-1;Y>=0;Y--)r.add(T[Y],R);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ee){var $=arguments[0],U=arguments[1],G=arguments[2];if(!G){var re=this.size();if(re>0){if($>0){var he=this.get($-1);if(he.equals2D(U))return null}if($<re){var _e=this.get($);if(_e.equals2D(U))return null}}}e.prototype.add.call(this,$,U)}}else if(arguments.length===4){var fe=arguments[0],ye=arguments[1],Pe=arguments[2],De=arguments[3],Ue=1;Pe>De&&(Ue=-1);for(var Ye=Pe;Ye!==De;Ye+=Ue)r.add(fe[Ye],ye);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new Ee(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(et),Yt=function(){},q1={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};q1.ForwardComparator.get=function(){return $y};q1.BidirectionalComparator.get=function(){return Df};q1.coordArrayType.get=function(){return new Array(0).fill(null)};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};Yt.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(Yt.indexOf(r,t)<0)return r}return null};Yt.scroll=function(e,t){var n=Yt.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);mi.arraycopy(e,n,r,0,e.length-n),mi.arraycopy(e,0,r,e.length-n,n),mi.arraycopy(r,0,e,0,e.length)};Yt.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var h=0;h<r.length;h++)if(l.compare(r[h],i[h])!==0)return!1;return!0}};Yt.intersection=function(e,t){for(var n=new v0,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};Yt.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};Yt.removeRepeatedPoints=function(e){if(!Yt.hasRepeatedPoints(e))return e;var t=new v0(e,!1);return t.toCoordinateArray()};Yt.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};Yt.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,l=0;l<e.length;l++)e[l]!==null&&(r[i++]=e[l]);return r};Yt.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new Ee(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],l=arguments[2],h=arguments[3],u=arguments[4],y=0;y<u;y++)l[h+y]=new Ee(r[i+y])};Yt.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};Yt.envelope=function(e){for(var t=new _t,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};Yt.toCoordinateArray=function(e){return e.toArray(Yt.coordArrayType)};Yt.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};Yt.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};Yt.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};Yt.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};Yt.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};Yt.extract=function(e,t,n){t=Qo.clamp(t,0,e.length),n=Qo.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var l=0,h=t;h<=n;h++)i[l++]=e[h];return i};Object.defineProperties(Yt,q1);var $y=function(){};$y.prototype.compare=function(e,t){var n=e,r=t;return Yt.compare(n,r)};$y.prototype.interfaces_=function(){return[Lf]};$y.prototype.getClass=function(){return $y};var Df=function(){};Df.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=Yt.compare(n,r),l=Yt.isEqualReversed(n,r);return l?0:i};Df.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=Yt.increasingDirection(n),l=Yt.increasingDirection(r),h=i>0?0:n.length-1,u=l>0?0:n.length-1,y=0;y<n.length;y++){var w=n[h].compareTo(r[u]);if(w!==0)return w;h+=i,u+=l}return 0};Df.prototype.interfaces_=function(){return[Lf]};Df.prototype.getClass=function(){return Df};var Qp=function(){};Qp.prototype.get=function(){};Qp.prototype.put=function(){};Qp.prototype.size=function(){};Qp.prototype.values=function(){};Qp.prototype.entrySet=function(){};var zZ=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Qp);function x0(e){this.message=e||""}x0.prototype=new Error;x0.prototype.name="OperationNotSupported";function W1(){}W1.prototype=new wr;W1.prototype.contains=function(){};var oI=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof wr&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,l=this.array_.length;i<l;i++){var h=r.array_[i];if(h===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,l=this.array_.length;i<l;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new FZ(this)},t}(W1),FZ=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new sm;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new x0},t}(om),Gl=0,Dc=1;function GA(e){return e===null?Gl:e.color}function In(e){return e===null?null:e.parent}function Fl(e,t){e!==null&&(e.color=t)}function f2(e){return e===null?null:e.left}function qA(e){return e===null?null:e.right}function Ii(){this.root_=null,this.size_=0}Ii.prototype=new zZ;Ii.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};Ii.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Gl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var l=n.value;return n.value=t,l}while(n!==null);var h={key:e,left:null,right:null,value:t,parent:r,color:Gl,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=h:r.right=h,this.fixAfterInsertion(h),this.size_++,null};Ii.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=Dc;e!=null&&e!==this.root_&&e.parent.color===Dc;)if(In(e)===f2(In(In(e)))){var n=qA(In(In(e)));GA(n)===Dc?(Fl(In(e),Gl),Fl(n,Gl),Fl(In(In(e)),Dc),e=In(In(e))):(e===qA(In(e))&&(e=In(e),t.rotateLeft(e)),Fl(In(e),Gl),Fl(In(In(e)),Dc),t.rotateRight(In(In(e))))}else{var r=f2(In(In(e)));GA(r)===Dc?(Fl(In(e),Gl),Fl(r,Gl),Fl(In(In(e)),Dc),e=In(In(e))):(e===f2(In(e))&&(e=In(e),t.rotateRight(e)),Fl(In(e),Gl),Fl(In(In(e)),Dc),t.rotateLeft(In(In(e))))}this.root_.color=Gl};Ii.prototype.values=function(){var e=new et,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Ii.successor(t))!==null;)e.add(t.value);return e};Ii.prototype.entrySet=function(){var e=new oI,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Ii.successor(t))!==null;)e.add(t);return e};Ii.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Ii.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Ii.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Ii.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};Ii.prototype.size=function(){return this.size_};var Vy=function(){};Vy.prototype.interfaces_=function(){return[]};Vy.prototype.getClass=function(){return Vy};function V4(){}V4.prototype=new W1;function ka(){this.array_=[],arguments[0]instanceof wr&&this.addAll(arguments[0])}ka.prototype=new V4;ka.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};ka.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};ka.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};ka.prototype.remove=function(e){throw new x0};ka.prototype.size=function(){return this.array_.length};ka.prototype.isEmpty=function(){return this.array_.length===0};ka.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};ka.prototype.iterator=function(){return new H1(this)};var H1=function(e){this.treeSet_=e,this.position_=0};H1.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new sm;return this.treeSet_.array_[this.position_++]};H1.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};H1.prototype.remove=function(){throw new x0};var ah=function(){};ah.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(h,u){return h.compareTo(u)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(h,u){return r.compare(h,u)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var l=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<l.length;t++)e.push(l[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(h,u){return r.compare(h,u)},n.sort(i),l=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<l.length;t++)e.push(l[t])};ah.asList=function(e){for(var t=new et,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var sn=function(){},na={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};na.P.get=function(){return 0};na.L.get=function(){return 1};na.A.get=function(){return 2};na.FALSE.get=function(){return-1};na.TRUE.get=function(){return-2};na.DONTCARE.get=function(){return-3};na.SYM_FALSE.get=function(){return"F"};na.SYM_TRUE.get=function(){return"T"};na.SYM_DONTCARE.get=function(){return"*"};na.SYM_P.get=function(){return"0"};na.SYM_L.get=function(){return"1"};na.SYM_A.get=function(){return"2"};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};sn.toDimensionSymbol=function(e){switch(e){case sn.FALSE:return sn.SYM_FALSE;case sn.TRUE:return sn.SYM_TRUE;case sn.DONTCARE:return sn.SYM_DONTCARE;case sn.P:return sn.SYM_P;case sn.L:return sn.SYM_L;case sn.A:return sn.SYM_A}throw new Fn("Unknown dimension value: "+e)};sn.toDimensionValue=function(e){switch(jy.toUpperCase(e)){case sn.SYM_FALSE:return sn.FALSE;case sn.SYM_TRUE:return sn.TRUE;case sn.SYM_DONTCARE:return sn.DONTCARE;case sn.SYM_P:return sn.P;case sn.SYM_L:return sn.L;case sn.SYM_A:return sn.A}throw new Fn("Unknown dimension symbol: "+e)};Object.defineProperties(sn,na);var Na=function(){};Na.prototype.filter=function(e){};Na.prototype.interfaces_=function(){return[]};Na.prototype.getClass=function(){return Na};var Ws=function(){};Ws.prototype.filter=function(e,t){};Ws.prototype.isDone=function(){};Ws.prototype.isGeometryChanged=function(){};Ws.prototype.interfaces_=function(){return[]};Ws.prototype.getClass=function(){return Ws};var Wi=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new Fn("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new _t,l=0;l<this._geometries.length;l++)i.expandToInclude(r._geometries[l].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),l=-1,h=0;h<this._geometries.length;h++)for(var u=r._geometries[h].getCoordinates(),y=0;y<u.length;y++)l++,i[l]=u[y];return i},t.prototype.getArea=function(){for(var r=this,i=0,l=0;l<this._geometries.length;l++)i+=r._geometries[l].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],l=arguments[1];if(!this.isEquivalentClass(i))return!1;var h=i;if(this._geometries.length!==h._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!r._geometries[u].equalsExact(h._geometries[u],l))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();ah.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=sn.FALSE,l=0;l<this._geometries.length;l++)i=Math.max(i,r._geometries[l].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=sn.FALSE,l=0;l<this._geometries.length;l++)i=Math.max(i,r._geometries[l].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,l=0;l<this._geometries.length;l++)i+=r._geometries[l].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,l=0;l<this._geometries.length;l++)i+=r._geometries[l].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,l=new Array(i).fill(null),h=0;h<this._geometries.length;h++)l[h]=r._geometries[h].reverse();return this.getFactory().createGeometryCollection(l)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],l=new ka(ah.asList(this._geometries)),h=new ka(ah.asList(i._geometries));return this.compare(l,h)}else if(arguments.length===2){for(var u=arguments[0],y=arguments[1],w=u,E=this.getNumGeometries(),C=w.getNumGeometries(),T=0;T<E&&T<C;){var R=r.getGeometryN(T),O=w.getGeometryN(T),B=R.compareToSameClass(O,y);if(B!==0)return B;T++}return T<E?1:T<C?-1:0}},t.prototype.apply=function(){var r=this;if(It(arguments[0],fl))for(var i=arguments[0],l=0;l<this._geometries.length;l++)r._geometries[l].apply(i);else if(It(arguments[0],Ws)){var h=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(r._geometries[u].apply(h),!h.isDone());u++);h.isGeometryChanged()&&this.geometryChanged()}else if(It(arguments[0],Na)){var y=arguments[0];y.filter(this);for(var w=0;w<this._geometries.length;w++)r._geometries[w].apply(y)}else if(It(arguments[0],nu)){var E=arguments[0];E.filter(this);for(var C=0;C<this._geometries.length;C++)r._geometries[C].apply(E)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Vt.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var l=0;l<this._geometries.length;l++)i._geometries[l]=r._geometries[l].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),l=0;l<i.length;l++)i[l]=r._geometries[l].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(Ct),_h=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Ct.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?sn.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,l=new Array(i).fill(null),h=0;h<this._geometries.length;h++)l[i-1-h]=r._geometries[h].reverse();return this.getFactory().createMultiLineString(l)},t.prototype.getBoundary=function(){return new ms(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),l=0;l<i.length;l++)i[l]=r._geometries[l].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Vy]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(Wi),ms=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=vs.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};ms.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};ms.prototype.getBoundary=function(){return this._geom instanceof Xn?this.boundaryLineString(this._geom):this._geom instanceof _h?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};ms.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};ms.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};ms.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new et;this._endpointMap=new Ii;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var l=this._endpointMap.entrySet().iterator();l.hasNext();){var h=l.next(),u=h.getValue(),y=u.count;t._bnRule.isInBoundary(y)&&n.add(h.getKey())}return Yt.toCoordinateArray(n)};ms.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new Px,this._endpointMap.put(e,t)),t.count++};ms.prototype.interfaces_=function(){return[]};ms.prototype.getClass=function(){return ms};ms.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new ms(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new ms(n,r);return i.getBoundary()}};var Px=function(){this.count=null};Px.prototype.interfaces_=function(){return[]};Px.prototype.getClass=function(){return Px};function BZ(){}function jZ(){}var $Z=function(){};function VZ(){}function UZ(){}function GZ(){}var gs=function(){},sI={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};gs.prototype.interfaces_=function(){return[]};gs.prototype.getClass=function(){return gs};gs.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};gs.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new VZ,n=new BZ;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],l="";new jZ(gs.getStackTrace(r));for(var h=new GZ,u=0;u<i;u++)try{l+=h.readLine()+gs.NEWLINE}catch(y){if(y instanceof UZ)Vt.shouldNeverReachHere();else throw y}finally{}return l}};gs.split=function(e,t){for(var n=t.length,r=new et,i=""+e,l=i.indexOf(t);l>=0;){var h=i.substring(0,l);r.add(h),i=i.substring(l+n),l=i.indexOf(t)}i.length>0&&r.add(i);for(var u=new Array(r.size()).fill(null),y=0;y<u.length;y++)u[y]=r.get(y);return u};gs.toString=function(){if(arguments.length===1){var e=arguments[0];return gs.SIMPLE_ORDINATE_FORMAT.format(e)}};gs.spaces=function(e){return gs.chars(" ",e)};sI.NEWLINE.get=function(){return mi.getProperty("line.separator")};sI.SIMPLE_ORDINATE_FORMAT.get=function(){return new $Z};Object.defineProperties(gs,sI);var ir=function(){};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};ir.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),l=0;l<i;l++)n.setOrdinate(r,l,e.getOrdinate(t,l))};ir.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,rn.X)===e.getOrdinate(t-1,rn.X)&&e.getOrdinate(0,rn.Y)===e.getOrdinate(t-1,rn.Y)};ir.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),l=0;l<n;l++)for(var h=0;h<i;h++){var u=e.getOrdinate(l,h),y=t.getOrdinate(l,h);if(e.getOrdinate(l,h)!==t.getOrdinate(l,h)&&!(kt.isNaN(u)&&kt.isNaN(y)))return!1}return!0};ir.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(ir.copy(t,0,r,0,i),i>0)for(var l=i;l<n;l++)ir.copy(t,i-1,r,l,1);return r};ir.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)ir.swap(e,r,t-r)};ir.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};ir.copy=function(e,t,n,r,i){for(var l=0;l<i;l++)ir.copyCoord(e,t+l,n,r+l)};ir.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new Ga;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var l=0;l<n;l++)l>0&&r.append(","),r.append(gs.toString(e.getOrdinate(i,l)))}return r.append(")"),r.toString()}};ir.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return ir.createClosedRing(e,t,4);var r=t.getOrdinate(0,rn.X)===t.getOrdinate(n-1,rn.X)&&t.getOrdinate(0,rn.Y)===t.getOrdinate(n-1,rn.Y);return r?t:ir.createClosedRing(e,t,n+1)};ir.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();ir.copy(t,0,r,0,i);for(var l=i;l<n;l++)ir.copy(t,0,r,l,1);return r};var Xn=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new _t:this._points.expandEnvelope(new _t)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],l=arguments[1];if(!this.isEquivalentClass(i))return!1;var h=i;if(this._points.size()!==h._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!r.equal(r._points.getCoordinate(u),h._points.getCoordinate(u),l))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var l=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(l)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(l))>0&&ir.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?sn.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return it.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();ir.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],l=i,h=0,u=0;h<this._points.size()&&u<l._points.size();){var y=r._points.getCoordinate(h).compareTo(l._points.getCoordinate(u));if(y!==0)return y;h++,u++}return h<this._points.size()?1:u<l._points.size()?-1:0}else if(arguments.length===2){var w=arguments[0],E=arguments[1],C=w;return E.compare(this._points,C._points)}},t.prototype.apply=function(){var r=this;if(It(arguments[0],fl))for(var i=arguments[0],l=0;l<this._points.size();l++)i.filter(r._points.getCoordinate(l));else if(It(arguments[0],Ws)){var h=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(h.filter(r._points,u),!h.isDone());u++);h.isGeometryChanged()&&this.geometryChanged()}else if(It(arguments[0],Na)){var y=arguments[0];y.filter(this)}else if(It(arguments[0],nu)){var w=arguments[0];w.filter(this)}},t.prototype.getBoundary=function(){return new ms(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new Fn("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,l=0;l<this._points.size();l++)if(i._points.getCoordinate(l).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[Vy]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(Ct),Uy=function(){};Uy.prototype.interfaces_=function(){return[]};Uy.prototype.getClass=function(){return Uy};var Ao=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new _t;var r=new _t;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return sn.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var l=arguments[0],h=arguments[1],u=l;return h.compare(this._coordinates,u._coordinates)}},t.prototype.apply=function(){if(It(arguments[0],fl)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(It(arguments[0],Ws)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(It(arguments[0],Na)){var l=arguments[0];l.filter(this)}else if(It(arguments[0],nu)){var h=arguments[0];h.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),Vt.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Uy]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(Ct),Ku=function(){};Ku.prototype.interfaces_=function(){return[]};Ku.prototype.getClass=function(){return Ku};var Ar=function(e){function t(r,i,l){if(e.call(this,l),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new Fn("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new Fn("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),l=-1,h=this._shell.getCoordinates(),u=0;u<h.length;u++)l++,i[l]=h[u];for(var y=0;y<this._holes.length;y++)for(var w=r._holes[y].getCoordinates(),E=0;E<w.length;E++)l++,i[l]=w[E];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(it.signedArea(this._shell.getCoordinateSequence()));for(var l=0;l<this._holes.length;l++)i-=Math.abs(it.signedArea(r._holes[l].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),l=0;l<5;l++){var h=r.getX(l);if(!(h===i.getMinX()||h===i.getMaxX()))return!1;var u=r.getY(l);if(!(u===i.getMinY()||u===i.getMaxY()))return!1}for(var y=r.getX(0),w=r.getY(0),E=1;E<=4;E++){var C=r.getX(E),T=r.getY(E),R=C!==y,O=T!==w;if(R===O)return!1;y=C,w=T}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],l=arguments[1];if(!this.isEquivalentClass(i))return!1;var h=i,u=this._shell,y=h._shell;if(!u.equalsExact(y,l)||this._holes.length!==h._holes.length)return!1;for(var w=0;w<this._holes.length;w++)if(!r._holes[w].equalsExact(h._holes[w],l))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);ah.sort(this._holes)}else if(arguments.length===2){var l=arguments[0],h=arguments[1];if(l.isEmpty())return null;var u=new Array(l.getCoordinates().length-1).fill(null);mi.arraycopy(l.getCoordinates(),0,u,0,u.length);var y=Yt.minCoordinate(l.getCoordinates());Yt.scroll(u,y),mi.arraycopy(u,0,l.getCoordinates(),0,u.length),l.getCoordinates()[u.length]=u[0],it.isCCW(l.getCoordinates())===h&&Yt.reverse(l.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var l=0;l<this._holes.length;l++)i+=r._holes[l].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),l=0;l<this._holes.length;l++)i+=r._holes[l].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var l=0;l<this._holes.length;l++)i._holes[l]=r._holes[l].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],l=this._shell,h=i._shell;return l.compareToSameClass(h)}else if(arguments.length===2){var u=arguments[0],y=arguments[1],w=u,E=this._shell,C=w._shell,T=E.compareToSameClass(C,y);if(T!==0)return T;for(var R=this.getNumInteriorRing(),O=w.getNumInteriorRing(),B=0;B<R&&B<O;){var Y=r.getInteriorRingN(B),$=w.getInteriorRingN(B),U=Y.compareToSameClass($,y);if(U!==0)return U;B++}return B<R?1:B<O?-1:0}},t.prototype.apply=function(r){var i=this;if(It(r,fl)){this._shell.apply(r);for(var l=0;l<this._holes.length;l++)i._holes[l].apply(r)}else if(It(r,Ws)){if(this._shell.apply(r),!r.isDone())for(var h=0;h<this._holes.length&&(i._holes[h].apply(r),!r.isDone());h++);r.isGeometryChanged()&&this.geometryChanged()}else if(It(r,Na))r.filter(this);else if(It(r,nu)){r.filter(this),this._shell.apply(r);for(var u=0;u<this._holes.length;u++)i._holes[u].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var l=0;l<this._holes.length;l++)i[l+1]=r._holes[l];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var l=0;l<this._holes.length;l++)i._holes[l]=r._holes[l].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),l=new Array(this._holes.length).fill(null),h=0;h<l.length;h++)l[h]=r._holes[h].copy();return new t(i,l,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[Ku]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(Ct),Of=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Ct.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return sn.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),l=0;l<i.length;l++)i[l]=r._geometries[l].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Uy]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(Wi),ml=function(e){function t(r,i){r instanceof Ee&&i instanceof Kt&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Ct.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return sn.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();ir.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new Fn("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new Fn("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Xn),hl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Ct.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,l=new Array(i).fill(null),h=0;h<this._geometries.length;h++)l[h]=r._geometries[h].reverse();return this.getFactory().createMultiPolygon(l)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new et,l=0;l<this._geometries.length;l++)for(var h=r._geometries[l],u=h.getBoundary(),y=0;y<u.getNumGeometries();y++)i.add(u.getGeometryN(y));var w=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(w))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),l=0;l<i.length;l++)i[l]=r._geometries[l].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Ku]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(Wi),xs=function(e){this._factory=e||null,this._isUserDataCopied=!1},Z1={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};xs.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};xs.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};xs.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof Wi?this.editGeometryCollection(e,t):e instanceof Ar?this.editPolygon(e,t):e instanceof Ao?t.edit(e,this._factory):e instanceof Xn?t.edit(e,this._factory):(Vt.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};xs.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new et,l=0;l<r.getNumGeometries();l++){var h=n.edit(r.getGeometryN(l),t);h===null||h.isEmpty()||i.add(h)}return r.getClass()===Of?this._factory.createMultiPoint(i.toArray([])):r.getClass()===_h?this._factory.createMultiLineString(i.toArray([])):r.getClass()===hl?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};xs.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var l=new et,h=0;h<r.getNumInteriorRing();h++){var u=n.edit(r.getInteriorRingN(h),t);u===null||u.isEmpty()||l.add(u)}return this._factory.createPolygon(i,l.toArray([]))};xs.prototype.interfaces_=function(){return[]};xs.prototype.getClass=function(){return xs};xs.GeometryEditorOperation=function(){};Z1.NoOpGeometryOperation.get=function(){return Gy};Z1.CoordinateOperation.get=function(){return qy};Z1.CoordinateSequenceOperation.get=function(){return Wy};Object.defineProperties(xs,Z1);var Gy=function(){};Gy.prototype.edit=function(e,t){return e};Gy.prototype.interfaces_=function(){return[xs.GeometryEditorOperation]};Gy.prototype.getClass=function(){return Gy};var qy=function(){};qy.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof ml?t.createLinearRing(n):e instanceof Xn?t.createLineString(n):e instanceof Ao?n.length>0?t.createPoint(n[0]):t.createPoint():e};qy.prototype.interfaces_=function(){return[xs.GeometryEditorOperation]};qy.prototype.getClass=function(){return qy};var Wy=function(){};Wy.prototype.edit=function(e,t){return e instanceof ml?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Xn?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Ao?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};Wy.prototype.interfaces_=function(){return[xs.GeometryEditorOperation]};Wy.prototype.getClass=function(){return Wy};var nr=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new Ee}else if(It(arguments[0],rn)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var l=arguments[0],h=arguments[1];this._coordinates=l,this._dimension=h,l===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],y=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=y;for(var w=0;w<u;w++)e._coordinates[w]=new Ee}}},U4={serialVersionUID:{configurable:!0}};nr.prototype.setOrdinate=function(e,t,n){switch(t){case rn.X:this._coordinates[e].x=n;break;case rn.Y:this._coordinates[e].y=n;break;case rn.Z:this._coordinates[e].z=n;break;default:throw new Fn("invalid ordinateIndex")}};nr.prototype.size=function(){return this._coordinates.length};nr.prototype.getOrdinate=function(e,t){switch(t){case rn.X:return this._coordinates[e].x;case rn.Y:return this._coordinates[e].y;case rn.Z:return this._coordinates[e].z}return kt.NaN};nr.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};nr.prototype.getCoordinateCopy=function(e){return new Ee(this._coordinates[e])};nr.prototype.getDimension=function(){return this._dimension};nr.prototype.getX=function(e){return this._coordinates[e].x};nr.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new nr(t,this._dimension)};nr.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};nr.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new nr(t,this._dimension)};nr.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new Ga(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};nr.prototype.getY=function(e){return this._coordinates[e].y};nr.prototype.toCoordinateArray=function(){return this._coordinates};nr.prototype.interfaces_=function(){return[rn,Ss]};nr.prototype.getClass=function(){return nr};U4.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(nr,U4);var gl=function(){},aI={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};gl.prototype.readResolve=function(){return gl.instance()};gl.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new nr(e)}else if(It(arguments[0],rn)){var t=arguments[0];return new nr(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new nr(n):new nr(n,r)}};gl.prototype.interfaces_=function(){return[Mf,Ss]};gl.prototype.getClass=function(){return gl};gl.instance=function(){return gl.instanceObject};aI.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};aI.instanceObject.get=function(){return new gl};Object.defineProperties(gl,aI);var G4=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new et,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new oI;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(Qp),ln=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ra){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},lI={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ln.prototype.equals=function(e){if(!(e instanceof ln))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};ln.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Aa(n).compareTo(new Aa(r))};ln.prototype.getScale=function(){return this._scale};ln.prototype.isFloating=function(){return this._modelType===ln.FLOATING||this._modelType===ln.FLOATING_SINGLE};ln.prototype.getType=function(){return this._modelType};ln.prototype.toString=function(){var e="UNKNOWN";return this._modelType===ln.FLOATING?e="Floating":this._modelType===ln.FLOATING_SINGLE?e="Floating-Single":this._modelType===ln.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};ln.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(kt.isNaN(e))return e;if(this._modelType===ln.FLOATING_SINGLE){var t=e;return t}return this._modelType===ln.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof Ee){var n=arguments[0];if(this._modelType===ln.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};ln.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===ln.FLOATING?e=16:this._modelType===ln.FLOATING_SINGLE?e=6:this._modelType===ln.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};ln.prototype.setScale=function(e){this._scale=Math.abs(e)};ln.prototype.interfaces_=function(){return[Ss,ws]};ln.prototype.getClass=function(){return ln};ln.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};lI.serialVersionUID.get=function(){return 7777263578777804e3};lI.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(ln,lI);var Ra=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},uI={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ra.prototype.readResolve=function(){return Ra.nameToTypeMap.get(this._name)};Ra.prototype.toString=function(){return this._name};Ra.prototype.interfaces_=function(){return[Ss]};Ra.prototype.getClass=function(){return Ra};uI.serialVersionUID.get=function(){return-552860263173159e4};uI.nameToTypeMap.get=function(){return new G4};Object.defineProperties(Ra,uI);ln.Type=Ra;ln.FIXED=new Ra("FIXED");ln.FLOATING=new Ra("FLOATING");ln.FLOATING_SINGLE=new Ra("FLOATING SINGLE");var Kt=function e(){this._precisionModel=new ln,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?It(arguments[0],Mf)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ln&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},q4={serialVersionUID:{configurable:!0}};Kt.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Ee(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Ee(e.getMinX(),e.getMinY()),new Ee(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Ee(e.getMinX(),e.getMinY()),new Ee(e.getMinX(),e.getMaxY()),new Ee(e.getMaxX(),e.getMaxY()),new Ee(e.getMaxX(),e.getMinY()),new Ee(e.getMinX(),e.getMinY())]),null)};Kt.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new Xn(this.getCoordinateSequenceFactory().create(e),this);if(It(e,rn))return new Xn(e,this)}else return new Xn(this.getCoordinateSequenceFactory().create([]),this)};Kt.prototype.createMultiLineString=function(){if(arguments.length===0)return new _h(null,this);if(arguments.length===1){var e=arguments[0];return new _h(e,this)}};Kt.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var l=i.next(),h=l.getClass();t===null&&(t=h),h!==t&&(n=!0),l.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Kt.toGeometryArray(e));var u=e.iterator().next(),y=e.size()>1;if(y){if(u instanceof Ar)return this.createMultiPolygon(Kt.toPolygonArray(e));if(u instanceof Xn)return this.createMultiLineString(Kt.toLineStringArray(e));if(u instanceof Ao)return this.createMultiPoint(Kt.toPointArray(e));Vt.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u};Kt.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};Kt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Ee){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(It(arguments[0],rn)){var t=arguments[0];return new Ao(t,this)}}};Kt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};Kt.prototype.createPolygon=function(){if(arguments.length===0)return new Ar(null,null,this);if(arguments.length===1){if(It(arguments[0],rn)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof ml){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Ar(r,i,this)}};Kt.prototype.getSRID=function(){return this._SRID};Kt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new Wi(null,this);if(arguments.length===1){var e=arguments[0];return new Wi(e,this)}};Kt.prototype.createGeometry=function(e){var t=new xs(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};Kt.prototype.getPrecisionModel=function(){return this._precisionModel};Kt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(It(arguments[0],rn)){var t=arguments[0];return new ml(t,this)}}};Kt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new hl(null,this);if(arguments.length===1){var e=arguments[0];return new hl(e,this)}};Kt.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new Of(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Of(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(It(arguments[0],rn)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),l=0;l<r.size();l++){var h=e.getCoordinateSequenceFactory().create(1,r.getDimension());ir.copy(r,l,h,0,1),i[l]=e.createPoint(h)}return this.createMultiPoint(i)}}};Kt.prototype.interfaces_=function(){return[Ss]};Kt.prototype.getClass=function(){return Kt};Kt.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.getDefaultCoordinateSequenceFactory=function(){return gl.instance()};Kt.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kt.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};q4.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(Kt,q4);var qZ=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],X1=function(e){this.geometryFactory=e||new Kt};X1.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!va[n])throw new Error("Unknown GeoJSON type: "+t.type);return qZ.indexOf(n)!==-1?va[n].apply(this,[t.coordinates]):n==="GeometryCollection"?va[n].apply(this,[t.geometries]):va[n].apply(this,[t])};X1.prototype.write=function(e){var t=e.getGeometryType();if(!Vl[t])throw new Error("Geometry is not supported");return Vl[t].apply(this,[e])};var va={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!va[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=va.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new Ee(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new Ee(e[0],e[1]),new Ee(e[2],e[1]),new Ee(e[2],e[3]),new Ee(e[0],e[3]),new Ee(e[0],e[1])])},Point:function(e){var t=new Ee(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(va.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=va.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(va.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=va.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],l=1;l<e.length;++l){var h=e[l],u=va.coordinates.apply(t,[h]),y=t.geometryFactory.createLinearRing(u);i.push(y)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(va.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Vl={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Vl.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],l=Vl.Point.apply(t,[i]);n.push(l.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var l=r[i];n.push(Vl.coordinate.apply(t,[l]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],l=Vl.LineString.apply(t,[i]);n.push(l.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=Vl.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var l=e._holes[i],h=Vl.LineString.apply(t,[l]);n.push(h.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],l=Vl.Polygon.apply(t,[i]);n.push(l.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],l=i.getGeometryType();n.push(Vl[l].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},cI=function(e){this.geometryFactory=e||new Kt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new X1(this.geometryFactory)};cI.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===ln.FIXED&&this.reducePrecision(t),t};cI.prototype.reducePrecision=function(e){var t=this,n,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,r=e.points.length;n<r;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,r=e.geometries.length;n<r;n++)t.reducePrecision(e.geometries[n])};var W4=function(){this.parser=new X1(this.geometryFactory)};W4.prototype.write=function(e){return this.parser.write(e)};var We=function(){},K1={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};We.opposite=function(e){return e===We.LEFT?We.RIGHT:e===We.RIGHT?We.LEFT:e};K1.ON.get=function(){return 0};K1.LEFT.get=function(){return 1};K1.RIGHT.get=function(){return 2};Object.defineProperties(We,K1);function Y1(e){this.message=e||""}Y1.prototype=new Error;Y1.prototype.name="EmptyStackException";function qa(){this.array_=[]}qa.prototype=new Vs;qa.prototype.add=function(e){return this.array_.push(e),!0};qa.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};qa.prototype.push=function(e){return this.array_.push(e),e};qa.prototype.pop=function(e){if(this.array_.length===0)throw new Y1;return this.array_.pop()};qa.prototype.peek=function(){if(this.array_.length===0)throw new Y1;return this.array_[this.array_.length-1]};qa.prototype.empty=function(){return this.array_.length===0};qa.prototype.isEmpty=function(){return this.empty()};qa.prototype.search=function(e){return this.array_.indexOf(e)};qa.prototype.size=function(){return this.array_.length};qa.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var Da=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Da.prototype.getCoordinate=function(){return this._minCoord};Da.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};Da.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Vt.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=it.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===it.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===it.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};Da.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=We.LEFT;return r[t].y<r[t+1].y&&(i=We.RIGHT),i};Da.prototype.getEdge=function(){return this._orientedDe};Da.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};Da.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};Da.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}Vt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===We.LEFT&&(this._orientedDe=this._minDe.getSym())};Da.prototype.interfaces_=function(){return[]};Da.prototype.getClass=function(){return Da};var ru=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new Ee(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(tu),J1=function(){this.array_=[]};J1.prototype.addLast=function(e){this.array_.push(e)};J1.prototype.removeFirst=function(){return this.array_.shift()};J1.prototype.isEmpty=function(){return this.array_.length===0};var Hi=function(){this._finder=null,this._dirEdgeList=new et,this._nodes=new et,this._rightMostCoord=null,this._env=null,this._finder=new Da};Hi.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};Hi.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};Hi.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new ru("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var l=e.getEdges().iterator();l.hasNext();){var h=l.next();h.setVisited(!0),t.copySymDepths(h)}};Hi.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(We.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};Hi.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};Hi.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(We.RIGHT)>=1&&t.getDepth(We.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};Hi.prototype.computeDepths=function(e){var t=this,n=new oI,r=new J1,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var l=r.removeFirst();n.add(l),t.computeNodeDepth(l);for(var h=l.getEdges().iterator();h.hasNext();){var u=h.next(),y=u.getSym();if(!y.isVisited()){var w=y.getNode();n.contains(w)||(r.addLast(w),n.add(w))}}}};Hi.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};Hi.prototype.getEnvelope=function(){if(this._env===null){for(var e=new _t,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};Hi.prototype.addReachable=function(e){var t=this,n=new qa;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};Hi.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(We.LEFT,e.getDepth(We.RIGHT)),t.setDepth(We.RIGHT,e.getDepth(We.LEFT))};Hi.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var l=i.getSym(),h=l.getNode();h.isVisited()||t.push(h)}};Hi.prototype.getNodes=function(){return this._nodes};Hi.prototype.getDirectedEdges=function(){return this._dirEdgeList};Hi.prototype.interfaces_=function(){return[ws]};Hi.prototype.getClass=function(){return Hi};var Ln=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[We.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var l=0;l<this.location.length;l++)t.location[l]=i.location[l]}}else if(arguments.length===3){var h=arguments[0],u=arguments[1],y=arguments[2];this.init(3),this.location[We.ON]=h,this.location[We.LEFT]=u,this.location[We.RIGHT]=y}};Ln.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};Ln.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==Ie.NONE)return!1;return!0};Ln.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===Ie.NONE&&(t.location[n]=e)};Ln.prototype.isLine=function(){return this.location.length===1};Ln.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[We.ON]=this.location[We.ON],n[We.LEFT]=Ie.NONE,n[We.RIGHT]=Ie.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===Ie.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};Ln.prototype.getLocations=function(){return this.location};Ln.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[We.LEFT];this.location[We.LEFT]=this.location[We.RIGHT],this.location[We.RIGHT]=e};Ln.prototype.toString=function(){var e=new Ga;return this.location.length>1&&e.append(Ie.toLocationSymbol(this.location[We.LEFT])),e.append(Ie.toLocationSymbol(this.location[We.ON])),this.location.length>1&&e.append(Ie.toLocationSymbol(this.location[We.RIGHT])),e.toString()};Ln.prototype.setLocations=function(e,t,n){this.location[We.ON]=e,this.location[We.LEFT]=t,this.location[We.RIGHT]=n};Ln.prototype.get=function(e){return e<this.location.length?this.location[e]:Ie.NONE};Ln.prototype.isArea=function(){return this.location.length>1};Ln.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===Ie.NONE)return!0;return!1};Ln.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(We.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};Ln.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(Ie.NONE)};Ln.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};Ln.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};var hn=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ln(t),this.elt[1]=new Ln(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Ln(n.elt[0]),this.elt[1]=new Ln(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new Ln(Ie.NONE),this.elt[1]=new Ln(Ie.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var l=arguments[0],h=arguments[1],u=arguments[2];this.elt[0]=new Ln(l,h,u),this.elt[1]=new Ln(l,h,u)}else if(arguments.length===4){var y=arguments[0],w=arguments[1],E=arguments[2],C=arguments[3];this.elt[0]=new Ln(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[1]=new Ln(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[y].setLocations(w,E,C)}};hn.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};hn.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};hn.prototype.isNull=function(e){return this.elt[e].isNull()};hn.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};hn.prototype.isLine=function(e){return this.elt[e].isLine()};hn.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new Ln(e.elt[n]):t.elt[n].merge(e.elt[n])};hn.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};hn.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(We.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};hn.prototype.toString=function(){var e=new Ga;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};hn.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};hn.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};hn.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(We.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};hn.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};hn.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};hn.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Ln(this.elt[e].location[0]))};hn.prototype.interfaces_=function(){return[]};hn.prototype.getClass=function(){return hn};hn.toLineLabel=function(e){for(var t=new hn(Ie.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var _r=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new et,this._pts=new et,this._label=new hn(Ie.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new et,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};_r.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=it.isCCW(this._ring.getCoordinates())};_r.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};_r.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new ru("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new ru("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();Vt.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};_r.prototype.getLinearRing=function(){return this._ring};_r.prototype.getCoordinate=function(e){return this._pts.get(e)};_r.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};_r.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var l=1;n&&(l=0);for(var h=l;h<i.length;h++)r._pts.add(i[h])}else{var u=i.length-2;n&&(u=i.length-1);for(var y=u;y>=0;y--)r._pts.add(i[y])}};_r.prototype.isHole=function(){return this._isHole};_r.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};_r.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!it.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};_r.prototype.addHole=function(e){this._holes.add(e)};_r.prototype.isShell=function(){return this._shell===null};_r.prototype.getLabel=function(){return this._label};_r.prototype.getEdges=function(){return this._edges};_r.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};_r.prototype.getShell=function(){return this._shell};_r.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,We.RIGHT);if(r===Ie.NONE)return null;if(this._label.getLocation(n)===Ie.NONE)return this._label.setLocation(n,r),null}};_r.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};_r.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};_r.prototype.interfaces_=function(){return[]};_r.prototype.getClass=function(){return _r};var WZ=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_r),HZ=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new et,i=this._startDe;do{if(i.getMinEdgeRing()===null){var l=new WZ(i,n._geometryFactory);r.add(l)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_r),es=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};es.prototype.setVisited=function(e){this._isVisited=e};es.prototype.setInResult=function(e){this._isInResult=e};es.prototype.isCovered=function(){return this._isCovered};es.prototype.isCoveredSet=function(){return this._isCoveredSet};es.prototype.setLabel=function(e){this._label=e};es.prototype.getLabel=function(){return this._label};es.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};es.prototype.updateIM=function(e){Vt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};es.prototype.isInResult=function(){return this._isInResult};es.prototype.isVisited=function(){return this._isVisited};es.prototype.interfaces_=function(){return[]};es.prototype.getClass=function(){return es};var Q1=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new hn(0,Ie.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=Ie.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var l=n.getLocation(r);i!==Ie.BOUNDARY&&(i=l)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new hn(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof hn)for(var i=arguments[0],l=0;l<2;l++){var h=n.computeMergedLocation(i,l),u=n._label.getLocation(l);u===Ie.NONE&&n._label.setLocation(l,h)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=Ie.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case Ie.BOUNDARY:i=Ie.INTERIOR;break;case Ie.INTERIOR:i=Ie.BOUNDARY;break;default:i=Ie.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(es),Oa=function(){this.nodeMap=new Ii,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Oa.prototype.find=function(e){return this.nodeMap.get(e)};Oa.prototype.addNode=function(){if(arguments[0]instanceof Ee){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof Q1){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};Oa.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Oa.prototype.iterator=function(){return this.nodeMap.values().iterator()};Oa.prototype.values=function(){return this.nodeMap.values()};Oa.prototype.getBoundaryNodes=function(e){for(var t=new et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===Ie.BOUNDARY&&t.add(r)}return t};Oa.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Oa.prototype.interfaces_=function(){return[]};Oa.prototype.getClass=function(){return Oa};var mn=function(){},b0={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};mn.isNorthern=function(e){return e===mn.NE||e===mn.NW};mn.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};mn.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};mn.isInHalfPlane=function(e,t){return t===mn.SE?e===mn.SE||e===mn.SW:e===t||e===t+1};mn.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new Fn("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?mn.NE:mn.SE:t>=0?mn.NW:mn.SW}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Ee){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Fn("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?mn.NE:mn.SE:r.y>=n.y?mn.NW:mn.SW}};b0.NE.get=function(){return 0};b0.NW.get=function(){return 1};b0.SW.get=function(){return 2};b0.SE.get=function(){return 3};Object.defineProperties(mn,b0);var Ti=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var l=arguments[0],h=arguments[1],u=arguments[2],y=arguments[3];this._edge=l,this.init(h,u),this._label=y}};Ti.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:it.computeOrientation(e._p0,e._p1,this._p1)};Ti.prototype.getDy=function(){return this._dy};Ti.prototype.getCoordinate=function(){return this._p0};Ti.prototype.setNode=function(e){this._node=e};Ti.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};Ti.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};Ti.prototype.getDirectedCoordinate=function(){return this._p1};Ti.prototype.getDx=function(){return this._dx};Ti.prototype.getLabel=function(){return this._label};Ti.prototype.getEdge=function(){return this._edge};Ti.prototype.getQuadrant=function(){return this._quadrant};Ti.prototype.getNode=function(){return this._node};Ti.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};Ti.prototype.computeLabel=function(e){};Ti.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=mn.quadrant(this._dx,this._dy),Vt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Ti.prototype.interfaces_=function(){return[ws]};Ti.prototype.getClass=function(){return Ti};var YS=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new hn(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new ru("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,We.LEFT)===Ie.INTERIOR&&n._label.getLocation(i,We.RIGHT)===Ie.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[We.LEFT]+"/"+this._depth[We.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ie.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ie.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var l=1;n===We.LEFT&&(l=-1);var h=We.opposite(n),u=i*l,y=r+u;this.setDepth(n,r),this.setDepth(h,y)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===Ie.EXTERIOR&&r===Ie.INTERIOR?1:n===Ie.INTERIOR&&r===Ie.EXTERIOR?-1:0},t}(Ti),zf=function(){};zf.prototype.createNode=function(e){return new Q1(e,null)};zf.prototype.interfaces_=function(){return[]};zf.prototype.getClass=function(){return zf};var Vn=function(){if(this._edges=new et,this._nodes=null,this._edgeEndList=new et,arguments.length===0)this._nodes=new Oa(new zf);else if(arguments.length===1){var e=arguments[0];this._nodes=new Oa(e)}};Vn.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};Vn.prototype.find=function(e){return this._nodes.find(e)};Vn.prototype.addNode=function(){if(arguments[0]instanceof Q1){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof Ee){var t=arguments[0];return this._nodes.addNode(t)}};Vn.prototype.getNodeIterator=function(){return this._nodes.iterator()};Vn.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};Vn.prototype.debugPrintln=function(e){mi.out.println(e)};Vn.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===Ie.BOUNDARY};Vn.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};Vn.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?it.computeOrientation(e,t,r)===it.COLLINEAR&&mn.quadrant(e,t)===mn.quadrant(n,r):!1};Vn.prototype.getEdgeEnds=function(){return this._edgeEndList};Vn.prototype.debugPrint=function(e){mi.out.print(e)};Vn.prototype.getEdgeIterator=function(){return this._edges.iterator()};Vn.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),l=i.getCoordinates();if(n.matchInSameDirection(e,t,l[0],l[1])||n.matchInSameDirection(e,t,l[l.length-1],l[l.length-2]))return i}return null};Vn.prototype.insertEdge=function(e){this._edges.add(e)};Vn.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};Vn.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new YS(r,!0),l=new YS(r,!1);i.setSym(l),l.setSym(i),t.add(i),t.add(l)}};Vn.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};Vn.prototype.getNodes=function(){return this._nodes.values()};Vn.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),l=i.getCoordinates();if(e.equals(l[0])&&t.equals(l[1]))return i}return null};Vn.prototype.interfaces_=function(){return[]};Vn.prototype.getClass=function(){return Vn};Vn.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var ko=function(){this._geometryFactory=null,this._shellList=new et;var e=arguments[0];this._geometryFactory=e};ko.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};ko.prototype.computePolygons=function(e){for(var t=this,n=new et,r=e.iterator();r.hasNext();){var i=r.next(),l=i.toPolygon(t._geometryFactory);n.add(l)}return n};ko.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var l=n.findEdgeRingContaining(i,e);if(l===null)throw new ru("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(l)}}};ko.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new et,l=e.iterator();l.hasNext();){var h=l.next();if(h.getMaxNodeDegree()>2){h.linkDirectedEdgesForMinimalEdgeRings();var u=h.buildMinimalRings(),y=r.findShell(u);y!==null?(r.placePolygonHoles(y,u),t.add(y)):n.addAll(u)}else i.add(h)}return i};ko.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};ko.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new et,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var l=new HZ(i,t._geometryFactory);n.add(l),l.setInResult()}}return n};ko.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};ko.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};ko.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),l=null,h=null,u=t.iterator();u.hasNext();){var y=u.next(),w=y.getLinearRing(),E=w.getEnvelopeInternal();l!==null&&(h=l.getLinearRing().getEnvelopeInternal());var C=!1;E.contains(r)&&it.isPointInRing(i,w.getCoordinates())&&(C=!0),C&&(l===null||h.contains(E))&&(l=y)}return l};ko.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return Vt.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};ko.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];Vn.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new et,l=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(l,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};ko.prototype.interfaces_=function(){return[]};ko.prototype.getClass=function(){return ko};var Ff=function(){};Ff.prototype.getBounds=function(){};Ff.prototype.interfaces_=function(){return[]};Ff.prototype.getClass=function(){return Ff};var Hs=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Hs.prototype.getItem=function(){return this._item};Hs.prototype.getBounds=function(){return this._bounds};Hs.prototype.interfaces_=function(){return[Ff,Ss]};Hs.prototype.getClass=function(){return Hs};var iu=function(){this._size=null,this._items=null,this._size=0,this._items=new et,this._items.add(null)};iu.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};iu.prototype.size=function(){return this._size};iu.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};iu.prototype.clear=function(){this._size=0,this._items.clear()};iu.prototype.isEmpty=function(){return this._size===0};iu.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};iu.prototype.interfaces_=function(){return[]};iu.prototype.getClass=function(){return iu};var Yu=function(){};Yu.prototype.visitItem=function(e){};Yu.prototype.interfaces_=function(){return[]};Yu.prototype.getClass=function(){return Yu};var Ap=function(){};Ap.prototype.insert=function(e,t){};Ap.prototype.remove=function(e,t){};Ap.prototype.query=function(){};Ap.prototype.interfaces_=function(){return[]};Ap.prototype.getClass=function(){return Ap};var Ir=function(){if(this._childBoundables=new et,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},H4={serialVersionUID:{configurable:!0}};Ir.prototype.getLevel=function(){return this._level};Ir.prototype.size=function(){return this._childBoundables.size()};Ir.prototype.getChildBoundables=function(){return this._childBoundables};Ir.prototype.addChildBoundable=function(e){Vt.isTrue(this._bounds===null),this._childBoundables.add(e)};Ir.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Ir.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Ir.prototype.interfaces_=function(){return[Ff,Ss]};Ir.prototype.getClass=function(){return Ir};H4.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Ir,H4);var Zs=function(){};Zs.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};Zs.min=function(e){return Zs.sort(e),e.get(0)};Zs.sort=function(e,t){var n=e.toArray();t?ah.sort(n,t):ah.sort(n);for(var r=e.iterator(),i=0,l=n.length;i<l;i++)r.next(),r.set(n[i])};Zs.singletonList=function(e){var t=new et;return t.add(e),t};var mr=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};mr.prototype.expandToQueue=function(e,t){var n=mr.isComposite(this._boundable1),r=mr.isComposite(this._boundable2);if(n&&r)return mr.area(this._boundable1)>mr.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new Fn("neither boundable is composite")};mr.prototype.isLeaves=function(){return!(mr.isComposite(this._boundable1)||mr.isComposite(this._boundable2))};mr.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};mr.prototype.expand=function(e,t,n,r){for(var i=this,l=e.getChildBoundables(),h=l.iterator();h.hasNext();){var u=h.next(),y=new mr(u,t,i._itemDistance);y.getDistance()<r&&n.add(y)}};mr.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};mr.prototype.getDistance=function(){return this._distance};mr.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};mr.prototype.interfaces_=function(){return[ws]};mr.prototype.getClass=function(){return mr};mr.area=function(e){return e.getBounds().getArea()};mr.isComposite=function(e){return e instanceof Ir};var Jr=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new et,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];Vt.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},eb={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Jr.prototype.getNodeCapacity=function(){return this._nodeCapacity};Jr.prototype.lastNode=function(e){return e.get(e.size()-1)};Jr.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ir?n+=e.size(i):i instanceof Hs&&(n+=1)}return n}};Jr.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Hs&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};Jr.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new et:t}else if(arguments.length===1){for(var n=arguments[0],r=new et,i=n.getChildBoundables().iterator();i.hasNext();){var l=i.next();if(l instanceof Ir){var h=e.itemsTree(l);h!==null&&r.add(h)}else l instanceof Hs?r.add(l.getItem()):Vt.shouldNeverReachHere()}return r.size()<=0?null:r}};Jr.prototype.insert=function(e,t){Vt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Hs(e,t))};Jr.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new et;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2];if(Vt.isTrue(r>-2),i.getLevel()===r)return l.add(i),null;for(var h=i.getChildBoundables().iterator();h.hasNext();){var u=h.next();u instanceof Ir?e.boundablesAtLevel(r,u,l):(Vt.isTrue(u instanceof Hs),r===-1&&l.add(u))}return null}};Jr.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(It(arguments[2],Yu)&&arguments[0]instanceof Object&&arguments[1]instanceof Ir)for(var l=arguments[0],h=arguments[1],u=arguments[2],y=h.getChildBoundables(),w=0;w<y.size();w++){var E=y.get(w);e.getIntersectsOp().intersects(E.getBounds(),l)&&(E instanceof Ir?e.query(l,E,u):E instanceof Hs?u.visitItem(E.getItem()):Vt.shouldNeverReachHere())}else if(It(arguments[2],Vs)&&arguments[0]instanceof Object&&arguments[1]instanceof Ir)for(var C=arguments[0],T=arguments[1],R=arguments[2],O=T.getChildBoundables(),B=0;B<O.size();B++){var Y=O.get(B);e.getIntersectsOp().intersects(Y.getBounds(),C)&&(Y instanceof Ir?e.query(C,Y,R):Y instanceof Hs?R.add(Y.getItem()):Vt.shouldNeverReachHere())}}};Jr.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Jr.prototype.getRoot=function(){return this.build(),this._root};Jr.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2],h=this.removeItem(i,l);if(h)return!0;for(var u=null,y=i.getChildBoundables().iterator();y.hasNext();){var w=y.next();if(e.getIntersectsOp().intersects(w.getBounds(),r)&&w instanceof Ir&&(h=e.remove(r,w,l),h)){u=w;break}}return u!==null&&u.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(u),h}};Jr.prototype.createHigherLevels=function(e,t){Vt.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};Jr.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ir){var l=e.depth(i);l>n&&(n=l)}}return n+1}};Jr.prototype.createParentBoundables=function(e,t){var n=this;Vt.isTrue(!e.isEmpty());var r=new et;r.add(this.createNode(t));var i=new et(e);Zs.sort(i,this.getComparator());for(var l=i.iterator();l.hasNext();){var h=l.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(h)}return r};Jr.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Jr.prototype.interfaces_=function(){return[Ss]};Jr.prototype.getClass=function(){return Jr};Jr.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};eb.IntersectsOp.get=function(){return ZZ};eb.serialVersionUID.get=function(){return-3886435814360241e3};eb.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Jr,eb);var ZZ=function(){},Bf=function(){};Bf.prototype.distance=function(e,t){};Bf.prototype.interfaces_=function(){return[]};Bf.prototype.getClass=function(){return Bf};var Z4=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var l=this;Vt.isTrue(r.length>0);for(var h=new et,u=0;u<r.length;u++)h.addAll(l.createParentBoundablesFromVerticalSlice(r[u],i));return h},t.prototype.createNode=function(r){return new WA(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var l=Math.trunc(Math.ceil(r.size()/i)),h=new Array(i).fill(null),u=r.iterator(),y=0;y<i;y++){h[y]=new et;for(var w=0;u.hasNext()&&w<l;){var E=u.next();h[y].add(E),w++}}return h},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],l=arguments[1];e.prototype.query.call(this,i,l)}else if(arguments.length===3){if(It(arguments[2],Yu)&&arguments[0]instanceof Object&&arguments[1]instanceof Ir){var h=arguments[0],u=arguments[1],y=arguments[2];e.prototype.query.call(this,h,u,y)}else if(It(arguments[2],Vs)&&arguments[0]instanceof Object&&arguments[1]instanceof Ir){var w=arguments[0],E=arguments[1],C=arguments[2];e.prototype.query.call(this,w,E,C)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){Vt.isTrue(!r.isEmpty());var l=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),h=new et(r);Zs.sort(h,t.xComparator);var u=this.verticalSlices(h,Math.trunc(Math.ceil(Math.sqrt(l))));return this.createParentBoundablesFromVerticalSlices(u,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(It(arguments[0],Bf)){var r=arguments[0],i=new mr(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof mr){var l=arguments[0];return this.nearestNeighbour(l,kt.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&It(arguments[1],Bf)){var h=arguments[0],u=arguments[1],y=new mr(this.getRoot(),h.getRoot(),u);return this.nearestNeighbour(y)}else if(arguments[0]instanceof mr&&typeof arguments[1]=="number"){var w=arguments[0],E=arguments[1],C=E,T=null,R=new iu;for(R.add(w);!R.isEmpty()&&C>0;){var O=R.poll(),B=O.getDistance();if(B>=C)break;O.isLeaves()?(C=B,T=O):O.expandToQueue(R,C)}return[T.getBoundable(0).getItem(),T.getBoundable(1).getItem()]}}else if(arguments.length===3){var Y=arguments[0],$=arguments[1],U=arguments[2],G=new Hs(Y,$),re=new mr(this.getRoot(),G,U);return this.nearestNeighbour(re)[0]}},t.prototype.interfaces_=function(){return[Ap,Ss]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return WA},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Lf]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Lf]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Jr),WA=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new _t(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ir),ao=function(){};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};ao.relativeSign=function(e,t){return e<t?-1:e>t?1:0};ao.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=ao.relativeSign(t.x,n.x),i=ao.relativeSign(t.y,n.y);switch(e){case 0:return ao.compareValue(r,i);case 1:return ao.compareValue(i,r);case 2:return ao.compareValue(i,-r);case 3:return ao.compareValue(-r,i);case 4:return ao.compareValue(-r,-i);case 5:return ao.compareValue(-i,-r);case 6:return ao.compareValue(-i,r);case 7:return ao.compareValue(r,-i)}return Vt.shouldNeverReachHere("invalid octant value"),0};ao.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var Ju=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new Ee(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};Ju.prototype.getCoordinate=function(){return this.coord};Ju.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};Ju.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:ao.compare(this._segmentOctant,this.coord,t.coord)};Ju.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};Ju.prototype.isInterior=function(){return this._isInterior};Ju.prototype.interfaces_=function(){return[ws]};Ju.prototype.getClass=function(){return Ju};var Zi=function(){this._nodeMap=new Ii,this._edge=null;var e=arguments[0];this._edge=e};Zi.prototype.getSplitCoordinates=function(){var e=this,t=new v0;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};Zi.prototype.addCollapsedNodes=function(){var e=this,t=new et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};Zi.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Zi.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new Aa(n+1))}};Zi.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),l=t.isInterior()||!t.coord.equals2D(i);n.add(new Ee(e.coord),!1);for(var h=e.segmentIndex+1;h<=t.segmentIndex;h++)n.add(r._edge.getCoordinate(h));l&&n.add(new Ee(t.coord))};Zi.prototype.iterator=function(){return this._nodeMap.values().iterator()};Zi.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),l=t.createSplitEdge(r,i);e.add(l),r=i}};Zi.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};Zi.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var l=r.next(),h=t.findCollapseIndex(i,l,n);h&&e.add(new Aa(n[0])),i=l}};Zi.prototype.getEdge=function(){return this._edge};Zi.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};Zi.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),l=t.isInterior()||!t.coord.equals2D(i);l||r--;var h=new Array(r).fill(null),u=0;h[u++]=new Ee(e.coord);for(var y=e.segmentIndex+1;y<=t.segmentIndex;y++)h[u++]=n._edge.getCoordinate(y);return l&&(h[u]=new Ee(t.coord)),new or(h,this._edge.getData())};Zi.prototype.add=function(e,t){var n=new Ju(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(Vt.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};Zi.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new tu("bad split edge start point at "+r);var i=e.get(e.size()-1),l=i.getCoordinates(),h=l[l.length-1];if(!h.equals2D(t[t.length-1]))throw new tu("bad split edge end point at "+h)};Zi.prototype.interfaces_=function(){return[]};Zi.prototype.getClass=function(){return Zi};var kp=function(){};kp.prototype.interfaces_=function(){return[]};kp.prototype.getClass=function(){return kp};kp.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new Fn("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Ee){var i=arguments[0],l=arguments[1],h=l.x-i.x,u=l.y-i.y;if(h===0&&u===0)throw new Fn("Cannot compute the octant for two identical points "+i);return kp.octant(h,u)}};var yl=function(){};yl.prototype.getCoordinates=function(){};yl.prototype.size=function(){};yl.prototype.getCoordinate=function(e){};yl.prototype.isClosed=function(){};yl.prototype.setData=function(e){};yl.prototype.getData=function(){};yl.prototype.interfaces_=function(){return[]};yl.prototype.getClass=function(){return yl};var Hy=function(){};Hy.prototype.addIntersection=function(e,t){};Hy.prototype.interfaces_=function(){return[yl]};Hy.prototype.getClass=function(){return Hy};var or=function(){this._nodeList=new Zi(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};or.prototype.getCoordinates=function(){return this._pts};or.prototype.size=function(){return this._pts.length};or.prototype.getCoordinate=function(e){return this._pts[e]};or.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};or.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};or.prototype.setData=function(e){this._data=e};or.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:kp.octant(e,t)};or.prototype.getData=function(){return this._data};or.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],l=new Ee(n.getIntersection(i));this.addIntersection(l,r)}};or.prototype.toString=function(){return qs.toLineString(new nr(this._pts))};or.prototype.getNodeList=function(){return this._nodeList};or.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var l=this._nodeList.add(e,n);return l};or.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};or.prototype.interfaces_=function(){return[Hy]};or.prototype.getClass=function(){return or};or.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new et;return or.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var l=i.next();l.getNodeList().addSplitEdges(r)}};var bt=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Ee,this.p1=new Ee;else if(arguments.length===1){var e=arguments[0];this.p0=new Ee(e.p0),this.p1=new Ee(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Ee(t,n),this.p1=new Ee(r,i)}},X4={serialVersionUID:{configurable:!0}};bt.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};bt.prototype.orientationIndex=function(){if(arguments[0]instanceof bt){var e=arguments[0],t=it.orientationIndex(this.p0,this.p1,e.p0),n=it.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof Ee){var r=arguments[0];return it.orientationIndex(this.p0,this.p1,r)}};bt.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};bt.prototype.isVertical=function(){return this.p0.x===this.p1.x};bt.prototype.equals=function(e){if(!(e instanceof bt))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};bt.prototype.intersection=function(e){var t=new kh;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};bt.prototype.project=function(){if(arguments[0]instanceof Ee){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new Ee(e);var t=this.projectionFactor(e),n=new Ee;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof bt){var r=arguments[0],i=this.projectionFactor(r.p0),l=this.projectionFactor(r.p1);if(i>=1&&l>=1||i<=0&&l<=0)return null;var h=this.project(r.p0);i<0&&(h=this.p0),i>1&&(h=this.p1);var u=this.project(r.p1);return l<0&&(u=this.p0),l>1&&(u=this.p1),new bt(h,u)}};bt.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};bt.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};bt.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};bt.prototype.distancePerpendicular=function(e){return it.distancePointLinePerpendicular(e,this.p0,this.p1)};bt.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};bt.prototype.midPoint=function(){return bt.midPoint(this.p0,this.p1)};bt.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return kt.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};bt.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=kt.MAX_VALUE,i=null,l=this.closestPoint(e.p0);r=l.distance(e.p0),n[0]=l,n[1]=e.p0;var h=this.closestPoint(e.p1);i=h.distance(e.p1),i<r&&(r=i,n[0]=h,n[1]=e.p1);var u=e.closestPoint(this.p0);i=u.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=u);var y=e.closestPoint(this.p1);return i=y.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=y),n};bt.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};bt.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};bt.prototype.getLength=function(){return this.p0.distance(this.p1)};bt.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};bt.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};bt.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};bt.prototype.lineIntersection=function(e){try{var t=$s.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof im))throw n}finally{}return null};bt.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};bt.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,l=this.p1.y-this.p0.y,h=Math.sqrt(i*i+l*l),u=0,y=0;if(t!==0){if(h<=0)throw new Error("Cannot compute offset from zero-length line segment");u=t*i/h,y=t*l/h}var w=n-y,E=r+u,C=new Ee(w,E);return C};bt.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};bt.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||kt.isNaN(t))&&(t=1),t};bt.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};bt.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};bt.prototype.distance=function(){if(arguments[0]instanceof bt){var e=arguments[0];return it.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof Ee){var t=arguments[0];return it.distancePointLine(t,this.p0,this.p1)}};bt.prototype.pointAlong=function(e){var t=new Ee;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};bt.prototype.hashCode=function(){var e=kt.doubleToLongBits(this.p0.x);e^=kt.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=kt.doubleToLongBits(this.p1.x);n^=kt.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};bt.prototype.interfaces_=function(){return[ws,Ss]};bt.prototype.getClass=function(){return bt};bt.midPoint=function(e,t){return new Ee((e.x+t.x)/2,(e.y+t.y)/2)};X4.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(bt,X4);var Zy=function(){this.tempEnv1=new _t,this.tempEnv2=new _t,this._overlapSeg1=new bt,this._overlapSeg2=new bt};Zy.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};Zy.prototype.interfaces_=function(){return[]};Zy.prototype.getClass=function(){return Zy};var No=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};No.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};No.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],l=this._pts[n];if(r.tempEnv1.init(i,l),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var h=Math.trunc((t+n)/2);t<h&&this.computeSelect(e,t,h,r),h<n&&this.computeSelect(e,h,n,r)};No.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};No.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};No.prototype.setId=function(e){this._id=e};No.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};No.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new _t(e,t)}return this._env};No.prototype.getEndIndex=function(){return this._end};No.prototype.getStartIndex=function(){return this._start};No.prototype.getContext=function(){return this._context};No.prototype.getId=function(){return this._id};No.prototype.computeOverlapsInternal=function(e,t,n,r,i,l){var h=this._pts[e],u=this._pts[t],y=n._pts[r],w=n._pts[i];if(t-e===1&&i-r===1)return l.overlap(this,e,n,r),null;if(l.tempEnv1.init(h,u),l.tempEnv2.init(y,w),!l.tempEnv1.intersects(l.tempEnv2))return null;var E=Math.trunc((e+t)/2),C=Math.trunc((r+i)/2);e<E&&(r<C&&this.computeOverlapsInternal(e,E,n,r,C,l),C<i&&this.computeOverlapsInternal(e,E,n,C,i,l)),E<t&&(r<C&&this.computeOverlapsInternal(E,t,n,r,C,l),C<i&&this.computeOverlapsInternal(E,t,n,C,i,l))};No.prototype.interfaces_=function(){return[]};No.prototype.getClass=function(){return No};var Ta=function(){};Ta.prototype.interfaces_=function(){return[]};Ta.prototype.getClass=function(){return Ta};Ta.getChainStartIndices=function(e){var t=0,n=new et;n.add(new Aa(t));do{var r=Ta.findChainEnd(e,t);n.add(new Aa(r)),t=r}while(t<e.length-1);var i=Ta.toIntArray(n);return i};Ta.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=mn.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var l=mn.quadrant(e[i-1],e[i]);if(l!==r)break}i++}return i-1};Ta.getChains=function(){if(arguments.length===1){var e=arguments[0];return Ta.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new et,i=Ta.getChainStartIndices(t),l=0;l<i.length-1;l++){var h=new No(t,i[l],i[l+1],n);r.add(h)}return r}};Ta.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var vh=function(){};vh.prototype.computeNodes=function(e){};vh.prototype.getNodedSubstrings=function(){};vh.prototype.interfaces_=function(){return[]};vh.prototype.getClass=function(){return vh};var Xy=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};Xy.prototype.setSegmentIntersector=function(e){this._segInt=e};Xy.prototype.interfaces_=function(){return[vh]};Xy.prototype.getClass=function(){return Xy};var hI=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new et,this._index=new Z4,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return or.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,l=Ta.getChains(r.getCoordinates(),r),h=l.iterator();h.hasNext();){var u=h.next();u.setId(i._idCounter++),i._index.insert(u.getEnvelope(),u),i._monoChains.add(u)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var l=r.iterator();l.hasNext();)i.add(l.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new HA(this._segInt),l=this._monoChains.iterator();l.hasNext();)for(var h=l.next(),u=r._index.query(h.getEnvelope()),y=u.iterator();y.hasNext();){var w=y.next();if(w.getId()>h.getId()&&(h.computeOverlaps(w,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return HA},Object.defineProperties(t,n),t}(Xy),HA=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],l=arguments[3],h=n.getContext(),u=i.getContext();this._si.processIntersections(h,r,u,l)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zy),an=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],l=arguments[1],h=arguments[2],u=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(l),this.setJoinStyle(h),this.setMitreLimit(u)}}},uu={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};an.prototype.getEndCapStyle=function(){return this._endCapStyle};an.prototype.isSingleSided=function(){return this._isSingleSided};an.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=an.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=an.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==an.JOIN_ROUND&&(this._quadrantSegments=an.DEFAULT_QUADRANT_SEGMENTS)};an.prototype.getJoinStyle=function(){return this._joinStyle};an.prototype.setJoinStyle=function(e){this._joinStyle=e};an.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};an.prototype.getSimplifyFactor=function(){return this._simplifyFactor};an.prototype.getQuadrantSegments=function(){return this._quadrantSegments};an.prototype.setEndCapStyle=function(e){this._endCapStyle=e};an.prototype.getMitreLimit=function(){return this._mitreLimit};an.prototype.setMitreLimit=function(e){this._mitreLimit=e};an.prototype.setSingleSided=function(e){this._isSingleSided=e};an.prototype.interfaces_=function(){return[]};an.prototype.getClass=function(){return an};an.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};uu.CAP_ROUND.get=function(){return 1};uu.CAP_FLAT.get=function(){return 2};uu.CAP_SQUARE.get=function(){return 3};uu.JOIN_ROUND.get=function(){return 1};uu.JOIN_MITRE.get=function(){return 2};uu.JOIN_BEVEL.get=function(){return 3};uu.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};uu.DEFAULT_MITRE_LIMIT.get=function(){return 5};uu.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(an,uu);var Kn=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=it.COUNTERCLOCKWISE,this._inputLine=e||null},w0={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Kn.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],l=this._inputLine[t],h=this._inputLine[n];return!this.isConcave(i,l,h)||!this.isShallow(i,l,h,r)?!1:this.isShallowSampled(i,l,e,n,r)};Kn.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var l=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=Kn.DELETE,l=!0,i=!0),l?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};Kn.prototype.isShallowConcavity=function(e,t,n,r){var i=it.computeOrientation(e,t,n),l=i===this._angleOrientation;if(!l)return!1;var h=it.distancePointLine(t,e,n);return h<r};Kn.prototype.isShallowSampled=function(e,t,n,r,i){var l=this,h=Math.trunc((r-n)/Kn.NUM_PTS_TO_CHECK);h<=0&&(h=1);for(var u=n;u<r;u+=h)if(!l.isShallow(e,t,l._inputLine[u],i))return!1;return!0};Kn.prototype.isConcave=function(e,t,n){var r=it.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};Kn.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=it.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};Kn.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Kn.DELETE;)t++;return t};Kn.prototype.isShallow=function(e,t,n,r){var i=it.distancePointLine(t,e,n);return i<r};Kn.prototype.collapseLine=function(){for(var e=this,t=new v0,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==Kn.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};Kn.prototype.interfaces_=function(){return[]};Kn.prototype.getClass=function(){return Kn};Kn.simplify=function(e,t){var n=new Kn(e);return n.simplify(t)};w0.INIT.get=function(){return 0};w0.DELETE.get=function(){return 1};w0.KEEP.get=function(){return 1};w0.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(Kn,w0);var ts=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new et},K4={COORDINATE_ARRAY_TYPE:{configurable:!0}};ts.prototype.getCoordinates=function(){var e=this._ptList.toArray(ts.COORDINATE_ARRAY_TYPE);return e};ts.prototype.setPrecisionModel=function(e){this._precisionModel=e};ts.prototype.addPt=function(e){var t=new Ee(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};ts.prototype.revere=function(){};ts.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};ts.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};ts.prototype.toString=function(){var e=new Kt,t=e.createLineString(this.getCoordinates());return t.toString()};ts.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new Ee(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};ts.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};K4.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(ts,K4);var nn=function(){},ed={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};nn.prototype.interfaces_=function(){return[]};nn.prototype.getClass=function(){return nn};nn.toDegrees=function(e){return e*180/Math.PI};nn.normalize=function(e){for(;e>Math.PI;)e-=nn.PI_TIMES_2;for(;e<=-Math.PI;)e+=nn.PI_TIMES_2;return e};nn.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};nn.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,l=n.x-t.x,h=n.y-t.y,u=r*l+i*h;return u>0};nn.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,l=n.x-t.x,h=n.y-t.y,u=r*l+i*h;return u<0};nn.interiorAngle=function(e,t,n){var r=nn.angle(t,e),i=nn.angle(t,n);return Math.abs(i-r)};nn.normalizePositive=function(e){if(e<0){for(;e<0;)e+=nn.PI_TIMES_2;e>=nn.PI_TIMES_2&&(e=0)}else{for(;e>=nn.PI_TIMES_2;)e-=nn.PI_TIMES_2;e<0&&(e=0)}return e};nn.angleBetween=function(e,t,n){var r=nn.angle(t,e),i=nn.angle(t,n);return nn.diff(r,i)};nn.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};nn.toRadians=function(e){return e*Math.PI/180};nn.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?nn.COUNTERCLOCKWISE:n<0?nn.CLOCKWISE:nn.NONE};nn.angleBetweenOriented=function(e,t,n){var r=nn.angle(t,e),i=nn.angle(t,n),l=i-r;return l<=-Math.PI?l+nn.PI_TIMES_2:l>Math.PI?l-nn.PI_TIMES_2:l};ed.PI_TIMES_2.get=function(){return 2*Math.PI};ed.PI_OVER_2.get=function(){return Math.PI/2};ed.PI_OVER_4.get=function(){return Math.PI/4};ed.COUNTERCLOCKWISE.get=function(){return it.COUNTERCLOCKWISE};ed.CLOCKWISE.get=function(){return it.CLOCKWISE};ed.NONE.get=function(){return it.COLLINEAR};Object.defineProperties(nn,ed);var Nn=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new bt,this._seg1=new bt,this._offset0=new bt,this._offset1=new bt,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new kh,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===an.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},S0={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Nn.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=it.computeOrientation(this._s0,this._s1,this._s2),r=n===it.CLOCKWISE&&this._side===We.LEFT||n===it.COUNTERCLOCKWISE&&this._side===We.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};Nn.prototype.addLineEndCap=function(e,t){var n=new bt(e,t),r=new bt;this.computeOffsetSegment(n,We.LEFT,this._distance,r);var i=new bt;this.computeOffsetSegment(n,We.RIGHT,this._distance,i);var l=t.x-e.x,h=t.y-e.y,u=Math.atan2(h,l);switch(this._bufParams.getEndCapStyle()){case an.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,u+Math.PI/2,u-Math.PI/2,it.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case an.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case an.CAP_SQUARE:var y=new Ee;y.x=Math.abs(this._distance)*Math.cos(u),y.y=Math.abs(this._distance)*Math.sin(u);var w=new Ee(r.p1.x+y.x,r.p1.y+y.y),E=new Ee(i.p1.x+y.x,i.p1.y+y.y);this._segList.addPt(w),this._segList.addPt(E);break}};Nn.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};Nn.prototype.addMitreJoin=function(e,t,n,r){var i=!0,l=null;try{l=$s.intersection(t.p0,t.p1,n.p0,n.p1);var h=r<=0?1:l.distance(e)/Math.abs(r);h>this._bufParams.getMitreLimit()&&(i=!1)}catch(u){if(u instanceof im)l=new Ee(0,0),i=!1;else throw u}finally{}i?this._segList.addPt(l):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};Nn.prototype.addFilletCorner=function(e,t,n,r,i){var l=t.x-e.x,h=t.y-e.y,u=Math.atan2(h,l),y=n.x-e.x,w=n.y-e.y,E=Math.atan2(w,y);r===it.CLOCKWISE?u<=E&&(u+=2*Math.PI):u>=E&&(u-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,u,E,r,i),this._segList.addPt(n)};Nn.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Nn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===an.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===an.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};Nn.prototype.createSquare=function(e){this._segList.addPt(new Ee(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new Ee(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new Ee(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new Ee(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};Nn.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};Nn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};Nn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};Nn.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};Nn.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,l=nn.angle(i,this._seg0.p0),h=nn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),u=h/2,y=nn.normalize(l+u),w=nn.normalize(y+Math.PI),E=r*n,C=E*Math.abs(Math.sin(u)),T=n-C,R=i.x+E*Math.cos(w),O=i.y+E*Math.sin(w),B=new Ee(R,O),Y=new bt(i,B),$=Y.pointAlongOffset(1,T),U=Y.pointAlongOffset(1,-T);this._side===We.LEFT?(this._segList.addPt($),this._segList.addPt(U)):(this._segList.addPt(U),this._segList.addPt($))};Nn.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===We.LEFT?1:-1,l=e.p1.x-e.p0.x,h=e.p1.y-e.p0.y,u=Math.sqrt(l*l+h*h),y=i*n*l/u,w=i*n*h/u;r.p0.x=e.p0.x-w,r.p0.y=e.p0.y+y,r.p1.x=e.p1.x-w,r.p1.y=e.p1.y+y};Nn.prototype.addFilletArc=function(e,t,n,r,i){var l=this,h=r===it.CLOCKWISE?-1:1,u=Math.abs(t-n),y=Math.trunc(u/this._filletAngleQuantum+.5);if(y<1)return null;for(var w=0,E=u/y,C=w,T=new Ee;C<u;){var R=t+h*C;T.x=e.x+i*Math.cos(R),T.y=e.y+i*Math.sin(R),l._segList.addPt(T),C+=E}};Nn.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Nn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Ee((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Ee((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};Nn.prototype.createCircle=function(e){var t=new Ee(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};Nn.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};Nn.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ts,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Nn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};Nn.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===an.JOIN_BEVEL||this._bufParams.getJoinStyle()===an.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,it.CLOCKWISE,this._distance))};Nn.prototype.closeRing=function(){this._segList.closeRing()};Nn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};Nn.prototype.interfaces_=function(){return[]};Nn.prototype.getClass=function(){return Nn};S0.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};S0.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};S0.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};S0.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(Nn,S0);var po=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};po.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var l=i.getCoordinates();return n&&Yt.reverse(l),l};po.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=Kn.simplify(e,-r),l=i.length-1;n.initSideSegments(i[l],i[l-1],We.LEFT),n.addFirstSegment();for(var h=l-2;h>=0;h--)n.addNextSegment(i[h],!0)}else{n.addSegments(e,!1);var u=Kn.simplify(e,r),y=u.length-1;n.initSideSegments(u[0],u[1],We.LEFT),n.addFirstSegment();for(var w=2;w<=y;w++)n.addNextSegment(u[w],!0)}n.addLastSegment(),n.closeRing()};po.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===We.RIGHT&&(r=-r);var i=Kn.simplify(e,r),l=i.length-1;n.initSideSegments(i[l-1],i[0],t);for(var h=1;h<=l;h++){var u=h!==1;n.addNextSegment(i[h],u)}n.closeRing()};po.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=Kn.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],We.LEFT);for(var l=2;l<=i;l++)t.addNextSegment(r[l],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var h=Kn.simplify(e,-n),u=h.length-1;t.initSideSegments(h[u],h[u-1],We.LEFT);for(var y=u-2;y>=0;y--)t.addNextSegment(h[y],!0);t.addLastSegment(),t.addLineEndCap(h[1],h[0]),t.closeRing()};po.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case an.CAP_ROUND:t.createCircle(e);break;case an.CAP_SQUARE:t.createSquare(e);break}};po.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var l=r.getCoordinates();return l};po.prototype.getBufferParameters=function(){return this._bufParams};po.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};po.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return po.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};po.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=Kn.simplify(e,-r),l=i.length-1;n.initSideSegments(i[l],i[l-1],We.LEFT),n.addFirstSegment();for(var h=l-2;h>=0;h--)n.addNextSegment(i[h],!0)}else{var u=Kn.simplify(e,r),y=u.length-1;n.initSideSegments(u[0],u[1],We.LEFT),n.addFirstSegment();for(var w=2;w<=y;w++)n.addNextSegment(u[w],!0)}n.addLastSegment()};po.prototype.getSegGen=function(e){return new Nn(this._precisionModel,this._bufParams,e)};po.prototype.interfaces_=function(){return[]};po.prototype.getClass=function(){return po};po.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new Ee(e[n]);return t};var Np=function(){this._subgraphs=null,this._seg=new bt,this._cga=new it;var e=arguments[0];this._subgraphs=e},Y4={DepthSegment:{configurable:!0}};Np.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new et,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),l=i.getEnvelope();t.y<l.getMinY()||t.y>l.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(It(arguments[2],Vs)&&arguments[0]instanceof Ee&&arguments[1]instanceof YS)for(var h=arguments[0],u=arguments[1],y=arguments[2],w=u.getEdge().getCoordinates(),E=0;E<w.length-1;E++){e._seg.p0=w[E],e._seg.p1=w[E+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var C=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(C<h.x)&&!e._seg.isHorizontal()&&!(h.y<e._seg.p0.y||h.y>e._seg.p1.y)&&it.computeOrientation(e._seg.p0,e._seg.p1,h)!==it.RIGHT){var T=u.getDepth(We.LEFT);e._seg.p0.equals(w[E])||(T=u.getDepth(We.RIGHT));var R=new xh(e._seg,T);y.add(R)}}else if(It(arguments[2],Vs)&&arguments[0]instanceof Ee&&It(arguments[1],Vs))for(var O=arguments[0],B=arguments[1],Y=arguments[2],$=B.iterator();$.hasNext();){var U=$.next();U.isForward()&&e.findStabbedSegments(O,U,Y)}}};Np.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=Zs.min(t);return n._leftDepth};Np.prototype.interfaces_=function(){return[]};Np.prototype.getClass=function(){return Np};Y4.DepthSegment.get=function(){return xh};Object.defineProperties(Np,Y4);var xh=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new bt(e),this._leftDepth=t};xh.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};xh.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};xh.prototype.toString=function(){return this._upwardSeg.toString()};xh.prototype.interfaces_=function(){return[ws]};xh.prototype.getClass=function(){return xh};var un=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};un.prototype.area=function(){return un.area(this.p0,this.p1,this.p2)};un.prototype.signedArea=function(){return un.signedArea(this.p0,this.p1,this.p2)};un.prototype.interpolateZ=function(e){if(e===null)throw new Fn("Supplied point is null.");return un.interpolateZ(e,this.p0,this.p1,this.p2)};un.prototype.longestSideLength=function(){return un.longestSideLength(this.p0,this.p1,this.p2)};un.prototype.isAcute=function(){return un.isAcute(this.p0,this.p1,this.p2)};un.prototype.circumcentre=function(){return un.circumcentre(this.p0,this.p1,this.p2)};un.prototype.area3D=function(){return un.area3D(this.p0,this.p1,this.p2)};un.prototype.centroid=function(){return un.centroid(this.p0,this.p1,this.p2)};un.prototype.inCentre=function(){return un.inCentre(this.p0,this.p1,this.p2)};un.prototype.interfaces_=function(){return[]};un.prototype.getClass=function(){return un};un.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};un.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};un.det=function(e,t,n,r){return e*r-t*n};un.interpolateZ=function(e,t,n,r){var i=t.x,l=t.y,h=n.x-i,u=r.x-i,y=n.y-l,w=r.y-l,E=h*w-u*y,C=e.x-i,T=e.y-l,R=(w*C-u*T)/E,O=(-y*C+h*T)/E,B=t.z+R*(n.z-t.z)+O*(r.z-t.z);return B};un.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),l=n.distance(e),h=r;return i>h&&(h=i),l>h&&(h=l),h};un.isAcute=function(e,t,n){return!(!nn.isAcute(e,t,n)||!nn.isAcute(t,n,e)||!nn.isAcute(n,e,t))};un.circumcentre=function(e,t,n){var r=n.x,i=n.y,l=e.x-r,h=e.y-i,u=t.x-r,y=t.y-i,w=2*un.det(l,h,u,y),E=un.det(h,l*l+h*h,y,u*u+y*y),C=un.det(l,l*l+h*h,u,u*u+y*y),T=r-E/w,R=i+C/w;return new Ee(T,R)};un.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new $s(e.x+n/2,e.y+r/2,1),l=new $s(e.x-r+n/2,e.y+n+r/2,1);return new $s(i,l)};un.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),l=r/(r+i),h=n.x-e.x,u=n.y-e.y,y=new Ee(e.x+l*h,e.y+l*u);return y};un.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,l=t.z-e.z,h=n.x-e.x,u=n.y-e.y,y=n.z-e.z,w=i*y-l*u,E=l*h-r*y,C=r*u-i*h,T=w*w+E*E+C*C,R=Math.sqrt(T)/2;return R};un.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new Ee(r,i)};un.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),l=e.distance(t),h=r+i+l,u=(r*e.x+i*t.x+l*n.x)/h,y=(r*e.y+i*t.y+l*n.y)/h;return new Ee(u,y)};var bs=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new et;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};bs.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Ie.EXTERIOR,Ie.INTERIOR)};bs.prototype.addPolygon=function(e){var t=this,n=this._distance,r=We.LEFT;this._distance<0&&(n=-this._distance,r=We.RIGHT);var i=e.getExteriorRing(),l=Yt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&l.length<3)return null;this.addPolygonRing(l,n,r,Ie.EXTERIOR,Ie.INTERIOR);for(var h=0;h<e.getNumInteriorRing();h++){var u=e.getInteriorRingN(h),y=Yt.removeRepeatedPoints(u.getCoordinates());t._distance>0&&t.isErodedCompletely(u,-t._distance)||t.addPolygonRing(y,n,We.opposite(r),Ie.INTERIOR,Ie.EXTERIOR)}};bs.prototype.isTriangleErodedCompletely=function(e,t){var n=new un(e[0],e[1],e[2]),r=n.inCentre(),i=it.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};bs.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Yt.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Ie.EXTERIOR,Ie.INTERIOR)};bs.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new or(e,new hn(0,Ie.BOUNDARY,t,n));this._curveList.add(r)};bs.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};bs.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<ml.MINIMUM_VALID_SIZE)return null;var l=r,h=i;e.length>=ml.MINIMUM_VALID_SIZE&&it.isCCW(e)&&(l=i,h=r,n=We.opposite(n));var u=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(u,l,h)};bs.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Ar?this.addPolygon(e):e instanceof Xn?this.addLineString(e):e instanceof Ao?this.addPoint(e):e instanceof Of?this.addCollection(e):e instanceof _h?this.addCollection(e):e instanceof hl?this.addCollection(e):e instanceof Wi&&this.addCollection(e)};bs.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};bs.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};bs.prototype.interfaces_=function(){return[]};bs.prototype.getClass=function(){return bs};var jf=function(){};jf.prototype.locate=function(e){};jf.prototype.interfaces_=function(){return[]};jf.prototype.getClass=function(){return jf};var pl=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};pl.prototype.next=function(){if(this._atStart)return this._atStart=!1,pl.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new sm;var e=this._parent.getGeometryN(this._index++);return e instanceof Wi?(this._subcollectionIterator=new pl(e),this._subcollectionIterator.next()):e};pl.prototype.remove=function(){throw new Error(this.getClass().getName())};pl.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};pl.prototype.interfaces_=function(){return[om]};pl.prototype.getClass=function(){return pl};pl.isAtomic=function(e){return!(e instanceof Wi)};var Yo=function(){this._geom=null;var e=arguments[0];this._geom=e};Yo.prototype.locate=function(e){return Yo.locate(e,this._geom)};Yo.prototype.interfaces_=function(){return[jf]};Yo.prototype.getClass=function(){return Yo};Yo.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?it.isPointInRing(e,t.getCoordinates()):!1};Yo.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Yo.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Yo.isPointInRing(e,i))return!1}return!0};Yo.containsPoint=function(e,t){if(t instanceof Ar)return Yo.containsPointInPolygon(e,t);if(t instanceof Wi)for(var n=new pl(t);n.hasNext();){var r=n.next();if(r!==t&&Yo.containsPoint(e,r))return!0}return!1};Yo.locate=function(e,t){return t.isEmpty()?Ie.EXTERIOR:Yo.containsPoint(e,t)?Ie.INTERIOR:Ie.EXTERIOR};var Pi=function(){this._edgeMap=new Ii,this._edgeList=null,this._ptInAreaLocation=[Ie.NONE,Ie.NONE]};Pi.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Pi.prototype.propagateSideLabels=function(e){for(var t=Ie.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,We.LEFT)!==Ie.NONE&&(t=i.getLocation(e,We.LEFT))}if(t===Ie.NONE)return null;for(var l=t,h=this.iterator();h.hasNext();){var u=h.next(),y=u.getLabel();if(y.getLocation(e,We.ON)===Ie.NONE&&y.setLocation(e,We.ON,l),y.isArea(e)){var w=y.getLocation(e,We.LEFT),E=y.getLocation(e,We.RIGHT);if(E!==Ie.NONE){if(E!==l)throw new ru("side location conflict",u.getCoordinate());w===Ie.NONE&&Vt.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),l=w}else Vt.isTrue(y.getLocation(e,We.LEFT)===Ie.NONE,"found single null side"),y.setLocation(e,We.RIGHT,l),y.setLocation(e,We.LEFT,l)}}};Pi.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};Pi.prototype.print=function(e){mi.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Pi.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Pi.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,We.LEFT);Vt.isTrue(i!==Ie.NONE,"Found unlabelled area edge");for(var l=i,h=this.iterator();h.hasNext();){var u=h.next(),y=u.getLabel();Vt.isTrue(y.isArea(e),"Found non-area edge");var w=y.getLocation(e,We.LEFT),E=y.getLocation(e,We.RIGHT);if(w===E||E!==l)return!1;l=w}return!0};Pi.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};Pi.prototype.iterator=function(){return this.getEdges().iterator()};Pi.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new et(this._edgeMap.values())),this._edgeList};Pi.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===Ie.NONE&&(this._ptInAreaLocation[e]=Yo.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};Pi.prototype.toString=function(){var e=new Ga;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};Pi.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};Pi.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),l=i.getLabel(),h=0;h<2;h++)l.isLine(h)&&l.getLocation(h)===Ie.BOUNDARY&&(n[h]=!0);for(var u=this.iterator();u.hasNext();)for(var y=u.next(),w=y.getLabel(),E=0;E<2;E++)if(w.isAnyNull(E)){var C=Ie.NONE;if(n[E])C=Ie.EXTERIOR;else{var T=y.getCoordinate();C=t.getLocation(E,T,e)}w.setAllLocationsIfNull(E,C)}};Pi.prototype.getDegree=function(){return this._edgeMap.size()};Pi.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};Pi.prototype.interfaces_=function(){return[]};Pi.prototype.getClass=function(){return Pi};var XZ=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,l=this._SCANNING_FOR_INCOMING,h=0;h<this._resultAreaEdgeList.size();h++){var u=n._resultAreaEdgeList.get(h),y=u.getSym();if(u.getLabel().isArea())switch(r===null&&u.isInResult()&&(r=u),l){case n._SCANNING_FOR_INCOMING:if(!y.isInResult())continue;i=y,l=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!u.isInResult())continue;i.setNext(u),l=n._SCANNING_FOR_INCOMING;break}}if(l===this._LINKING_TO_OUTGOING){if(r===null)throw new ru("no outgoing dirEdge found",this.getCoordinate());Vt.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var l=n.get(r-1),h=i.getQuadrant(),u=l.getQuadrant();return mn.isNorthern(h)&&mn.isNorthern(u)?i:!mn.isNorthern(h)&&!mn.isNorthern(u)?l:i.getDy()!==0?i:l.getDy()!==0?l:(Vt.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){mi.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new et;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),l=i.getLabel();l.setAllLocationsIfNull(0,n.getLocation(0)),l.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,l=this._edgeList.size()-1;l>=0;l--){var h=n._edgeList.get(l),u=h.getSym();i===null&&(i=u),r!==null&&u.setNext(r),r=h}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),l=r.getDepth(We.LEFT),h=r.getDepth(We.RIGHT),u=this.computeDepths(i+1,this._edgeList.size(),l),y=this.computeDepths(0,i,u);if(y!==h)throw new ru("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var w=arguments[0],E=arguments[1],C=arguments[2],T=C,R=w;R<E;R++){var O=n._edgeList.get(R);O.setEdgeDepths(We.RIGHT,T),T=O.getDepth(We.LEFT)}return T}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,l=null,h=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var y=r._resultAreaEdgeList.get(u),w=y.getSym();switch(i===null&&y.getEdgeRing()===n&&(i=y),h){case r._SCANNING_FOR_INCOMING:if(w.getEdgeRing()!==n)continue;l=w,h=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(y.getEdgeRing()!==n)continue;l.setNextMin(y),h=r._SCANNING_FOR_INCOMING;break}}h===this._LINKING_TO_OUTGOING&&(Vt.isTrue(i!==null,"found null for first outgoing dirEdge"),Vt.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),l.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var l=arguments[0],h=0,u=this.iterator();u.hasNext();){var y=u.next();y.getEdgeRing()===l&&h++}return h}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=Ie.NONE,r=this.iterator();r.hasNext();){var i=r.next(),l=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=Ie.INTERIOR;break}if(l.isInResult()){n=Ie.EXTERIOR;break}}}if(n===Ie.NONE)return null;for(var h=n,u=this.iterator();u.hasNext();){var y=u.next(),w=y.getSym();y.isLineEdge()?y.getEdge().setCovered(h===Ie.INTERIOR):(y.isInResult()&&(h=Ie.EXTERIOR),w.isInResult()&&(h=Ie.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new hn(Ie.NONE);for(var i=this.iterator();i.hasNext();)for(var l=i.next(),h=l.getEdge(),u=h.getLabel(),y=0;y<2;y++){var w=u.getLocation(y);(w===Ie.INTERIOR||w===Ie.BOUNDARY)&&r._label.setLocation(y,Ie.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pi),J4=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new Q1(n,new XZ)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(zf),Qu=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Qu.prototype.compareTo=function(e){var t=e,n=Qu.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};Qu.prototype.interfaces_=function(){return[ws]};Qu.prototype.getClass=function(){return Qu};Qu.orientation=function(e){return Yt.increasingDirection(e)===1};Qu.compareOriented=function(e,t,n,r){for(var i=t?1:-1,l=r?1:-1,h=t?e.length:-1,u=r?n.length:-1,y=t?0:e.length-1,w=r?0:n.length-1;;){var E=e[y].compareTo(n[w]);if(E!==0)return E;y+=i,w+=l;var C=y===h,T=w===u;if(C&&!T)return-1;if(!C&&T)return 1;if(C&&T)return 0}};var Xs=function(){this._edges=new et,this._ocaMap=new Ii};Xs.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),l=0;l<i.length;l++)l>0&&e.print(","),e.print(i[l].x+" "+i[l].y);e.println(")")}e.print(")  ")};Xs.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};Xs.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};Xs.prototype.iterator=function(){return this._edges.iterator()};Xs.prototype.getEdges=function(){return this._edges};Xs.prototype.get=function(e){return this._edges.get(e)};Xs.prototype.findEqualEdge=function(e){var t=new Qu(e.getCoordinates()),n=this._ocaMap.get(t);return n};Xs.prototype.add=function(e){this._edges.add(e);var t=new Qu(e.getCoordinates());this._ocaMap.put(t,e)};Xs.prototype.interfaces_=function(){return[]};Xs.prototype.getClass=function(){return Xs};var bh=function(){};bh.prototype.processIntersections=function(e,t,n,r){};bh.prototype.isDone=function(){};bh.prototype.interfaces_=function(){return[]};bh.prototype.getClass=function(){return bh};var ns=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};ns.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(ns.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};ns.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};ns.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};ns.prototype.getLineIntersector=function(){return this._li};ns.prototype.hasProperIntersection=function(){return this._hasProper};ns.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],l=e.getCoordinates()[t+1],h=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(i,l,h,u),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};ns.prototype.hasIntersection=function(){return this._hasIntersection};ns.prototype.isDone=function(){return!1};ns.prototype.hasInteriorIntersection=function(){return this._hasInterior};ns.prototype.interfaces_=function(){return[bh]};ns.prototype.getClass=function(){return ns};ns.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var za=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new Ee(e),this.segmentIndex=t,this.dist=n};za.prototype.getSegmentIndex=function(){return this.segmentIndex};za.prototype.getCoordinate=function(){return this.coord};za.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};za.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};za.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};za.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};za.prototype.getDistance=function(){return this.dist};za.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};za.prototype.interfaces_=function(){return[ws]};za.prototype.getClass=function(){return za};var _l=function(){this._nodeMap=new Ii,this.edge=null;var e=arguments[0];this.edge=e};_l.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};_l.prototype.iterator=function(){return this._nodeMap.values().iterator()};_l.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),l=t.createSplitEdge(r,i);e.add(l),r=i}};_l.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};_l.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],l=t.dist>0||!t.coord.equals2D(i);l||r--;var h=new Array(r).fill(null),u=0;h[u++]=new Ee(e.coord);for(var y=e.segmentIndex+1;y<=t.segmentIndex;y++)h[u++]=n.edge.pts[y];return l&&(h[u]=t.coord),new Lx(h,new hn(this.edge._label))};_l.prototype.add=function(e,t,n){var r=new za(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};_l.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};_l.prototype.interfaces_=function(){return[]};_l.prototype.getClass=function(){return _l};var wh=function(){};wh.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new et;r.add(new Aa(n));do{var i=t.findChainEnd(e,n);r.add(new Aa(i)),n=i}while(n<e.length-1);var l=wh.toIntArray(r);return l};wh.prototype.findChainEnd=function(e,t){for(var n=mn.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=mn.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};wh.prototype.interfaces_=function(){return[]};wh.prototype.getClass=function(){return wh};wh.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var ou=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new _t,this.env2=new _t;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new wh;this.startIndex=t.getChainStartIndices(this.pts)};ou.prototype.getCoordinates=function(){return this.pts};ou.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};ou.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};ou.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],l=arguments[1],h=arguments[2],u=arguments[3],y=arguments[4],w=arguments[5],E=this.pts[i],C=this.pts[l],T=h.pts[u],R=h.pts[y];if(l-i===1&&y-u===1)return w.addIntersections(this.e,i,h.e,u),null;if(this.env1.init(E,C),this.env2.init(T,R),!this.env1.intersects(this.env2))return null;var O=Math.trunc((i+l)/2),B=Math.trunc((u+y)/2);i<O&&(u<B&&this.computeIntersectsForChain(i,O,h,u,B,w),B<y&&this.computeIntersectsForChain(i,O,h,B,y,w)),O<l&&(u<B&&this.computeIntersectsForChain(O,l,h,u,B,w),B<y&&this.computeIntersectsForChain(O,l,h,B,y,w))}};ou.prototype.getStartIndexes=function(){return this.startIndex};ou.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};ou.prototype.interfaces_=function(){return[]};ou.prototype.getClass=function(){return ou};var di=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},Q4={NULL_VALUE:{configurable:!0}};di.prototype.getDepth=function(e,t){return this._depth[e][t]};di.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};di.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==di.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===di.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],l=arguments[1];return this._depth[i][l]===di.NULL_VALUE}};di.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};di.prototype.getDelta=function(e){return this._depth[e][We.RIGHT]-this._depth[e][We.LEFT]};di.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?Ie.EXTERIOR:Ie.INTERIOR};di.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};di.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===Ie.EXTERIOR||i===Ie.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=di.depthAtLocation(i):e._depth[n][r]+=di.depthAtLocation(i))}else if(arguments.length===3){var l=arguments[0],h=arguments[1],u=arguments[2];u===Ie.INTERIOR&&this._depth[l][h]++}};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.depthAtLocation=function(e){return e===Ie.EXTERIOR?0:e===Ie.INTERIOR?1:di.NULL_VALUE};Q4.NULL_VALUE.get=function(){return-1};Object.defineProperties(di,Q4);var Lx=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new _l(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new di,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,hn.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var l=!0,h=!0,u=this.pts.length,y=0;y<this.pts.length;y++)if(r.pts[y].equals2D(i.pts[y])||(l=!1),r.pts[y].equals2D(i.pts[--u])||(h=!1),!l&&!h)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ou(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new _t;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,l){var h=new Ee(n.getIntersection(l)),u=r,y=n.getEdgeDistance(i,l),w=u+1;if(w<this.pts.length){var E=this.pts[w];h.equals2D(E)&&(u=w,y=0)}this.eiList.add(h,u,y)},t.prototype.toString=function(){var n=this,r=new Ga;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var l=this,h=0;h<n.getIntersectionNum();h++)l.addIntersection(n,r,i,h)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,We.ON),n.getLocation(1,We.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,We.LEFT),n.getLocation(1,We.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,We.RIGHT),n.getLocation(1,We.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(es),qi=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xs,this._bufParams=e||null};qi.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};qi.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new hn(e.getLabel()),r.flip()),n.merge(r);var i=qi.depthDelta(r),l=t.getDepthDelta(),h=l+i;t.setDepthDelta(h)}else this._edgeList.add(e),e.setDepthDelta(qi.depthDelta(e.getLabel()))};qi.prototype.buildSubgraphs=function(e,t){for(var n=new et,r=e.iterator();r.hasNext();){var i=r.next(),l=i.getRightmostCoordinate(),h=new Np(n),u=h.getDepth(l);i.computeDepth(u),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};qi.prototype.createSubgraphs=function(e){for(var t=new et,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Hi;i.create(r),t.add(i)}}return Zs.sort(t,Zs.reverseOrder()),t};qi.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};qi.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new hI,n=new kh;return n.setPrecisionModel(e),t.setSegmentIntersector(new ns(n)),t};qi.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new po(n,this._bufParams),i=new bs(e,t,r),l=i.getCurves();if(l.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(l,n),this._graph=new Vn(new J4),this._graph.addEdges(this._edgeList.getEdges());var h=this.createSubgraphs(this._graph),u=new ko(this._geomFact);this.buildSubgraphs(h,u);var y=u.getPolygons();if(y.size()<=0)return this.createEmptyResultGeometry();var w=this._geomFact.buildGeometry(y);return w};qi.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),l=i.iterator();l.hasNext();){var h=l.next(),u=h.getCoordinates();if(!(u.length===2&&u[0].equals2D(u[1]))){var y=h.getData(),w=new Lx(h.getCoordinates(),new hn(y));n.insertUniqueEdge(w)}}};qi.prototype.setNoder=function(e){this._workingNoder=e};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};qi.depthDelta=function(e){var t=e.getLocation(0,We.LEFT),n=e.getLocation(0,We.RIGHT);return t===Ie.INTERIOR&&n===Ie.EXTERIOR?1:t===Ie.EXTERIOR&&n===Ie.INTERIOR?-1:0};qi.convertSegStrings=function(e){for(var t=new Kt,n=new et;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var ec=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],l=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=l,this._isScaled=!this.isIntegerPrecision()}};ec.prototype.rescale=function(){var e=this;if(It(arguments[0],wr))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],l=0;l<i.length;l++)i[l].x=i[l].x/e._scaleFactor+e._offsetX,i[l].y=i[l].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&mi.out.println(i)}};ec.prototype.scale=function(){var e=this;if(It(arguments[0],wr)){for(var t=arguments[0],n=new et,r=t.iterator();r.hasNext();){var i=r.next();n.add(new or(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var l=arguments[0],h=new Array(l.length).fill(null),u=0;u<l.length;u++)h[u]=new Ee(Math.round((l[u].x-e._offsetX)*e._scaleFactor),Math.round((l[u].y-e._offsetY)*e._scaleFactor),l[u].z);var y=Yt.removeRepeatedPoints(h);return y}};ec.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};ec.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};ec.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};ec.prototype.interfaces_=function(){return[vh]};ec.prototype.getClass=function(){return ec};var Fa=function(){this._li=new kh,this._segStrings=null;var e=arguments[0];this._segStrings=e},eD={fact:{configurable:!0}};Fa.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],l=arguments[1],h=l.iterator();h.hasNext();)for(var u=h.next(),y=u.getCoordinates(),w=1;w<y.length-1;w++)if(y[w].equals(i))throw new tu("found endpt/interior pt intersection at index "+w+" :pt "+i)}};Fa.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var l=arguments[0],h=arguments[1],u=l.getCoordinates(),y=h.getCoordinates(),w=0;w<u.length-1;w++)for(var E=0;E<y.length-1;E++)e.checkInteriorIntersections(l,w,h,E);else if(arguments.length===4){var C=arguments[0],T=arguments[1],R=arguments[2],O=arguments[3];if(C===R&&T===O)return null;var B=C.getCoordinates()[T],Y=C.getCoordinates()[T+1],$=R.getCoordinates()[O],U=R.getCoordinates()[O+1];if(this._li.computeIntersection(B,Y,$,U),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,B,Y)||this.hasInteriorIntersection(this._li,$,U)))throw new tu("found non-noded intersection at "+B+"-"+Y+" and "+$+"-"+U)}};Fa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Fa.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),l=0;l<i.length-2;l++)e.checkCollapse(i[l],i[l+1],i[l+2])};Fa.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};Fa.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new tu("found non-noded collapse at "+Fa.fact.createLineString([e,t,n]))};Fa.prototype.interfaces_=function(){return[]};Fa.prototype.getClass=function(){return Fa};eD.fact.get=function(){return new Kt};Object.defineProperties(Fa,eD);var fo=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new Fn("Scale factor must be non-zero");t!==1&&(this._pt=new Ee(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new Ee,this._p1Scaled=new Ee),this.initCorners(this._pt)},tD={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};fo.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),l=Math.max(e.y,t.y),h=this._maxx<n||this._minx>r||this._maxy<i||this._miny>l;if(h)return!1;var u=this.intersectsToleranceSquare(e,t);return Vt.isTrue(!(h&&u),"Found bad envelope test"),u};fo.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new Ee(this._maxx,this._maxy),this._corner[1]=new Ee(this._minx,this._maxy),this._corner[2]=new Ee(this._minx,this._miny),this._corner[3]=new Ee(this._maxx,this._miny)};fo.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};fo.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};fo.prototype.getCoordinate=function(){return this._originalPt};fo.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};fo.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=fo.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new _t(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};fo.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};fo.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};fo.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};tD.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(fo,tD);var Ky=function(){this.tempEnv1=new _t,this.selectedSegment=new bt};Ky.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};Ky.prototype.interfaces_=function(){return[]};Ky.prototype.getClass=function(){return Ky};var $f=function(){this._index=null;var e=arguments[0];this._index=e},nD={HotPixelSnapAction:{configurable:!0}};$f.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),l=new rD(t,n,r);return this._index.query(i,{interfaces_:function(){return[Yu]},visitItem:function(h){var u=h;u.select(i,l)}}),l.isNodeAdded()}};$f.prototype.interfaces_=function(){return[]};$f.prototype.getClass=function(){return $f};nD.HotPixelSnapAction.get=function(){return rD};Object.defineProperties($f,nD);var rD=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ky),Rp=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new et};Rp.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var l=e.getCoordinates()[t],h=e.getCoordinates()[t+1],u=n.getCoordinates()[r],y=n.getCoordinates()[r+1];if(this._li.computeIntersection(l,h,u,y),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var w=0;w<this._li.getIntersectionNum();w++)i._interiorIntersections.add(i._li.getIntersection(w));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};Rp.prototype.isDone=function(){return!1};Rp.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Rp.prototype.interfaces_=function(){return[bh]};Rp.prototype.getClass=function(){return Rp};var vl=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new kh,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};vl.prototype.checkCorrectness=function(e){var t=or.getNodedSubstrings(e),n=new Fa(t);try{n.checkValid()}catch(r){if(r instanceof j4)r.printStackTrace();else throw r}finally{}};vl.prototype.getNodedSubstrings=function(){return or.getNodedSubstrings(this._nodedSegStrings)};vl.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};vl.prototype.findInteriorIntersections=function(e,t){var n=new Rp(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};vl.prototype.computeVertexSnaps=function(){var e=this;if(It(arguments[0],wr))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof or)for(var i=arguments[0],l=i.getCoordinates(),h=0;h<l.length;h++){var u=new fo(l[h],e._scaleFactor,e._li),y=e._pointSnapper.snap(u,i,h);y&&i.addIntersection(l[h],h)}};vl.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new hI,this._pointSnapper=new $f(this._noder.getIndex()),this.snapRound(e,this._li)};vl.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new fo(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};vl.prototype.interfaces_=function(){return[vh]};vl.prototype.getClass=function(){return vl};var pi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new an,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},am={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};pi.prototype.bufferFixedPrecision=function(e){var t=new ec(new vl(new ln(1)),e.getScale()),n=new qi(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};pi.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=pi.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(l){if(l instanceof ru)e._saveException=l;else throw l}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=pi.precisionScaleFactor(this._argGeom,this._distance,n),i=new ln(r);this.bufferFixedPrecision(i)}};pi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===ln.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};pi.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};pi.prototype.bufferOriginalPrecision=function(){try{var e=new qi(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof tu)this._saveException=t;else throw t}finally{}};pi.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};pi.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};pi.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new pi(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ct&&typeof arguments[1]=="number"){var i=arguments[0],l=arguments[1],h=arguments[2],u=new pi(i);u.setQuadrantSegments(h);var y=u.getResultGeometry(l);return y}else if(arguments[2]instanceof an&&arguments[0]instanceof Ct&&typeof arguments[1]=="number"){var w=arguments[0],E=arguments[1],C=arguments[2],T=new pi(w,C),R=T.getResultGeometry(E);return R}}else if(arguments.length===4){var O=arguments[0],B=arguments[1],Y=arguments[2],$=arguments[3],U=new pi(O);U.setQuadrantSegments(Y),U.setEndCapStyle($);var G=U.getResultGeometry(B);return G}};pi.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Qo.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),l=t>0?t:0,h=i+2*l,u=Math.trunc(Math.log(h)/Math.log(10)+1),y=n-u,w=Math.pow(10,y);return w};am.CAP_ROUND.get=function(){return an.CAP_ROUND};am.CAP_BUTT.get=function(){return an.CAP_FLAT};am.CAP_FLAT.get=function(){return an.CAP_FLAT};am.CAP_SQUARE.get=function(){return an.CAP_SQUARE};am.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(pi,am);var $i=function(){this._pt=[new Ee,new Ee],this._distance=kt.NaN,this._isNull=!0};$i.prototype.getCoordinates=function(){return this._pt};$i.prototype.getCoordinate=function(e){return this._pt[e]};$i.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};$i.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};$i.prototype.getDistance=function(){return this._distance};$i.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};$i.prototype.interfaces_=function(){return[]};$i.prototype.getClass=function(){return $i};var al=function(){};al.prototype.interfaces_=function(){return[]};al.prototype.getClass=function(){return al};al.computeDistance=function(){if(arguments[2]instanceof $i&&arguments[0]instanceof Xn&&arguments[1]instanceof Ee)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new bt,l=0;l<r.length-1;l++){i.setCoordinates(r[l],r[l+1]);var h=i.closestPoint(t);n.setMinimum(h,t)}else if(arguments[2]instanceof $i&&arguments[0]instanceof Ar&&arguments[1]instanceof Ee){var u=arguments[0],y=arguments[1],w=arguments[2];al.computeDistance(u.getExteriorRing(),y,w);for(var E=0;E<u.getNumInteriorRing();E++)al.computeDistance(u.getInteriorRingN(E),y,w)}else if(arguments[2]instanceof $i&&arguments[0]instanceof Ct&&arguments[1]instanceof Ee){var C=arguments[0],T=arguments[1],R=arguments[2];if(C instanceof Xn)al.computeDistance(C,T,R);else if(C instanceof Ar)al.computeDistance(C,T,R);else if(C instanceof Wi)for(var O=C,B=0;B<O.getNumGeometries();B++){var Y=O.getGeometryN(B);al.computeDistance(Y,T,R)}else R.setMinimum(C.getCoordinate(),T)}else if(arguments[2]instanceof $i&&arguments[0]instanceof bt&&arguments[1]instanceof Ee){var $=arguments[0],U=arguments[1],G=arguments[2],re=$.closestPoint(U);G.setMinimum(re,U)}};var Sh=function(e){this._maxPtDist=new $i,this._inputGeom=e||null},pI={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Sh.prototype.computeMaxMidpointDistance=function(e){var t=new tc(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Sh.prototype.computeMaxVertexDistance=function(e){var t=new Dp(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Sh.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Sh.prototype.getDistancePoints=function(){return this._maxPtDist};Sh.prototype.interfaces_=function(){return[]};Sh.prototype.getClass=function(){return Sh};pI.MaxPointDistanceFilter.get=function(){return Dp};pI.MaxMidpointDistanceFilter.get=function(){return tc};Object.defineProperties(Sh,pI);var Dp=function(e){this._maxPtDist=new $i,this._minPtDist=new $i,this._geom=e||null};Dp.prototype.filter=function(e){this._minPtDist.initialize(),al.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Dp.prototype.getMaxPointDistance=function(){return this._maxPtDist};Dp.prototype.interfaces_=function(){return[fl]};Dp.prototype.getClass=function(){return Dp};var tc=function(e){this._maxPtDist=new $i,this._minPtDist=new $i,this._geom=e||null};tc.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new Ee((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),al.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};tc.prototype.isDone=function(){return!1};tc.prototype.isGeometryChanged=function(){return!1};tc.prototype.getMaxPointDistance=function(){return this._maxPtDist};tc.prototype.interfaces_=function(){return[Ws]};tc.prototype.getClass=function(){return tc};var eu=function(e){this._comps=e||null};eu.prototype.filter=function(e){e instanceof Ar&&this._comps.add(e)};eu.prototype.interfaces_=function(){return[Na]};eu.prototype.getClass=function(){return eu};eu.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return eu.getPolygons(e,new et)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Ar?n.add(t):t instanceof Wi&&t.apply(new eu(n)),n}};var ui=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};ui.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof ml){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Xn&&this._lines.add(e)};ui.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};ui.prototype.interfaces_=function(){return[nu]};ui.prototype.getClass=function(){return ui};ui.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(ui.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(ui.getLines(t,n))}};ui.getLines=function(){if(arguments.length===1){var e=arguments[0];return ui.getLines(e,!1)}else if(arguments.length===2){if(It(arguments[0],wr)&&It(arguments[1],wr)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();ui.getLines(i,n)}return n}else if(arguments[0]instanceof Ct&&typeof arguments[1]=="boolean"){var l=arguments[0],h=arguments[1],u=new et;return l.apply(new ui(u,h)),u}else if(arguments[0]instanceof Ct&&It(arguments[1],wr)){var y=arguments[0],w=arguments[1];return y instanceof Xn?w.add(y):y.apply(new ui(w)),w}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&It(arguments[0],wr)&&It(arguments[1],wr)){for(var E=arguments[0],C=arguments[1],T=arguments[2],R=E.iterator();R.hasNext();){var O=R.next();ui.getLines(O,C,T)}return C}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Ct&&It(arguments[1],wr)){var B=arguments[0],Y=arguments[1],$=arguments[2];return B.apply(new ui(Y,$)),Y}}};var Ks=function(){if(this._boundaryRule=vs.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new Fn("Rule must be non-null");this._boundaryRule=e}};Ks.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof Ee&&arguments[1]instanceof Ar){var t=arguments[0],n=arguments[1];if(n.isEmpty())return Ie.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===Ie.EXTERIOR)return Ie.EXTERIOR;if(i===Ie.BOUNDARY)return Ie.BOUNDARY;for(var l=0;l<n.getNumInteriorRing();l++){var h=n.getInteriorRingN(l),u=e.locateInPolygonRing(t,h);if(u===Ie.INTERIOR)return Ie.EXTERIOR;if(u===Ie.BOUNDARY)return Ie.BOUNDARY}return Ie.INTERIOR}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Xn){var y=arguments[0],w=arguments[1];if(!w.getEnvelopeInternal().intersects(y))return Ie.EXTERIOR;var E=w.getCoordinates();return!w.isClosed()&&(y.equals(E[0])||y.equals(E[E.length-1]))?Ie.BOUNDARY:it.isOnLine(y,E)?Ie.INTERIOR:Ie.EXTERIOR}else if(arguments[0]instanceof Ee&&arguments[1]instanceof Ao){var C=arguments[0],T=arguments[1],R=T.getCoordinate();return R.equals2D(C)?Ie.INTERIOR:Ie.EXTERIOR}};Ks.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?it.locatePointInRing(e,t.getCoordinates()):Ie.EXTERIOR};Ks.prototype.intersects=function(e,t){return this.locate(e,t)!==Ie.EXTERIOR};Ks.prototype.updateLocationInfo=function(e){e===Ie.INTERIOR&&(this._isIn=!0),e===Ie.BOUNDARY&&this._numBoundaries++};Ks.prototype.computeLocation=function(e,t){var n=this;if(t instanceof Ao&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Xn)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Ar)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof _h)for(var r=t,i=0;i<r.getNumGeometries();i++){var l=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,l))}else if(t instanceof hl)for(var h=t,u=0;u<h.getNumGeometries();u++){var y=h.getGeometryN(u);n.updateLocationInfo(n.locateInternal(e,y))}else if(t instanceof Wi)for(var w=new pl(t);w.hasNext();){var E=w.next();E!==t&&n.computeLocation(e,E)}};Ks.prototype.locate=function(e,t){return t.isEmpty()?Ie.EXTERIOR:t instanceof Xn?this.locateInternal(e,t):t instanceof Ar?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?Ie.BOUNDARY:this._numBoundaries>0||this._isIn?Ie.INTERIOR:Ie.EXTERIOR)};Ks.prototype.interfaces_=function(){return[]};Ks.prototype.getClass=function(){return Ks};var Vi=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2];this._component=r,this._segIndex=i,this._pt=l}},iD={INSIDE_AREA:{configurable:!0}};Vi.prototype.isInsideArea=function(){return this._segIndex===Vi.INSIDE_AREA};Vi.prototype.getCoordinate=function(){return this._pt};Vi.prototype.getGeometryComponent=function(){return this._component};Vi.prototype.getSegmentIndex=function(){return this._segIndex};Vi.prototype.interfaces_=function(){return[]};Vi.prototype.getClass=function(){return Vi};iD.INSIDE_AREA.get=function(){return-1};Object.defineProperties(Vi,iD);var $u=function(e){this._pts=e||null};$u.prototype.filter=function(e){e instanceof Ao&&this._pts.add(e)};$u.prototype.interfaces_=function(){return[Na]};$u.prototype.getClass=function(){return $u};$u.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof Ao?Zs.singletonList(e):$u.getPoints(e,new et)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Ao?n.add(t):t instanceof Wi&&t.apply(new $u(n)),n}};var Op=function(){this._locations=null;var e=arguments[0];this._locations=e};Op.prototype.filter=function(e){(e instanceof Ao||e instanceof Xn||e instanceof Ar)&&this._locations.add(new Vi(e,0,e.getCoordinate()))};Op.prototype.interfaces_=function(){return[Na]};Op.prototype.getClass=function(){return Op};Op.getLocations=function(e){var t=new et;return e.apply(new Op(t)),t};var gi=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ks,this._minDistanceLocation=null,this._minDistance=kt.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};gi.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,l=eu.getPolygons(this._geom[n]);if(l.size()>0){var h=Op.getLocations(this._geom[i]);if(this.computeContainmentDistance(h,l,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&It(arguments[0],Vs)&&It(arguments[1],Vs)){for(var u=arguments[0],y=arguments[1],w=arguments[2],E=0;E<u.size();E++)for(var C=u.get(E),T=0;T<y.size();T++)if(e.computeContainmentDistance(C,y.get(T),w),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vi&&arguments[1]instanceof Ar){var R=arguments[0],O=arguments[1],B=arguments[2],Y=R.getCoordinate();if(Ie.EXTERIOR!==this._ptLocator.locate(Y,O))return this._minDistance=0,B[0]=R,B[1]=new Vi(O,Y),null}}};gi.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var l=e.get(i),h=0;h<t.size();h++){var u=t.get(h);if(r.computeMinDistance(l,u,n),r._minDistance<=r._terminateDistance)return null}};gi.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=ui.getLines(this._geom[0]),n=ui.getLines(this._geom[1]),r=$u.getPoints(this._geom[0]),i=$u.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};gi.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};gi.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};gi.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};gi.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Xn&&arguments[1]instanceof Ao){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),l=n.getCoordinate(),h=0;h<i.length-1;h++){var u=it.distancePointLine(l,i[h],i[h+1]);if(u<e._minDistance){e._minDistance=u;var y=new bt(i[h],i[h+1]),w=y.closestPoint(l);r[0]=new Vi(t,h,w),r[1]=new Vi(n,0,l)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xn&&arguments[1]instanceof Xn){var E=arguments[0],C=arguments[1],T=arguments[2];if(E.getEnvelopeInternal().distance(C.getEnvelopeInternal())>this._minDistance)return null;for(var R=E.getCoordinates(),O=C.getCoordinates(),B=0;B<R.length-1;B++)for(var Y=0;Y<O.length-1;Y++){var $=it.distanceLineLine(R[B],R[B+1],O[Y],O[Y+1]);if($<e._minDistance){e._minDistance=$;var U=new bt(R[B],R[B+1]),G=new bt(O[Y],O[Y+1]),re=U.closestPoints(G);T[0]=new Vi(E,B,re[0]),T[1]=new Vi(C,Y,re[1])}if(e._minDistance<=e._terminateDistance)return null}}}};gi.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var l=e.get(i),h=0;h<t.size();h++){var u=t.get(h),y=l.getCoordinate().distance(u.getCoordinate());if(y<r._minDistance&&(r._minDistance=y,n[0]=new Vi(l,0,l.getCoordinate()),n[1]=new Vi(u,0,u.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};gi.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new Fn("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};gi.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var l=e.get(i),h=0;h<t.size();h++){var u=t.get(h);if(r.computeMinDistance(l,u,n),r._minDistance<=r._terminateDistance)return null}};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.distance=function(e,t){var n=new gi(e,t);return n.distance()};gi.isWithinDistance=function(e,t,n){var r=new gi(e,t,n);return r.distance()<=n};gi.nearestPoints=function(e,t){var n=new gi(e,t);return n.nearestPoints()};var Ci=function(){this._pt=[new Ee,new Ee],this._distance=kt.NaN,this._isNull=!0};Ci.prototype.getCoordinates=function(){return this._pt};Ci.prototype.getCoordinate=function(e){return this._pt[e]};Ci.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Ci.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Ci.prototype.toString=function(){return qs.toLineString(this._pt[0],this._pt[1])};Ci.prototype.getDistance=function(){return this._distance};Ci.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Ci.prototype.interfaces_=function(){return[]};Ci.prototype.getClass=function(){return Ci};var Sa=function(){};Sa.prototype.interfaces_=function(){return[]};Sa.prototype.getClass=function(){return Sa};Sa.computeDistance=function(){if(arguments[2]instanceof Ci&&arguments[0]instanceof Xn&&arguments[1]instanceof Ee)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new bt,i=e.getCoordinates(),l=0;l<i.length-1;l++){r.setCoordinates(i[l],i[l+1]);var h=r.closestPoint(t);n.setMinimum(h,t)}else if(arguments[2]instanceof Ci&&arguments[0]instanceof Ar&&arguments[1]instanceof Ee){var u=arguments[0],y=arguments[1],w=arguments[2];Sa.computeDistance(u.getExteriorRing(),y,w);for(var E=0;E<u.getNumInteriorRing();E++)Sa.computeDistance(u.getInteriorRingN(E),y,w)}else if(arguments[2]instanceof Ci&&arguments[0]instanceof Ct&&arguments[1]instanceof Ee){var C=arguments[0],T=arguments[1],R=arguments[2];if(C instanceof Xn)Sa.computeDistance(C,T,R);else if(C instanceof Ar)Sa.computeDistance(C,T,R);else if(C instanceof Wi)for(var O=C,B=0;B<O.getNumGeometries();B++){var Y=O.getGeometryN(B);Sa.computeDistance(Y,T,R)}else R.setMinimum(C.getCoordinate(),T)}else if(arguments[2]instanceof Ci&&arguments[0]instanceof bt&&arguments[1]instanceof Ee){var $=arguments[0],U=arguments[1],G=arguments[2],re=$.closestPoint(U);G.setMinimum(re,U)}};var ys=function(){this._g0=null,this._g1=null,this._ptDist=new Ci,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},dI={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ys.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};ys.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new Fn("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};ys.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};ys.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};ys.prototype.computeOrientedDistance=function(e,t,n){var r=new zp(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new nc(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};ys.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};ys.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ys(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2],h=new ys(r,i);return h.setDensifyFraction(l),h.distance()}};dI.MaxPointDistanceFilter.get=function(){return zp};dI.MaxDensifiedByFractionDistanceFilter.get=function(){return nc};Object.defineProperties(ys,dI);var zp=function(){this._maxPtDist=new Ci,this._minPtDist=new Ci,this._euclideanDist=new Sa,this._geom=null;var e=arguments[0];this._geom=e};zp.prototype.filter=function(e){this._minPtDist.initialize(),Sa.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};zp.prototype.getMaxPointDistance=function(){return this._maxPtDist};zp.prototype.interfaces_=function(){return[fl]};zp.prototype.getClass=function(){return zp};var nc=function(){this._maxPtDist=new Ci,this._minPtDist=new Ci,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};nc.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),l=(i.x-r.x)/this._numSubSegs,h=(i.y-r.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++){var y=r.x+u*l,w=r.y+u*h,E=new Ee(y,w);n._minPtDist.initialize(),Sa.computeDistance(n._geom,E,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};nc.prototype.isDone=function(){return!1};nc.prototype.isGeometryChanged=function(){return!1};nc.prototype.getMaxPointDistance=function(){return this._maxPtDist};nc.prototype.interfaces_=function(){return[Ws]};nc.prototype.getClass=function(){return nc};var Po=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},fI={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Po.prototype.checkMaximumDistance=function(e,t,n){var r=new ys(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+qs.toLineString(i[0],i[1])+")"}};Po.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Po.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Po.VERBOSE&&mi.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Po.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ar||this._input instanceof hl||this._input instanceof Wi))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};Po.prototype.getErrorIndicator=function(){return this._errorIndicator};Po.prototype.checkMinimumDistance=function(e,t,n){var r=new gi(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+qs.toLineString(i[0],i[1])+" )"}};Po.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};Po.prototype.getErrorLocation=function(){return this._errorLocation};Po.prototype.getPolygonLines=function(e){for(var t=new et,n=new ui(t),r=eu.getPolygons(e),i=r.iterator();i.hasNext();){var l=i.next();l.apply(n)}return e.getFactory().buildGeometry(t)};Po.prototype.getErrorMessage=function(){return this._errMsg};Po.prototype.interfaces_=function(){return[]};Po.prototype.getClass=function(){return Po};fI.VERBOSE.get=function(){return!1};fI.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Po,fI);var yi=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},mI={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};yi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};yi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*yi.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new _t(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new _t(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};yi.prototype.checkDistance=function(){var e=new Po(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};yi.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};yi.prototype.checkPolygonal=function(){this._result instanceof Ar||this._result instanceof hl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};yi.prototype.getErrorIndicator=function(){return this._errorIndicator};yi.prototype.getErrorLocation=function(){return this._errorLocation};yi.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};yi.prototype.report=function(e){if(!yi.VERBOSE)return null;mi.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};yi.prototype.getErrorMessage=function(){return this._errorMsg};yi.prototype.interfaces_=function(){return[]};yi.prototype.getClass=function(){return yi};yi.isValidMsg=function(e,t,n){var r=new yi(e,t,n);return r.isValid()?null:r.getErrorMessage()};yi.isValid=function(e,t,n){var r=new yi(e,t,n);return!!r.isValid()};mI.VERBOSE.get=function(){return!1};mI.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(yi,mI);var Ba=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Ba.prototype.getCoordinates=function(){return this._pts};Ba.prototype.size=function(){return this._pts.length};Ba.prototype.getCoordinate=function(e){return this._pts[e]};Ba.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ba.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:kp.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Ba.prototype.setData=function(e){this._data=e};Ba.prototype.getData=function(){return this._data};Ba.prototype.toString=function(){return qs.toLineString(new nr(this._pts))};Ba.prototype.interfaces_=function(){return[yl]};Ba.prototype.getClass=function(){return Ba};var Qr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new et,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Qr.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Qr.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};Qr.prototype.getIntersectionSegments=function(){return this._intSegments};Qr.prototype.count=function(){return this._intersectionCount};Qr.prototype.getIntersections=function(){return this._intersections};Qr.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Qr.prototype.setKeepIntersections=function(e){this._keepIntersections=e};Qr.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var l=e.getCoordinates()[t],h=e.getCoordinates()[t+1],u=n.getCoordinates()[r],y=n.getCoordinates()[r+1];this._li.computeIntersection(l,h,u,y),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=l,this._intSegments[1]=h,this._intSegments[2]=u,this._intSegments[3]=y,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Qr.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};Qr.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Qr.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Qr.prototype.interfaces_=function(){return[bh]};Qr.prototype.getClass=function(){return Qr};Qr.createAllIntersectionsFinder=function(e){var t=new Qr(e);return t.setFindAllIntersections(!0),t};Qr.createAnyIntersectionFinder=function(e){return new Qr(e)};Qr.createIntersectionCounter=function(e){var t=new Qr(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Ys=function(){this._li=new kh,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Ys.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Ys.prototype.getIntersections=function(){return this._segInt.getIntersections()};Ys.prototype.isValid=function(){return this.execute(),this._isValid};Ys.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Ys.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Qr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new hI;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Ys.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ru(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Ys.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+qs.toLineString(e[0],e[1])+" and "+qs.toLineString(e[2],e[3])};Ys.prototype.interfaces_=function(){return[]};Ys.prototype.getClass=function(){return Ys};Ys.computeIntersections=function(e){var t=new Ys(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Eh=function e(){this._nv=null;var t=arguments[0];this._nv=new Ys(e.toSegmentStrings(t))};Eh.prototype.checkValid=function(){this._nv.checkValid()};Eh.prototype.interfaces_=function(){return[]};Eh.prototype.getClass=function(){return Eh};Eh.toSegmentStrings=function(e){for(var t=new et,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Ba(r.getCoordinates(),r))}return t};Eh.checkValid=function(e){var t=new Eh(e);t.checkValid()};var Fp=function(e){this._mapOp=e};Fp.prototype.map=function(e){for(var t=this,n=new et,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(Kt.toGeometryArray(n))};Fp.prototype.interfaces_=function(){return[]};Fp.prototype.getClass=function(){return Fp};Fp.map=function(e,t){var n=new Fp(t);return n.map(e)};var ja=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new et,this._resultLineList=new et;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};ja.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};ja.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};ja.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};ja.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&Ft.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};ja.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),l=i.getEdge();if(i.isLineEdge()&&!l.isCoveredSet()){var h=e._op.isCoveredByA(i.getCoordinate());l.setCovered(h)}}};ja.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};ja.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};ja.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;Vt.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),Ft.isResultOfOp(r,t)&&t===Ft.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};ja.prototype.interfaces_=function(){return[]};ja.prototype.getClass=function(){return ja};var Bp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new et;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Bp.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Bp.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===Ft.INTERSECTION)){var i=r.getLabel();Ft.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Bp.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Bp.prototype.interfaces_=function(){return[]};Bp.prototype.getClass=function(){return Bp};var mo=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};mo.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};mo.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof ml)||i.isEmpty())&&(r=!1);for(var l=new et,h=0;h<e.getNumInteriorRing();h++){var u=n.transformLinearRing(e.getInteriorRingN(h),e);u===null||u.isEmpty()||(u instanceof ml||(r=!1),l.add(u))}if(r)return this._factory.createPolygon(i,l.toArray([]));var y=new et;return i!==null&&y.add(i),y.addAll(l),this._factory.buildGeometry(y)};mo.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};mo.prototype.getInputGeometry=function(){return this._inputGeom};mo.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new et,i=0;i<e.getNumGeometries();i++){var l=n.transformLineString(e.getGeometryN(i),e);l!==null&&(l.isEmpty()||r.add(l))}return this._factory.buildGeometry(r)};mo.prototype.transformCoordinates=function(e,t){return this.copy(e)};mo.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};mo.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new et,i=0;i<e.getNumGeometries();i++){var l=n.transformPoint(e.getGeometryN(i),e);l!==null&&(l.isEmpty()||r.add(l))}return this._factory.buildGeometry(r)};mo.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new et,i=0;i<e.getNumGeometries();i++){var l=n.transformPolygon(e.getGeometryN(i),e);l!==null&&(l.isEmpty()||r.add(l))}return this._factory.buildGeometry(r)};mo.prototype.copy=function(e){return e.copy()};mo.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new et,i=0;i<e.getNumGeometries();i++){var l=n.transform(e.getGeometryN(i));l!==null&&(n._pruneEmptyGeometry&&l.isEmpty()||r.add(l))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Kt.toGeometryArray(r)):this._factory.buildGeometry(r)};mo.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Ao)return this.transformPoint(e,null);if(e instanceof Of)return this.transformMultiPoint(e,null);if(e instanceof ml)return this.transformLinearRing(e,null);if(e instanceof Xn)return this.transformLineString(e,null);if(e instanceof _h)return this.transformMultiLineString(e,null);if(e instanceof Ar)return this.transformPolygon(e,null);if(e instanceof hl)return this.transformMultiPolygon(e,null);if(e instanceof Wi)return this.transformGeometryCollection(e,null);throw new Fn("Unknown Geometry subtype: "+e.getClass().getName())};mo.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};mo.prototype.interfaces_=function(){return[]};mo.prototype.getClass=function(){return mo};var xl=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new bt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Xn&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};xl.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var l=e.get(i),h=n.findSnapForVertex(l,t);h!==null&&(e.set(i,new Ee(h)),i===0&&n._isClosed&&e.set(e.size()-1,new Ee(h)))}};xl.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};xl.prototype.snapTo=function(e){var t=new v0(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};xl.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var l=t[i],h=n.findSegmentIndexToSnap(l,e);h>=0&&e.add(h+1,new Ee(l),!1)}};xl.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=kt.MAX_VALUE,i=-1,l=0;l<t.size()-1;l++){if(n._seg.p0=t.get(l),n._seg.p1=t.get(l+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var h=n._seg.distance(e);h<n._snapTolerance&&h<r&&(r=h,i=l)}return i};xl.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};xl.prototype.interfaces_=function(){return[]};xl.prototype.getClass=function(){return xl};xl.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var rr=function(e){this._srcGeom=e||null},oD={SNAP_PRECISION_FACTOR:{configurable:!0}};rr.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new sD(t,n);return r.transform(this._srcGeom)};rr.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new sD(e,n,!0),i=r.transform(this._srcGeom),l=i;return t&&It(l,Ku)&&(l=i.buffer(0)),l};rr.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};rr.prototype.extractTargetCoordinates=function(e){for(var t=new ka,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};rr.prototype.computeMinimumSegmentLength=function(e){for(var t=kt.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};rr.snap=function(e,t,n){var r=new Array(2).fill(null),i=new rr(e);r[0]=i.snapTo(t,n);var l=new rr(t);return r[1]=l.snapTo(r[0],n),r};rr.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=rr.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===ln.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],l=arguments[1];return Math.min(rr.computeOverlaySnapTolerance(i),rr.computeOverlaySnapTolerance(l))}};rr.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*rr.SNAP_PRECISION_FACTOR;return r};rr.snapToSelf=function(e,t,n){var r=new rr(e);return r.snapToSelf(t,n)};oD.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(rr,oD);var sD=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new xl(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),l=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(l)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(mo),ji=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ji.prototype.getCommon=function(){return kt.longBitsToDouble(this._commonBits)};ji.prototype.add=function(e){var t=kt.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=ji.signExpBits(this._commonBits),this._isFirst=!1,null;var n=ji.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=ji.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=ji.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};ji.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=kt.longBitsToDouble(e),n=kt.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),l=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return l}};ji.prototype.interfaces_=function(){return[]};ji.prototype.getClass=function(){return ji};ji.getBit=function(e,t){var n=1<<t;return e&n?1:0};ji.signExpBits=function(e){return e>>52};ji.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};ji.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(ji.getBit(e,r)!==ji.getBit(t,r))return n;n++}return 52};var rc=function(){this._commonCoord=null,this._ccFilter=new jp},gI={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rc.prototype.addCommonBits=function(e){var t=new ic(this._commonCoord);e.apply(t),e.geometryChanged()};rc.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new Ee(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new ic(t);return e.apply(n),e.geometryChanged(),e};rc.prototype.getCommonCoordinate=function(){return this._commonCoord};rc.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};rc.prototype.interfaces_=function(){return[]};rc.prototype.getClass=function(){return rc};gI.CommonCoordinateFilter.get=function(){return jp};gI.Translater.get=function(){return ic};Object.defineProperties(rc,gI);var jp=function(){this._commonBitsX=new ji,this._commonBitsY=new ji};jp.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};jp.prototype.getCommonCoordinate=function(){return new Ee(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};jp.prototype.interfaces_=function(){return[fl]};jp.prototype.getClass=function(){return jp};var ic=function(){this.trans=null;var e=arguments[0];this.trans=e};ic.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};ic.prototype.isDone=function(){return!1};ic.prototype.isGeometryChanged=function(){return!0};ic.prototype.interfaces_=function(){return[Ws]};ic.prototype.getClass=function(){return ic};var ei=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};ei.prototype.selfSnap=function(e){var t=new rr(e),n=t.snapTo(e,this._snapTolerance);return n};ei.prototype.removeCommonBits=function(e){this._cbr=new rc,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};ei.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};ei.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=Ft.overlayOp(t[0],t[1],e);return this.prepareResult(n)};ei.prototype.checkValid=function(e){e.isValid()||mi.out.println("Snapped geometry is invalid")};ei.prototype.computeSnapTolerance=function(){this._snapTolerance=rr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};ei.prototype.snap=function(e){var t=this.removeCommonBits(e),n=rr.snap(t[0],t[1],this._snapTolerance);return n};ei.prototype.interfaces_=function(){return[]};ei.prototype.getClass=function(){return ei};ei.overlayOp=function(e,t,n){var r=new ei(e,t);return r.getResultGeometry(n)};ei.union=function(e,t){return ei.overlayOp(e,t,Ft.UNION)};ei.intersection=function(e,t){return ei.overlayOp(e,t,Ft.INTERSECTION)};ei.symDifference=function(e,t){return ei.overlayOp(e,t,Ft.SYMDIFFERENCE)};ei.difference=function(e,t){return ei.overlayOp(e,t,Ft.DIFFERENCE)};var Xi=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};Xi.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=Ft.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(l){if(l instanceof tu)r=l;else throw l}finally{}if(!n)try{t=ei.overlayOp(this._geom[0],this._geom[1],e)}catch(l){throw l instanceof tu?r:l}finally{}return t};Xi.prototype.interfaces_=function(){return[]};Xi.prototype.getClass=function(){return Xi};Xi.overlayOp=function(e,t,n){var r=new Xi(e,t);return r.getResultGeometry(n)};Xi.union=function(e,t){return Xi.overlayOp(e,t,Ft.UNION)};Xi.intersection=function(e,t){return Xi.overlayOp(e,t,Ft.INTERSECTION)};Xi.symDifference=function(e,t){return Xi.overlayOp(e,t,Ft.SYMDIFFERENCE)};Xi.difference=function(e,t){return Xi.overlayOp(e,t,Ft.DIFFERENCE)};var Yy=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};Yy.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};Yy.prototype.interfaces_=function(){return[]};Yy.prototype.getClass=function(){return Yy};var Ro=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=l}},yI={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ro.prototype.isDelete=function(){return this._eventType===Ro.DELETE};Ro.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};Ro.prototype.getObject=function(){return this._obj};Ro.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};Ro.prototype.getInsertEvent=function(){return this._insertEvent};Ro.prototype.isInsert=function(){return this._eventType===Ro.INSERT};Ro.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};Ro.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Ro.prototype.interfaces_=function(){return[ws]};Ro.prototype.getClass=function(){return Ro};yI.INSERT.get=function(){return 1};yI.DELETE.get=function(){return 2};Object.defineProperties(Ro,yI);var Mx=function(){};Mx.prototype.interfaces_=function(){return[]};Mx.prototype.getClass=function(){return Mx};var _i=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};_i.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(_i.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};_i.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};_i.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};_i.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};_i.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};_i.prototype.hasProperIntersection=function(){return this._hasProper};_i.prototype.hasIntersection=function(){return this._hasIntersection};_i.prototype.isDone=function(){return this._isDone};_i.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};_i.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};_i.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],l=e.getCoordinates()[t+1],h=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(i,l,h,u),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};_i.prototype.interfaces_=function(){return[]};_i.prototype.getClass=function(){return _i};_i.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var KZ=function(e){function t(){e.call(this),this.events=new et,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;Zs.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var l=n.events.get(i);if(l.isInsert()&&n.processOverlaps(i,l.getDeleteEventIndex(),l,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof _i&&It(arguments[0],Vs)&&It(arguments[1],Vs)){var h=arguments[0],u=arguments[1],y=arguments[2];this.addEdges(h,h),this.addEdges(u,u),this.computeIntersections(y)}else if(typeof arguments[2]=="boolean"&&It(arguments[0],Vs)&&arguments[1]instanceof _i){var w=arguments[0],E=arguments[1],C=arguments[2];C?this.addEdges(w,null):this.addEdges(w),this.computeIntersections(E)}}},t.prototype.addEdge=function(n,r){for(var i=this,l=n.getMonotoneChainEdge(),h=l.getStartIndexes(),u=0;u<h.length-1;u++){var y=new Yy(l,u),w=new Ro(r,l.getMinX(u),y);i.events.add(w),i.events.add(new Ro(l.getMaxX(u),w))}},t.prototype.processOverlaps=function(n,r,i,l){for(var h=this,u=i.getObject(),y=n;y<r;y++){var w=h.events.get(y);if(w.isInsert()){var E=w.getObject();i.isSameLabel(w)||(u.computeIntersections(E,l),h.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var l=i.next();n.addEdge(l,l)}else if(arguments.length===2)for(var h=arguments[0],u=arguments[1],y=h.iterator();y.hasNext();){var w=y.next();n.addEdge(w,u)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Mx),bl=function(){this._min=kt.POSITIVE_INFINITY,this._max=kt.NEGATIVE_INFINITY},aD={NodeComparator:{configurable:!0}};bl.prototype.getMin=function(){return this._min};bl.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};bl.prototype.getMax=function(){return this._max};bl.prototype.toString=function(){return qs.toLineString(new Ee(this._min,0),new Ee(this._max,0))};bl.prototype.interfaces_=function(){return[]};bl.prototype.getClass=function(){return bl};aD.NodeComparator.get=function(){return Jy};Object.defineProperties(bl,aD);var Jy=function(){};Jy.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,l=(r._min+r._max)/2;return i<l?-1:i>l?1:0};Jy.prototype.interfaces_=function(){return[Lf]};Jy.prototype.getClass=function(){return Jy};var YZ=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(bl),JZ=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(bl),wl=function(){this._leaves=new et,this._root=null,this._level=0};wl.prototype.buildTree=function(){var e=this;Zs.sort(this._leaves,new bl.NodeComparator);for(var t=this._leaves,n=null,r=new et;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};wl.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new YZ(e,t,n))};wl.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};wl.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};wl.prototype.printNode=function(e){mi.out.println(qs.toLineString(new Ee(e._min,this._level),new Ee(e._max,this._level)))};wl.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};wl.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var l=new JZ(e.get(n),e.get(n+1));t.add(l)}}};wl.prototype.interfaces_=function(){return[]};wl.prototype.getClass=function(){return wl};var Vf=function(){this._items=new et};Vf.prototype.visitItem=function(e){this._items.add(e)};Vf.prototype.getItems=function(){return this._items};Vf.prototype.interfaces_=function(){return[Yu]};Vf.prototype.getClass=function(){return Vf};var Uf=function(){this._index=null;var e=arguments[0];if(!It(e,Ku))throw new Fn("Argument must be Polygonal");this._index=new Ch(e)},_I={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Uf.prototype.locate=function(e){var t=new Ia(e),n=new Gf(t);return this._index.query(e.y,e.y,n),t.getLocation()};Uf.prototype.interfaces_=function(){return[jf]};Uf.prototype.getClass=function(){return Uf};_I.SegmentVisitor.get=function(){return Gf};_I.IntervalIndexedGeometry.get=function(){return Ch};Object.defineProperties(Uf,_I);var Gf=function(){this._counter=null;var e=arguments[0];this._counter=e};Gf.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};Gf.prototype.interfaces_=function(){return[Yu]};Gf.prototype.getClass=function(){return Gf};var Ch=function(){this._index=new wl;var e=arguments[0];this.init(e)};Ch.prototype.init=function(e){for(var t=this,n=ui.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),l=i.getCoordinates();t.addLine(l)}};Ch.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new bt(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),l=Math.max(r.p0.y,r.p1.y);t._index.insert(i,l,r)}};Ch.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Vf;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2];this._index.query(r,i,l)}};Ch.prototype.interfaces_=function(){return[]};Ch.prototype.getClass=function(){return Ch};var zg=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new G4,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ks,arguments.length===2){var n=arguments[0],r=arguments[1],i=vs.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var l=arguments[0],h=arguments[1],u=arguments[2];this._argIndex=l,this._parentGeom=h,this._boundaryNodeRule=u,h!==null&&this.add(h)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),l=i.getLabel(),h=1,u=Ie.NONE;u=l.getLocation(n,We.ON),u===Ie.BOUNDARY&&h++;var y=t.determineBoundary(this._boundaryNodeRule,h);l.setLocation(n,y)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],l=arguments[1],h=arguments[2],u=new _i(i,!0,!1);u.setIsDoneIfProperInt(h);var y=this.createEdgeSetIntersector(),w=this._parentGeom instanceof ml||this._parentGeom instanceof Ar||this._parentGeom instanceof hl,E=l||!w;return y.computeIntersections(this._edges,u,E),this.addSelfIntersectionNodes(this._argIndex),u}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var l=new _i(r,i,!0);l.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var h=this.createEdgeSetIntersector();return h.computeIntersections(this._edges,n._edges,l),l},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof Ao){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,Ie.INTERIOR)}else if(arguments[0]instanceof Ee){var i=arguments[0];this.insertPoint(this._argIndex,i,Ie.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),Ie.EXTERIOR,Ie.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var l=n.getInteriorRingN(i);r.addPolygonRing(l,Ie.INTERIOR,Ie.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],Ie.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],Ie.BOUNDARY)},t.prototype.addLineString=function(n){var r=Yt.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new Lx(r,new hn(this._argIndex,Ie.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),Vt.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,l=n.iterator();l.hasNext();){var h=l.next();r[i++]=h.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===Ie.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var l=Yt.removeRepeatedPoints(n.getCoordinates());if(l.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=l[0],null;var h=r,u=i;it.isCCW(l)&&(h=i,u=r);var y=new Lx(l,new hn(this._argIndex,Ie.BOUNDARY,h,u));this._lineEdgeMap.put(n,y),this.insertEdge(y),this.insertPoint(this._argIndex,l[0],Ie.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var l=this._nodes.addNode(r),h=l.getLabel();h===null?l._label=new hn(n,i):h.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new KZ},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var l=i.next(),h=l.getLabel().getLocation(n),u=l.eiList.iterator();u.hasNext();){var y=u.next();r.addSelfIntersectionNode(n,y.coord,h)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof hl&&(this._useBoundaryDeterminationRule=!1),n instanceof Ar)this.addPolygon(n);else if(n instanceof Xn)this.addLineString(n);else if(n instanceof Ao)this.addPoint(n);else if(n instanceof Of)this.addCollection(n);else if(n instanceof _h)this.addCollection(n);else if(n instanceof hl)this.addCollection(n);else if(n instanceof Wi)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var l=n.getGeometryN(i);r.add(l)}},t.prototype.locate=function(n){return It(this._parentGeom,Ku)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Uf(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?Ie.BOUNDARY:Ie.INTERIOR},t}(Vn),qf=function(){if(this._li=new kh,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new zg(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=vs.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zg(0,t,r),this._arg[1]=new zg(1,n,r)}else if(arguments.length===3){var i=arguments[0],l=arguments[1],h=arguments[2];i.getPrecisionModel().compareTo(l.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zg(0,i,h),this._arg[1]=new zg(1,l,h)}};qf.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};qf.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};qf.prototype.interfaces_=function(){return[]};qf.prototype.getClass=function(){return qf};var lh=function(){};lh.prototype.interfaces_=function(){return[]};lh.prototype.getClass=function(){return lh};lh.map=function(){if(arguments[0]instanceof Ct&&It(arguments[1],lh.MapOp)){for(var e=arguments[0],t=arguments[1],n=new et,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(It(arguments[0],wr)&&It(arguments[1],lh.MapOp)){for(var l=arguments[0],h=arguments[1],u=new et,y=l.iterator();y.hasNext();){var w=y.next(),E=h.map(w);E!==null&&u.add(E)}return u}};lh.MapOp=function(){};var Ft=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Ks,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xs,this._resultPolyList=new et,this._resultLineList=new et,this._resultPointList=new et,this._graph=new Vn(new J4),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),l=n.getLabel();r.isPointwiseEqual(n)||(l=new hn(n.getLabel()),l.flip());var h=r.getDepth();h.isNull()&&h.add(i),h.add(l),i.merge(l)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,l){var h=new et;return h.addAll(n),h.addAll(r),h.addAll(i),h.isEmpty()?t.createEmptyResult(l,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(h)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,l=r.iterator();l.hasNext();){var h=l.next(),u=i._ptLocator.locate(n,h);if(u!==Ie.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new et,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var l=i.next();r.insertUniqueEdge(l)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new et;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Eh.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new ko(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var l=new ja(this,this._geomFact,this._ptLocator);this._resultLineList=l.build(n);var h=new Bp(this,this._geomFact,this._ptLocator);this._resultPointList=h.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var l=i.next(),h=r._graph.addNode(l.getCoordinate());h.setLabel(n,l.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),l=i.getLabel();l.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(l.getLocation(0,We.RIGHT),l.getLocation(1,We.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),l=r.getDepth();if(!l.isNull()){l.normalize();for(var h=0;h<2;h++)!i.isNull(h)&&i.isArea()&&!l.isNull(h)&&(l.getDelta(h)===0?i.toLine(h):(Vt.isTrue(!l.isNull(h,We.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(h,We.LEFT,l.getLocation(h,We.LEFT)),Vt.isTrue(!l.isNull(h,We.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(h,We.RIGHT,l.getLocation(h,We.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),l=i.getLabel();i.isIsolated()&&(l.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(l)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qf);Ft.overlayOp=function(e,t,n){var r=new Ft(e,t),i=r.getResultGeometry(n);return i};Ft.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Ft.createEmptyResult(Ft.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Fp.map(e,{interfaces_:function(){return[lh.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Xi.overlayOp(e,t,Ft.INTERSECTION)};Ft.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Ft.createEmptyResult(Ft.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Xi.overlayOp(e,t,Ft.SYMDIFFERENCE)};Ft.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),l=-1;switch(e){case Ft.INTERSECTION:l=Math.min(r,i);break;case Ft.UNION:l=Math.max(r,i);break;case Ft.DIFFERENCE:l=r;break;case Ft.SYMDIFFERENCE:l=Math.max(r,i);break}return l};Ft.createEmptyResult=function(e,t,n,r){var i=null;switch(Ft.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};Ft.difference=function(e,t){return e.isEmpty()?Ft.createEmptyResult(Ft.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Xi.overlayOp(e,t,Ft.DIFFERENCE))};Ft.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return Ft.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],l=arguments[1],h=arguments[2];switch(i===Ie.BOUNDARY&&(i=Ie.INTERIOR),l===Ie.BOUNDARY&&(l=Ie.INTERIOR),h){case Ft.INTERSECTION:return i===Ie.INTERIOR&&l===Ie.INTERIOR;case Ft.UNION:return i===Ie.INTERIOR||l===Ie.INTERIOR;case Ft.DIFFERENCE:return i===Ie.INTERIOR&&l!==Ie.INTERIOR;case Ft.SYMDIFFERENCE:return i===Ie.INTERIOR&&l!==Ie.INTERIOR||i!==Ie.INTERIOR&&l===Ie.INTERIOR}return!1}};Ft.INTERSECTION=1;Ft.UNION=2;Ft.DIFFERENCE=3;Ft.SYMDIFFERENCE=4;var Vu=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ks,this._seg=new bt;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Vu.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),l=0;l<i.size()-1;l++){i.getCoordinate(l,t._seg.p0),i.getCoordinate(l+1,t._seg.p1);var h=t._seg.distance(e);if(h<=t._boundaryDistanceTolerance)return!0}return!1};Vu.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?Ie.BOUNDARY:this._ptLocator.locate(e,this._g)};Vu.prototype.extractLinework=function(e){var t=new Wf;e.apply(t);var n=t.getLinework(),r=Kt.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};Vu.prototype.interfaces_=function(){return[]};Vu.prototype.getClass=function(){return Vu};var Wf=function(){this._linework=null,this._linework=new et};Wf.prototype.getLinework=function(){return this._linework};Wf.prototype.filter=function(e){var t=this;if(e instanceof Ar){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};Wf.prototype.interfaces_=function(){return[Na]};Wf.prototype.getClass=function(){return Wf};var Ih=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Ih.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),l=0;l<i.length-1;l++)r.computeOffsetPoints(i[l],i[l+1],t,n)};Ih.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Ih.prototype.getPoints=function(e){for(var t=this,n=new et,r=ui.getLines(this._g),i=r.iterator();i.hasNext();){var l=i.next();t.extractPoints(l,e,n)}return n};Ih.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,l=t.y-e.y,h=Math.sqrt(i*i+l*l),u=n*i/h,y=n*l/h,w=(t.x+e.x)/2,E=(t.y+e.y)/2;if(this._doLeft){var C=new Ee(w-y,E+u);r.add(C)}if(this._doRight){var T=new Ee(w+y,E-u);r.add(T)}};Ih.prototype.interfaces_=function(){return[]};Ih.prototype.getClass=function(){return Ih};var rs=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new et;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Vu(this._geom[0],this._boundaryDistanceTolerance),new Vu(this._geom[1],this._boundaryDistanceTolerance),new Vu(this._geom[2],this._boundaryDistanceTolerance)]},lD={TOLERANCE:{configurable:!0}};rs.prototype.reportResult=function(e,t,n){mi.out.println("Overlay result invalid - A:"+Ie.toLocationSymbol(t[0])+" B:"+Ie.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+Ie.toLocationSymbol(t[2]))};rs.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};rs.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],l=arguments[1];return this._location[0]=this._locFinder[0].getLocation(l),this._location[1]=this._locFinder[1].getLocation(l),this._location[2]=this._locFinder[2].getLocation(l),rs.hasLocation(this._location,Ie.BOUNDARY)?!0:this.isValidResult(i,this._location)}};rs.prototype.addTestPts=function(e){var t=new Ih(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};rs.prototype.isValidResult=function(e,t){var n=Ft.isResultOfOp(t[0],t[1],e),r=t[2]===Ie.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};rs.prototype.getInvalidLocation=function(){return this._invalidLocation};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};rs.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};rs.computeBoundaryDistanceTolerance=function(e,t){return Math.min(rr.computeSizeBasedSnapTolerance(e),rr.computeSizeBasedSnapTolerance(t))};rs.isValid=function(e,t,n,r){var i=new rs(e,t,r);return i.isValid(n)};lD.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(rs,lD);var Xo=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Xo.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Xo.prototype.combine=function(){for(var e=this,t=new et,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Xo.prototype.interfaces_=function(){return[]};Xo.prototype.getClass=function(){return Xo};Xo.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Xo(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Xo(Xo.createList(n,r));return i.combine()}else if(arguments.length===3){var l=arguments[0],h=arguments[1],u=arguments[2],y=new Xo(Xo.createList(l,h,u));return y.combine()}};Xo.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Xo.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new et;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],l=arguments[2],h=new et;return h.add(r),h.add(i),h.add(l),h}};var gr=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new et)},uD={STRTREE_NODE_CAPACITY:{configurable:!0}};gr.prototype.reduceToGeometries=function(e){for(var t=this,n=new et,r=e.iterator();r.hasNext();){var i=r.next(),l=null;It(i,Vs)?l=t.unionTree(i):i instanceof Ct&&(l=i),n.add(l)}return n};gr.prototype.extractByEnvelope=function(e,t,n){for(var r=new et,i=0;i<t.getNumGeometries();i++){var l=t.getGeometryN(i);l.getEnvelopeInternal().intersects(e)?r.add(l):n.add(l)}return this._geomFactory.buildGeometry(r)};gr.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Xo.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var l=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,l)};gr.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Z4(gr.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};gr.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=gr.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(gr.getGeometry(t,n),gr.getGeometry(t,n+1));var l=Math.trunc((r+n)/2),h=this.binaryUnion(t,n,l),u=this.binaryUnion(t,l,r);return this.unionSafe(h,u)}}};gr.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};gr.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};gr.prototype.unionActual=function(e,t){return gr.restrictToPolygons(e.union(t))};gr.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};gr.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new et,i=this.extractByEnvelope(n,e,r),l=this.extractByEnvelope(n,t,r),h=this.unionActual(i,l);r.add(h);var u=Xo.combine(r);return u};gr.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],l=arguments[1],h=i.getFactory(),u=h.createGeometryCollection([i,l]),y=u.buffer(0);return y}};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.restrictToPolygons=function(e){if(It(e,Ku))return e;var t=eu.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(Kt.toPolygonArray(t))};gr.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};gr.union=function(e){var t=new gr(e);return t.union()};uD.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(gr,uD);var Ax=function(){};Ax.prototype.interfaces_=function(){return[]};Ax.prototype.getClass=function(){return Ax};Ax.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Ft.createEmptyResult(Ft.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Xi.overlayOp(e,t,Ft.UNION)};function Nh(){return new kx}function kx(){this.reset()}kx.prototype={constructor:kx,reset:function(){this.s=this.t=0},add:function(e){ZA(lv,e,this.t),ZA(this,lv.s,this.s),this.s?this.t+=lv.t:this.s=lv.t},valueOf:function(){return this.s}};var lv=new kx;function ZA(e,t,n){var r=e.s=t+n,i=r-t,l=r-i;e.t=t-l+(n-i)}var Wn=1e-6,bn=Math.PI,Zl=bn/2,XA=bn/4,su=bn*2,Oc=180/bn,ya=bn/180,Ui=Math.abs,QZ=Math.atan,Hf=Math.atan2,Sr=Math.cos,Er=Math.sin,lm=Math.sqrt;function cD(e){return e>1?0:e<-1?bn:Math.acos(e)}function $p(e){return e>1?Zl:e<-1?-Zl:Math.asin(e)}function Ug(){}function Nx(e,t){e&&YA.hasOwnProperty(e.type)&&YA[e.type](e,t)}var KA={Feature:function(e,t){Nx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Nx(n[r].geometry,t)}},YA={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){JS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JS(n[r],t,0)},Polygon:function(e,t){JA(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JA(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Nx(n[r],t)}};function JS(e,t,n){var r=-1,i=e.length-n,l;for(t.lineStart();++r<i;)l=e[r],t.point(l[0],l[1],l[2]);t.lineEnd()}function JA(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)JS(e[n],t,1);t.polygonEnd()}function eX(e,t){e&&KA.hasOwnProperty(e.type)?KA[e.type](e,t):Nx(e,t)}Nh();Nh();function QS(e){return[Hf(e[1],e[0]),$p(e[2])]}function Zf(e){var t=e[0],n=e[1],r=Sr(n);return[r*Sr(t),r*Er(t),Er(n)]}function uv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Rx(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function m2(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cv(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function eE(e){var t=lm(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Nh();function hD(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function tE(e,t){return[e>bn?e-su:e<-bn?e+su:e,t]}tE.invert=tE;function tX(e,t,n){return(e%=su)?t||n?hD(ek(e),tk(t,n)):ek(e):t||n?tk(t,n):tE}function QA(e){return function(t,n){return t+=e,[t>bn?t-su:t<-bn?t+su:t,n]}}function ek(e){var t=QA(e);return t.invert=QA(-e),t}function tk(e,t){var n=Sr(e),r=Er(e),i=Sr(t),l=Er(t);function h(u,y){var w=Sr(y),E=Sr(u)*w,C=Er(u)*w,T=Er(y),R=T*n+E*r;return[Hf(C*i-R*l,E*n-T*r),$p(R*i+C*l)]}return h.invert=function(u,y){var w=Sr(y),E=Sr(u)*w,C=Er(u)*w,T=Er(y),R=T*i-C*l;return[Hf(C*i+T*l,E*n+R*r),$p(R*n-E*r)]},h}function nX(e,t,n,r,i,l){if(n){var h=Sr(t),u=Er(t),y=r*n;i==null?(i=t+r*su,l=t-y/2):(i=nk(h,i),l=nk(h,l),(r>0?i<l:i>l)&&(i+=r*su));for(var w,E=i;r>0?E>l:E<l;E-=y)w=QS([h,-u*Sr(E),-u*Er(E)]),e.point(w[0],w[1])}}function nk(e,t){t=Zf(t),t[0]-=e,eE(t);var n=cD(-t[1]);return((-t[2]<0?-n:n)+su-Wn)%su}function pD(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ug,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function rX(e,t,n,r,i,l){var h=e[0],u=e[1],y=t[0],w=t[1],E=0,C=1,T=y-h,R=w-u,O;if(O=n-h,!(!T&&O>0)){if(O/=T,T<0){if(O<E)return;O<C&&(C=O)}else if(T>0){if(O>C)return;O>E&&(E=O)}if(O=i-h,!(!T&&O<0)){if(O/=T,T<0){if(O>C)return;O>E&&(E=O)}else if(T>0){if(O<E)return;O<C&&(C=O)}if(O=r-u,!(!R&&O>0)){if(O/=R,R<0){if(O<E)return;O<C&&(C=O)}else if(R>0){if(O>C)return;O>E&&(E=O)}if(O=l-u,!(!R&&O<0)){if(O/=R,R<0){if(O>C)return;O>E&&(E=O)}else if(R>0){if(O<E)return;O<C&&(C=O)}return E>0&&(e[0]=h+E*T,e[1]=u+E*R),C<1&&(t[0]=h+C*T,t[1]=u+C*R),!0}}}}}function Ov(e,t){return Ui(e[0]-t[0])<Wn&&Ui(e[1]-t[1])<Wn}function hv(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function dD(e,t,n,r,i){var l=[],h=[],u,y;if(e.forEach(function(O){if(!((B=O.length-1)<=0)){var B,Y=O[0],$=O[B],U;if(Ov(Y,$)){for(i.lineStart(),u=0;u<B;++u)i.point((Y=O[u])[0],Y[1]);i.lineEnd();return}l.push(U=new hv(Y,O,null,!0)),h.push(U.o=new hv(Y,null,U,!1)),l.push(U=new hv($,O,null,!1)),h.push(U.o=new hv($,null,U,!0))}}),!!l.length){for(h.sort(t),rk(l),rk(h),u=0,y=h.length;u<y;++u)h[u].e=n=!n;for(var w=l[0],E,C;;){for(var T=w,R=!0;T.v;)if((T=T.n)===w)return;E=T.z,i.lineStart();do{if(T.v=T.o.v=!0,T.e){if(R)for(u=0,y=E.length;u<y;++u)i.point((C=E[u])[0],C[1]);else r(T.x,T.n.x,1,i);T=T.n}else{if(R)for(E=T.p.z,u=E.length-1;u>=0;--u)i.point((C=E[u])[0],C[1]);else r(T.x,T.p.x,-1,i);T=T.p}T=T.o,E=T.z,R=!R}while(!T.v);i.lineEnd()}}}function rk(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function fD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iX(e){return e.length===1&&(e=oX(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var l=r+i>>>1;e(t[l],n)<0?r=l+1:i=l}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var l=r+i>>>1;e(t[l],n)>0?i=l:r=l+1}return r}}}function oX(e){return function(t,n){return fD(e(t),n)}}iX(fD);function mD(e){for(var t=e.length,n,r=-1,i=0,l,h;++r<t;)i+=e[r].length;for(l=new Array(i);--t>=0;)for(h=e[t],n=h.length;--n>=0;)l[--i]=h[n];return l}var Gg=1e9,pv=-Gg;function sX(e,t,n,r){function i(w,E){return e<=w&&w<=n&&t<=E&&E<=r}function l(w,E,C,T){var R=0,O=0;if(w==null||(R=h(w,C))!==(O=h(E,C))||y(w,E)<0^C>0)do T.point(R===0||R===3?e:n,R>1?r:t);while((R=(R+C+4)%4)!==O);else T.point(E[0],E[1])}function h(w,E){return Ui(w[0]-e)<Wn?E>0?0:3:Ui(w[0]-n)<Wn?E>0?2:1:Ui(w[1]-t)<Wn?E>0?1:0:E>0?3:2}function u(w,E){return y(w.x,E.x)}function y(w,E){var C=h(w,1),T=h(E,1);return C!==T?C-T:C===0?E[1]-w[1]:C===1?w[0]-E[0]:C===2?w[1]-E[1]:E[0]-w[0]}return function(w){var E=w,C=pD(),T,R,O,B,Y,$,U,G,re,he,_e,fe={point:ye,lineStart:Ye,lineEnd:wt,polygonStart:De,polygonEnd:Ue};function ye(Je,vt){i(Je,vt)&&E.point(Je,vt)}function Pe(){for(var Je=0,vt=0,Gt=R.length;vt<Gt;++vt)for(var Xe=R[vt],dt=1,St=Xe.length,Pt=Xe[0],Bt,yn,Yn=Pt[0],Jn=Pt[1];dt<St;++dt)Bt=Yn,yn=Jn,Pt=Xe[dt],Yn=Pt[0],Jn=Pt[1],yn<=r?Jn>r&&(Yn-Bt)*(r-yn)>(Jn-yn)*(e-Bt)&&++Je:Jn<=r&&(Yn-Bt)*(r-yn)<(Jn-yn)*(e-Bt)&&--Je;return Je}function De(){E=C,T=[],R=[],_e=!0}function Ue(){var Je=Pe(),vt=_e&&Je,Gt=(T=mD(T)).length;(vt||Gt)&&(w.polygonStart(),vt&&(w.lineStart(),l(null,null,1,w),w.lineEnd()),Gt&&dD(T,u,Je,l,w),w.polygonEnd()),E=w,T=R=O=null}function Ye(){fe.point=Ae,R&&R.push(O=[]),he=!0,re=!1,U=G=NaN}function wt(){T&&(Ae(B,Y),$&&re&&C.rejoin(),T.push(C.result())),fe.point=ye,re&&E.lineEnd()}function Ae(Je,vt){var Gt=i(Je,vt);if(R&&O.push([Je,vt]),he)B=Je,Y=vt,$=Gt,he=!1,Gt&&(E.lineStart(),E.point(Je,vt));else if(Gt&&re)E.point(Je,vt);else{var Xe=[U=Math.max(pv,Math.min(Gg,U)),G=Math.max(pv,Math.min(Gg,G))],dt=[Je=Math.max(pv,Math.min(Gg,Je)),vt=Math.max(pv,Math.min(Gg,vt))];rX(Xe,dt,e,t,n,r)?(re||(E.lineStart(),E.point(Xe[0],Xe[1])),E.point(dt[0],dt[1]),Gt||E.lineEnd(),_e=!1):Gt&&(E.lineStart(),E.point(Je,vt),_e=!1)}U=Je,G=vt,re=Gt}return fe}}var g2=Nh();function aX(e,t){var n=t[0],r=t[1],i=[Er(n),-Sr(n),0],l=0,h=0;g2.reset();for(var u=0,y=e.length;u<y;++u)if(E=(w=e[u]).length)for(var w,E,C=w[E-1],T=C[0],R=C[1]/2+XA,O=Er(R),B=Sr(R),Y=0;Y<E;++Y,T=U,O=re,B=he,C=$){var $=w[Y],U=$[0],G=$[1]/2+XA,re=Er(G),he=Sr(G),_e=U-T,fe=_e>=0?1:-1,ye=fe*_e,Pe=ye>bn,De=O*re;if(g2.add(Hf(De*fe*Er(ye),B*he+De*Sr(ye))),l+=Pe?_e+fe*su:_e,Pe^T>=n^U>=n){var Ue=Rx(Zf(C),Zf($));eE(Ue);var Ye=Rx(i,Ue);eE(Ye);var wt=(Pe^_e>=0?-1:1)*$p(Ye[2]);(r>wt||r===wt&&(Ue[0]||Ue[1]))&&(h+=Pe^_e>=0?1:-1)}}return(l<-Wn||l<Wn&&g2<-Wn)^h&1}Nh();function ik(e){return e}Nh();Nh();var Xf=1/0,Dx=Xf,Qy=-Xf,Ox=Qy,ok={point:lX,lineStart:Ug,lineEnd:Ug,polygonStart:Ug,polygonEnd:Ug,result:function(){var e=[[Xf,Dx],[Qy,Ox]];return Qy=Ox=-(Dx=Xf=1/0),e}};function lX(e,t){e<Xf&&(Xf=e),e>Qy&&(Qy=e),t<Dx&&(Dx=t),t>Ox&&(Ox=t)}Nh();function gD(e,t,n,r){return function(i,l){var h=t(l),u=i.invert(r[0],r[1]),y=pD(),w=t(y),E=!1,C,T,R,O={point:B,lineStart:$,lineEnd:U,polygonStart:function(){O.point=G,O.lineStart=re,O.lineEnd=he,T=[],C=[]},polygonEnd:function(){O.point=B,O.lineStart=$,O.lineEnd=U,T=mD(T);var _e=aX(C,u);T.length?(E||(l.polygonStart(),E=!0),dD(T,cX,_e,n,l)):_e&&(E||(l.polygonStart(),E=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),E&&(l.polygonEnd(),E=!1),T=C=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function B(_e,fe){var ye=i(_e,fe);e(_e=ye[0],fe=ye[1])&&l.point(_e,fe)}function Y(_e,fe){var ye=i(_e,fe);h.point(ye[0],ye[1])}function $(){O.point=Y,h.lineStart()}function U(){O.point=B,h.lineEnd()}function G(_e,fe){R.push([_e,fe]);var ye=i(_e,fe);w.point(ye[0],ye[1])}function re(){w.lineStart(),R=[]}function he(){G(R[0][0],R[0][1]),w.lineEnd();var _e=w.clean(),fe=y.result(),ye,Pe=fe.length,De,Ue,Ye;if(R.pop(),C.push(R),R=null,!!Pe){if(_e&1){if(Ue=fe[0],(De=Ue.length-1)>0){for(E||(l.polygonStart(),E=!0),l.lineStart(),ye=0;ye<De;++ye)l.point((Ye=Ue[ye])[0],Ye[1]);l.lineEnd()}return}Pe>1&&_e&2&&fe.push(fe.pop().concat(fe.shift())),T.push(fe.filter(uX))}}return O}}function uX(e){return e.length>1}function cX(e,t){return((e=e.x)[0]<0?e[1]-Zl-Wn:Zl-e[1])-((t=t.x)[0]<0?t[1]-Zl-Wn:Zl-t[1])}const sk=gD(function(){return!0},hX,dX,[-bn,-Zl]);function hX(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(l,h){var u=l>0?bn:-bn,y=Ui(l-t);Ui(y-bn)<Wn?(e.point(t,n=(n+h)/2>0?Zl:-Zl),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(l,n),i=0):r!==u&&y>=bn&&(Ui(t-r)<Wn&&(t-=r*Wn),Ui(l-u)<Wn&&(l-=u*Wn),n=pX(t,n,l,h),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=l,n=h),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function pX(e,t,n,r){var i,l,h=Er(e-n);return Ui(h)>Wn?QZ((Er(t)*(l=Sr(r))*Er(n)-Er(r)*(i=Sr(t))*Er(e))/(i*l*h)):(t+r)/2}function dX(e,t,n,r){var i;if(e==null)i=n*Zl,r.point(-bn,i),r.point(0,i),r.point(bn,i),r.point(bn,0),r.point(bn,-i),r.point(0,-i),r.point(-bn,-i),r.point(-bn,0),r.point(-bn,i);else if(Ui(e[0]-t[0])>Wn){var l=e[0]<t[0]?bn:-bn;i=n*l/2,r.point(-l,i),r.point(0,i),r.point(l,i)}else r.point(t[0],t[1])}function fX(e,t){var n=Sr(e),r=n>0,i=Ui(n)>Wn;function l(E,C,T,R){nX(R,e,t,T,E,C)}function h(E,C){return Sr(E)*Sr(C)>n}function u(E){var C,T,R,O,B;return{lineStart:function(){O=R=!1,B=1},point:function(Y,$){var U=[Y,$],G,re=h(Y,$),he=r?re?0:w(Y,$):re?w(Y+(Y<0?bn:-bn),$):0;if(!C&&(O=R=re)&&E.lineStart(),re!==R&&(G=y(C,U),(!G||Ov(C,G)||Ov(U,G))&&(U[0]+=Wn,U[1]+=Wn,re=h(U[0],U[1]))),re!==R)B=0,re?(E.lineStart(),G=y(U,C),E.point(G[0],G[1])):(G=y(C,U),E.point(G[0],G[1]),E.lineEnd()),C=G;else if(i&&C&&r^re){var _e;!(he&T)&&(_e=y(U,C,!0))&&(B=0,r?(E.lineStart(),E.point(_e[0][0],_e[0][1]),E.point(_e[1][0],_e[1][1]),E.lineEnd()):(E.point(_e[1][0],_e[1][1]),E.lineEnd(),E.lineStart(),E.point(_e[0][0],_e[0][1])))}re&&(!C||!Ov(C,U))&&E.point(U[0],U[1]),C=U,R=re,T=he},lineEnd:function(){R&&E.lineEnd(),C=null},clean:function(){return B|(O&&R)<<1}}}function y(E,C,T){var R=Zf(E),O=Zf(C),B=[1,0,0],Y=Rx(R,O),$=uv(Y,Y),U=Y[0],G=$-U*U;if(!G)return!T&&E;var re=n*$/G,he=-n*U/G,_e=Rx(B,Y),fe=cv(B,re),ye=cv(Y,he);m2(fe,ye);var Pe=_e,De=uv(fe,Pe),Ue=uv(Pe,Pe),Ye=De*De-Ue*(uv(fe,fe)-1);if(!(Ye<0)){var wt=lm(Ye),Ae=cv(Pe,(-De-wt)/Ue);if(m2(Ae,fe),Ae=QS(Ae),!T)return Ae;var Je=E[0],vt=C[0],Gt=E[1],Xe=C[1],dt;vt<Je&&(dt=Je,Je=vt,vt=dt);var St=vt-Je,Pt=Ui(St-bn)<Wn,Bt=Pt||St<Wn;if(!Pt&&Xe<Gt&&(dt=Gt,Gt=Xe,Xe=dt),Bt?Pt?Gt+Xe>0^Ae[1]<(Ui(Ae[0]-Je)<Wn?Gt:Xe):Gt<=Ae[1]&&Ae[1]<=Xe:St>bn^(Je<=Ae[0]&&Ae[0]<=vt)){var yn=cv(Pe,(-De+wt)/Ue);return m2(yn,fe),[Ae,QS(yn)]}}}function w(E,C){var T=r?e:bn-e,R=0;return E<-T?R|=1:E>T&&(R|=2),C<-T?R|=4:C>T&&(R|=8),R}return gD(h,u,l,r?[0,-e]:[-bn,e-bn])}function yD(e){return function(t){var n=new nE;for(var r in e)n[r]=e[r];return n.stream=t,n}}function nE(){}nE.prototype={constructor:nE,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _D(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],l=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),eX(n,e.stream(ok));var h=ok.result(),u=Math.min(r/(h[1][0]-h[0][0]),i/(h[1][1]-h[0][1])),y=+t[0][0]+(r-u*(h[1][0]+h[0][0]))/2,w=+t[0][1]+(i-u*(h[1][1]+h[0][1]))/2;return l!=null&&e.clipExtent(l),e.scale(u*150).translate([y,w])}function mX(e,t,n){return _D(e,[[0,0],t],n)}var ak=16,gX=Sr(30*ya);function lk(e,t){return+t?_X(e,t):yX(e)}function yX(e){return yD({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function _X(e,t){function n(r,i,l,h,u,y,w,E,C,T,R,O,B,Y){var $=w-r,U=E-i,G=$*$+U*U;if(G>4*t&&B--){var re=h+T,he=u+R,_e=y+O,fe=lm(re*re+he*he+_e*_e),ye=$p(_e/=fe),Pe=Ui(Ui(_e)-1)<Wn||Ui(l-C)<Wn?(l+C)/2:Hf(he,re),De=e(Pe,ye),Ue=De[0],Ye=De[1],wt=Ue-r,Ae=Ye-i,Je=U*wt-$*Ae;(Je*Je/G>t||Ui(($*wt+U*Ae)/G-.5)>.3||h*T+u*R+y*O<gX)&&(n(r,i,l,h,u,y,Ue,Ye,Pe,re/=fe,he/=fe,_e,B,Y),Y.point(Ue,Ye),n(Ue,Ye,Pe,re,he,_e,w,E,C,T,R,O,B,Y))}}return function(r){var i,l,h,u,y,w,E,C,T,R,O,B,Y={point:$,lineStart:U,lineEnd:re,polygonStart:function(){r.polygonStart(),Y.lineStart=he},polygonEnd:function(){r.polygonEnd(),Y.lineStart=U}};function $(ye,Pe){ye=e(ye,Pe),r.point(ye[0],ye[1])}function U(){C=NaN,Y.point=G,r.lineStart()}function G(ye,Pe){var De=Zf([ye,Pe]),Ue=e(ye,Pe);n(C,T,E,R,O,B,C=Ue[0],T=Ue[1],E=ye,R=De[0],O=De[1],B=De[2],ak,r),r.point(C,T)}function re(){Y.point=$,r.lineEnd()}function he(){U(),Y.point=_e,Y.lineEnd=fe}function _e(ye,Pe){G(i=ye,Pe),l=C,h=T,u=R,y=O,w=B,Y.point=G}function fe(){n(C,T,E,R,O,B,l,h,i,u,y,w,ak,r),Y.lineEnd=re,re()}return Y}}var vX=yD({point:function(e,t){this.stream.point(e*ya,t*ya)}});function xX(e){return bX(function(){return e})()}function bX(e){var t,n=150,r=480,i=250,l,h,u=0,y=0,w=0,E=0,C=0,T,R,O=null,B=sk,Y=null,$,U,G,re=ik,he=.5,_e=lk(Ue,he),fe,ye;function Pe(Ae){return Ae=R(Ae[0]*ya,Ae[1]*ya),[Ae[0]*n+l,h-Ae[1]*n]}function De(Ae){return Ae=R.invert((Ae[0]-l)/n,(h-Ae[1])/n),Ae&&[Ae[0]*Oc,Ae[1]*Oc]}function Ue(Ae,Je){return Ae=t(Ae,Je),[Ae[0]*n+l,h-Ae[1]*n]}Pe.stream=function(Ae){return fe&&ye===Ae?fe:fe=vX(B(T,_e(re(ye=Ae))))},Pe.clipAngle=function(Ae){return arguments.length?(B=+Ae?fX(O=Ae*ya,6*ya):(O=null,sk),wt()):O*Oc},Pe.clipExtent=function(Ae){return arguments.length?(re=Ae==null?(Y=$=U=G=null,ik):sX(Y=+Ae[0][0],$=+Ae[0][1],U=+Ae[1][0],G=+Ae[1][1]),wt()):Y==null?null:[[Y,$],[U,G]]},Pe.scale=function(Ae){return arguments.length?(n=+Ae,Ye()):n},Pe.translate=function(Ae){return arguments.length?(r=+Ae[0],i=+Ae[1],Ye()):[r,i]},Pe.center=function(Ae){return arguments.length?(u=Ae[0]%360*ya,y=Ae[1]%360*ya,Ye()):[u*Oc,y*Oc]},Pe.rotate=function(Ae){return arguments.length?(w=Ae[0]%360*ya,E=Ae[1]%360*ya,C=Ae.length>2?Ae[2]%360*ya:0,Ye()):[w*Oc,E*Oc,C*Oc]},Pe.precision=function(Ae){return arguments.length?(_e=lk(Ue,he=Ae*Ae),wt()):lm(he)},Pe.fitExtent=function(Ae,Je){return _D(Pe,Ae,Je)},Pe.fitSize=function(Ae,Je){return mX(Pe,Ae,Je)};function Ye(){R=hD(T=tX(w,E,C),t);var Ae=t(u,y);return l=r-Ae[0]*n,h=i+Ae[1]*n,wt()}function wt(){return fe=ye=null,Pe}return function(){return t=e.apply(this,arguments),Pe.invert=t.invert&&De,Ye()}}function vD(e){return function(t,n){var r=Sr(t),i=Sr(n),l=e(r*i);return[l*i*Er(t),l*Er(n)]}}function xD(e){return function(t,n){var r=lm(t*t+n*n),i=e(r),l=Er(i),h=Sr(i);return[Hf(t*l,r*h),$p(r&&n*l/r)]}}var wX=vD(function(e){return lm(2/(1+e))});wX.invert=xD(function(e){return 2*$p(e/2)});var bD=vD(function(e){return(e=cD(e))&&e/Er(e)});bD.invert=xD(function(e){return e});function SX(){return xX(bD).scale(79.4188).clipAngle(180-.001)}function uk(e,t){return[e,t]}uk.invert=uk;function EX(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(i<=0)throw new Error("steps must be greater than 0");var l=[];switch(e.type){case"GeometryCollection":return O4(e,function(h){var u=zv(h,t,r,i);u&&l.push(u)}),HS(l);case"FeatureCollection":return UA(e,function(h){var u=zv(h,t,r,i);u&&UA(u,function(y){y&&l.push(y)})}),HS(l)}return zv(e,t,r,i)}function zv(e,t,n,r){var i=e.properties||{},l=e.type==="Feature"?e.geometry:e;if(l.type==="GeometryCollection"){var h=[];return O4(e,function(B){var Y=zv(B,t,n,r);Y&&h.push(Y)}),HS(h)}var u=CX(l),y={type:l.type,coordinates:SD(l.coordinates,u)},w=new cI,E=w.read(y),C=pZ(dZ(t,n),"meters"),T=pi.bufferOp(E,C,r),R=new W4;if(T=R.write(T),!wD(T.coordinates)){var O={type:T.type,coordinates:ED(T.coordinates,u)};return $1(O,i)}}function wD(e){return Array.isArray(e[0])?wD(e[0]):isNaN(e[0])}function SD(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return SD(n,t)})}function ED(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return ED(n,t)})}function CX(e){var t=DZ(e).geometry.coordinates,n=[-t[0],-t[1]];return SX().rotate(n).scale(Wo)}function IX(e,t){var n=Ix(e),r=Ix(t),i=e.properties||{},l=T4.difference(n.coordinates,r.coordinates);return l.length===0?null:l.length===1?L4(l[0],i):M4(l,i)}function ck(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function hk(e,t){const n=IX({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},e);if(!n)return;n.properties={isMask:"y"};const r=EX(e,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)ck(i);else for(const i of r.geometry.coordinates)for(const l of i)ck(l);t({type:"FeatureCollection",features:[r,n]})}let pk={type:"FeatureCollection",features:[]};function TX(e,t,n=!0,r=!0,i={},l={},h={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let u,y=[],w,E;function C(){(h!=null&&h.fill||h!=null&&h.line)&&e.addSource("full-geom",{type:"geojson",data:pk}),h!=null&&h.fill&&e.addLayer({...h==null?void 0:h.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),h!=null&&h.line&&e.addLayer({...h==null?void 0:h.line,id:"full-geom-line",type:"line",source:"full-geom"})}e.loaded()?C():e.once("load",()=>{C()});const T=O=>{u==null||u({type:"mapClick",coordinates:[O.lngLat.lng,O.lngLat.lat]})};function R(O=!1){if(!t)throw new Error;const B=document.createElement("div");return O&&B.classList.add("marker-interactive"),new RZ({props:{displayIn:"maplibre"},target:B}),new t.Marker({element:B,offset:[1,-13]})}return{setEventHandler(O){O?(u=O,e.on("click",T)):(u=void 0,e.off("click",T))},flyTo(O,B){e.flyTo({center:O,zoom:B,...i})},fitBounds(O,B,Y){e.fitBounds([[O[0],O[1]],[O[2],O[3]]],{padding:B,maxZoom:Y,...l})},indicateReverse(O){e.getCanvasContainer().style.cursor=O?"crosshair":""},setReverseMarker(O){!t||!n||(E?O?E.setLngLat(O):(E.remove(),E=void 0):O&&(E=(typeof n=="object"?new t.Marker(n):R()).setLngLat(O).addTo(e),E.getElement().classList.add("marker-reverse")))},setMarkers(O,B){if(!n)return;function Y($){var U;(U=e.getSource("full-geom"))==null||U.setData($)}for(const $ of y)$.remove();if(y.length=0,Y(pk),!!t){if(B){let $=!1;if(B.geometry.type==="GeometryCollection"){const U=B.geometry.geometries.filter(G=>G.type==="Polygon"||G.type==="MultiPolygon");if(U.length>0){let G=U.pop();for(const re of U)G=fZ(G,re);hk({...B,geometry:G},Y),$=!0}else{const G=B.geometry.geometries.filter(re=>re.type==="LineString"||re.type==="MultiLineString");G.length>0&&(Y({...B,geometry:{type:"GeometryCollection",geometries:G}}),$=!0)}}if(!$){if(B.geometry.type==="Polygon"||B.geometry.type==="MultiPolygon")hk(B,Y);else if(B.geometry.type==="LineString"||B.geometry.type==="MultiLineString"){Y(B);return}}n&&y.push((typeof n=="object"?new t.Marker(n):R()).setLngLat(B.center).addTo(e))}if(r)for(const $ of O??[]){if($===B)continue;const U=(typeof r=="object"?new t.Marker(r):R(!0)).setLngLat($.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText($.place_type[0]==="reverse"?$.place_name:$.place_name.replace(/,.*/,""))).addTo(e),G=U.getElement();G.addEventListener("click",re=>{re.stopPropagation(),u==null||u({type:"markerClick",id:$.id})}),G.addEventListener("mouseenter",()=>{u==null||u({type:"markerMouseEnter",id:$.id}),U.togglePopup()}),G.addEventListener("mouseleave",()=>{u==null||u({type:"markerMouseLeave",id:$.id}),U.togglePopup()}),y.push(U)}}},setSelectedMarker(O){w&&w.getElement().classList.toggle("marker-selected",!1),w=O>-1?y[O]:void 0,w==null||w.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const O=e.getCenter();return[e.getZoom(),O.lng,O.lat]}}}const PX="gOLtVSqQbN00o8HwJkTm",LX=()=>{const e=be.useRef(null),t=be.useRef(null),[n]=be.useState(139.753),[r]=be.useState(35.6844),[i]=be.useState(14),[l]=be.useState(PX),[h,u]=be.useState();return be.useEffect(()=>{t.current||(t.current=new c2.Map({container:e.current,style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${l}`,center:[n,r],zoom:i}),t.current.addControl(new c2.NavigationControl,"top-right"),u(TX(t.current,c2)))},[l,n,r,i]),j.jsxs("div",{className:"map-wrap",children:[j.jsx("div",{className:"geocoding",children:j.jsx(jH,{apiKey:l,mapController:h})}),j.jsx("div",{ref:e,className:"map"})]})},MX="/assets/title-BKKBfA_t.jpg",AX=()=>{const[e,t,n]=JE();return j.jsx(j.Fragment,{children:j.jsx("div",{children:j.jsxs("div",{className:"-z-20 flex-col flex justify-center items-center px-16 bg-white max-md:px-5",children:[j.jsxs("div",{className:"flex flex-row justify-center items-center",children:[j.jsx("div",{className:"w-64",children:j.jsx("img",{src:MX,alt:""})}),j.jsxs("div",{className:"text-center",children:[j.jsx("p",{className:"text-3xl title",children:"Best Venues For Events"}),j.jsx("p",{className:"text-xl text-center title mt-4",children:"Explore event spaces at these outstanding venues this month"})]})]}),n?j.jsx(QE,{}):j.jsx("div",{className:"flex mt-10w-full max-md:text-4xl",children:j.jsx("div",{className:"flex gap-5 lg:flex-row items-center justify-center sm:flex-col md:flex-row flex-wrap overflow-hidden relative px-1.5 pt-10 w-full min-h-[464px] max-w-full",children:e.map(r=>j.jsxs("li",{className:"border shadow-xl rounded-l cursor-pointer overflow-hidden pb-3 h-[500px] m-2 lg:w-[30%] md:w-[40%] sm:w-[90%] flex flex-row flex-wrap",children:[j.jsxs("div",{className:"w-full h-1/2 relative",children:[j.jsx("img",{src:r.bgImage,alt:r.name,className:"w-full h-full object-cover"}),j.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/1 p-2 backdrop-blur-sm flex items-center",children:j.jsx("div",{className:"flex justify-between items-center px-4 py-2",children:j.jsxs("div",{className:"flex items-center",children:[j.jsx("img",{src:r.image,alt:"",className:"w-6 h-6 mr-2"}),j.jsxs("div",{className:"text-xl max-w-xs",children:[r.address," ",r.country]})]})})})]}),j.jsxs("div",{className:"p-2 h-1/2 bg-white/100 flex justify-center flex-col items-center w-full",children:[j.jsxs("p",{className:"text-xl title tracking-wide pb-2 text-center",children:[r.name,j.jsx("br",{})]}),j.jsx("span",{className:"text-xl line-clamp-4 subtitle text-gray-700 font-extralight pt-2 tracking-wide text-center",children:r.description})]})]},r._id))})})]})})})},kX=()=>{const e=a0(),n=new URLSearchParams(e.search).get("venue"),r=JSON.parse(decodeURIComponent(n));return console.log(r),j.jsx("div",{children:j.jsx("div",{className:"mt-24 w-full h-full flex items-center justify-center",children:j.jsxs("li",{className:"border h-full shadow-xl lg:w-1/2  rounded-l cursor-pointer overflow-hidden pb-3 flex flex-row flex-wrap",children:[j.jsxs("div",{className:"w-full h-full relative",children:[j.jsx("img",{src:r.bgImage,alt:r.name,className:"w-full h-full object-cover"}),j.jsx("div",{className:"absolute bottom-0  left-0 w-full bg-white/1 p-2 backdrop-blur-sm flex items-center",children:j.jsx("div",{className:"flex justify-between items-center px-4 py-2",children:j.jsxs("div",{className:"flex items-center",children:[j.jsx("img",{src:r.image,alt:"",className:"w-6 h-6 mr-2"}),j.jsxs("div",{className:"text-xl max-w-xs",children:[r.address," ",r.country]})]})})})]}),j.jsxs("div",{className:"p-2 h-[250px] bg-white/100 flex justify-center flex-col gap-4 items-center w-full",children:[j.jsxs("p",{className:"text-xl title tracking-wide pb-2 text-center",children:[r.name,j.jsx("br",{})]}),j.jsx("span",{className:"text-xl subtitle text-gray-700 font-extralight pt-2 tracking-wide text-center",children:r.description}),j.jsx("span",{children:j.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 title tracking wide mt-16 hover:text-blue-700",children:"link to website"})})]})]},r._id)})})},NX=()=>j.jsx(j.Fragment,{children:j.jsx("main",{className:"grid min-h-full place-items-center bg-white px-6 py-24 sm:py-32 lg:px-8",children:j.jsxs("div",{className:"text-center",children:[j.jsx("p",{className:"text-2xl font-semibold text-red-500",children:"404"}),j.jsx("h1",{className:"mt-4 text-3xl font-bold tracking-tight text-gray-900 sm:text-5xl",children:"Page not found"}),j.jsx("p",{className:"mt-6 text-base leading-7 text-gray-600",children:"Sorry, we couldn’t find the page you’re looking for."}),j.jsxs("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:[j.jsx("a",{href:"/",className:`w-1/2 text-center justify-center p-3 text-xl title rounded-xl whitespace-nowrap \r
                   bg-button-color transition ease-in-out delay-150 focus:bg-blue-300 hover:-translate-y-1 hover:scale-110 hover:bg-button-color duration-300 bg-opacity-60 max-md:px-5`,children:j.jsx("button",{children:"Go back home"})}),j.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Contact support ",j.jsx("span",{"aria-hidden":"true",children:"→"})]})]})]})})}),RX=()=>j.jsxs(j.Fragment,{children:[j.jsx(sB,{}),j.jsx(h8,{children:j.jsxs(i8,{children:[j.jsx(Bl,{path:"/",element:j.jsx(vW,{})}),j.jsx(Bl,{path:"/services",element:j.jsx(PW,{})}),j.jsx(Bl,{path:"/login",element:j.jsx(LW,{})}),j.jsx(Bl,{path:"/signup",element:j.jsx(MW,{})}),j.jsx(Bl,{path:"/map",element:j.jsx(LX,{})}),j.jsx(Bl,{path:"/displayallvenues",element:j.jsx(AX,{})}),j.jsx(Bl,{path:"/loader",element:j.jsx(QE,{})}),j.jsx(Bl,{path:"/venuecard",element:j.jsx(kX,{})}),j.jsx(Bl,{path:"/*",element:j.jsx(NX,{})})]})})]});W6.createRoot(document.getElementById("root")).render(j.jsx(Du.StrictMode,{children:j.jsx(oB,{children:j.jsx(RX,{})})}));
